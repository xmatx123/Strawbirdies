const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/nativePlayer-UxPoYLUK-CbOi2LTL.js","assets/basePlayer-BtsXcGTi-SZiu-wWL.js","assets/browserPlayer-BjnaMhpY-BTmicfUR.js","assets/shakaPlayer-CgODW4gy-CQbKtWMU.js"])))=>i.map(i=>d[i]);
const tC="modulepreload",nC=function(w){return"/"+w},Aw={},bp=function(v,S,U){let P=Promise.resolve();if(S&&S.length>0){document.getElementsByTagName("link");const Q=document.querySelector("meta[property=csp-nonce]"),f=Q?.nonce||Q?.getAttribute("nonce");P=Promise.allSettled(S.map(We=>{if(We=nC(We),We in Aw)return;Aw[We]=!0;const Se=We.endsWith(".css"),ct=Se?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${We}"]${ct}`))return;const ke=document.createElement("link");if(ke.rel=Se?"stylesheet":tC,Se||(ke.as="script"),ke.crossOrigin="",ke.href=We,f&&ke.setAttribute("nonce",f),document.head.appendChild(ke),Se)return new Promise((ie,tn)=>{ke.addEventListener("load",ie),ke.addEventListener("error",()=>tn(new Error(`Unable to preload CSS for ${We}`)))})}))}function te(Q){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=Q,window.dispatchEvent(f),!f.defaultPrevented)throw Q}return P.then(Q=>{for(const f of Q||[])f.status==="rejected"&&te(f.reason);return v().catch(te)})};let Ec=Object.freeze({apiUrl:"https://api.tidal.com/v1",audioAdaptiveBitrateStreaming:!0,desiredVolumeLevel:1,gatherEvents:!0,loudnessNormalizationMode:"ALBUM",outputDevicesEnabled:!1,streamingWifiAudioQuality:"LOW"});function Vs(w){return Ec[w]}function Cc(w){return Ec=Object.freeze({...Ec,...w}),Object.keys(w).forEach(v=>{const S=v;iC.dispatchEvent(new CustomEvent(S,{detail:w[S]}))}),Ec}const iC=new EventTarget;class rC{#e;#n=!1;#i;#t;constructor(v){this.#t=new URL(v),this.synchronize()}now(v=Date.now()){return!this.#i||!this.#e?(console.warn("TrueTime is not yet synchronized"),v):this.#i+(v-this.#e)}async synchronize(){if(!(this.#e&&Math.abs(Date.now()-this.#e)<36e5||this.#n)){this.#n=!0;try{const v=await fetch(this.#t);v.ok&&v.headers.has("date")&&(this.#i=new Date(v.headers.get("date")).getTime(),this.#e=Date.now())}catch(v){console.error(v)}this.#n=!1}}timestamp(v,S){let U;if(S){if(U=performance.getEntriesByName(v).find(P=>"detail"in P&&P.detail===S),!U)throw new ReferenceError(`There is no performance entry named "${v}" with detail "${S}"`)}else U=performance.getEntriesByName(v).pop();return U?U.startTime:void 0}}const $n=new rC("https://api.tidal.com/v1/ping"),aC=(w,v,S)=>{for(const U of w){const P=U.addedNodes[0];U.type==="childList"&&P.id===v&&S()}};function oC(){const w=document.getElementById("tidal-player-root");if(!w)return Promise.reject("No player root");if("video-one"in w.children)return Promise.resolve();const v=[];return"video-one"in w.children||v.push(new Promise(S=>{new MutationObserver(U=>aC(U,"video-one",S)).observe(w,{childList:!0})})),Promise.all(v)}const aa=document.createElement("video"),sC=w=>{w.setAttribute("crossorigin","anonymous"),w.setAttribute("playsinline","playsinline")};sC(aa);aa.id="video-one";const Mc="tidal-player-root";function uC(){let w=document.getElementById(Mc);if(!w){const v=document.createElement("template");v.id=Mc,document.body.appendChild(v),w=document.getElementById(Mc)}return lC()}function lC(){const w=document.getElementById(Mc);return w&&(aa.id in w.children||w.appendChild(aa)),oC()}function cC(){return new Promise(w=>document.addEventListener("click",()=>{aa.readyState===HTMLMediaElement.HAVE_NOTHING&&!aa.src&&aa.load(),w()},{once:!0}))}function dC(w){return new Promise(v=>setTimeout(()=>v(),w))}function fC(w,v){return new Promise(S=>{w.addEventListener(v,U=>S(U),!1)})}class hC extends EventTarget{#e;hasEventSender(){return!!this.#e}set eventSender(v){this.#e=v}get eventSender(){return this.#e}}class pC extends EventTarget{#e;async dispatchAuthorized(){const v=await this.#e.getCredentials();v?.token?this.dispatchEvent(new CustomEvent("authorized",{detail:{credentials:v}})):this.dispatchEvent(new CustomEvent("unauthenticated",{detail:{credentials:v}}))}set credentialsProvider(v){this.#e=v,this.dispatchAuthorized().catch(console.error),this.#e.bus(S=>{S.detail.type==="CredentialsUpdatedMessage"?this.dispatchAuthorized().catch(console.error):console.warn("Unhandled event from credentials provider: ",S)})}get credentialsProvider(){return this.#e}}class co extends Error{errorCode=null;errorId=null;referenceId;constructor(v,S,U){super(`${v}: ${S} (${U})`),this.errorId=v,this.errorCode=S,this.referenceId=U}toJSON(){return{errorCode:this.errorCode,errorId:this.errorId,referenceId:this.referenceId}}toString(){return JSON.stringify(this.toJSON())}}async function fo(){if(Ii.credentialsProvider){const w=await Ii.credentialsProvider.getCredentials();return!!(w.token&&w.userId)}return await fC(Ii,"authorized"),fo()}const Ii=new pC,wp=new hC;async function gC(){const w=await fo(),v=async()=>{const{Pushkin:S}=await Promise.resolve().then(()=>DP);return S.refresh()};if(w){Cc({gatherEvents:!0});try{await Promise.all([v()])}catch(S){console.error(S)}}else Cc({gatherEvents:!1})}function mC(){Cc({gatherEvents:!0})}Ii.addEventListener("authorized",()=>{gC().then().catch(console.error)});Ii.addEventListener("unauthenticated",()=>{mC()});async function kw(){return Ii.credentialsProvider?(await Ii.credentialsProvider.getCredentials()).token??null:null}class vC extends EventTarget{dispatchError(v){this.dispatchEvent(new CustomEvent("error",{detail:v.toJSON()}))}}const tr=new vC,lo={BTS:"application/vnd.tidal.bts",DASH:"application/dash+xml",EMU:"application/vnd.tidal.emu",HLS:"application/vnd.apple.mpegurl"};class yC{#e=new Map;#n=new Map;#i=new Map;#t=new Map;clone(v,S){const U=this.getMediaProductTransition(v),P=this.getStreamInfo(v),te=this.getPlaybackInfo(v);if(!U||!P||!te)throw new Error(`Cannot clone ${v}. Missing mediaProductTransition or streamInfo.`);this.saveMediaProductTransition(S,{...U,playbackContext:{...U.playbackContext,playbackSessionId:S}}),this.saveStreamInfo(S,{...P,streamingSessionId:S}),this.savePlaybackInfo(S,{...te,streamingSessionId:S})}deleteMediaProductTransition(v){this.#e.delete(v)}deleteSession(v){this.deleteMediaProductTransition(v),this.#n.delete(v),this.#i.delete(v),this.deleteStreamInfo(v)}deleteStartedStreamInfo(v){this.#i.delete(v)}deleteStreamInfo(v){this.#t.delete(v)}getMediaProductTransition(v){return v?this.#e.get(v):void 0}getPlaybackInfo(v){return v?this.#n.get(v):void 0}getStreamInfo(v){return v?this.#t.get(v):void 0}hasMediaProductTransition(v){return this.#e.has(v)}hasPlaybackInfo(v){return this.#n.has(v)}hasStartedStreamInfo(v){return this.#i.has(v)}hasStreamInfo(v){return this.#t.has(v)}overwriteDuration(v,S){const U=this.#e.get(v);U&&(U.playbackContext={...U.playbackContext,actualDuration:S},this.saveMediaProductTransition(v,U))}saveMediaProductTransition(v,S){this.#e.set(v,S)}savePlaybackInfo(v,S){this.#n.set(v,S)}saveStreamInfo(v,S){this.#t.set(v,S)}setStartedStreamInfo(v){return this.#i.set(v,!0)}}const Nw=new yC;class bC{activePlayer;preloadPlayer;get preloadedMediaProduct(){return Nw.getMediaProductTransition(this.preloadedStreamingSessionId)?.mediaProduct??void 0}get preloadedStreamingSessionId(){return this.preloadPlayer?.preloadedStreamingSessionId??void 0}}const In=new bC;let wC;const SC=[{itemTypes:["track","video"],player:"shaka",qualities:["HIGH","LOSSLESS","LOW","HI_RES_LOSSLESS"]}];let Hs=SC;const si={browser:void 0,native:void 0,shaka:void 0};function TC(w){Hs=w}async function xC(){await Promise.all(Hs.map(w=>{const v=si[w.player];return v?v.reset():Promise.resolve()})),In.activePlayer=void 0,In.preloadPlayer=void 0}function AC(w){w.name!=="nativePlayer"&&si.native&&si.native.abandon(),In.activePlayer=w}function kC(){tr.removeEventListener("ended",wC)}async function IC(){const{default:w}=await bp(async()=>{const{default:v}=await import("./nativePlayer-UxPoYLUK-CbOi2LTL.js");return{default:v}},__vite__mapDeps([0,1]));return si.native||(si.native=new w),si.native}async function EC(){const{default:w}=await bp(async()=>{const{default:v}=await import("./browserPlayer-BjnaMhpY-BTmicfUR.js");return{default:v}},__vite__mapDeps([2,1]));return si.browser||(si.browser=new w),si.browser}async function MC(){const{default:w}=await bp(async()=>{const{default:v}=await import("./shakaPlayer-CgODW4gy-CQbKtWMU.js");return{default:v}},__vite__mapDeps([3,1]));return si.shaka||(si.shaka=new w),si.shaka}function CC(w,v){const S=Hs.filter(U=>U.itemTypes.includes(w)).filter(U=>w==="track"&&U.qualities&&v?U.qualities.includes(v):!0);return S.length===0?"shaka":S[0].player}async function PC(w,v,S){const U=Hs.filter(te=>te.itemTypes.includes(w)).filter(te=>w==="track"&&te.qualities&&v?te.qualities.includes(v):!0);U.length===0&&console.error(`No player found to handle audio quality "${String(v)}" for product type "${w}" in player config: `,Hs);let{player:P}=U[0];switch((S===lo.DASH||S===lo.HLS)&&P==="native"&&(P="shaka"),P){case"browser":return EC();case"native":return IC();case"shaka":return MC();default:throw new Error("No player found.")}}class RC{#e;constructor(){this.#e=new Map}async#n(v,S){const U=new TextEncoder().encode(`${v}-${S}`),P=await crypto.subtle.digest("SHA-1",U);return Array.from(new Uint8Array(P)).map(te=>te.toString(16).padStart(2,"0")).join("")}async delete({name:v,streamingSessionId:S}){const U=await this.#n(S,v);this.#e.delete(U)}async get({name:v,streamingSessionId:S}){const U=await this.#n(S,v);return this.#e.get(U)}async put(v){const S=await this.#n(v.streamingSessionId,v.name);this.#e.set(S,v)}}const yp=new RC;async function ho(w,v){return Vs("gatherEvents")?async S=>{try{const U=await yp.get({name:w,streamingSessionId:S.streamingSessionId}),P=Object.assign({},v,U?U.payload:{},S);for(const te of Object.keys(S)){const Q=te;Array.isArray(S[Q])&&(P[Q]=[...v[Q]||[],...U&&U.payload[Q]||[],...S[Q]||[]])}return await yp.put({name:w,payload:P,streamingSessionId:S.streamingSessionId}),{name:w,payload:P,streamingSessionId:S.streamingSessionId}}catch(U){console.error(U)}}:S=>Promise.resolve(void 0)}const DC={endReason:"COMPLETE",endTimestamp:0,errorCode:null,errorMessage:null,startTimestamp:0,streamingSessionId:""},LC=await ho("drm_license_fetch",DC);function BP(w){return LC(w)}const NC={endReason:"COMPLETE",endTimestamp:0,errorCode:null,errorMessage:null,startTimestamp:0,streamingSessionId:""},OC=await ho("playback_info_fetch",NC);function vp(w){return OC(w)}function FP(w){switch(w){case"bluetooth":return"BLUETOOTH";case"builtIn":return"BUILT_IN";case"displayPort":return"DISPLAY_PORT";case"hdmi":return"HDMI";case"systemDefault":return"SYSTEM_DEFAULT";case"usb":return"USB";default:return}}const _C={actualAssetPresentation:"FULL",actualAudioMode:"STEREO",actualProductId:null,actualQuality:"LOSSLESS",actualStartTimestamp:0,actualStreamType:"ON_DEMAND",adaptations:[],cdm:"WIDEVINE",cdmVersion:null,endReason:"COMPLETE",endTimestamp:0,errorCode:null,errorMessage:null,hasAds:!1,idealStartTimestamp:0,outputDevice:null,productType:"TRACK",stalls:[],streamingSessionId:""},jC=await ho("playback_statistics",_C);function Iw(w){return jC(w)}const UC={streamingSessionId:"",timestamp:0},BC=await ho("streaming_session_end",UC);function FC(w){return BC(w)}const VC={AmazonBot:"amazonbot","Amazon Silk":"amazon_silk","Android Browser":"android",BaiduSpider:"baiduspider",Bada:"bada",BingCrawler:"bingcrawler",BlackBerry:"blackberry","ChatGPT-User":"chatgpt_user",Chrome:"chrome",ClaudeBot:"claudebot",Chromium:"chromium",Diffbot:"diffbot",DuckDuckBot:"duckduckbot",Electron:"electron",Epiphany:"epiphany",FacebookExternalHit:"facebookexternalhit",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot",GPTBot:"gptbot","Internet Explorer":"ie",InternetArchiveCrawler:"internetarchivecrawler","K-Meleon":"k_meleon",LibreWolf:"librewolf",Maxthon:"maxthon","Meta-ExternalAds":"meta_externalads","Meta-ExternalAgent":"meta_externalagent","Meta-ExternalFetcher":"meta_externalfetcher","Meta-WebIndexer":"meta_webindexer","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver","OAI-SearchBot":"oai_searchbot",Omgilibot:"omgilibot",Opera:"opera","Opera Coast":"opera_coast","Pale Moon":"pale_moon",PerplexityBot:"perplexitybot","Perplexity-User":"perplexity_user",PhantomJS:"phantomjs",PingdomBot:"pingdombot",Puffin:"puffin",QQ:"qq",QQLite:"qqlite",QupZilla:"qupzilla",Roku:"roku",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir","Sogou Browser":"sogou",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat",YahooSlurp:"yahooslurp","Yandex Browser":"yandex",YandexBot:"yandexbot",YouBot:"youbot"},Ow={amazonbot:"AmazonBot",amazon_silk:"Amazon Silk",android:"Android Browser",baiduspider:"BaiduSpider",bada:"Bada",bingcrawler:"BingCrawler",blackberry:"BlackBerry",chatgpt_user:"ChatGPT-User",chrome:"Chrome",claudebot:"ClaudeBot",chromium:"Chromium",diffbot:"Diffbot",duckduckbot:"DuckDuckBot",edge:"Microsoft Edge",electron:"Electron",epiphany:"Epiphany",facebookexternalhit:"FacebookExternalHit",firefox:"Firefox",focus:"Focus",generic:"Generic",google_search:"Google Search",googlebot:"Googlebot",gptbot:"GPTBot",ie:"Internet Explorer",internetarchivecrawler:"InternetArchiveCrawler",k_meleon:"K-Meleon",librewolf:"LibreWolf",maxthon:"Maxthon",meta_externalads:"Meta-ExternalAds",meta_externalagent:"Meta-ExternalAgent",meta_externalfetcher:"Meta-ExternalFetcher",meta_webindexer:"Meta-WebIndexer",mz:"MZ Browser",naver:"NAVER Whale Browser",oai_searchbot:"OAI-SearchBot",omgilibot:"Omgilibot",opera:"Opera",opera_coast:"Opera Coast",pale_moon:"Pale Moon",perplexitybot:"PerplexityBot",perplexity_user:"Perplexity-User",phantomjs:"PhantomJS",pingdombot:"PingdomBot",puffin:"Puffin",qq:"QQ Browser",qqlite:"QQ Browser Lite",qupzilla:"QupZilla",roku:"Roku",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",sogou:"Sogou Browser",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yahooslurp:"YahooSlurp",yandex:"Yandex Browser",yandexbot:"YandexBot",youbot:"YouBot"},Oe={bot:"bot",desktop:"desktop",mobile:"mobile",tablet:"tablet",tv:"tv"},mn={Android:"Android",Bada:"Bada",BlackBerry:"BlackBerry",ChromeOS:"Chrome OS",HarmonyOS:"HarmonyOS",iOS:"iOS",Linux:"Linux",MacOS:"macOS",PlayStation4:"PlayStation 4",Roku:"Roku",Tizen:"Tizen",WebOS:"WebOS",Windows:"Windows",WindowsPhone:"Windows Phone"},Mr={Blink:"Blink",EdgeHTML:"EdgeHTML",Gecko:"Gecko",Presto:"Presto",Trident:"Trident",WebKit:"WebKit"};class q{static getFirstMatch(v,S){const U=S.match(v);return U&&U.length>0&&U[1]||""}static getSecondMatch(v,S){const U=S.match(v);return U&&U.length>1&&U[2]||""}static matchAndReturnConst(v,S,U){if(v.test(S))return U}static getWindowsVersionName(v){switch(v){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(v){const S=v.split(".").splice(0,2).map(te=>parseInt(te,10)||0);S.push(0);const U=S[0],P=S[1];if(U===10)switch(P){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}switch(U){case 11:return"Big Sur";case 12:return"Monterey";case 13:return"Ventura";case 14:return"Sonoma";case 15:return"Sequoia";default:return}}static getAndroidVersionName(v){const S=v.split(".").splice(0,2).map(U=>parseInt(U,10)||0);if(S.push(0),!(S[0]===1&&S[1]<5)){if(S[0]===1&&S[1]<6)return"Cupcake";if(S[0]===1&&S[1]>=6)return"Donut";if(S[0]===2&&S[1]<2)return"Eclair";if(S[0]===2&&S[1]===2)return"Froyo";if(S[0]===2&&S[1]>2)return"Gingerbread";if(S[0]===3)return"Honeycomb";if(S[0]===4&&S[1]<1)return"Ice Cream Sandwich";if(S[0]===4&&S[1]<4)return"Jelly Bean";if(S[0]===4&&S[1]>=4)return"KitKat";if(S[0]===5)return"Lollipop";if(S[0]===6)return"Marshmallow";if(S[0]===7)return"Nougat";if(S[0]===8)return"Oreo";if(S[0]===9)return"Pie"}}static getVersionPrecision(v){return v.split(".").length}static compareVersions(v,S,U=!1){const P=q.getVersionPrecision(v),te=q.getVersionPrecision(S);let Q=Math.max(P,te),f=0;const We=q.map([v,S],Se=>{const ct=Q-q.getVersionPrecision(Se),ke=Se+new Array(ct+1).join(".0");return q.map(ke.split("."),ie=>new Array(20-ie.length).join("0")+ie).reverse()});for(U&&(f=Q-Math.min(P,te)),Q-=1;Q>=f;){if(We[0][Q]>We[1][Q])return 1;if(We[0][Q]===We[1][Q]){if(Q===f)return 0;Q-=1}else if(We[0][Q]<We[1][Q])return-1}}static map(v,S){const U=[];let P;if(Array.prototype.map)return Array.prototype.map.call(v,S);for(P=0;P<v.length;P+=1)U.push(S(v[P]));return U}static find(v,S){let U,P;if(Array.prototype.find)return Array.prototype.find.call(v,S);for(U=0,P=v.length;U<P;U+=1){const te=v[U];if(S(te,U))return te}}static assign(v,...S){const U=v;let P,te;if(Object.assign)return Object.assign(v,...S);for(P=0,te=S.length;P<te;P+=1){const Q=S[P];typeof Q=="object"&&Q!==null&&Object.keys(Q).forEach(f=>{U[f]=Q[f]})}return v}static getBrowserAlias(v){return VC[v]}static getBrowserTypeByAlias(v){return Ow[v]||""}}const Le=/version\/(\d+(\.?_?\d+)+)/i,HC=[{test:[/gptbot/i],describe(w){const v={name:"GPTBot"},S=q.getFirstMatch(/gptbot\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/chatgpt-user/i],describe(w){const v={name:"ChatGPT-User"},S=q.getFirstMatch(/chatgpt-user\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/oai-searchbot/i],describe(w){const v={name:"OAI-SearchBot"},S=q.getFirstMatch(/oai-searchbot\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/claudebot/i,/claude-web/i,/claude-user/i,/claude-searchbot/i],describe(w){const v={name:"ClaudeBot"},S=q.getFirstMatch(/(?:claudebot|claude-web|claude-user|claude-searchbot)\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/omgilibot/i,/webzio-extended/i],describe(w){const v={name:"Omgilibot"},S=q.getFirstMatch(/(?:omgilibot|webzio-extended)\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/diffbot/i],describe(w){const v={name:"Diffbot"},S=q.getFirstMatch(/diffbot\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/perplexitybot/i],describe(w){const v={name:"PerplexityBot"},S=q.getFirstMatch(/perplexitybot\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/perplexity-user/i],describe(w){const v={name:"Perplexity-User"},S=q.getFirstMatch(/perplexity-user\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/youbot/i],describe(w){const v={name:"YouBot"},S=q.getFirstMatch(/youbot\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/meta-webindexer/i],describe(w){const v={name:"Meta-WebIndexer"},S=q.getFirstMatch(/meta-webindexer\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/meta-externalads/i],describe(w){const v={name:"Meta-ExternalAds"},S=q.getFirstMatch(/meta-externalads\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/meta-externalagent/i],describe(w){const v={name:"Meta-ExternalAgent"},S=q.getFirstMatch(/meta-externalagent\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/meta-externalfetcher/i],describe(w){const v={name:"Meta-ExternalFetcher"},S=q.getFirstMatch(/meta-externalfetcher\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/googlebot/i],describe(w){const v={name:"Googlebot"},S=q.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/amazonbot/i],describe(w){const v={name:"AmazonBot"},S=q.getFirstMatch(/amazonbot\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/bingbot/i],describe(w){const v={name:"BingCrawler"},S=q.getFirstMatch(/bingbot\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/baiduspider/i],describe(w){const v={name:"BaiduSpider"},S=q.getFirstMatch(/baiduspider\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/duckduckbot/i],describe(w){const v={name:"DuckDuckBot"},S=q.getFirstMatch(/duckduckbot\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/ia_archiver/i],describe(w){const v={name:"InternetArchiveCrawler"},S=q.getFirstMatch(/ia_archiver\/(\d+(\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/facebookexternalhit/i,/facebookcatalog/i],describe(){return{name:"FacebookExternalHit"}}},{test:[/yahoo!?[\s/]*slurp/i],describe(){return{name:"YahooSlurp"}}},{test:[/yandexbot/i,/yandexmobilebot/i],describe(){return{name:"YandexBot"}}},{test:[/pingdom/i],describe(){return{name:"PingdomBot"}}},{test:[/opera/i],describe(w){const v={name:"Opera"},S=q.getFirstMatch(Le,w)||q.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/opr\/|opios/i],describe(w){const v={name:"Opera"},S=q.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/SamsungBrowser/i],describe(w){const v={name:"Samsung Internet for Android"},S=q.getFirstMatch(Le,w)||q.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/Whale/i],describe(w){const v={name:"NAVER Whale Browser"},S=q.getFirstMatch(Le,w)||q.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/PaleMoon/i],describe(w){const v={name:"Pale Moon"},S=q.getFirstMatch(Le,w)||q.getFirstMatch(/(?:PaleMoon)[\s/](\d+(?:\.\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/MZBrowser/i],describe(w){const v={name:"MZ Browser"},S=q.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/focus/i],describe(w){const v={name:"Focus"},S=q.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/swing/i],describe(w){const v={name:"Swing"},S=q.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/coast/i],describe(w){const v={name:"Opera Coast"},S=q.getFirstMatch(Le,w)||q.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(w){const v={name:"Opera Touch"},S=q.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/yabrowser/i],describe(w){const v={name:"Yandex Browser"},S=q.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/ucbrowser/i],describe(w){const v={name:"UC Browser"},S=q.getFirstMatch(Le,w)||q.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/Maxthon|mxios/i],describe(w){const v={name:"Maxthon"},S=q.getFirstMatch(Le,w)||q.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/epiphany/i],describe(w){const v={name:"Epiphany"},S=q.getFirstMatch(Le,w)||q.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/puffin/i],describe(w){const v={name:"Puffin"},S=q.getFirstMatch(Le,w)||q.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/sleipnir/i],describe(w){const v={name:"Sleipnir"},S=q.getFirstMatch(Le,w)||q.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/k-meleon/i],describe(w){const v={name:"K-Meleon"},S=q.getFirstMatch(Le,w)||q.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/micromessenger/i],describe(w){const v={name:"WeChat"},S=q.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/qqbrowser/i],describe(w){const v={name:/qqbrowserlite/i.test(w)?"QQ Browser Lite":"QQ Browser"},S=q.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/msie|trident/i],describe(w){const v={name:"Internet Explorer"},S=q.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/\sedg\//i],describe(w){const v={name:"Microsoft Edge"},S=q.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/edg([ea]|ios)/i],describe(w){const v={name:"Microsoft Edge"},S=q.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/vivaldi/i],describe(w){const v={name:"Vivaldi"},S=q.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/seamonkey/i],describe(w){const v={name:"SeaMonkey"},S=q.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/sailfish/i],describe(w){const v={name:"Sailfish"},S=q.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,w);return S&&(v.version=S),v}},{test:[/silk/i],describe(w){const v={name:"Amazon Silk"},S=q.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/phantom/i],describe(w){const v={name:"PhantomJS"},S=q.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/slimerjs/i],describe(w){const v={name:"SlimerJS"},S=q.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(w){const v={name:"BlackBerry"},S=q.getFirstMatch(Le,w)||q.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/(web|hpw)[o0]s/i],describe(w){const v={name:"WebOS Browser"},S=q.getFirstMatch(Le,w)||q.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/bada/i],describe(w){const v={name:"Bada"},S=q.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/tizen/i],describe(w){const v={name:"Tizen"},S=q.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/qupzilla/i],describe(w){const v={name:"QupZilla"},S=q.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/librewolf/i],describe(w){const v={name:"LibreWolf"},S=q.getFirstMatch(/(?:librewolf)[\s/](\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/firefox|iceweasel|fxios/i],describe(w){const v={name:"Firefox"},S=q.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/electron/i],describe(w){const v={name:"Electron"},S=q.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/sogoumobilebrowser/i,/metasr/i,/se 2\.[x]/i],describe(w){const v={name:"Sogou Browser"},S=q.getFirstMatch(/(?:sogoumobilebrowser)[\s/](\d+(\.?_?\d+)+)/i,w),U=q.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,w),P=q.getFirstMatch(/se ([\d.]+)x/i,w),te=S||U||P;return te&&(v.version=te),v}},{test:[/MiuiBrowser/i],describe(w){const v={name:"Miui"},S=q.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/chromium/i],describe(w){const v={name:"Chromium"},S=q.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,w)||q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/chrome|crios|crmo/i],describe(w){const v={name:"Chrome"},S=q.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/GSA/i],describe(w){const v={name:"Google Search"},S=q.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test(w){const v=!w.test(/like android/i),S=w.test(/android/i);return v&&S},describe(w){const v={name:"Android Browser"},S=q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/playstation 4/i],describe(w){const v={name:"PlayStation 4"},S=q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/safari|applewebkit/i],describe(w){const v={name:"Safari"},S=q.getFirstMatch(Le,w);return S&&(v.version=S),v}},{test:[/.*/i],describe(w){const v=/^(.*)\/(.*) /,S=/^(.*)\/(.*)[ \t]\((.*)/,U=w.search("\\(")!==-1?S:v;return{name:q.getFirstMatch(U,w),version:q.getSecondMatch(U,w)}}}],GC=[{test:[/Roku\/DVP/],describe(w){const v=q.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,w);return{name:mn.Roku,version:v}}},{test:[/windows phone/i],describe(w){const v=q.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,w);return{name:mn.WindowsPhone,version:v}}},{test:[/windows /i],describe(w){const v=q.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,w),S=q.getWindowsVersionName(v);return{name:mn.Windows,version:v,versionName:S}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(w){const v={name:mn.iOS},S=q.getSecondMatch(/(Version\/)(\d[\d.]+)/,w);return S&&(v.version=S),v}},{test:[/macintosh/i],describe(w){const v=q.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,w).replace(/[_\s]/g,"."),S=q.getMacOSVersionName(v),U={name:mn.MacOS,version:v};return S&&(U.versionName=S),U}},{test:[/(ipod|iphone|ipad)/i],describe(w){const v=q.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,w).replace(/[_\s]/g,".");return{name:mn.iOS,version:v}}},{test:[/OpenHarmony/i],describe(w){const v=q.getFirstMatch(/OpenHarmony\s+(\d+(\.\d+)*)/i,w);return{name:mn.HarmonyOS,version:v}}},{test(w){const v=!w.test(/like android/i),S=w.test(/android/i);return v&&S},describe(w){const v=q.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,w),S=q.getAndroidVersionName(v),U={name:mn.Android,version:v};return S&&(U.versionName=S),U}},{test:[/(web|hpw)[o0]s/i],describe(w){const v=q.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,w),S={name:mn.WebOS};return v&&v.length&&(S.version=v),S}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(w){const v=q.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,w)||q.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,w)||q.getFirstMatch(/\bbb(\d+)/i,w);return{name:mn.BlackBerry,version:v}}},{test:[/bada/i],describe(w){const v=q.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,w);return{name:mn.Bada,version:v}}},{test:[/tizen/i],describe(w){const v=q.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,w);return{name:mn.Tizen,version:v}}},{test:[/linux/i],describe(){return{name:mn.Linux}}},{test:[/CrOS/],describe(){return{name:mn.ChromeOS}}},{test:[/PlayStation 4/],describe(w){const v=q.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,w);return{name:mn.PlayStation4,version:v}}}],qC=[{test:[/googlebot/i],describe(){return{type:Oe.bot,vendor:"Google"}}},{test:[/amazonbot/i],describe(){return{type:Oe.bot,vendor:"Amazon"}}},{test:[/gptbot/i],describe(){return{type:Oe.bot,vendor:"OpenAI"}}},{test:[/chatgpt-user/i],describe(){return{type:Oe.bot,vendor:"OpenAI"}}},{test:[/oai-searchbot/i],describe(){return{type:Oe.bot,vendor:"OpenAI"}}},{test:[/baiduspider/i],describe(){return{type:Oe.bot,vendor:"Baidu"}}},{test:[/bingbot/i],describe(){return{type:Oe.bot,vendor:"Bing"}}},{test:[/duckduckbot/i],describe(){return{type:Oe.bot,vendor:"DuckDuckGo"}}},{test:[/claudebot/i,/claude-web/i,/claude-user/i,/claude-searchbot/i],describe(){return{type:Oe.bot,vendor:"Anthropic"}}},{test:[/omgilibot/i,/webzio-extended/i],describe(){return{type:Oe.bot,vendor:"Webz.io"}}},{test:[/diffbot/i],describe(){return{type:Oe.bot,vendor:"Diffbot"}}},{test:[/perplexitybot/i],describe(){return{type:Oe.bot,vendor:"Perplexity AI"}}},{test:[/perplexity-user/i],describe(){return{type:Oe.bot,vendor:"Perplexity AI"}}},{test:[/youbot/i],describe(){return{type:Oe.bot,vendor:"You.com"}}},{test:[/ia_archiver/i],describe(){return{type:Oe.bot,vendor:"Internet Archive"}}},{test:[/meta-webindexer/i],describe(){return{type:Oe.bot,vendor:"Meta"}}},{test:[/meta-externalads/i],describe(){return{type:Oe.bot,vendor:"Meta"}}},{test:[/meta-externalagent/i],describe(){return{type:Oe.bot,vendor:"Meta"}}},{test:[/meta-externalfetcher/i],describe(){return{type:Oe.bot,vendor:"Meta"}}},{test:[/facebookexternalhit/i,/facebookcatalog/i],describe(){return{type:Oe.bot,vendor:"Meta"}}},{test:[/yahoo/i],describe(){return{type:Oe.bot,vendor:"Yahoo"}}},{test:[/yandexbot/i,/yandexmobilebot/i],describe(){return{type:Oe.bot,vendor:"Yandex"}}},{test:[/pingdom/i],describe(){return{type:Oe.bot,vendor:"Pingdom"}}},{test:[/huawei/i],describe(w){const v=q.getFirstMatch(/(can-l01)/i,w)&&"Nova",S={type:Oe.mobile,vendor:"Huawei"};return v&&(S.model=v),S}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:Oe.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:Oe.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:Oe.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:Oe.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:Oe.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:Oe.tablet}}},{test(w){const v=w.test(/ipod|iphone/i),S=w.test(/like (ipod|iphone)/i);return v&&!S},describe(w){const v=q.getFirstMatch(/(ipod|iphone)/i,w);return{type:Oe.mobile,vendor:"Apple",model:v}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:Oe.mobile,vendor:"Nexus"}}},{test:[/Nokia/i],describe(w){const v=q.getFirstMatch(/Nokia\s+([0-9]+(\.[0-9]+)?)/i,w),S={type:Oe.mobile,vendor:"Nokia"};return v&&(S.model=v),S}},{test:[/[^-]mobi/i],describe(){return{type:Oe.mobile}}},{test(w){return w.getBrowserName(!0)==="blackberry"},describe(){return{type:Oe.mobile,vendor:"BlackBerry"}}},{test(w){return w.getBrowserName(!0)==="bada"},describe(){return{type:Oe.mobile}}},{test(w){return w.getBrowserName()==="windows phone"},describe(){return{type:Oe.mobile,vendor:"Microsoft"}}},{test(w){const v=Number(String(w.getOSVersion()).split(".")[0]);return w.getOSName(!0)==="android"&&v>=3},describe(){return{type:Oe.tablet}}},{test(w){return w.getOSName(!0)==="android"},describe(){return{type:Oe.mobile}}},{test(w){return w.getOSName(!0)==="macos"},describe(){return{type:Oe.desktop,vendor:"Apple"}}},{test(w){return w.getOSName(!0)==="windows"},describe(){return{type:Oe.desktop}}},{test(w){return w.getOSName(!0)==="linux"},describe(){return{type:Oe.desktop}}},{test(w){return w.getOSName(!0)==="playstation 4"},describe(){return{type:Oe.tv}}},{test(w){return w.getOSName(!0)==="roku"},describe(){return{type:Oe.tv}}}],KC=[{test(w){return w.getBrowserName(!0)==="microsoft edge"},describe(w){if(/\sedg\//i.test(w))return{name:Mr.Blink};const v=q.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,w);return{name:Mr.EdgeHTML,version:v}}},{test:[/trident/i],describe(w){const v={name:Mr.Trident},S=q.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test(w){return w.test(/presto/i)},describe(w){const v={name:Mr.Presto},S=q.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test(w){const v=w.test(/gecko/i),S=w.test(/like gecko/i);return v&&!S},describe(w){const v={name:Mr.Gecko},S=q.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Mr.Blink}}},{test:[/(apple)?webkit/i],describe(w){const v={name:Mr.WebKit},S=q.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,w);return S&&(v.version=S),v}}];class Ew{constructor(v,S=!1){if(v==null||v==="")throw new Error("UserAgent parameter can't be empty");this._ua=v,this.parsedResult={},S!==!0&&this.parse()}getUA(){return this._ua}test(v){return v.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const v=q.find(HC,S=>{if(typeof S.test=="function")return S.test(this);if(Array.isArray(S.test))return S.test.some(U=>this.test(U));throw new Error("Browser's test function is not valid")});return v&&(this.parsedResult.browser=v.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(v){return v?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const v=q.find(GC,S=>{if(typeof S.test=="function")return S.test(this);if(Array.isArray(S.test))return S.test.some(U=>this.test(U));throw new Error("Browser's test function is not valid")});return v&&(this.parsedResult.os=v.describe(this.getUA())),this.parsedResult.os}getOSName(v){const{name:S}=this.getOS();return v?String(S).toLowerCase()||"":S||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(v=!1){const{type:S}=this.getPlatform();return v?String(S).toLowerCase()||"":S||""}parsePlatform(){this.parsedResult.platform={};const v=q.find(qC,S=>{if(typeof S.test=="function")return S.test(this);if(Array.isArray(S.test))return S.test.some(U=>this.test(U));throw new Error("Browser's test function is not valid")});return v&&(this.parsedResult.platform=v.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(v){return v?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const v=q.find(KC,S=>{if(typeof S.test=="function")return S.test(this);if(Array.isArray(S.test))return S.test.some(U=>this.test(U));throw new Error("Browser's test function is not valid")});return v&&(this.parsedResult.engine=v.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return q.assign({},this.parsedResult)}satisfies(v){const S={};let U=0;const P={};let te=0;if(Object.keys(v).forEach(Q=>{const f=v[Q];typeof f=="string"?(P[Q]=f,te+=1):typeof f=="object"&&(S[Q]=f,U+=1)}),U>0){const Q=Object.keys(S),f=q.find(Q,Se=>this.isOS(Se));if(f){const Se=this.satisfies(S[f]);if(Se!==void 0)return Se}const We=q.find(Q,Se=>this.isPlatform(Se));if(We){const Se=this.satisfies(S[We]);if(Se!==void 0)return Se}}if(te>0){const Q=Object.keys(P),f=q.find(Q,We=>this.isBrowser(We,!0));if(f!==void 0)return this.compareVersion(P[f])}}isBrowser(v,S=!1){const U=this.getBrowserName().toLowerCase();let P=v.toLowerCase();const te=q.getBrowserTypeByAlias(P);return S&&te&&(P=te.toLowerCase()),P===U}compareVersion(v){let S=[0],U=v,P=!1;const te=this.getBrowserVersion();if(typeof te=="string")return v[0]===">"||v[0]==="<"?(U=v.substr(1),v[1]==="="?(P=!0,U=v.substr(2)):S=[],v[0]===">"?S.push(1):S.push(-1)):v[0]==="="?U=v.substr(1):v[0]==="~"&&(P=!0,U=v.substr(1)),S.indexOf(q.compareVersions(te,U,P))>-1}isOS(v){return this.getOSName(!0)===String(v).toLowerCase()}isPlatform(v){return this.getPlatformType(!0)===String(v).toLowerCase()}isEngine(v){return this.getEngineName(!0)===String(v).toLowerCase()}is(v,S=!1){return this.isBrowser(v,S)||this.isOS(v)||this.isPlatform(v)}some(v=[]){return v.some(S=>this.is(S))}}class zC{static getParser(v,S=!1){if(typeof v!="string")throw new Error("UserAgent should be a string");return new Ew(v,S)}static parse(v){return new Ew(v).getResult()}static get BROWSER_MAP(){return Ow}static get ENGINE_MAP(){return Mr}static get OS_MAP(){return mn}static get PLATFORMS_MAP(){return Oe}}const Fs=zC.parse(navigator.userAgent),WC={abTestGroup:null,abTestName:null,browser:Fs.browser.name??null,browserVersion:Fs.browser.version??null,hardwarePlatform:Fs.browser.name==="Electron"?"DESKTOP":"WEB",isOfflineModeStart:!1,mobileNetworkType:null,networkType:"WIFI",operatingSystem:Fs.os.name??null,operatingSystemVersion:Fs.os.version??null,screenHeight:window.screen.height,screenWidth:window.screen.width,sessionProductId:"",sessionProductType:"TRACK",sessionTags:[],sessionType:"PLAYBACK",startReason:"IMPLICIT",streamingSessionId:"",timestamp:0},XC=await ho("streaming_session_start",WC);function YC(w){return XC(w)}async function JC(w){if(await fo())return w()}async function _w(w){const v={consentCategory:"NECESSARY",..."extras"in w&&{extras:w.extras},group:w.group,name:w.name,payload:w.payload,version:w.version},S=v.payload.streamingSessionId;v.name==="progress"&&"streamingSessionId"in v.payload&&delete v.payload.streamingSessionId,wp.eventSender.sendEvent(v),S&&await yp.delete({name:v.name,streamingSessionId:S})}async function jw(w){return JC(async()=>{for(const v of w)if(v){const S=await v;S&&await _w({group:"streaming_metrics",name:S.name,payload:S.payload,version:2})}})}function $C(w=!0){const v=w&&"crypto"in window&&"getRandomValues"in crypto;return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,S=>{const U=v?crypto.getRandomValues(new Uint8Array(1))[0]:Math.floor(256*Math.random());return(S^(U??0)&15>>S/4).toString(16)})}function QC(w){return JSON.parse(atob(w))}function ZC(w,v){if("codecs"in w)switch(w.codecs){case"aac":return"aac";case"aac+":return"aac+";case"flac":return"flac";case"mp3":return"mp3";case"mp4a.40.2":return"mp4a.40.2";case"mp4a.40.5":return"mp4a.40.5"}else if(v)switch(v){case"HI_RES":case"HI_RES_LOSSLESS":case"LOSSLESS":return"flac";case"HIGH":return"mp4a.40.2";case"LOW":return"mp4a.40.5"}return"none"}function Mw(w){switch(w){case"aac":case"aac+":case"mp4a.40.2":case"mp4a.40.5":return"aac";case"flac":return w;case"mp3":return"mp3";default:return}}function eP(w){const v=/<Representation[^>]*id="([^"]+)"/.exec(w);if(v){const S=v[1];if(!S?.includes(","))return;const U=S.match(/\d+/g);if(U&&U.length>0)return Number(U[U.length-1])}}function tP(w){const v=/codecs=(["'])?((?:.(?!\1|>))*.?)\1?/.exec(w);if(v===null)return;const S=v[2]??"";if(S.includes("mp4a")||S.includes("aac"))return"aac";if(S==="flac")return S}function nP(w){const v=/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+(?:\.\d+)?)S)?/.exec(w);if(!v)throw new Error("Invalid duration format");const S=parseFloat(v[1]||"0"),U=parseFloat(v[2]||"0"),P=parseFloat(v[3]||"0");return S*3600+U*60+P}function iP(w){const v=/mediaPresentationDuration="([^"]+)"/.exec(w);if(v){const S=v[1];if(S)return nP(S)}}function rP(w){const v=/<Representation[^>]*audioSamplingRate="(\d+)"/.exec(w);if(v){const S=v[1];if(S)return Number(S)}}function aP(w){const v=/X-COM-TIDAL-SAMPLE-DEPTH=(\d+)/.exec(w);if(v)return Number(v[1])}function oP(w){const v=/#EXT-X-STREAM-INF:[^\n]*CODECS="([^"]+)"/.exec(w);if(v)return v[1]}function sP(w){const v=/#EXTINF:([\d.]+),/g;let S,U=0,P=!1;for(;(S=v.exec(w))!==null;){const te=S[1];te&&(U+=parseFloat(te),P=!0)}return P?U:void 0}function uP(w){const v=/X-COM-TIDAL-SAMPLE-RATE=(\d+)/.exec(w);if(v)return Number(v[1])}function lP(w){const{prefetched:v,streamingSessionId:S}=w,U="albumReplayGain"in w?{albumPeakAmplitude:w.albumPeakAmplitude,albumReplayGain:w.albumReplayGain,trackPeakAmplitude:w.trackPeakAmplitude,trackReplayGain:w.trackReplayGain}:{},P="audioQuality"in w?w.audioQuality:w.videoQuality,te={id:String("videoId"in w?w.videoId:w.trackId),type:"trackId"in w?"track":"video"};if(w.manifestMimeType===lo.BTS||w.manifestMimeType===lo.EMU){const Q=QC(w.manifest),f=Q.urls[0],We=ZC(Q,"audioQuality"in w?w.audioQuality:null);let Se;return"keyId"in Q&&(Se=Q.keyId),"licenseSecurityToken"in w&&(Se=w.licenseSecurityToken),{...U,bitDepth:"bitDepth"in w?w.bitDepth??void 0:void 0,codec:Mw(We),prefetched:v,quality:P,sampleRate:"sampleRate"in w?w.sampleRate??void 0:void 0,securityToken:Se,streamFormat:We,streamUrl:f,streamingSessionId:S,...te,expires:w.expires}}if(w.manifestMimeType===lo.DASH){const Q=`data:${w.manifestMimeType};base64,${w.manifest}`,f=atob(w.manifest);return{...U,bitDepth:eP(f),codec:tP(f),duration:iP(f),prefetched:v,quality:P,sampleRate:rP(f),securityToken:w.licenseSecurityToken,streamUrl:Q,streamingSessionId:S,...te,expires:w.expires}}if(w.manifestMimeType===lo.HLS){const Q=`data:${w.manifestMimeType};base64,${w.manifest}`,f=atob(w.manifest),We=f.split("base64,")[1],Se=We?.split(`
`)[0];if(!We||!Se)throw new TypeError("Invalid HLS manifest format: missing base64-encoded variant manifest.");const ct=atob(Se);return{...U,bitDepth:aP(ct),codec:Mw(oP(f)?.toLowerCase()),duration:sP(ct),prefetched:v,quality:P,sampleRate:uP(ct),securityToken:w.licenseSecurityToken,streamUrl:Q,streamingSessionId:S,...te,expires:w.expires}}throw new TypeError(`${w.manifestMimeType} not supported as playback info manifest mime type.`)}const cP=/\{[^{}]+\}/g,dP=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function fP(){return Math.random().toString(36).slice(2,11)}function hP(w){let{baseUrl:v="",Request:S=globalThis.Request,fetch:U=globalThis.fetch,querySerializer:P,bodySerializer:te,headers:Q,requestInitExt:f=void 0,...We}={...w};f=dP()?f:void 0,v=Rw(v);const Se=[];async function ct(ke,ie){const{baseUrl:tn,fetch:ui=U,Request:En=S,headers:po,params:Ei={},parseAs:rt="json",querySerializer:Cr,bodySerializer:m=te??gP,body:z,middleware:oa=[],...Pr}=ie||{};let Rr=v;tn&&(Rr=Rw(tn)??v);let T=typeof P=="function"?P:Cw(P);Cr&&(T=typeof Cr=="function"?Cr:Cw({...typeof P=="object"?P:{},...Cr}));const X=z===void 0?void 0:m(z,Pw(Q,po,Ei.header)),he=Pw(X===void 0||X instanceof FormData?{}:{"Content-Type":"application/json"},Q,po,Ei.header),$t=[...Se,...oa],ye={redirect:"follow",...We,...Pr,body:X,headers:he};let oe,Ft,wt=new En(mP(ke,{baseUrl:Rr,params:Ei,querySerializer:T}),ye),Dt;for(const Qt in Pr)Qt in wt||(wt[Qt]=Pr[Qt]);if($t.length){oe=fP(),Ft=Object.freeze({baseUrl:Rr,fetch:ui,parseAs:rt,querySerializer:T,bodySerializer:m});for(const Qt of $t)if(Qt&&typeof Qt=="object"&&typeof Qt.onRequest=="function"){const It=await Qt.onRequest({request:wt,schemaPath:ke,params:Ei,options:Ft,id:oe});if(It)if(It instanceof En)wt=It;else if(It instanceof Response){Dt=It;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!Dt){try{Dt=await ui(wt,f)}catch(Qt){let It=Qt;if($t.length)for(let Mi=$t.length-1;Mi>=0;Mi--){const sa=$t[Mi];if(sa&&typeof sa=="object"&&typeof sa.onError=="function"){const R=await sa.onError({request:wt,error:It,schemaPath:ke,params:Ei,options:Ft,id:oe});if(R){if(R instanceof Response){It=void 0,Dt=R;break}if(R instanceof Error){It=R;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(It)throw It}if($t.length)for(let Qt=$t.length-1;Qt>=0;Qt--){const It=$t[Qt];if(It&&typeof It=="object"&&typeof It.onResponse=="function"){const Mi=await It.onResponse({request:wt,response:Dt,schemaPath:ke,params:Ei,options:Ft,id:oe});if(Mi){if(!(Mi instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");Dt=Mi}}}}if(Dt.status===204||wt.method==="HEAD"||Dt.headers.get("Content-Length")==="0")return Dt.ok?{data:void 0,response:Dt}:{error:void 0,response:Dt};if(Dt.ok)return rt==="stream"?{data:Dt.body,response:Dt}:{data:await Dt[rt](),response:Dt};let go=await Dt.text();try{go=JSON.parse(go)}catch{}return{error:go,response:Dt}}return{request(ke,ie,tn){return ct(ie,{...tn,method:ke.toUpperCase()})},GET(ke,ie){return ct(ke,{...ie,method:"GET"})},PUT(ke,ie){return ct(ke,{...ie,method:"PUT"})},POST(ke,ie){return ct(ke,{...ie,method:"POST"})},DELETE(ke,ie){return ct(ke,{...ie,method:"DELETE"})},OPTIONS(ke,ie){return ct(ke,{...ie,method:"OPTIONS"})},HEAD(ke,ie){return ct(ke,{...ie,method:"HEAD"})},PATCH(ke,ie){return ct(ke,{...ie,method:"PATCH"})},TRACE(ke,ie){return ct(ke,{...ie,method:"TRACE"})},use(...ke){for(const ie of ke)if(ie){if(typeof ie!="object"||!("onRequest"in ie||"onResponse"in ie||"onError"in ie))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");Se.push(ie)}},eject(...ke){for(const ie of ke){const tn=Se.indexOf(ie);tn!==-1&&Se.splice(tn,1)}}}}function Pc(w,v,S){if(v==null)return"";if(typeof v=="object")throw new Error("Deeply-nested arrays/objects arenâ€™t supported. Provide your own `querySerializer()` to handle these.");return`${w}=${S?.allowReserved===!0?v:encodeURIComponent(v)}`}function Uw(w,v,S){if(!v||typeof v!="object")return"";const U=[],P={simple:",",label:".",matrix:";"}[S.style]||"&";if(S.style!=="deepObject"&&S.explode===!1){for(const f in v)U.push(f,S.allowReserved===!0?v[f]:encodeURIComponent(v[f]));const Q=U.join(",");switch(S.style){case"form":return`${w}=${Q}`;case"label":return`.${Q}`;case"matrix":return`;${w}=${Q}`;default:return Q}}for(const Q in v){const f=S.style==="deepObject"?`${w}[${Q}]`:Q;U.push(Pc(f,v[Q],S))}const te=U.join(P);return S.style==="label"||S.style==="matrix"?`${P}${te}`:te}function Bw(w,v,S){if(!Array.isArray(v))return"";if(S.explode===!1){const te={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[S.style]||",",Q=(S.allowReserved===!0?v:v.map(f=>encodeURIComponent(f))).join(te);switch(S.style){case"simple":return Q;case"label":return`.${Q}`;case"matrix":return`;${w}=${Q}`;default:return`${w}=${Q}`}}const U={simple:",",label:".",matrix:";"}[S.style]||"&",P=[];for(const te of v)S.style==="simple"||S.style==="label"?P.push(S.allowReserved===!0?te:encodeURIComponent(te)):P.push(Pc(w,te,S));return S.style==="label"||S.style==="matrix"?`${U}${P.join(U)}`:P.join(U)}function Cw(w){return function(v){const S=[];if(v&&typeof v=="object")for(const U in v){const P=v[U];if(P!=null){if(Array.isArray(P)){if(P.length===0)continue;S.push(Bw(U,P,{style:"form",explode:!0,...w?.array,allowReserved:w?.allowReserved||!1}));continue}if(typeof P=="object"){S.push(Uw(U,P,{style:"deepObject",explode:!0,...w?.object,allowReserved:w?.allowReserved||!1}));continue}S.push(Pc(U,P,w))}}return S.join("&")}}function pP(w,v){let S=w;for(const U of w.match(cP)??[]){let P=U.substring(1,U.length-1),te=!1,Q="simple";if(P.endsWith("*")&&(te=!0,P=P.substring(0,P.length-1)),P.startsWith(".")?(Q="label",P=P.substring(1)):P.startsWith(";")&&(Q="matrix",P=P.substring(1)),!v||v[P]===void 0||v[P]===null)continue;const f=v[P];if(Array.isArray(f)){S=S.replace(U,Bw(P,f,{style:Q,explode:te}));continue}if(typeof f=="object"){S=S.replace(U,Uw(P,f,{style:Q,explode:te}));continue}if(Q==="matrix"){S=S.replace(U,`;${Pc(P,f)}`);continue}S=S.replace(U,Q==="label"?`.${encodeURIComponent(f)}`:encodeURIComponent(f))}return S}function gP(w,v){return w instanceof FormData?w:v&&(v.get instanceof Function?v.get("Content-Type")??v.get("content-type"):v["Content-Type"]??v["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(w).toString():JSON.stringify(w)}function mP(w,v){let S=`${v.baseUrl}${w}`;v.params?.path&&(S=pP(S,v.params.path));let U=v.querySerializer(v.params.query??{});return U.startsWith("?")&&(U=U.substring(1)),U&&(S+=`?${U}`),S}function Pw(...w){const v=new Headers;for(const S of w){if(!S||typeof S!="object")continue;const U=S instanceof Headers?S.entries():Object.entries(S);for(const[P,te]of U)if(te===null)v.delete(P);else if(Array.isArray(te))for(const Q of te)v.append(P,Q);else te!==void 0&&v.set(P,te)}return v}function Rw(w){return w.endsWith("/")?w.substring(0,w.length-1):w}function vP(w){const v={async onRequest({request:U}){const P=await w.getCredentials();return U.headers.set("Authorization",`Bearer ${P.token}`),(U.method==="POST"||U.method==="PATCH"||U.method==="DELETE")&&U.headers.set("Content-Type","application/vnd.api+json"),U}},S=hP({baseUrl:"https://openapi.tidal.com/v2/"});return S.use(v),S}var yP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bP(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}var Dw={},Lw;function wP(){return Lw||(Lw=1,function(w){(function(){var v=typeof window<"u"?window:yP,S={};(function(P,te,Q){var f,We=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},Se=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function ct(e){e=[typeof globalThis=="object"&&globalThis,e,typeof P=="object"&&P,typeof self=="object"&&self,typeof te=="object"&&te];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var ke=ct(this);function ie(e,t){if(t)e:{var n=ke;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];if(!(r in n))break e;n=n[r]}e=e[e.length-1],i=n[e],t=t(i),t!=i&&t!=null&&Se(n,e,{configurable:!0,writable:!0,value:t})}}var tn;if(typeof Object.setPrototypeOf=="function")tn=Object.setPrototypeOf;else{var ui;e:{var En={a:!0},po={};try{po.__proto__=En,ui=po.a;break e}catch{}ui=!1}tn=ui?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var Ei=tn;function rt(e,t){if(e.prototype=We(t.prototype),e.prototype.constructor=e,Ei)Ei(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.Jm=t.prototype}function Cr(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function m(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:Cr(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function z(e){if(!(e instanceof Array)){e=m(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function oa(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.B=this.i=null}function Pr(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}oa.prototype.u=function(e){this.h=e};function Rr(e,t){e.i={ci:t,ti:!0},e.g=e.m||e.j}oa.prototype.return=function(e){this.i={return:e},this.g=this.j};function T(e,t,n){return e.g=n,{value:t}}oa.prototype.A=function(e){this.g=e};function X(e){e.g=0}function he(e,t,n){e.m=t,n!=null&&(e.j=n)}function $t(e,t){e.m=0,e.j=t||0}function ye(e,t,n){e.g=t,e.m=n||0}function oe(e,t){return e.m=t||0,t=e.i.ci,e.i=null,t}function Ft(e){e.B=[e.i],e.m=0,e.j=0}function wt(e,t){var n=e.B.splice(0)[0];(n=e.i=e.i||n)?n.ti?e.g=e.m||e.j:n.A!=null&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function Dt(e){this.g=new oa,this.h=e}function go(e,t){Pr(e.g);var n=e.g.l;return n?Qt(e,"return"in n?n.return:function(i){return{value:i,done:!0}},t,e.g.return):(e.g.return(t),It(e))}function Qt(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.o=!1,r;var a=r.value}catch(o){return e.g.l=null,Rr(e.g,o),It(e)}return e.g.l=null,i.call(e.g,a),It(e)}function It(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,Rr(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.ti)throw t.ci;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function Mi(e){this.next=function(t){return Pr(e.g),e.g.l?t=Qt(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=It(e)),t},this.throw=function(t){return Pr(e.g),e.g.l?t=Qt(e,e.g.l.throw,t,e.g.u):(Rr(e.g,t),t=It(e)),t},this.return=function(t){return go(e,t)},this[Symbol.iterator]=function(){return this}}function sa(e){function t(i){return e.next(i)}function n(i){return e.throw(i)}return new Promise(function(i,r){function a(o){o.done?i(o.value):Promise.resolve(o.value).then(t,n).then(a,r)}a(e.next())})}function R(e){return sa(new Mi(new Dt(e)))}function Et(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}ie("Symbol",function(e){function t(a){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(i+(a||"")+"_"+r++,a)}function n(a,o){this.g=a,Se(this,"description",{configurable:!0,writable:!0,value:o})}if(e)return e;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(Math.random()*1e9>>>0)+"_",r=0;return t}),ie("Symbol.iterator",function(e){return e||(e=Symbol("Symbol.iterator"),Se(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return Sp(Cr(this))}}),e)});function Sp(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}ie("Promise",function(e){function t(o){this.h=0,this.i=void 0,this.g=[],this.o=!1;var s=this.j();try{o(s.resolve,s.reject)}catch(u){s.reject(u)}}function n(){this.g=null}function i(o){return o instanceof t?o:new t(function(s){s(o)})}if(e)return e;n.prototype.h=function(o){if(this.g==null){this.g=[];var s=this;this.i(function(){s.l()})}this.g.push(o)};var r=ke.setTimeout;n.prototype.i=function(o){r(o,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var o=this.g;this.g=[];for(var s=0;s<o.length;++s){var u=o[s];o[s]=null;try{u()}catch(l){this.j(l)}}}this.g=null},n.prototype.j=function(o){this.i(function(){throw o})},t.prototype.j=function(){function o(l){return function(c){u||(u=!0,l.call(s,c))}}var s=this,u=!1;return{resolve:o(this.G),reject:o(this.l)}},t.prototype.G=function(o){if(o===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(o instanceof t)this.I(o);else{e:switch(typeof o){case"object":var s=o!=null;break e;case"function":s=!0;break e;default:s=!1}s?this.F(o):this.m(o)}},t.prototype.F=function(o){var s=void 0;try{s=o.then}catch(u){this.l(u);return}typeof s=="function"?this.J(s,o):this.m(o)},t.prototype.l=function(o){this.u(2,o)},t.prototype.m=function(o){this.u(1,o)},t.prototype.u=function(o,s){if(this.h!=0)throw Error("Cannot settle("+o+", "+s+"): Promise already settled in state"+this.h);this.h=o,this.i=s,this.h===2&&this.H(),this.B()},t.prototype.H=function(){var o=this;r(function(){if(o.C()){var s=ke.console;typeof s<"u"&&s.error(o.i)}},1)},t.prototype.C=function(){if(this.o)return!1;var o=ke.CustomEvent,s=ke.Event,u=ke.dispatchEvent;return typeof u>"u"?!0:(typeof o=="function"?o=new o("unhandledrejection",{cancelable:!0}):typeof s=="function"?o=new s("unhandledrejection",{cancelable:!0}):(o=ke.document.createEvent("CustomEvent"),o.initCustomEvent("unhandledrejection",!1,!0,o)),o.promise=this,o.reason=this.i,u(o))},t.prototype.B=function(){if(this.g!=null){for(var o=0;o<this.g.length;++o)a.h(this.g[o]);this.g=null}};var a=new n;return t.prototype.I=function(o){var s=this.j();o.Te(s.resolve,s.reject)},t.prototype.J=function(o,s){var u=this.j();try{o.call(s,u.resolve,u.reject)}catch(l){u.reject(l)}},t.prototype.then=function(o,s){function u(h,p){return typeof h=="function"?function(g){try{l(h(g))}catch(y){c(y)}}:p}var l,c,d=new t(function(h,p){l=h,c=p});return this.Te(u(o,l),u(s,c)),d},t.prototype.catch=function(o){return this.then(void 0,o)},t.prototype.Te=function(o,s){function u(){switch(l.h){case 1:o(l.i);break;case 2:s(l.i);break;default:throw Error("Unexpected state: "+l.h)}}var l=this;this.g==null?a.h(u):this.g.push(u),this.o=!0},t.resolve=i,t.reject=function(o){return new t(function(s,u){u(o)})},t.race=function(o){return new t(function(s,u){for(var l=m(o),c=l.next();!c.done;c=l.next())i(c.value).Te(s,u)})},t.all=function(o){var s=m(o),u=s.next();return u.done?i([]):new t(function(l,c){function d(g){return function(y){h[g]=y,p--,p==0&&l(h)}}var h=[],p=0;do h.push(void 0),p++,i(u.value).Te(d(h.length-1),c),u=s.next();while(!u.done)})},t});function li(e,t){return Object.prototype.hasOwnProperty.call(e,t)}ie("WeakMap",function(e){function t(u){if(this.g=(s+=Math.random()+1).toString(),u){u=m(u);for(var l;!(l=u.next()).done;)l=l.value,this.set(l[0],l[1])}}function n(){}function i(u){var l=typeof u;return l==="object"&&u!==null||l==="function"}function r(u){if(!li(u,o)){var l=new n;Se(u,o,{value:l})}}function a(u){var l=Object[u];l&&(Object[u]=function(c){return c instanceof n?c:(Object.isExtensible(c)&&r(c),l(c))})}if(function(){if(!e||!Object.seal)return!1;try{var u=Object.seal({}),l=Object.seal({}),c=new e([[u,2],[l,3]]);return c.get(u)!=2||c.get(l)!=3?!1:(c.delete(u),c.set(l,4),!c.has(u)&&c.get(l)==4)}catch{return!1}}())return e;var o="$jscomp_hidden_"+Math.random();a("freeze"),a("preventExtensions"),a("seal");var s=0;return t.prototype.set=function(u,l){if(!i(u))throw Error("Invalid WeakMap key");if(r(u),!li(u,o))throw Error("WeakMap key fail: "+u);return u[o][this.g]=l,this},t.prototype.get=function(u){return i(u)&&li(u,o)?u[o][this.g]:void 0},t.prototype.has=function(u){return i(u)&&li(u,o)&&li(u[o],this.g)},t.prototype.delete=function(u){return i(u)&&li(u,o)&&li(u[o],this.g)?delete u[o][this.g]:!1},t}),ie("Map",function(e){function t(){var s={};return s.yc=s.next=s.head=s}function n(s,u){var l=s[1];return Sp(function(){if(l){for(;l.head!=s[1];)l=l.yc;for(;l.next!=l.head;)return l=l.next,{done:!1,value:u(l)};l=null}return{done:!0,value:void 0}})}function i(s,u){var l=u&&typeof u;l=="object"||l=="function"?a.has(u)?l=a.get(u):(l=""+ ++o,a.set(u,l)):l="p_"+u;var c=s[0][l];if(c&&li(s[0],l))for(s=0;s<c.length;s++){var d=c[s];if(u!==u&&d.key!==d.key||u===d.key)return{id:l,list:c,index:s,entry:d}}return{id:l,list:c,index:-1,entry:void 0}}function r(s){if(this[0]={},this[1]=t(),this.size=0,s){s=m(s);for(var u;!(u=s.next()).done;)u=u.value,this.set(u[0],u[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var s=Object.seal({x:4}),u=new e(m([[s,"s"]]));if(u.get(s)!="s"||u.size!=1||u.get({x:4})||u.set({x:4},"t")!=u||u.size!=2)return!1;var l=u.entries(),c=l.next();return c.done||c.value[0]!=s||c.value[1]!="s"?!1:(c=l.next(),!(c.done||c.value[0].x!=4||c.value[1]!="t"||!l.next().done))}catch{return!1}}())return e;var a=new WeakMap;r.prototype.set=function(s,u){s=s===0?0:s;var l=i(this,s);return l.list||(l.list=this[0][l.id]=[]),l.entry?l.entry.value=u:(l.entry={next:this[1],yc:this[1].yc,head:this[1],key:s,value:u},l.list.push(l.entry),this[1].yc.next=l.entry,this[1].yc=l.entry,this.size++),this},r.prototype.delete=function(s){return s=i(this,s),s.entry&&s.list?(s.list.splice(s.index,1),s.list.length||delete this[0][s.id],s.entry.yc.next=s.entry.next,s.entry.next.yc=s.entry.yc,s.entry.head=null,this.size--,!0):!1},r.prototype.clear=function(){this[0]={},this[1]=this[1].yc=t(),this.size=0},r.prototype.has=function(s){return!!i(this,s).entry},r.prototype.get=function(s){return(s=i(this,s).entry)&&s.value},r.prototype.entries=function(){return n(this,function(s){return[s.key,s.value]})},r.prototype.keys=function(){return n(this,function(s){return s.key})},r.prototype.values=function(){return n(this,function(s){return s.value})},r.prototype.forEach=function(s,u){for(var l=this.entries(),c;!(c=l.next()).done;)c=c.value,s.call(u,c[1],c[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var o=0;return r}),ie("Set",function(e){function t(n){if(this.g=new Map,n){n=m(n);for(var i;!(i=n.next()).done;)this.add(i.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),i=new e(m([n]));if(!i.has(n)||i.size!=1||i.add(n)!=i||i.size!=1||i.add({x:4})!=i||i.size!=2)return!1;var r=i.entries(),a=r.next();return a.done||a.value[0]!=n||a.value[1]!=n?!1:(a=r.next(),a.done||a.value[0]==n||a.value[0].x!=4||a.value[1]!=a.value[0]?!1:r.next().done)}catch{return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,i){var r=this;this.g.forEach(function(a){return n.call(i,a,a,r)})},t)});function Tp(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{oi:r,v:a}}return{oi:-1,v:void 0}}ie("Array.prototype.findIndex",function(e){return e||function(t,n){return Tp(this,t,n).oi}});function Dc(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var a=n++;return{value:t(a,e[a]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}ie("Array.prototype.values",function(e){return e||function(){return Dc(this,function(t,n){return n})}}),ie("Array.from",function(e){return e||function(t,n,i){n=n??function(s){return s};var r=[],a=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof a=="function"){t=a.call(t);for(var o=0;!(a=t.next()).done;)r.push(n.call(i,a.value,o++))}else for(a=t.length,o=0;o<a;o++)r.push(n.call(i,t[o],o));return r}}),ie("Array.prototype.keys",function(e){return e||function(){return Dc(this,function(t){return t})}});function Gs(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}ie("String.prototype.startsWith",function(e){return e||function(t,n){var i=Gs(this,t,"startsWith"),r=i.length,a=t.length;n=Math.max(0,Math.min(n|0,i.length));for(var o=0;o<a&&n<r;)if(i[n++]!=t[o++])return!1;return o>=a}}),ie("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),ie("Array.prototype.includes",function(e){return e||function(t,n){var i=this;i instanceof String&&(i=String(i));var r=i.length;for(n=n||0,n<0&&(n=Math.max(n+r,0));n<r;n++){var a=i[n];if(a===t||Object.is(a,t))return!0}return!1}}),ie("String.prototype.includes",function(e){return e||function(t,n){return Gs(this,t,"includes").indexOf(t,n||0)!==-1}}),ie("String.fromCodePoint",function(e){return e||function(t){for(var n="",i=0;i<arguments.length;i++){var r=Number(arguments[i]);if(r<0||r>1114111||r!==Math.floor(r))throw new RangeError("invalid_code_point "+r);r<=65535?n+=String.fromCharCode(r):(r-=65536,n+=String.fromCharCode(r>>>10&1023|55296),n+=String.fromCharCode(r&1023|56320))}return n}}),ie("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=m(n);for(var i;!(i=n.next()).done;)this.add(i.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),i=Object.seal({}),r=new e([n]);return!r.has(n)||r.has(i)?!1:(r.delete(n),r.add(i),!r.has(n)&&r.has(i))}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),ie("Array.prototype.find",function(e){return e||function(t,n){return Tp(this,t,n).v}}),ie("Object.entries",function(e){return e||function(t){var n=[],i;for(i in t)li(t,i)&&n.push([i,t[i]]);return n}});var zw=typeof Object.assign=="function"?Object.assign:function(e,t){if(e==null)throw new TypeError("No nullish arg");e=Object(e);for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)li(i,r)&&(e[r]=i[r])}return e};ie("Object.assign",function(e){return e||zw}),ie("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),ie("Array.prototype.entries",function(e){return e||function(){return Dc(this,function(t,n){return[t,n]})}}),ie("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),ie("String.prototype.repeat",function(e){return e||function(t){var n=Gs(this,null,"repeat");if(t<0||t>1342177279)throw new RangeError("Invalid count value");t|=0;for(var i="";t;)t&1&&(i+=n),(t>>>=1)&&(n+=n);return i}}),ie("Number.EPSILON",function(){return 2220446049250313e-31}),ie("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),ie("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),ie("Object.values",function(e){return e||function(t){var n=[],i;for(i in t)li(t,i)&&n.push(t[i]);return n}}),ie("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),ie("String.prototype.endsWith",function(e){return e||function(t,n){var i=Gs(this,t,"endsWith");n===void 0&&(n=i.length),n=Math.max(0,Math.min(n|0,i.length));for(var r=t.length;r>0&&n>0;)if(i[--n]!=t[--r])return!1;return r<=0}}),ie("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return t<0?-n:n}});var Ww=this||self;function Y(e,t){e=e.split(".");var n=Ww;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)e.length||t===void 0?n[i]&&n[i]!==Object.prototype[i]?n=n[i]:n=n[i]={}:n[i]=t}function ua(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}ua.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function qs(e){return e.h/(1-Math.pow(e.g,e.i))}function mo(){this.h=new ua(2),this.j=new ua(5),this.g=0,this.i=128e3,this.l=16e3}mo.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},mo.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},mo.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(qs(this.h),qs(this.j))};function Xw(){}function mi(){}function Ee(){}function nr(e){var t=Et.apply(1,arguments);xp.has(e)||(xp.add(e),Ee.apply(Xw,z(t)))}function Yw(){}var xp=new Set;P.console&&(new Map().set(1,function(){return console.error.apply(console,z(Et.apply(0,arguments)))}).set(2,function(){return console.warn.apply(console,z(Et.apply(0,arguments)))}).set(3,function(){return console.info.apply(console,z(Et.apply(0,arguments)))}).set(4,function(){return console.log.apply(console,z(Et.apply(0,arguments)))}).set(5,function(){return console.debug.apply(console,z(Et.apply(0,arguments)))}).set(6,function(){return console.debug.apply(console,z(Et.apply(0,arguments)))}),Ee=function(){return console.warn.apply(console,z(Et.apply(0,arguments)))},mi=function(){console.error.apply(console,z(Et.apply(0,arguments)))});function Ap(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Qn(e,t){t=e.indexOf(t),t>-1&&e.splice(t,1)}function Dr(e,t,n){if(n||(n=Ap),e.length!=t.length)return!1;t=t.slice(),e=m(e);for(var i=e.next(),r={};!i.done;r={wi:void 0},i=e.next()){if(r.wi=i.value,i=t.findIndex(function(a){return function(o){return n(a.wi,o)}}(r)),i==-1)return!1;t[i]=t[t.length-1],t.pop()}return t.length==0}function ir(e,t,n){if(e===t)return!0;if(!e||!t)return e==t;if(n||(n=Ap),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function Ks(){this.g=new Map}f=Ks.prototype,f.push=function(e,t){this.g.getOrInsertComputed(e,function(){return[]}).push(t)},f.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},f.remove=function(e,t){if(this.g.has(e)){var n=this.g.get(e).filter(function(i){return i!=t});this.g.set(e,n),n.length||this.g.delete(e)}},f.forEach=function(e){this.g.forEach(function(t,n){e(n,t)})},f.size=function(){return this.g.size},f.keys=function(){return Array.from(this.g.keys())};function _e(){this.g=new Ks}f=_e.prototype,f.release=function(){this.Qa(),this.g=null},f.D=function(e,t,n,i){this.g&&(e=new kp(e,t,n,i),this.g.push(t,e))},f.ya=function(e,t,n,i){function r(o){a.Ma(e,t,r),n(o)}var a=this;this.D(e,t,r,i)},f.Ma=function(e,t,n){if(this.g){var i=this.g.get(t)||[];i=m(i);for(var r=i.next();!r.done;r=i.next())r=r.value,r.target!=e||n!=r.listener&&n||(r.Ma(),this.g.remove(t,r))}},f.Qa=function(){if(this.g){for(var e=[],t=m(this.g.g.values()),n=t.next();!n.done;n=t.next())e.push.apply(e,z(n.value));for(e=m(e),t=e.next();!t.done;t=e.next())t.value.Ma();this.g.g.clear()}},Y("shaka.util.EventManager",_e),_e.prototype.removeAll=_e.prototype.Qa,_e.prototype.unlisten=_e.prototype.Ma,_e.prototype.listenOnce=_e.prototype.ya,_e.prototype.listen=_e.prototype.D,_e.prototype.release=_e.prototype.release;function kp(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=Jw(e,i),this.target.addEventListener(t,n,this.g)}kp.prototype.Ma=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function Jw(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(i){return!n.has(i)}),$w(e)?t:t.capture||!1}function $w(e){var t=Ip;if(t==null){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch{t=!1}Ip=t}return t||!1}var Ip=void 0;Y("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function at(e){this.h=e,this.g=void 0}at.prototype.value=function(){return this.g===void 0&&(this.g=this.h()),this.g};function Te(){return Qw.value()}var ci=null,Lc=null,Qw=new at(function(){var e=void 0;return ci&&(e=ci()),!e&&Lc&&(e=Lc()),e});function Nc(e,t){this.g=e,this.h=t}Nc.prototype.toString=function(){return"v"+this.g+"."+this.h};function Ce(e,t){var n=new Nc(5,0),i=Ep,r=i.g,a=n.h-r.h;((n.g-r.g||a)>0?i.i:i.h)(i.g,n,e,t)}function Zw(e,t,n,i){Ee([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function eS(e,t,n,i){mi([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(" "))}var Ep=null,tS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function ht(e){var t;e instanceof ht?(zs(this,e.jc),this.hd=e.hd,Ws(this,e.Db),Oc(this,e.Ed),this.Sb=e.Sb,Lr(this,e.g.clone()),this.Rc=e.Rc):e&&(t=String(e).match(tS))?(zs(this,t[1]||"",!0),this.hd=la(t[2]||""),Ws(this,t[3]||"",!0),Oc(this,t[4]),this.Sb=la(t[5]||"",!0),Lr(this,t[6]||"",!0),this.Rc=la(t[7]||"")):this.g=new ca(null)}f=ht.prototype,f.jc="",f.hd="",f.Db="",f.Ed=null,f.Sb="",f.Rc="",f.toString=function(){var e=[],t=this.jc;if(t&&e.push(vo(t,Mp,!0),":"),t=this.Db){e.push("//");var n=this.hd;n&&e.push(vo(n,Mp,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Ed,t!=null&&e.push(":",String(t))}return(t=this.Sb)&&(this.Db&&t.charAt(0)!="/"&&e.push("/"),e.push(vo(t,t.charAt(0)=="/"?rS:iS,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Rc)&&e.push("#",vo(t,oS)),e.join("")},f.resolve=function(e){var t=this.clone();t.jc==="data"&&(t=new ht);var n=!!e.jc;n?zs(t,e.jc):n=!!e.hd,n?t.hd=e.hd:n=!!e.Db,n?Ws(t,e.Db):n=e.Ed!=null;var i=e.Sb;if(n)Oc(t,e.Ed);else if(n=!!e.Sb){if(i.charAt(0)!="/")if(this.Db&&!this.Sb)i="/"+i;else{var r=t.Sb.lastIndexOf("/");r!=-1&&(i=t.Sb.substr(0,r+1)+i)}if(i==".."||i==".")i="";else if(i.indexOf("./")!=-1||i.indexOf("/.")!=-1){r=i.lastIndexOf("/",0)==0,i=i.split("/");for(var a=[],o=0;o<i.length;){var s=i[o++];s=="."?r&&o==i.length&&a.push(""):s==".."?((a.length>1||a.length==1&&a[0]!="")&&a.pop(),r&&o==i.length&&a.push("")):(a.push(s),r=!0)}i=a.join("/")}}return n?t.Sb=i:n=e.g.toString()!=="",n?Lr(t,e.g.clone()):n=!!e.Rc,n&&(t.Rc=e.Rc),t},f.clone=function(){return new ht(this)};function zs(e,t,n){e.jc=n?la(t,!0):t,e.jc&&(e.jc=e.jc.replace(/:$/,""))}function Ws(e,t,n){e.Db=n?la(t,!0):t}function Oc(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.Ed=t}else e.Ed=null}function Lr(e,t,n){t instanceof ca?e.g=t:(n||(t=vo(t,aS)),e.g=new ca(t))}function la(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function vo(e,t,n){return e!=null?(e=encodeURI(e).replace(t,nS),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function nS(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Mp=/[#\/\?@]/g,iS=/[#\?:]/g,rS=/[#\?]/g,aS=/[#\?@]/g,oS=/#/g;function ca(e){this.g=e||null}function Xs(e){if(!e.eb&&(e.eb=new Map,e.Wd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(i>=0){var a=t[n].substring(0,i);r=t[n].substring(i+1)}else a=t[n];a=decodeURIComponent(a),r=r||"",e.add(a,decodeURIComponent(r))}}f=ca.prototype,f.eb=null,f.Wd=null;function Cp(e){return Xs(e),e.Wd}f.add=function(e,t){Xs(this),this.g=null;var n=this.eb.has(e)?this.eb.get(e):null;return n||this.eb.set(e,n=[]),n.push(t),this.Wd++,this},f.set=function(e,t){return Xs(this),this.g=null,this.eb.has(e)?this.eb.set(e,[t]):this.add(e,t),this},f.get=function(e){return Xs(this),this.eb.get(e)||[]},f.toString=function(){if(this.g)return this.g;if(!this.eb||!this.eb.size)return"";for(var e=[],t=m(this.eb.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=encodeURIComponent(i),i=this.eb.get(i);for(var r=0;r<i.length;r++){var a=n;i[r]!==""&&(a+="="+encodeURIComponent(i[r])),e.push(a)}}return this.g=e.join("&")},f.clone=function(){var e=new ca;if(e.g=this.g,this.eb){for(var t=new Map,n=m(this.eb),i=n.next();!i.done;i=n.next()){var r=m(i.value);i=r.next().value,r=r.next().value,t.set(i,r.concat())}e.eb=t,e.Wd=this.Wd}return e};function da(){}function Ci(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(t)?t.buffer:t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=pe(e);t=pe(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function _n(e){return ArrayBuffer.isView(e)?e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function pe(e,t,n){return n=n===void 0?1/0:n,_c(e,t===void 0?0:t,n,Uint8Array)}function Pp(e,t,n){return n=n===void 0?1/0:n,_c(e,t===void 0?0:t,n,Uint16Array)}function ln(e,t,n){return n=n===void 0?1/0:n,_c(e,t===void 0?0:t,n,DataView)}function _c(e,t,n,i){var r=ArrayBuffer.isView(e)?e.buffer:e,a=1;"BYTES_PER_ELEMENT"in i&&(a=i.BYTES_PER_ELEMENT);var o=((e.byteOffset||0)+e.byteLength)/a;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/a,o))),new i(r,e,Math.floor(Math.min(e+Math.max(n,0),o))-e)}Y("shaka.util.BufferUtils",da),da.toDataView=ln,da.toUint16=Pp,da.toUint8=pe,da.toArrayBuffer=_n,da.equal=Ci;function Rp(e,t){if(e===t||!e.length||!t.length)return!0;e=m(e);for(var n=e.next();!n.done;n=e.next()){if(n=n.value,Ys(n))return!0;for(var i=m(t),r=i.next();!r.done;r=i.next())if(r=r.value,n.keySystem===r.keySystem||Ys(r))return!0}return!1}function Dp(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=m(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=m(t),a=r.next();!a.done;a=r.next())if(a=a.value,i.keySystem==a.keySystem){r=new Map;for(var o=m((i.initData||[]).concat(a.initData||[])),s=o.next();!s.done;s=o.next())s=s.value,r.set(s.keyId,s);r=Array.from(r.values()),o=i.keyIds&&a.keyIds?new Set([].concat(z(i.keyIds),z(a.keyIds))):i.keyIds||a.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||a.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||a.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||a.persistentStateRequired,videoRobustness:i.videoRobustness||a.videoRobustness,audioRobustness:i.audioRobustness||a.audioRobustness,serverCertificate:i.serverCertificate||a.serverCertificate,serverCertificateUri:i.serverCertificateUri||a.serverCertificateUri,initData:r,keyIds:o});break}else Ys(i)?n.push(i):Ys(a)&&n.push(a)}return n}function jc(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function yo(e){return e?!!e.match(/^com\.apple\.fps/):!1}function Ys(e){return(e=e.licenseServerUri)?e.startsWith("data:application/json;base64,"):!1}function Uc(e,t,n,i){return i=[].concat(z(new Set(i))).sort().join("#"),e+"#"+t+"#"+n+"#"+i}var Js=new at(function(){return _n(new Uint8Array([0]))}),fa=new Map;function D(e,t,n){var i=Et.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(r){this.stack=r.stack}}D.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},Y("shaka.util.Error",D),D.Severity={RECOVERABLE:1,CRITICAL:2},D.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},D.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM:4055,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,QUEUE_INDEX_OUT_OF_BOUNDS:7007,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007};function Nr(){}function ot(e){if(!e)return"";if(e=pe(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),P.TextDecoder&&!Te().yh())return e=new TextDecoder().decode(e),e.includes("ï¿½")&&mi('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var i=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(i=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(i=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(i=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):i=e[n],i<=65535)t+=String.fromCharCode(i);else{i-=65536;var r=i&1023;t+=String.fromCharCode(55296+(i>>10)),t+=String.fromCharCode(56320+r)}}return t}function rr(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new D(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=ln(e);for(var r=0;r<n;r++)i[r]=e.getUint16(r*2,t);return $s.value()(i)}function vi(e){function t(i){return n.byteLength<=i||n[i]>=9&&n[i]<=126}if(!e)return"";var n=pe(e);if(n[0]==239&&n[1]==187&&n[2]==191)return ot(n);if(n[0]==254&&n[1]==255)return rr(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return rr(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return rr(e,!1);if(n[1]==0&&n[3]==0)return rr(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return ot(e);throw new D(2,2,2003)}function Zn(e){if(P.TextEncoder&&!Te().yh()){var t=new TextEncoder;return _n(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return _n(t)}function Bc(e,t){for(var n=new ArrayBuffer(e.length*2),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(r*2,e.charCodeAt(r),t);return n}function nn(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":"Â ","&lrm;":"â€Ž","&rlm;":"â€"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(r){return r[1]=="#"?(r=r[2]=="x"||r[2]=="X"?parseInt(r.substring(3),16):parseInt(r.substring(2),10),r>=0&&r<=1114111?String.fromCodePoint(r):""):t[r]||"'"}):e||""}Y("shaka.util.StringUtils",Nr),Nr.resetFromCharCode=function(){$s.g=void 0},Nr.toUTF16=Bc,Nr.toUTF8=Zn,Nr.fromBytesAutoDetect=vi,Nr.fromUTF16=rr,Nr.fromUTF8=ot;var $s=new at(function(){function e(n){try{var i=new Uint8Array(n);return String.fromCharCode.apply(null,i).length>0}catch{return!1}}for(var t={Pc:65536};t.Pc>0;t={Pc:t.Pc},t.Pc/=2)if(e(t.Pc))return function(n){return function(i){for(var r="",a=0;a<i.length;a+=n.Pc)r+=String.fromCharCode.apply(null,i.subarray(a,a+n.Pc));return r}}(t);return null});function Vt(){}function Qs(e){return e=pe(e),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64",omitPadding:!1}):(e=$s.value()(e),btoa(e))}function Pi(e,t){return t=t??!0,Uint8Array.prototype.toBase64?pe(e).toBase64({alphabet:"base64url",omitPadding:!t}):(e=Qs(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,""))}function jn(e){if(!("fromBase64"in Uint8Array)){e=P.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}return e=e.replace(/\s+/g,""),Uint8Array.fromBase64(e,{alphabet:/[-_]/.test(e)?"base64url":"base64"})}function Or(e){if(!("fromHex"in Uint8Array)){for(var t=e.length/2,n=new Uint8Array(t),i=0;i<t;i++)n[i]=P.parseInt(e.substr(i*2,2),16);return n}return Uint8Array.fromHex(e)}function Ri(e){var t=pe(e);if(!Uint8Array.prototype.toHex){e="",t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}return t.toHex()}function mt(){for(var e=Et.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var i=n=0;i<e.length;++i){var r=e[i];ArrayBuffer.isView(r)&&r.BYTES_PER_ELEMENT===1?t.set(r,n):t.set(pe(r),n),n+=r.byteLength}return t}Y("shaka.util.Uint8ArrayUtils",Vt),Vt.concat=mt,Vt.toHex=Ri,Vt.fromHex=Or,Vt.fromBase64=jn,Vt.toBase64=Pi,Vt.toStandardBase64=Qs;function Mt(e,t,n){if(n=n===void 0?"":n,t.length==0)return e;if(e.length==1&&t.length==1){var i=new ht(e[0]);return t=new ht(t[0]),t=i.resolve(t),n&&Lr(t,n),[t.toString()]}t=t.map(function(s){return new ht(s)}),i=[],e=m(e);for(var r=e.next();!r.done;r=e.next()){r=new ht(r.value);for(var a=m(t),o=a.next();!o.done;o=a.next())o=r.resolve(o.value),n&&Lr(o,n),i.push(o.toString())}return i}function Di(e,t,n,i,r){return t={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set,mediaTypes:r},i&&(t.keySystemUris=new Set([i])),!n&&yo(e)&&t.initData.push({initDataType:"sinf",initData:new Uint8Array(0),keyId:null}),t}function Lp(e,t){t=t===void 0?"cenc":t;var n=[],i=[],r=[];e.forEach(function(o,s){var u=s;u.length!=22&&(u=Pi(Or(s),!1));var l=o;l.length!=22&&(l=Pi(Or(o),!1)),o={kty:"oct",kid:u,k:l},n.push(o),i.push(o.kid),r.push(s)}),e=JSON.stringify({keys:n});var a=JSON.stringify({kids:i});return a=[{initData:pe(Zn(a)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+P.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:a,keyIds:new Set(r)}}function ha(e,t){if(t.length==1)return t[0];if(e=cn(e,t),e!=null)return e;throw new D(2,4,4025,t)}function cn(e,t){var n=Op.get(e);n=m(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;for(var r=m(t),a=r.next();!a.done;a=r.next())if(a=a.value,i.test(a.trim()))return a.trim()}return e==xe?"":null}function Fc(e,t){var n=[];e=Op.get(e),e=m(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=m(t),a=r.next();!a.done;a=r.next())a=a.value,i.test(a.trim())&&n.push(a.trim())}return n}var xe="text",vt={va:"video",$:"audio",Na:xe,Yf:"image",vl:"application"},Np=1/15,Op=new Map().set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/,/^apac$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function bo(e,t,n,i){this.g=null,this.l=e,this.i=t,this.m=n,this.o=i,this.j=!1;e:{if(typeof libDPIModule>"u"&&Ee("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,Ce("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{Ee("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(Ee("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||Ee(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Zs(e,t,n,i){i.type!=="video"||e.o&&!i.baseOriginalId||e.g&&e.g.appendBuffer(t,"video",i.id,-n,!e.o)}function _p(e){e.g&&e.i.classList.add("shaka-hidden")}bo.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function jp(e){return e&&typeof LCEVCdec<"u"?e.codecs=="lvc1":!1}Y("shaka.lcevc.Dec",bo),bo.prototype.release=bo.prototype.release;function wo(){}function _r(e,t){pa.set(e,t)}function sS(){var e={};if(Te(),Ai())for(var t=m(pa.keys()),n=t.next();!n.done;n=t.next())e[n.value]=!0;for(t=m(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]),n=t.next();!n.done;n=t.next())n=n.value,e[n]=Ai()?pa.has(n):$r().canPlayType(n)!="";return e}function Up(e,t){if(t){var n=pa.get(t.toLowerCase());if(n)return n}throw new D(2,4,4e3,e,t)}Y("shaka.media.ManifestParser",wo),wo.unregisterParserByMime=function(e){pa.delete(e)},wo.registerParserByMime=_r,wo.registerParserByExtension=function(){Ce("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},wo.AccessibilityPurpose={Dm:"visually impaired",Ol:"hard of hearing",lm:"spoken subtitles"};var pa=new Map;function So(){}So.prototype.extract=function(){},So.prototype.decode=function(){return[]},So.prototype.clear=function(){},So.prototype.getStreams=function(){return[]};function Vc(){}Vc.prototype.init=function(){},Vc.prototype.parse=function(){return[]};function Bp(){}f=Bp.prototype,f.init=function(){},f.Af=function(){},f.Qd=function(){},f.remove=function(){},f.Zf=function(){},Y("shaka.media.IClosedCaptionParser",Bp);function di(e){this.h=new Map,this.i=0,this.j=new Vc,(e=Fp(e.toLowerCase()))&&(this.j=e()),this.g=new So,(e=jr)&&(this.g=e(),this.h.set(this.i,this.g))}f=di.prototype,f.init=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?-1:n,n!=-1&&this.i!=n){t=n;var i=this.h.get(t);this.h.set(this.i,this.g),i?this.g=i:((i=jr)&&(this.g=i()),this.h.set(t,this.g))}else t||this.Qd();this.j.init(e),n!=-1&&(this.i=n)},f.Af=function(e){e=this.j.parse(e),e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=pe(t.packet);n.length>0&&this.g.extract(n,t.pts)}return this.g.decode()},f.Qd=function(){this.g.clear()},f.remove=function(e){e=e===void 0?[]:e,e=new Set(e);for(var t=m(this.h.keys()),n=t.next();!n.done;n=t.next())if(n=n.value,!e.has(n)){var i=this.h.get(n);i&&i.clear(),this.h.delete(n)}},f.Zf=function(){return this.g.getStreams()};function Hc(e,t){Gc.set(e,t)}function Fp(e){return Gc.get(e)}Y("shaka.media.ClosedCaptionParser",di),di.findDecoder=function(){return jr},di.unregisterDecoder=function(){jr=null},di.registerDecoder=function(e){jr=e},di.findParser=Fp,di.unregisterParser=function(e){Gc.delete(e)},di.registerParser=Hc;var Gc=new Map,jr=null;function Ur(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=vn,this.scroll=Vp}Y("shaka.text.CueRegion",Ur);var vn=1;Ur.units={PX:0,PERCENTAGE:vn,LINES:2};var Vp="";Ur.scrollMode={NONE:Vp,UP:"up"};function ga(e){this.h=e||"",this.g=0}function ma(e){ar(e,/[ \t]+/gm)}function ar(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function Br(e){return e.g==e.h.length?null:(e=ar(e,/[^ \t\n]*/gm))?e[0]:null}function To(e){if(e=ar(e,uS),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return t>59||n>59?null:(Number(e[6])||0)/1e3+n+t*60+(Number(e[1])||0)*3600}function va(e){return e?To(new ga(e)):null}var uS=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function eu(){}function ei(e){function t(i){switch(typeof i){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return i;default:if(!i||ArrayBuffer.isView(i))return i;if(n.has(i))return null;var r=Array.isArray(i);if(i.constructor!=Object&&!r)return null;n.add(i);var a=r?[]:{},o;for(o in i)a[o]=t(i[o]);return r&&(a.length=i.length),a}}var n=new WeakSet;return t(e)}function or(e){var t={},n;for(n in e)t[n]=e[n];return t}function tu(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var i=n.toString(),r=e[n];r!==void 0&&(r=tu(r))&&t.push(i+":"+r)}e="["+t.join(",")+"]"}else if(typeof e=="function")e="";else if(e instanceof Object){for(n=Object.keys(e),n.sort(),t=[],n=m(n),i=n.next();!i.done;i=n.next())r=i.value,i=JSON.stringify(r),r=e[r],r!==void 0&&(r=tu(r))&&t.push(i+":"+r);e="{"+t.join(",")+"}"}else e=JSON.stringify(e);return e}Y("shaka.util.ObjectUtils",eu),eu.alphabeticalKeyOrderStringify=tu,eu.shallowCloneObject=or,eu.cloneObject=ei;function xo(e,t){var n=n===void 0?!1:n;return e=vi(e),Fr(e,t,n)}function Fr(e,t,n){return e=lS(e,n===void 0?!1:n),!t&&e.length?e[0]:(e=e.find(function(i){return t.split(",").includes(i.tagName)}))?e:null}function qc(e){return zc.has(e)?zc.get(e):""}function lS(e,t){function n(a,o){o=o===void 0?!1:o;for(var s=[];e[r];)if(e.charCodeAt(r)==60){if(e.charCodeAt(r+1)===47){o=r+2,r=e.indexOf(">",r),o=e.substring(o,r);var u=o.indexOf(a);if(u==-1){var l=a.indexOf(".");l>0&&(u=o.indexOf(a.substring(0,l)))}if(u==-1)throw a=e.substring(0,r).split(`
`),Error(`Unexpected close tag
Line: `+(a.length-1)+`
Column: `+(a[a.length-1].length+1)+`
Char: `+e[r]);r+1&&(r+=1);break}else if(e.charCodeAt(r+1)===33){if(e.charCodeAt(r+2)==45){for(;r!==-1&&(e.charCodeAt(r)!==62||e.charCodeAt(r-1)!=45||e.charCodeAt(r-2)!=45||r==-1);)r=e.indexOf(">",r+1);r===-1&&(r=e.length)}else if(e.charCodeAt(r+2)===91&&e.charCodeAt(r+8)===91&&e.substr(r+3,5).toLowerCase()==="cdata"){u=e.indexOf("]]>",r),u==-1?(s.push(e.substr(r+9)),r=e.length):(s.push(e.substring(r+9,u)),r=u+3);continue}r++;continue}e:{l=o,r++;var c=i(),d={};for(u=[];e.charCodeAt(r)!==62&&e[r];){var h=e.charCodeAt(r);if(h>64&&h<91||h>96&&h<123){h=i();for(var p=e.charCodeAt(r);p&&p!==39&&p!==34&&!(p>64&&p<91||p>96&&p<123)&&p!==62;)r++,p=e.charCodeAt(r);var g=r+1;if(r=e.indexOf(e[r],g),g=(" "+e.slice(g,r)).slice(1),p===39||p===34){if(r===-1){if(l={tagName:c,attributes:d,children:u,parent:null},t)for(c=0;c<u.length;c++)typeof u[c]!="string"&&(u[c].parent=l);u=l;break e}}else g=null,r--;if(h.startsWith("xmlns:")){p=g;var y=h.split(":")[1];zc.set(p,y),Wc.set(y,p)}c==="tt"&&h==="xml:space"&&g==="preserve"&&(l=!0),d[h]=g}r++}for(e.charCodeAt(r-1)!==47?(r++,u=n(c,l)):r++,l={tagName:c,attributes:d,children:u,parent:null},c=u.length,d=0;d<c;d++)h=u[d],typeof h!="string"?t&&(h.parent=l):d==c-1&&h==`
`&&u.pop();u=l}if(s.push(u),typeof u=="string")break;u.tagName[0]==="?"&&u.children&&(s.push.apply(s,z(u.children)),u.children=[])}else u=r,r=e.indexOf("<",r)-1,r===-2&&(r=e.length),u=(" "+e.slice(u,r+1)).slice(1),o?u.length>0&&s.push(u):(s.length&&u.length==1&&u[0]==`
`||u.trim().length>0)&&s.push(u),r++;return s}function i(){for(var a=r;`\r
	>/= `.indexOf(e[r])===-1&&e[r];)r++;return(" "+e.slice(a,r)).slice(1)}var r=0;return n("")}function nu(e){return typeof e=="string"}function Hp(e){var t=[];if(!e.children)return[];e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function Ve(e,t){var n=[];if(!e.children)return[];e=m(e.children);for(var i=e.next();!i.done;i=e.next())i=i.value,i.tagName===t&&n.push(i);return n}function pt(e){return typeof e=="string"?nn(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:nn(e))}function rn(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=pt(e))&&(e=e.trim()),e):null}function fi(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=m(e.children);for(var i=e.next();!i.done;i=e.next())fi(i.value,t,n)}return n}function tt(e,t){return e=Ve(e,t),e.length!=1?null:e[0]}function Un(e,t,n){return e=Gp(e,t,n),e.length!=1?null:e[0]}function ge(e,t,n,i){i=i===void 0?null:i;var r=null;return e=e.attributes[t],e!=null&&(r=n(e)),r??i}function Li(e,t,n){return t=qc(t),e.attributes[t+":"+n]||null}function Gp(e,t,n){var i=qc(t);if(t=[],e.children)for(n=i?i+":"+n:n,e=m(e.children),i=e.next();!i.done;i=e.next())(i=i.value)&&i.tagName===n&&t.push(i);return t}function yi(e,t,n){t=m(t);for(var i=t.next();!i.done;i=t.next())if(i=Li(e,i.value,n))return i;return null}function Ni(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function bi(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function iu(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Lt(e){return e=Number(e),e%1===0?e:null}function wi(e){return e=Number(e),e%1===0&&e>0?e:null}function Nt(e){return e=Number(e),e%1===0&&e>=0?e:null}function ru(e){return e=Number(e),isNaN(e)?null:e}function au(e){return e?e.toLowerCase()==="true":!1}function cS(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function ou(e){var t=[];e=nn(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=m(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=n.match(/^([\w]+)/);if(i){var r=n.match(/(@id='(.*?)')/),a=n.match(/(@t='(\d+)')/),o=n.match(/(@n='(\d+)')/),s=n.match(/\[(\d+)\]/);t.push({name:i[0],id:r?r[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:a?Number(a[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:o?Number(o[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:s?Number(s[1])-1:null,Ec:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Ec=n.slice(1))}return t}function qp(e,t){var n=ou(t.attributes.sel||"");if(n.length){var i=n[n.length-1],r=t.attributes.pos||null;n=i.position,n==null&&(i.t!==null&&(n=Kp(e,"t",i.t)),i.n!==null&&(n=Kp(e,"n",i.n))),n===null?n=r==="prepend"?0:e.length:r==="prepend"?--n:r==="after"&&++n,r=t.tagName,(i=i.Ec)&&e[n]?zp(e[n],r,i,rn(t)||""):(r!=="remove"&&r!=="replace"||e.splice(n,1),r!=="add"&&r!=="replace"||e.splice.apply(e,[n,0].concat(z(t.children))))}}function Kp(e,t,n){var i=0;e=m(e);for(var r=e.next();!r.done;r=e.next()){if(Number(r.value.attributes[t])===n)return i;i++}return null}function zp(e,t,n,i){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=i)}function Wp(e){var t="",n=e.tagName.split(":");n.length>0&&(t=n[0],t=Wc.has(t)?Wc.get(t):""),t=document.createElementNS(t,e.tagName);for(var i in e.attributes)t.setAttribute(i,e.attributes[i]);for(e=m(e.children),i=e.next();!i.done;i=e.next())i=i.value,n=void 0,typeof i=="string"?n=new Text(i):n=Wp(i),t.appendChild(n);return t}function Kc(e){if(!e)return null;var t={tagName:e.tagName,attributes:or(e.attributes),children:[],parent:null};e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n=="string"||(n=Kc(n),n.parent=t),t.children.push(n);return t}var zc=new Map,Wc=new Map;function Qe(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Ur,this.position=null,this.positionAlign=lu,this.size=0,this.textAlign=Si,this.direction=Io,this.writingMode=Vr,this.lineInterpretation=Eo,this.line=null,this.lineHeight="",this.lineAlign=Hr,this.displayAlign=ko,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=eg,this.fontStyle=Jc,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={columns:32,rows:15}}function Xp(e,t){return e=new Qe(e,t,""),e.lineBreak=!0,e}Qe.prototype.clone=function(){var e=new Qe(0,0,""),t;for(t in this)e[t]=this[t],Array.isArray(e[t])&&(e[t]=e[t].slice());return e};function su(e,t){if(e.payload!=t.payload||!(Math.abs(e.startTime-t.startTime)<.001&&Math.abs(e.endTime-t.endTime)<.001))return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!ir(e.nestedCues,t.nestedCues,su))return!1}else if(n=="region"||n=="cellResolution"){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!ir(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}function uu(e,t){t=t===void 0?new Map:t;var n=e.payload;if(n.includes("<")){t.size===0&&Yp(t);var i=n;n=[];for(var r=-1,a=0;a<i.length;a++)i[a]==="<"?r=a+1:i[a]===">"&&r>0&&(r=i.substr(r,a-r),r.match(fS)&&n.push(r),r=-1);for(n=m(n),a=n.next();!a.done;a=n.next())a=a.value,i=i.replace("<"+a+">",'<div time="'+a+'">'),i+="</div>";e:{a=i,r=[];var o=-1;n="",i=!1;for(var s=0;s<a.length;s++)if(a[s]==="/"){var u=a.indexOf(">",s);if(u===-1){n=a;break e}if((u=a.substring(s+1,u))&&u=="v"){i=!0;var l=null;if(r.length&&(l=r[r.length-1]),l){if(l===u)n+="/"+u+">";else{if(!l.startsWith("v")){n+=a[s];continue}n+="/"+l+">"}s+=u.length+1}else n+=a[s]}else n+=a[s]}else a[s]==="<"?(o=s+1,a[o]!="v"&&(o=-1)):a[s]===">"&&o>0&&(r.push(a.substr(o,s-o)),o=-1),n+=a[s];for(a=m(r),r=a.next();!r.done;r=a.next())r=r.value,o=r.replace(" ",".voice-"),n=n.replace("<"+r+">","<"+o+">"),n=n.replace("</"+r+">","</"+o+">"),i||(n+="</"+o+">")}n=dS(n),e.payload="",i="<span>"+n.replace(/\n/g,"<br />")+"</span>";try{var c=Fr(i,"span")}catch{}if(c)if(c=c.children,c.length!=1||c[0].tagName)for(c=m(c),n=c.next();!n.done;n=c.next())Jp(n.value,e,t);else e.payload=nn(n);else e.payload=nn(n)}else e.payload=nn(n)}function Yp(e){for(var t=m(Object.entries(Qp)),n=t.next();!n.done;n=t.next()){var i=m(n.value);n=i.next().value,i=i.next().value;var r=new Qe(0,0,"");r.color=i,e.set("."+n,r)}for(t=m(Object.entries(Zp)),n=t.next();!n.done;n=t.next())i=m(n.value),n=i.next().value,i=i.next().value,r=new Qe(0,0,""),r.backgroundColor=i,e.set("."+n,r)}function dS(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(r){return t[r]||""}):e||""}function Jp(e,t,n){var i=t.clone();if(i.nestedCues=[],i.payload="",i.rubyTag="",i.line=null,i.region=new Ur,i.position=null,i.size=0,i.textAlign=Si,e.tagName)for(var r=m(e.tagName.split(/(?=[ .])+/g)),a=r.next();!a.done;a=r.next()){var o=a=a.value;if(o.startsWith(".voice-")){var s=o.split("-").pop();o='v[voice="'+s+'"]',n.has(o)||(o="v[voice="+s+"]")}switch(n.has(o)&&(s=i,o=n.get(o))&&(s.backgroundColor=Ao(o.backgroundColor,s.backgroundColor),s.color=Ao(o.color,s.color),s.fontFamily=Ao(o.fontFamily,s.fontFamily),s.fontSize=Ao(o.fontSize,s.fontSize),s.textShadow=Ao(o.textShadow,s.textShadow),s.fontWeight=o.fontWeight,s.fontStyle=o.fontStyle,s.opacity=o.opacity,s.rubyTag=o.rubyTag,s.textCombineUpright=o.textCombineUpright,s.wrapLine=o.wrapLine),a){case"br":i=Xp(i.startTime,i.endTime),t.nestedCues.push(i);return;case"b":i.fontWeight=ya;break;case"i":i.fontStyle=ba;break;case"u":i.textDecoration.push(Oi);break;case"font":(a=e.attributes.color)&&(i.color=a);break;case"div":if(a=e.attributes.time,!a)break;(a=va(a))&&(i.startTime=a);break;case"ruby":case"rp":case"rt":i.rubyTag=a}}if(r=e.children,nu(e)||r.length==1&&nu(r[0]))for(n=pt(e).split(`
`),e=!0,n=m(n),r=n.next();!r.done;r=n.next())r=r.value,e||(e=Xp(i.startTime,i.endTime),t.nestedCues.push(e)),r.length>0&&(e=i.clone(),e.payload=nn(r),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(i),t=m(r),e=t.next();!e.done;e=t.next())Jp(e.value,i,n)}function Ao(e,t){return e&&e.length>0?e:t}Y("shaka.text.Cue",Qe),Qe.parseCuePayload=uu,Qe.equal=su,Qe.prototype.clone=Qe.prototype.clone;var lu="auto";Qe.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:lu};var Si="center",Xc={LEFT:"left",RIGHT:"right",CENTER:Si,START:"start",END:"end"};Qe.textAlign=Xc;var ko="after",$p={BEFORE:"before",CENTER:"center",AFTER:ko};Qe.displayAlign=$p;var Io="ltr";Qe.direction={HORIZONTAL_LEFT_TO_RIGHT:Io,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Vr="horizontal-tb";Qe.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Vr,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Eo=0;Qe.lineInterpretation={LINE_NUMBER:Eo,PERCENTAGE:1};var Hr="start",Yc={CENTER:"center",START:Hr,END:"end"};Qe.lineAlign=Yc;var Qp={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Qe.defaultTextColor=Qp;var Zp={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Qe.defaultTextBackgroundColor=Zp;var eg=400,ya=700;Qe.fontWeight={NORMAL:eg,BOLD:ya};var Jc="normal",ba="italic",tg={NORMAL:Jc,ITALIC:ba,OBLIQUE:"oblique"};Qe.fontStyle=tg;var Oi="underline";Qe.textDecoration={UNDERLINE:Oi,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var fS=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function sr(){}sr.prototype.destroy=function(){};function _i(e,t,n){$c.set(e.toLowerCase().split(";")[0]+"-"+n,{priority:n,Bf:t})}function wa(e,t){for(var n=e.toLowerCase().split(";")[0],i=m([ng,Zc,Qc,ur]),r=i.next();!r.done;r=i.next())if(r=$c.get(n+"-"+r.value)){var a=r.Bf(),o=a.isSupported(e,t);if(a.destroy(),o)return r.Bf}return null}Y("shaka.transmuxer.TransmuxerEngine",sr),sr.findTransmuxer=wa,sr.unregisterTransmuxer=function(e,t){$c.delete(e.toLowerCase().split(";")[0]+"-"+t)},sr.registerTransmuxer=_i,sr.prototype.destroy=sr.prototype.destroy;var $c=new Map,ur=1,Qc=2,Zc=3,ng=4;sr.PluginPriority={FALLBACK:ur,PREFERRED_SECONDARY:Qc,PREFERRED:Zc,APPLICATION:ng};function ed(){}function dt(e,t){var n=e;return t&&!ji.includes(e)&&(n+='; codecs="'+t+'"'),n}function cu(e,t){return t&&(e+='; codecs="'+t+'"'),e}function td(e,t,n){var i=dt(e,t);return t=cu(e,t),wa(t)?(e=wa(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?i.replace("video","audio"):i,n}function Mo(e){return e.split(";")[0].split("/")[1]}function Ht(e){var t=ig(e);switch(e=t[0].toLowerCase(),t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):case e==="ac3":case e==="ac-3":return"ac-3";case(e==="mp4a"&&t==="a6"):case e==="eac3":case e==="ec-3":return"ec-3";case e==="ac-4":return"ac-4";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="vp09":case e==="vp9":return"vp9";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return t&&t.startsWith("05")?"dovi-p5":"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc";case e==="lvc1":return"lcevc"}return e}function lr(e){var t=[];e=m(e.split(","));for(var n=e.next();!n.done;n=e.next())n=ig(n.value),t.push(n[0]);return t.sort().join(",")}function yn(e){return e.split(";")[0]}function dn(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function du(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function ig(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}Y("shaka.util.MimeUtils",ed),ed.getFullTypeWithAllCodecs=cu,ed.getFullType=dt,new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var ji=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Ui(e){this.i=null,this.j=e,this.B=this.G=!1,this.m=this.u=0,this.o=1/0,this.h=this.g=null,this.F="",this.C=function(){},this.l=new Map}function Ot(e,t){Ro.set(e,t)}function Co(e){return Ro.get(e)}function Po(e){return Ro.has(e)?!0:e=="application/cea-608"||e=="application/cea-708"?!!jr:!1}Ui.prototype.destroy=function(){return this.j=this.i=null,this.l.clear(),Promise.resolve()};function hS(e,t,n,i,r){var a,o,s,u,l,c,d,h;return R(function(p){if(p.g==1)return T(p,Promise.resolve(),2);if(!e.i||!e.j)return p.return();if(n==null||i==null)return e.i.parseInit(pe(t)),p.return();for(a=e.B?0:e.u,o=e.G||e.B?n:e.u,s={periodStart:a,segmentStart:n,segmentEnd:i,vttOffset:o},u=e.i.parseMedia(pe(t),s,r,[]),l=m(u),c=l.next();!c.done;c=l.next())d=c.value,e.C(d,r||null,s);h=u.filter(function(g){return g.startTime>=e.m&&g.startTime<e.o}),e.j.append(h),e.g==null&&(e.g=Math.max(n,e.m)),e.h=Math.min(i,e.o),X(p)})}Ui.prototype.remove=function(e,t,n){n=n===void 0?!1:n;var i=this;return R(function(r){if(r.g==1)return T(r,Promise.resolve(),2);if(e>=t||n&&(mS(i,e,t),i.F===""))return r.return();i.j&&i.j.remove(e,t)&&i.g!=null&&(t<=i.g||e>=i.h||(e<=i.g&&t>=i.h?i.g=i.h=null:e<=i.g&&t<i.h?i.g=t:e>i.g&&t>=i.h&&(i.h=e)),og(i)),X(r)})};function pS(e,t,n){e.m=t,e.o=n}function rg(e,t,n){e.F=t,(t=e.l.get(t))&&(t=t.filter(function(i){return i.endTime<=n}),t.length&&e.j.append(t))}function ag(e,t,n){t.startTime+=n,t.endTime+=n,t=m(t.nestedCues);for(var i=t.next();!i.done;i=t.next())ag(e,i.value,n)}function gS(e,t,n){var i=new Map;t=m(t);for(var r=t.next();!r.done;r=t.next()){var a=r.value;r=a.stream,a=a.cue,i.getOrInsert(r,[]),ag(e,a,n),a.startTime>=e.m&&a.startTime<e.o&&(i.get(r).push(a),r==e.F&&e.j.append([a]))}for(n=m(i.keys()),t=n.next();!t.done;t=n.next())for(r=t.value,t=e.l.getOrInsertComputed(r,function(){return[]}),r=m(i.get(r)),a=r.next();!a.done;a=r.next())t.push(a.value);og(e)}function mS(e,t,n){for(var i=m(e.l.keys()),r=i.next();!r.done;r=i.next()){r=r.value;var a=e.l.get(r);a=a.filter(function(o){return o.startTime<t||o.endTime>=n}),e.l.set(r,a)}}function og(e){for(var t=1/0,n=-1/0,i=m(e.l.values()),r=i.next();!r.done;r=i.next()){r=m(r.value);for(var a=r.next();!a.done;a=r.next())a=a.value,t=Math.min(t,a.startTime),n=Math.max(n,a.endTime)}t!==1/0&&n!==-1/0&&(e.g=e.g==null?Math.max(t,e.m):Math.min(e.g,Math.max(t,e.m)),e.h=Math.max(e.h,Math.min(n,e.o)))}Y("shaka.text.TextEngine",Ui),Ui.prototype.destroy=Ui.prototype.destroy,Ui.findParser=Co,Ui.unregisterParser=function(e){Ro.delete(e)},Ui.registerParser=Ot;var Ro=new Map;function Do(e){this.h=e,this.g=null}Do.prototype.ka=function(e){var t=this;this.stop();var n=!0,i=null;return this.g=function(){P.clearTimeout(i),n=!1},i=P.setTimeout(function(){n&&t.h()},e*1e3),this},Do.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function Ae(e){this.h=e,this.g=null}Ae.prototype.Jb=function(){return this.stop(),this.h(),this},Ae.prototype.ka=function(e){var t=this;return this.stop(),this.g=new Do(function(){t.h()}).ka(e),this},Ae.prototype.Da=function(e){var t=this;return this.stop(),this.g=new Do(function(){t.g.ka(e),t.h()}).ka(e),this},Ae.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},Y("shaka.util.Timer",Ae),Ae.prototype.stop=Ae.prototype.stop,Ae.prototype.tickEvery=Ae.prototype.Da,Ae.prototype.tickAfter=Ae.prototype.ka,Ae.prototype.tickNow=Ae.prototype.Jb;function vS(e,t){return e.concat(t)}function yS(){}function cr(e){return e!=null}function fu(e,t){return Promise.race([t,new Promise(function(n,i){new Ae(i).ka(e)})])}function ti(){}function Sa(e,t){return e=Ue(e),t=Ue(t),e.split("-")[0]==t.split("-")[0]}function Lo(e,t){return e=Ue(e),t=Ue(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function nd(e,t){return e=Ue(e),t=Ue(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Ue(e){e=m(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=m(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=sg.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function Gr(e,t){return e=Ue(e),t=Ue(t),t==e?4:Lo(t,e)?3:nd(t,e)?2:Lo(e,t)?1:0}function hu(e){var t=e.indexOf("-");return e=t>=0?e.substring(0,t):e,e=e.toLowerCase(),e=sg.get(e)||e}function id(e){return e.language?Ue(e.language):e.audio&&e.audio.language?Ue(e.audio.language):e.video&&e.video.language?Ue(e.video.language):"und"}function pu(e,t){e=Ue(e);var n=new Set;t=m(t);for(var i=t.next();!i.done;i=t.next())n.add(Ue(i.value));for(t=m(n),i=t.next();!i.done;i=t.next())if(i=i.value,i==e)return i;for(t=m(n),i=t.next();!i.done;i=t.next())if(i=i.value,Lo(i,e))return i;for(t=m(n),i=t.next();!i.done;i=t.next())if(i=i.value,nd(i,e))return i;for(n=m(n),t=n.next();!t.done;t=n.next())if(t=t.value,Lo(e,t))return t;return null}Y("shaka.util.LanguageUtils",ti),ti.findClosestLocale=pu,ti.getLocaleForVariant=id,ti.getLocaleForText=function(e){return Ue(e.language||"und")},ti.getBase=hu,ti.relatedness=Gr,ti.areSiblings=function(e,t){var n=hu(e),i=hu(t);return e!=n&&t!=i&&n==i},ti.normalize=Ue,ti.isSiblingOf=nd,ti.isParentOf=Lo,ti.areLanguageCompatible=Sa,ti.areLocaleCompatible=function(e,t){return e=Ue(e),t=Ue(t),e==t};var sg=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function ug(){}function lg(e,t,n,i,r){if(r.length){var a=e.textStreams;r=m(r);for(var o=r.next(),s={};!o.done;s={Gh:void 0},o=r.next())if(s.Gh=o.value,o=a.filter(function(g){return function(y){return!!(y.codecs.startsWith(g.Gh)||y.mimeType.startsWith(g.Gh))}}(s)),o.length){a=o;break}e.textStreams=a}if(a=e.variants,(t.length||n.length)&&(a=bS(a,t,n)),i.length){for(t=new Ks,a=m(a),n=a.next();!n.done;n=a.next())n=n.value,t.push(String(n.video.width||0),n);var u=[];t.forEach(function(g,y){g=0;var b=[];y=m(y);for(var A=y.next(),x={};!A.done;x={Xf:void 0},A=y.next())x.Xf=A.value,A=i.filter(function(k){return function(M){return k.Xf.decodingInfos[0][M]}}(x)).length,A>g?(g=A,b=[x.Xf]):A==g&&b.push(x.Xf);u.push.apply(u,z(b))}),a=u}for(t=new Set,n=m(a),r=n.next();!r.done;r=n.next())r=r.value,r.video&&t.add(r.video);if(t.size){var l={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};r=Array.from(t).sort(function(g,y){return g.bandwidth&&y.bandwidth&&g.bandwidth!=y.bandwidth?g.bandwidth-y.bandwidth:g.width!=y.width?g.width-y.width:g.codecs&&y.codecs?(g=Ht(g.codecs),y=Ht(y.codecs),(l[g]||1)-(l[y]||1)):0});var c=[];for(t=new Map,n=function(g){var y=[String(g.width||""),String(g.height||""),String(Math.round(g.frameRate||0)),g.hdr||"",g.fastSwitching];return g.dependencyStream&&y.push(g.dependencyStream.baseOriginalId||""),g.roles&&y.push(g.roles.sort().join("_")),y.join(";")},r=m(r),o=r.next();!o.done;o=r.next()){o=o.value,s=n(o);var d=t.get(s)||[];if(d.length){var h=Ht(d[d.length-1].codecs),p=Ht(o.codecs);h==p&&(d.push(o),c.push(o.id))}else d.push(o),c.push(o.id);t.set(s,d)}e.variants=a.filter(function(g){return!((g=g.video)&&!c.includes(g.id))})}else e.variants=a}function bS(e,t,n){t=m(t);for(var i=t.next(),r={};!i.done;r={mj:void 0},i=t.next())if(r.mj=i.value,i=e.filter(function(a){return function(o){return o.video&&o.video.codecs.startsWith(a.mj)}}(r)),i.length){e=i;break}for(n=m(n),t=n.next(),i={};!t.done;i={Sh:void 0},t=n.next())if(i.Sh=t.value,t=e.filter(function(a){return function(o){return o.audio&&o.audio.codecs.startsWith(a.Sh)}}(i)),t.length){e=t;break}return e}function wS(e,t,n){e.variants=e.variants.filter(function(i){return gu(i,t,n)})}function gu(e,t,n){function i(o,s,u){return o>=s&&o<=u}if(e&&e.video&&e.video.width&&e.video.height){var r=e.video.width,a=e.video.height;if(a>r&&(a=m([a,r]),r=a.next().value,a=a.next().value),!i(r,t.minWidth,Math.min(t.maxWidth,n.width))||!i(a,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r*a,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!i(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function SS(e,t,n,i){return n=n===void 0?[]:n,i=i===void 0?{}:i,R(function(r){return r.g==1?T(r,cg(e,t,t.offlineSessionIds.length>0,n,i),2):(kS(t),T(r,IS(t),0))})}function cg(e,t,n,i,r){var a,o;return R(function(s){if(s.g==1)return Te().aj()&&TS(t.variants),T(s,rd(t.variants,n,!1,i),2);a=null,e&&(o=e.g)&&(a=o.keySystem),t.variants=t.variants.filter(function(u){var l=xS(u,a,r);if(!l){var c=[];u.audio&&c.push(vg(u.audio)),u.video&&c.push(vg(u.video))}return l}),X(s)})}function TS(e){var t=new Map().set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),n=new Set;e=m(e);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&n.add(i.video);for(n=m(n),e=n.next();!e.done;e=n.next()){e=e.value,i=m(t);for(var r=i.next();!r.done;r=i.next()){var a=m(r.value);if(r=a.next().value,a=a.next().value,e.codecs.includes(r)){e.codecs=e.codecs.replace(r,a);break}}}}function xS(e,t,n){if(!e.decodingInfos.some(function(u){return!(!u.supported||t&&(u=u.keySystemAccess)&&(n[u.keySystem]||u.keySystem)!=t)}))return!1;var i=Te(),r=i.Nb()==="Xbox";i=i.Oa()==="MOBILE"&&i.Ga()==="GECKO";var a=e.video,o=a&&a.width||0,s=a&&a.height||0;return r&&a&&(o>1920||s>1080)&&(a.codecs.includes("avc1.")||a.codecs.includes("avc3."))||(r=a&&a.dependencyStream)&&!jp(r)?!1:(e=e.audio,!(i&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}function dg(e,t){var n,i,r,a,o,s,u;return R(function(l){if(l.g==1){for(n=function(c,d){if(c){var h=or(c);return h.supported=c.supported&&d.supported,h.powerEfficient=c.powerEfficient&&d.powerEfficient,h.smooth=c.smooth&&d.smooth,d.keySystemAccess&&!h.keySystemAccess&&(h.keySystemAccess=d.keySystemAccess),h}return d},i=null,r=[],a=m(t),o=a.next(),s={};!o.done;s={cache:void 0,Se:void 0},o=a.next())u=o.value,s.Se=tu(u),s.cache=bu,s.cache.has(s.Se)?i=n(i,s.cache.get(s.Se)):r.push(AS(u).then(function(c){return function(d){var h=null;d=m(d||[]);for(var p=d.next();!p.done;p=d.next())h=n(h,p.value);h&&(c.cache.set(c.Se,h),i=n(i,h))}}(s)));return T(l,Promise.all(r),2)}i&&e.decodingInfos.push(i),X(l)})}function AS(e){var t=[""];e.video&&(t=dn(e.video.contentType).split(","));var n=[""];e.audio&&(n=dn(e.audio.contentType).split(","));var i=[];t=m(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;for(var a=m(n),o=a.next(),s={};!o.done;s={Qc:void 0},o=a.next())o=o.value,s.Qc=ei(e),e.video&&(s.Qc.video.contentType=dt(yn(s.Qc.video.contentType),r)),e.audio&&(s.Qc.audio.contentType=dt(yn(s.Qc.audio.contentType),o)),i.push(new Promise(function(u){return function(l,c){(Te().Oa()=="MOBILE"?fu(5,navigator.mediaCapabilities.decodingInfo(u.Qc)):navigator.mediaCapabilities.decodingInfo(u.Qc)).then(function(d){l(d)}).catch(c)}}(s)))}return Promise.all(i).catch(function(){return JSON.stringify(e),null})}function rd(e,t,n,i){var r,a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M,N;return R(function(I){switch(I.g){case 1:if(e.some(function(C){return C.decodingInfos.length}))return I.return();r=m(i),a=r.next(),o={};case 2:if(a.done){I.A(4);break}o.Ki=a.value,s=!1,u=m(e),l=u.next();case 5:if(l.done){I.A(7);break}c=l.value,d=fg(c,t,n).filter(function(C){return function(E){return E=E[0],(E.keySystemConfiguration&&E.keySystemConfiguration.keySystem)===C.Ki}}(o)),h=m(d),p=h.next();case 8:if(p.done){I.A(10);break}return g=p.value,T(I,dg(c,g),9);case 9:p=h.next(),I.A(8);break;case 10:c.decodingInfos.some(function(C){return C.supported})&&(s=!0),l=u.next(),I.A(5);break;case 7:if(s)return I.return();o={Ki:void 0},a=r.next(),I.A(2);break;case 4:y=m(e),b=y.next();case 12:if(b.done){I.A(0);break}A=b.value,x=fg(A,t,n).filter(function(C){return C=C[0],C=C.keySystemConfiguration&&C.keySystemConfiguration.keySystem,!C||!i.includes(C)}),k=m(x),M=k.next();case 15:if(M.done){b=y.next(),I.A(12);break}return N=M.value,T(I,dg(A,N),16);case 16:M=k.next(),I.A(15)}})}function fg(e,t,n){var i=e.audio,r=e.video,a=[],o=[];if(r)for(var s=m(r.fullMimeTypes),u=s.next();!u.done;u=s.next()){u=u.value;var l=dn(u);if(l.includes(",")&&!i){var c=l.split(","),d=yn(u);l=ha("video",c),c=ha("audio",c),c=No(c,d),d=td(d,c,"audio"),o.push({contentType:d,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(l=hg(l),u={contentType:td(yn(u),l,"video"),width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||30},r.hdr)switch(r.hdr){case"PQ":u.transferFunction="pq";break;case"HLG":u.transferFunction="hlg"}r.colorGamut&&(u.colorGamut=r.colorGamut),a.push(u)}if(i)for(s=m(i.fullMimeTypes),u=s.next();!u.done;u=s.next())l=u.value,u=yn(l),l=No(dn(l),u),u=td(u,l,"audio"),o.push({contentType:u,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio});for(s=[],a.length==0&&a.push(null),o.length==0&&o.push(null),a=m(a),u=a.next();!u.done;u=a.next())for(u=u.value,l=m(o),d=l.next();!d.done;d=l.next())d=d.value,c={type:n?"file":"media-source"},u&&(c.video=u),d&&(c.audio=d),s.push(c);if(o=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!o.length)return[s];for(e=[],n=new Map,o=m(o),a=o.next();!a.done;a=o.next())a=a.value,n.get(a.keySystem)||n.set(a.keySystem,[]),n.get(a.keySystem).push(a);for(o=t?"required":"optional",t=t?["persistent-license"]:["temporary"],a=m(n.keys()),u=a.next();!u.done;u=a.next()){for(u=u.value,d=n.get(u),l=new Map,d=m(d),c=d.next();!c.done;c=d.next()){c=c.value;var h=c.videoRobustness+","+c.audioRobustness;l.get(h)||l.set(h,[]),l.get(h).push(c)}for(l=m(l.values()),d=l.next();!d.done;d=l.next()){d=d.value,c=[],h=m(s);for(var p=h.next();!p.done;p=h.next()){p=Object.assign({},p.value);for(var g={keySystem:u,initDataType:"cenc",persistentState:o,distinctiveIdentifier:"optional",sessionTypes:t},y=m(d),b=y.next();!b.done;b=y.next()){if(b=b.value,b.initData&&b.initData.length){for(var A=new Set,x=m(b.initData),k=x.next();!k.done;k=x.next())A.add(k.value.initDataType);g.initDataType=b.initData[0].initDataType}b.distinctiveIdentifierRequired&&(g.distinctiveIdentifier="required"),b.persistentStateRequired&&(g.persistentState="required"),b.sessionType&&(g.sessionTypes=[b.sessionType]),i&&(g.audio?(b.encryptionScheme&&(g.audio.encryptionScheme=g.audio.encryptionScheme||b.encryptionScheme),g.audio.robustness=g.audio.robustness||b.audioRobustness):(g.audio={robustness:b.audioRobustness},b.encryptionScheme&&(g.audio.encryptionScheme=b.encryptionScheme)),g.audio.robustness==""&&delete g.audio.robustness),r&&(g.video?(b.encryptionScheme&&(g.video.encryptionScheme=g.video.encryptionScheme||b.encryptionScheme),g.video.robustness=g.video.robustness||b.videoRobustness):(g.video={robustness:b.videoRobustness},b.encryptionScheme&&(g.video.encryptionScheme=b.encryptionScheme)),g.video.robustness==""&&delete g.video.robustness)}p.keySystemConfiguration=g,c.push(p)}e.push(c)}}return e}function No(e,t){var n=Te();return e.toLowerCase()=="flac"?n.Ga()!="WEBKIT"?"flac":"fLaC":e.toLowerCase()==="opus"?n.Ga()!="WEBKIT"?"opus":Mo(t)=="mp4"?"Opus":"opus":e.toLowerCase()=="ac-3"&&n.se()?"ec-3":e}function hg(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function kS(e){e.textStreams=e.textStreams.filter(function(t){return t=dt(t.mimeType,t.codecs),Po(t)})}function IS(e){var t,n,i,r,a,o,s;return R(function(u){switch(u.g){case 1:t=[],n=m(e.imageStreams),i=n.next();case 2:if(i.done){u.A(4);break}if(r=i.value,a=r.mimeType,a=="application/mp4"&&r.codecs=="mjpg"&&(a="image/jpg"),wu.has(a)){u.A(5);break}if(o=PS.get(a),!o){wu.set(a,!1),u.A(5);break}return T(u,ES(o),7);case 7:s=u.h,wu.set(a,s);case 5:wu.get(a)&&t.push(r),i=n.next(),u.A(2);break;case 4:e.imageStreams=t,X(u)}})}function ES(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function qr(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,a=t?t.codecs:null,o=n?n.codecs:null,s=t?t.groupId:null,u=[];n&&u.push(n.mimeType),t&&u.push(t.mimeType),u=u[0]||null;var l=[];t&&l.push(t.kind),n&&l.push(n.kind),l=l[0]||null;var c=new Set;if(t)for(var d=m(t.roles),h=d.next();!h.done;h=d.next())c.add(h.value);if(n)for(d=m(n.roles),h=d.next();!h.done;h=d.next())c.add(h.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,videoLabel:null,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:u,audioMimeType:i,videoMimeType:r,codecs:"",audioCodec:a,videoCodec:o,primary:e.primary,roles:Array.from(c),audioRoles:null,videoRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,e.videoRoles=n.roles,e.videoLabel=n.label,(i=n.dependencyStream)&&(e.width=i.width||e.width,e.height=i.height||e.height,e.videoCodec=i.codecs||e.videoCodec,e.pixelAspectRatio=i.pixelAspectRatio||e.pixelAspectRatio,e.videoBandwidth&&i.bandwidth&&(e.videoBandwidth+=i.bandwidth)),o.includes(","))){e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage,e.audioMimeType=r,r=o.split(",");try{e.videoCodec=ha("video",r),e.audioCodec=ha("audio",r)}catch{}}return t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage,r=t.dependencyStream)&&(e.audioCodec=r.codecs||e.audioCodec,e.audioBandwidth&&r.bandwidth&&(e.audioBandwidth+=r.bandwidth)),n&&!e.videoBandwidth&&(t?e.audioBandwidth&&(e.videoBandwidth=e.bandwidth-e.audioBandwidth):e.videoBandwidth=e.bandwidth),t&&!e.audioBandwidth&&(n?e.videoBandwidth&&(e.audioBandwidth=e.bandwidth-e.videoBandwidth):e.audioBandwidth=e.bandwidth),t=[],e.videoCodec&&t.push(e.videoCodec),e.audioCodec&&t.push(e.audioCodec),e.codecs=t.join(", "),e}function Kr(e){return{id:e.id,active:!1,type:xe,bandwidth:e.bandwidth||0,language:e.language,label:e.label,kind:e.kind||null,mimeType:e.mimeType,codecs:e.codecs||null,primary:e.primary,roles:e.roles,accessibilityPurpose:e.accessibilityPurpose,forced:e.forced,originalTextId:e.originalId,originalLanguage:e.originalLanguage}}function ad(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=hi(e.segmentIndex));var r=e.tilesLayout;return i&&(r=i.tilesLayout||r),r&&t!=null&&(t/=Number(r.split("x")[0])),r&&n!=null&&(n/=Number(r.split("x")[1])),{id:e.id,type:"image",bandwidth:e.bandwidth||0,width:t,height:n,mimeType:e.mimeType,codecs:e.codecs||null,tilesLayout:r||null,originalImageId:e.originalId}}function mu(e){return e.__shaka_id||(e.__shaka_id=CS++),e.__shaka_id}function pg(e){var t={id:mu(e),active:e.mode!="disabled",type:xe,bandwidth:0,language:Ue(e.language||"und"),label:e.label,kind:e.kind,mimeType:null,codecs:null,primary:!1,roles:[],accessibilityPurpose:null,forced:e.kind=="forced",originalTextId:e.id,originalLanguage:e.language};return e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),t}function vu(e,t){var n=e?e.language:null;if(n={id:mu(e||t),active:e?e.enabled:t.selected,type:"variant",bandwidth:0,language:Ue(n||"und"),label:e?e.label:null,videoLabel:null,kind:e?e.kind:null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:e?e.kind=="main":!1,roles:[],forced:!1,audioRoles:null,videoRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:t?t.id:null,originalAudioId:e?e.id:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:n},e&&e.kind&&(n.roles=[e.kind],n.audioRoles=[e.kind]),e&&e.configuration&&(e.configuration.codec&&(n.audioCodec=e.configuration.codec,n.codecs=n.audioCodec),e.configuration.bitrate&&(n.audioBandwidth=e.configuration.bitrate,n.bandwidth+=n.audioBandwidth),e.configuration.sampleRate&&(n.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(n.channelsCount=e.configuration.numberOfChannels)),t&&t.configuration&&(t.configuration.codec&&(n.videoCodec=t.configuration.codec,n.codecs=n.codecs?n.codecs+(","+n.videoCodec):n.videoCodec),t.configuration.bitrate&&(n.videoBandwidth=t.configuration.bitrate,n.bandwidth+=n.videoBandwidth),t.configuration.framerate&&(n.frameRate=t.configuration.framerate),t.configuration.width&&(n.width=t.configuration.width),t.configuration.height&&(n.height=t.configuration.height),t.configuration.colorSpace&&t.configuration.colorSpace.transfer))switch(t.configuration.colorSpace.transfer){case"pq":n.hdr="PQ";break;case"hlg":n.hdr="HLG";break;case"bt709":n.hdr="SDR"}return n}function Oo(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function yu(e){return e.filter(function(t){return Oo(t)})}function Ta(e,t,n,i){var r=e,a=e.filter(function(u){return u.primary});a.length&&(r=a);var o=r.length?r[0].language:"";if(r=r.filter(function(u){return u.language==o}),t){var s=pu(Ue(t),e.map(function(u){return u.language}));s&&(r=e.filter(function(u){return Ue(u.language)==s}))}if(r=r.filter(function(u){return u.forced==i}),n){if(e=gg(r,n),e.length)return e}else if(e=r.filter(function(u){return u.roles.length==0}),e.length)return e;return e=r.map(function(u){return u.roles}).reduce(vS,[]),e.length?gg(r,e[0]):r}function gg(e,t){return e.filter(function(n){return n.roles.includes(t)})}function MS(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}function mg(e,t){t.length&&(t=t.filter(function(n){return Ht(e.codecs)==Ht(n.codecs)}).sort(function(n,i){return n.bandwidth&&i.bandwidth&&n.bandwidth!=i.bandwidth?n.bandwidth-i.bandwidth:(n.width||0)-(i.width||0)}),e.trickModeVideo=t[0],t.length>1&&(t=t.find(function(n){return e.width==n.width&&e.height==n.height})))&&(e.trickModeVideo=t)}function vg(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function yg(e,t,n){if(n.autoShowText==0)return!1;if(n.autoShowText==1)return!0;var i=Ue(n.preferredTextLanguage);return t=Ue(t.language),n.autoShowText==2?Sa(t,i):n.autoShowText==3?e?(e=Ue(e.language),Sa(t,i)&&!Sa(e,t)):!1:(Ee("Invalid autoShowText setting!"),!1)}function bg(e){var t={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]};e=m(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n?yn(n):"",codecs:n?dn(n):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"video",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};i.fullMimeTypes.add(dt(i.mimeType,i.codecs)),n.startsWith("audio/")?(i.type="audio",t.audio=i):t.video=i}return t}Y("shaka.util.StreamUtils",ug),ug.meetsRestrictions=gu;var bu=new Map,CS=0,wu=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),PS=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function ut(){var e=this;this.G=null,this.H=!1,this.u=new mo,this.j=new _e,navigator.connection&&navigator.connection.addEventListener&&this.j.D(navigator.connection,"change",function(){e.g.useNetworkInformation&&navigator.onLine&&(e.u=new mo,e.g&&e.u.configure(e.g.advanced),e.trySuggestStreams())}),this.l=[],this.I=1,this.J=!1,this.h=this.o=this.g=this.B=null,this.m=new Ae(function(){if(e.H&&(e.g.restrictToElementSize||e.g.restrictToScreenSize)){var t=e.chooseVariant();t&&e.G&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.C=P,"documentPictureInPicture"in P&&this.j.D(P.documentPictureInPicture,"enter",function(){e.C=P.documentPictureInPicture.window,e.m&&e.m.Jb(),e.j.ya(e.C,"pagehide",function(){e.C=P,e.m&&e.m.Jb()})}),this.F=this.i=null}f=ut.prototype,f.stop=function(){this.G=null,this.H=!1,this.l=[],this.I=1,this.o=this.B=null,this.h&&(this.h.disconnect(),this.h=null),this.m&&this.m.stop(),this.F=this.i=null},f.release=function(){this.stop(),this.j.release(),this.m=null},f.init=function(e){this.G=e},f.chooseVariant=function(e){e=e===void 0?!1:e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:this.C.devicePixelRatio,t=this.C.screen.height*n,n*=this.C.screen.width),this.h&&this.g.restrictToElementSize){var i=this.g.ignoreDevicePixelRatio?1:this.C.devicePixelRatio,r=this.o.clientHeight,a=this.o.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.o&&(r=this.i.height,a=this.i.width),t=Math.min(t,r*i),n=Math.min(n,a*i)}if(r=this.l.filter(function(l){return l&&!(l.audio&&l.audio.fastSwitching||l.video&&l.video.fastSwitching)}),r.length||(r=this.l),i=r,e&&r.length!=this.l.length&&(i=this.l.filter(function(l){return l&&!!(l.audio&&l.audio.fastSwitching||l.video&&l.video.fastSwitching)})),e=od(this,this.g.restrictions,i,1/0,1/0),t!=1/0||n!=1/0){for(e=RS(e),e=m(e),r=e.next();!r.done;r=e.next())if(r=r.value,r.height>=t&&r.width>=n){t=r.height,n=r.width;break}e=od(this,this.g.restrictions,i,t,n)}for(t=this.getBandwidthEstimate(),i.length&&!e.length&&(e=od(this,null,i,1/0,1/0),e=[e[0]]),n=e[0]||null,i=0;i<e.length;i++){r=e[i];var o=isNaN(this.I)?1:Math.abs(this.I);a=o*r.bandwidth/this.g.bandwidthDowngradeTarget;for(var s={bandwidth:1/0},u=i+1;u<e.length;u++)if(r.bandwidth!=e[u].bandwidth){s=e[u];break}o=o*s.bandwidth/this.g.bandwidthUpgradeTarget,n&&r&&t>=a&&t<=o&&(n.bandwidth!=r.bandwidth||n.bandwidth==r.bandwidth&&n.video&&r.video&&(n.video.width<r.video.width||n.video.height<r.video.height))&&(n=r)}return this.B=Date.now(),n},f.enable=function(){this.H=!0,this.l.length&&this.trySuggestStreams()},f.disable=function(){this.H=!1},f.segmentDownloaded=function(e,t,n,i){var r=e;this.g.removeLatencyFromFirstPacketTime&&i&&i.packetNumber===1&&i.timeToFirstByte&&(r=e-i.timeToFirstByte),r>=this.g.cacheLoadThreshold&&this.u.sample(r,t),n&&this.B!=null&&this.H&&wg(this)},f.trySuggestStreams=function(){this.H&&(this.B=Date.now(),wg(this,!0))},f.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=navigator.connection.downlink*1e6),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.u.getBandwidthEstimate(e),this.F?this.F.getBandwidthEstimate(e):e)},f.setVariants=function(e){return Dr(e,this.l)?!1:(this.l=e,!0)},f.playbackRateChanged=function(e){this.I=e},f.setMediaElement=function(e){function t(){n.m.ka(DS)}var n=this;this.o=e,this.h&&(this.h.disconnect(),this.h=null),this.o&&"ResizeObserver"in P&&(this.h=new ResizeObserver(t),this.h.observe(this.o)),this.j.D(e,"enterpictureinpicture",function(i){i.pictureInPictureWindow&&(n.i=i.pictureInPictureWindow,n.j.D(n.i,"resize",t))}),this.j.D(e,"leavepictureinpicture",function(){n.i&&n.j.Ma(n.i,"resize",t),n.i=null})},f.setCmsdManager=function(e){this.F=e},f.configure=function(e){this.g=e,this.u&&this.g&&this.u.configure(this.g.advanced)};function wg(e,t){if(t===void 0||!t){if(!e.J){if(t=e.u,!(t.g>=t.i))return;e.J=!0,e.B-=(e.g.switchInterval-e.g.minTimeToSwitch)*1e3}if(Date.now()-e.B<e.g.switchInterval*1e3)return}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.G&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function od(e,t,n,i,r){if(e.F){var a=e.F.ki();a&&(n=n.filter(function(o){return o.bandwidth&&a?o.bandwidth<=a:!0}))}return t&&(n=n.filter(function(o){return gu(o,t,{width:r,height:i})})),n.sort(function(o,s){return o.bandwidth-s.bandwidth})}function RS(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&(n=n.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(i,r){return i.width-r.width})}Y("shaka.abr.SimpleAbrManager",ut),ut.prototype.configure=ut.prototype.configure,ut.prototype.setCmsdManager=ut.prototype.setCmsdManager,ut.prototype.setMediaElement=ut.prototype.setMediaElement,ut.prototype.playbackRateChanged=ut.prototype.playbackRateChanged,ut.prototype.setVariants=ut.prototype.setVariants,ut.prototype.getBandwidthEstimate=ut.prototype.getBandwidthEstimate,ut.prototype.trySuggestStreams=ut.prototype.trySuggestStreams,ut.prototype.segmentDownloaded=ut.prototype.segmentDownloaded,ut.prototype.disable=ut.prototype.disable,ut.prototype.enable=ut.prototype.enable,ut.prototype.chooseVariant=ut.prototype.chooseVariant,ut.prototype.init=ut.prototype.init,ut.prototype.release=ut.prototype.release,ut.prototype.stop=ut.prototype.stop;var DS=1;function Sg(e,t){var n=ni();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function Tg(e){var t,n;return R(function(i){if(i.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new D(2,7,1010);return t=e.g,e.g++,t==0?i.return():(n=e.h*(1+(Math.random()*2-1)*e.o),T(i,new Promise(function(r){new Ae(r).ka(n/1e3)}),2))}e.h*=e.m,X(i)})}function ni(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function qe(){var e,t,n=new Promise(function(i,r){e=i,t=r});return n.resolve=e,n.reject=t,n}qe.prototype.resolve=function(){},qe.prototype.reject=function(){};function ft(e,t){this.promise=e,this.i=t,this.g=null}function dr(e){return new ft(Promise.reject(e),function(){return Promise.resolve()})}function sd(){var e=Promise.reject(new D(2,7,7001));return e.catch(function(){}),new ft(e,function(){return Promise.resolve()})}function xa(e){return new ft(Promise.resolve(e),function(){return Promise.resolve()})}function xg(e){return new ft(e,function(){return e.catch(function(){})})}ft.prototype.abort=function(){return this.g||(this.g=this.i()),this.g};function Ag(e){return new ft(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}ft.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},ft.prototype.Xa=function(e,t){function n(s){return function(u){if(r.g&&s)a.reject(o);else{var l=s?e:t;l?i=LS(l,u,a):(s?a.resolve:a.reject)(u)}}}function i(){return a.reject(o),r.abort()}var r=this,a=new qe;a.catch(function(){});var o=new D(2,7,7001);return this.promise.then(n(!0),n(!1)),new ft(a,function(){return i()})};function LS(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){},function(){})})}catch(r){return n.reject(r),function(){return Promise.resolve()}}}ke.Object.defineProperties(ft.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.g!==null}}}),Y("shaka.util.AbortableOperation",ft),ft.prototype.chain=ft.prototype.Xa,ft.prototype.finally=ft.prototype.finally,ft.all=Ag,ft.prototype.abort=ft.prototype.abort,ft.notAbortable=xg,ft.completed=xa,ft.aborted=sd,ft.failed=dr;function Z(e,t){if(t)if(t instanceof Map)for(var n=m(t.keys()),i=n.next();!i.done;i=n.next())i=i.value,Object.defineProperty(this,i,{value:t.get(i),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=P.performance&&P.performance.now?P.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function kg(e){var t=new Z(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Z.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Z.prototype.stopImmediatePropagation=function(){this.g=!0},Z.prototype.stopPropagation=function(){},Y("shaka.util.FakeEvent",Z);var Su={xl:"abrstatuschanged",yl:"adaptation",zl:"audiotrackchanged",Al:"audiotrackschanged",Bl:"boundarycrossed",Cl:"buffering",Dl:"canupdatestarttime",El:"complete",Fl:"currentitemchanged",Gl:"downloadcompleted",Hl:"downloadfailed",Il:"downloadheadersreceived",Jl:"drmsessionupdate",Kl:"emsg",Ql:"itemsinserted",Rl:"itemsremoved",hm:"prft",Error:"error",Ll:"expirationupdated",Ml:"firstquartile",Nl:"gapjumped",Sl:"keystatuschanged",Vl:"loaded",Wl:"loading",Yl:"manifestparsed",Zl:"manifestupdated",$l:"mediaqualitychanged",am:"mediasourcerecovered",bm:"metadataadded",Metadata:"metadata",dm:"midpoint",fm:"nospatialvideoinfo",gm:"onstatechange",im:"ratechange",nm:"segmentappended",om:"sessiondata",pm:"spatialvideoinfo",qm:"stalldetected",rm:"started",sm:"statechanged",tm:"streaming",um:"textchanged",vm:"texttrackvisibility",wm:"thirdquartile",xm:"timelineregionadded",ym:"timelineregionenter",zm:"timelineregionexit",Am:"trackschanged",Cm:"unloading",Em:"variantchanged"};function Ge(){this.ab=new Ks,this.Je=this}Ge.prototype.addEventListener=function(e,t){this.ab&&this.ab.push(e,t)},Ge.prototype.removeEventListener=function(e,t){this.ab&&this.ab.remove(e,t)},Ge.prototype.dispatchEvent=function(e){if(!this.ab)return!0;var t=this.ab.get(e.type)||[],n=this.ab.get("All");for(n&&(t=t.concat(n)),t=m(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Je,e.currentTarget=this.Je;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},Ge.prototype.release=function(){this.ab=null};function Aa(){this.g=[]}function zr(e,t){e.g.push(t.finally(function(){Qn(e.g,t)}))}Aa.prototype.destroy=function(){for(var e=[],t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function nt(e,t,n,i,r,a,o){Ge.call(this),this.i=null,this.j=!1,this.u=new Aa,this.g=new Set,this.h=new Set,this.o=e||null,this.m=t||null,this.B=n||null,this.C=i||null,this.F=r||null,this.H=a||null,this.G=o||null,this.l=new Map}rt(nt,Ge),f=nt.prototype,f.configure=function(e){this.i=e};function Bi(e,t,n,i){i=i===void 0?!1:i,n=n||Pg;var r=xu.get(e);(!r||n>=r.priority)&&xu.set(e,{priority:n,Bf:t,Jk:i})}function Ig(e,t){for(var n=m(e.g),i=n.next();!i.done;i=n.next())t.g.add(i.value);for(e=m(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}f.Mk=function(e){this.g.add(e)},f.ll=function(e){this.g.delete(e)},f.wj=function(){this.g.clear()},f.Nk=function(e){this.h.add(e)},f.ol=function(e){this.h.delete(e)},f.xj=function(){this.h.clear()},f.Xh=function(){this.l.clear()};function yt(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}f.destroy=function(){return this.j=!0,this.g.clear(),this.h.clear(),this.l.clear(),Ge.prototype.release.call(this),this.u.destroy()},f.request=function(e,t,n){var i=this,r=new Cg;if(this.j){var a=Promise.reject(new D(2,7,7001));return a.catch(function(){}),new Tu(a,function(){return Promise.resolve()},r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?ei(t.retryParameters):ni(),t.uris=ei(t.uris),a=NS(this,e,t,n);var o=a.Xa(function(){return Eg(i,e,t,n,new Sg(t.retryParameters,!1),0,null,r)}),s=o.Xa(function(h){return OS(i,e,h,n)}),u=Date.now(),l=0;a.promise.then(function(){l=Date.now()-u},function(){});var c=0;o.promise.then(function(){c=Date.now()},function(){});var d=s.Xa(function(h){var p=Date.now()-c,g=h.response;return g.timeMs+=l,g.timeMs+=p,h.kk||!i.o||g.fromCache||t.method=="HEAD"||e!=Bn||i.o(g.timeMs,g.data.byteLength,Mg(n),t,n),i.G&&i.G(e,g,n),g},function(h){throw h&&(h.severity=2),h});return a=new Tu(d.promise,function(){return d.abort()},r),zr(this.u,a),a};function NS(e,t,n,i){function r(s){a=a.Xa(function(){return n.body&&(n.body=_n(n.body)),s(t,n,i)})}var a=xa(void 0);e.F&&r(e.F),e=m(e.g);for(var o=e.next();!o.done;o=e.next())r(o.value);return a.Xa(void 0,function(s){throw s instanceof D&&s.code==7001?s:new D(2,1,1006,s)})}function Eg(e,t,n,i,r,a,o,s){e.i.forceHTTP&&(n.uris[a]=n.uris[a].replace("https://","http://")),e.i.forceHTTPS&&(n.uris[a]=n.uris[a].replace("http://","https://")),a>0&&e.H&&e.H(t,i,n.uris[a],n.uris[a-1]);var u=new ht(n.uris[a]),l=u.jc,c=!1;l||(l=location.protocol,l=l.slice(0,-1),zs(u,l),n.uris[a]=u.toString()),l=l.toLowerCase();var d=(l=xu.get(l))?l.Bf:null;if(!d)return dr(new D(2,1,1e3,u));var h=l.Jk;(u=e.l.get(u.Db))&&(n.headers["common-access-token"]=u);var p=null,g=null,y=!1,b=!1,A;return xg(Tg(r)).Xa(function(){if(e.j)return sd();A=Date.now();var x=0;n.requestStartTime=Date.now();var k=d(n.uris[a],n,t,function(I,C,E){p&&p.stop(),g&&g.ka(N/1e3),e.o&&t==Bn&&(x++,n.packetNumber=x,e.o(I,C,Mg(i),n,i),c=!0,s.g=E)},function(I){b=!0,n.timeToFirstByte=Date.now()-n.requestStartTime,e.m&&e.m(I,n,t)},{minBytesForProgressEvents:e.i.minBytesForProgressEvents});if(!h)return k;var M=n.retryParameters.connectionTimeout;M&&(p=new Ae(function(){y=!0,k.abort()}),p.ka(M/1e3));var N=n.retryParameters.stallTimeout;return N&&(g=new Ae(function(){y=!0,k.abort()})),k}).Xa(function(x){p&&p.stop(),g&&g.stop(),x.timeMs==null&&(x.timeMs=Date.now()-A);var k=x.headers["common-access-token"];if(k){var M=new ht(x.uri);e.l.set(M.Db,k)}return k={response:x,kk:c},!b&&e.m&&e.m(x.headers,n,t),e.B&&e.B(n,x),k},function(x){if(p&&p.stop(),g&&g.stop(),e.C){var k=null,M=0;x instanceof D&&(k=x,x.code==1001&&(M=x.data[1])),e.C(n,k,M,y)}if(e.j)return sd();if(y&&(x=new D(1,1,1003,n.uris[a],t)),x instanceof D){if(x.code==7001)throw x;if(x.code==1010)throw o;if(x.severity==1){if(k=new Map().set("error",x),k=new Z("retry",k),k.cancelable=!0,e.dispatchEvent(k),k.defaultPrevented)throw x;return a=(a+1)%n.uris.length,Eg(e,t,n,i,r,a,x,s)}}throw x})}function OS(e,t,n,i){var r=xa(void 0);e=m(e.h);for(var a=e.next(),o={};!a.done;o={Qi:void 0},a=e.next())o.Qi=a.value,r=r.Xa(function(s){return function(){var u=n.response;return u.data&&(u.data=_n(u.data)),(0,s.Qi)(t,u,i)}}(o));return r.Xa(function(){return n},function(s){var u=2;if(s instanceof D){if(s.code==7001)throw s;u=s.severity}throw new D(u,1,1007,s)})}function Mg(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.Xc)return!1}return!0}Y("shaka.net.NetworkingEngine",nt),nt.prototype.request=nt.prototype.request,nt.prototype.destroy=nt.prototype.destroy,nt.makeRequest=yt,nt.defaultRetryParameters=function(){return ni()},nt.prototype.clearCommonAccessTokenMap=nt.prototype.Xh,nt.prototype.clearAllResponseFilters=nt.prototype.xj,nt.prototype.unregisterResponseFilter=nt.prototype.ol,nt.prototype.registerResponseFilter=nt.prototype.Nk,nt.prototype.clearAllRequestFilters=nt.prototype.wj,nt.prototype.unregisterRequestFilter=nt.prototype.ll,nt.prototype.registerRequestFilter=nt.prototype.Mk,nt.unregisterScheme=function(e){xu.delete(e)},nt.registerScheme=Bi,nt.prototype.configure=nt.prototype.configure;function Cg(){this.g=0}nt.NumBytesRemainingClass=Cg;function Tu(e,t,n){ft.call(this,e,t),this.h=n}rt(Tu,ft),nt.PendingRequest=Tu;var Bn=1;nt.RequestType={MANIFEST:0,SEGMENT:Bn,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8,CMCD:9},nt.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var Pg=3;nt.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Pg};var xu=new Map;function ka(e){this.g=!1,this.h=new qe,this.i=e}ka.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function Je(e,t){if(e.g)throw t instanceof D&&t.code==7003?t:new D(2,7,7003,t)}function ud(e,t){var n=[];e=m(e);for(var i=e.next();!i.done;i=e.next())n.push(t(i.value));return n}function _S(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Ia(e){for(var t=new Map,n=m(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function ld(e){var t={};return e.forEach(function(n,i){t[i]=n}),t}function Ze(e,t){this.h=ln(e),this.i=t==Rg,this.g=0}f=Ze.prototype,f.Ka=function(){return this.g<this.h.byteLength},f.Pa=function(){return this.g},f.getLength=function(){return this.h.byteLength},f.Z=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw Fi()}},f.Ca=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw Fi()}},f.U=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw Fi()}},f.eh=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw Fi()}},f.Fd=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw Fi()}if(t>2097151)throw new D(2,3,3001);return this.g+=8,t*4294967296+e},f.Tb=function(e,t){if(this.g+e>this.h.byteLength)throw Fi();var n=pe(this.h,this.g,e);return this.g+=e,t?new Uint8Array(n):n},f.skip=function(e){if(this.g+e>this.h.byteLength)throw Fi();this.g+=e},f.Ri=function(e){if(this.g<e)throw Fi();this.g-=e},f.seek=function(e){if(e<0||e>this.h.byteLength)throw Fi();this.g=e},f.Yc=function(){for(var e=this.g;this.Ka()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=pe(this.h,e,this.g-e),this.g+=1,ot(e)};function Fi(){return new D(2,3,3e3)}Y("shaka.util.DataViewReader",Ze),Ze.prototype.readTerminatedString=Ze.prototype.Yc,Ze.prototype.seek=Ze.prototype.seek,Ze.prototype.rewind=Ze.prototype.Ri,Ze.prototype.skip=Ze.prototype.skip,Ze.prototype.readBytes=Ze.prototype.Tb,Ze.prototype.readUint64=Ze.prototype.Fd,Ze.prototype.readInt32=Ze.prototype.eh,Ze.prototype.readUint32=Ze.prototype.U,Ze.prototype.readUint16=Ze.prototype.Ca,Ze.prototype.readUint8=Ze.prototype.Z,Ze.prototype.getLength=Ze.prototype.getLength,Ze.prototype.getPosition=Ze.prototype.Pa,Ze.prototype.hasMoreData=Ze.prototype.Ka;var Rg=1;Ze.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Rg};function Ke(){this.i=new Map,this.h=new Map,this.g=!1}f=Ke.prototype,f.box=function(e,t){return e=Dg(e),this.i.set(e,jS),this.h.set(e,t),this},f.S=function(e,t){return e=Dg(e),this.i.set(e,Lg),this.h.set(e,t),this},f.stop=function(){this.g=!0},f.parse=function(e,t,n){for(e=new Ze(e,0),this.g=!1;e.Ka()&&!this.g;)this.Cd(0,e,t,n)},f.Cd=function(e,t,n,i){var r=t.Pa();if(i&&r+8>t.getLength())this.g=!0;else{var a=t.U(),o=t.U(),s=ku(o),u=!1;switch(a){case 0:a=t.getLength()-r;break;case 1:if(i&&t.Pa()+8>t.getLength()){this.g=!0;return}a=t.Fd(),u=!0}var l=this.h.get(o);if(l){var c=null,d=null;if(this.i.get(o)==Lg){if(i&&t.Pa()+4>t.getLength()){this.g=!0;return}d=t.U(),c=d>>>24,d&=16777215}o=r+a,n&&o>t.getLength()&&(o=t.getLength()),i&&o>t.getLength()?this.g=!0:(o-=t.Pa(),t=o>0?t.Tb(o,!1):new Uint8Array(0),t=new Ze(t,0),l({name:s,parser:this,partialOkay:n||!1,stopOnPartial:i||!1,version:c,flags:d,reader:t,size:a,start:r+e,has64BitSize:u}))}else t.skip(Math.min(r+a-t.Pa(),t.getLength()-t.Pa()))}};function be(e){for(var t=fr(e);e.reader.Ka()&&!e.parser.g;)e.parser.Cd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function Vi(e){for(var t=fr(e),n=e.reader.U(),i=0;i<n&&(e.parser.Cd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial),!e.parser.g);i++);}function bn(e){var t=fr(e);for(e.reader.skip(78);e.reader.Ka()&&!e.parser.g;)e.parser.Cd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function Au(e){var t=fr(e);e.reader.skip(8);var n=e.reader.Ca();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.Ka()&&!e.parser.g;)e.parser.Cd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function Ea(e,t){return function(n){e(n.reader.Tb(n.reader.getLength()-n.reader.Pa(),t))}}function Dg(e){var t=0;e=m(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function ku(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function fr(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}Y("shaka.util.Mp4Parser",Ke),Ke.headerSize=fr,Ke.typeToString=ku,Ke.allData=Ea,Ke.audioSampleEntry=Au,Ke.visualSampleEntry=bn,Ke.sampleDescription=Vi,Ke.children=be,Ke.prototype.parseNext=Ke.prototype.Cd,Ke.prototype.parse=Ke.prototype.parse,Ke.prototype.stop=Ke.prototype.stop,Ke.prototype.fullBox=Ke.prototype.S,Ke.prototype.box=Ke.prototype.box;var jS=0,Lg=1;function cd(e){var t=this;this.g=[],this.h=[],this.data=[],new Ke().box("moov",be).box("moof",be).S("pssh",function(n){if(!(n.version>1)){var i=pe(n.reader.h,-12,n.size);if(t.data.push(i),i=n.reader.Tb(16,!1),t.g.push(Ri(i)),n.version>0){i=n.reader.U();for(var r=0;r<i;r++){var a=n.reader.Tb(16,!1);a=Ri(a),t.h.push(a)}}}}).parse(e)}function Iu(e,t,n,i){var r=e.length,a=12+t.length+4+r;i>0&&(a+=4+16*n.size);var o=new Uint8Array(a),s=ln(o),u=0;if(s.setUint32(u,a),u+=4,s.setUint32(u,1886614376),u+=4,i<1?s.setUint32(u,0):s.setUint32(u,16777216),u+=4,o.set(t,u),u+=t.length,i>0)for(s.setUint32(u,n.size),u+=4,t=m(n),n=t.next();!n.done;n=t.next())n=Or(n.value),o.set(n,u),u+=n.length;return s.setUint32(u,r),o.set(e,u+4),o}function Eu(e){var t=this;this.F=e,this.l=this.B=null,this.aa=this.T=!1,this.J=0,this.g=null,this.o=new _e,this.i=new Map,this.X=[],this.C=new Map,this.K=!1,this.m=new qe,this.h=null,this.u=function(n){n.severity==2&&t.m.reject(n),e.onError(n)},this.ha=new Map,this.ma=new Map,this.M=new Ae(function(){return XS(t)}),this.R=!1,this.N=[],this.oa=!1,this.G=new Ae(function(){JS(t)}),this.m.catch(function(){}),this.j=new ka(function(){return US(t)}),this.O=!1,this.H=this.I=null,this.V=function(){return!1}}f=Eu.prototype,f.destroy=function(){return this.j.destroy()};function US(e){return R(function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.m.reject(),e.G.stop(),e.G=null,e.M.stop(),e.M=null,T(t,jo(e),2);case 2:if(!e.l){t.A(3);break}return he(t,4),T(t,e.l.setMediaKeys(null),6);case 6:ye(t,5);break;case 4:oe(t);case 5:e.l=null;case 3:e.g=null,e.B=null,e.C=new Map,e.h=null,e.u=function(){},e.F=null,e.O=!1,e.I=null,X(t)}})}f.configure=function(e,t){this.h=e,t&&(this.V=t),this.G&&this.T&&this.g&&this.G.Da(this.h.updateExpirationTime)};function BS(e,t,n){return e.aa=!0,e.C=new Map,e.R=n,Og(e,t,!1)}function Ng(e,t,n,i){i=i===void 0?!0:i,e.C=new Map,n=m(n);for(var r=n.next();!r.done;r=n.next())e.C.set(r.value,{initData:null,initDataType:null});for(n=m(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.C.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.R=e.C.size>0,Og(e,t,i)}function FS(e,t,n,i,r,a){var o,s,u,l,c;return R(function(d){return d.g==1?(o=[],a.length&&o.push(a[0].contentType),r.length&&o.push(r[0].contentType),s=function(h){return h=Di(t,h,null),h.licenseServerUri=n,h.serverCertificate=i,h.persistentStateRequired=!0,h.sessionType="persistent-license",h},u=bg(o),u.video&&(l=s(a[0].encryptionScheme||""),u.video.drmInfos.push(l)),u.audio&&(c=s(r[0].encryptionScheme||""),u.audio.drmInfos.push(c)),T(d,rd([u],!0,e.O,[]),2)):(Je(e.j),d.return(Bg(e,[u])))})}function Og(e,t,n){var i,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M;return R(function(N){if(N.g==1){for(Kg(e.h.clearKeys,t),i=t.some(function(I){return!!(I.video&&I.video.drmInfos.length||I.audio&&I.audio.drmInfos.length)}),r=Ia(e.h.servers),a=Ia(e.h.advanced||{}),!i&&n&&QS(t,r),o=new WeakSet,s=m(t),u=s.next();!u.done;u=s.next())for(l=u.value,c=qg(l),d=m(c),h=d.next();!h.done;h=d.next())p=h.value,o.has(p)||(o.add(p),eT(p,r,a,e.h.keySystemsMapping));for(g=function(I,C){var E=[];I=m(I);for(var O=I.next();!O.done;O=I.next()){O=O.value;var L=O[C]||a.has(O.keySystem)&&a.get(O.keySystem)[C]||"",_;if((_=L=="")&&(_=(_=O.keySystem)?!!_.match(/^com\.widevine\.alpha/):!1),_&&(C=="audioRobustness"?L=[e.h.defaultAudioRobustnessForWidevine]:C=="videoRobustness"&&(L=[e.h.defaultVideoRobustnessForWidevine])),typeof L=="string")E.push(O);else if(Array.isArray(L))for(L.length===0&&(L=[""]),L=m(L),_=L.next();!_.done;_=L.next()){var j={};E.push(Object.assign({},O,(j[C]=_.value,j)))}}return E},y=new WeakSet,b=m(t),A=b.next();!A.done;A=b.next())x=A.value,x.video&&!y.has(x.video)&&(x.video.drmInfos=g(x.video.drmInfos,"videoRobustness"),x.video.drmInfos=g(x.video.drmInfos,"audioRobustness"),y.add(x.video)),x.audio&&!y.has(x.audio)&&(x.audio.drmInfos=g(x.audio.drmInfos,"videoRobustness"),x.audio.drmInfos=g(x.audio.drmInfos,"audioRobustness"),y.add(x.audio));return T(N,rd(t,e.R,e.O,e.h.preferredKeySystems),2)}return Je(e.j),k=i||r.size>0,k?(M=Bg(e,t),N.return(i?M:M.catch(function(){}))):(e.T=!0,N.return(Promise.resolve()))})}function _g(e){var t;return R(function(n){switch(n.g){case 1:if(e.l.mediaKeys)return n.return();if(!e.I){n.A(2);break}return T(n,e.I,3);case 3:return Je(e.j),n.return();case 2:return he(n,4),e.I=e.l.setMediaKeys(e.B),T(n,e.I,6);case 6:ye(n,5);break;case 4:t=oe(n),e.u(new D(2,6,6003,t.message));case 5:Je(e.j),X(n)}})}function VS(e,t){return R(function(n){if(n.g==1)return T(n,_g(e),2);_o(e,t.initDataType,pe(t.initData)),X(n)})}f.Vb=function(e){var t=this,n,i;return R(function(r){if(r.g==1)return t.l===e?r.return():t.B?(t.l=e,t.h.delayLicenseRequestUntilPlayed&&t.o.ya(t.l,"play",function(){for(var a=m(t.N),o=a.next();!o.done;o=a.next())hd(t,o.value);t.oa=!0,t.N=[]}),t.l.remote?(t.o.D(t.l.remote,"connect",function(){return jo(t)}),t.o.D(t.l.remote,"connecting",function(){return jo(t)}),t.o.D(t.l.remote,"disconnect",function(){return jo(t)})):"webkitCurrentPlaybackTargetIsWireless"in t.l&&t.o.D(t.l,"webkitcurrentplaybacktargetiswirelesschanged",function(){return jo(t)}),t.H=t.g&&t.g.initData.find(function(a){return a.initData.length>0})||null,n=t.g.keySystem,(i=Te().Wg(n))||!t.H&&t.g.keySystem==="com.apple.fps"&&!t.C.size?r.A(2):T(r,_g(t),2)):(t.o.ya(e,"encrypted",function(){t.u(new D(2,6,6010))}),r.return());jg(t).catch(function(){}),!i&&(t.H||t.C.size||t.h.parseInbandPsshEnabled)||t.o.D(t.l,"encrypted",function(a){return VS(t,a)}),X(r)})};function HS(e){var t,n,i,r,a;return R(function(o){switch(o.g){case 1:if(!e.B||!e.g)return o.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){o.A(2);break}return t=yt([e.g.serverCertificateUri],e.h.retryParameters),he(o,3),n=e.F.wc.request(5,t,{isPreload:e.V()}),T(o,n.promise,5);case 5:i=o.h,e.g.serverCertificate=pe(i.data),ye(o,4);break;case 3:throw r=oe(o),new D(2,6,6017,r);case 4:if(e.j.g)return o.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?o.return():(he(o,6),T(o,e.B.setServerCertificate(e.g.serverCertificate),8));case 8:ye(o,0);break;case 6:throw a=oe(o),new D(2,6,6004,a.message)}})}function GS(e,t){var n,i,r;return R(function(a){if(a.g==1)return T(a,Vg(e,t,{initData:null,initDataType:null}),2);if(a.g!=3)return n=a.h,n?(i=[],(r=e.i.get(n))&&(r.Kb=new qe,i.push(r.Kb)),i.push(n.remove()),T(a,Promise.all(i),3)):a.return();e.i.delete(n),X(a)})}function jg(e){var t,n,i,r,a;return R(function(o){if(o.g==1)return e.C.size?(e.C.forEach(function(s,u){Vg(e,u,s)}),T(o,e.m,3)):o.A(2);if(o.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),t.size>0&&$S(e))return o.return(e.m);e.K=!1,e.m=new qe,e.m.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],i=m(n),r=i.next();!r.done;r=i.next())a=r.value,_o(e,a.initDataType,a.initData);return Uo(e)&&e.m.resolve(),o.return(e.m)})}function _o(e,t,n){if(n.length){try{n=e.h.initDataTransform(n,t,e.g)}catch(o){t=o,o instanceof D||(t=new D(2,6,6016,o)),e.u(t);return}if(e.h.ignoreDuplicateInitData){var i=e.i.values();i=m(i);for(var r=i.next();!r.done;r=i.next())if(Ci(n,r.value.initData))return;var a=!1;if(e.C.forEach(function(o){!a&&Ci(n,o.initData)&&(a=!0)}),a)return}e.K=!0,e.i.size>0&&Uo(e)&&(e.m.resolve(),e.K=!1,e.m=new qe,e.m.catch(function(){})),zS(e,t,n,e.g.sessionType)}}function Ug(e){return e=e.i.keys(),e=ud(e,function(t){return t.sessionId}),Array.from(e)}f.Kg=function(){var e=this,t=this.i.keys();return t=ud(t,function(n){var i=e.i.get(n);return{sessionId:n.sessionId,sessionType:i.type,initData:i.initData,initDataType:i.initDataType}}),Array.from(t)},f.$d=function(){var e=1/0,t=this.i.keys();t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e};function qS(e){return e.J?e.J:NaN}f.$e=function(){return ld(this.ma)};function Bg(e,t){var n,i,r,a,o,s,u;return R(function(l){switch(l.g){case 1:if(n=new Map,i=KS(e,t,n),!i)throw navigator.requestMediaKeySystemAccess?new D(2,6,6001):new D(2,6,6020);Je(e.j),he(l,2),i.getConfiguration();var c=r=e.h.keySystemsMapping[i.keySystem]||i.keySystem,d=n.get(r),h=[],p=[],g=[],y=[],b=[],A=new Set,x=new Set;ZS(d,h,p,y,g,b,A,x);var k=e.R?"persistent-license":"temporary";for(c={keySystem:c,encryptionScheme:h[0],licenseServerUri:p[0],distinctiveIdentifierRequired:d[0].distinctiveIdentifierRequired,persistentStateRequired:d[0].persistentStateRequired,sessionType:d[0].sessionType||k,audioRobustness:d[0].audioRobustness||"",videoRobustness:d[0].videoRobustness||"",serverCertificate:y[0],serverCertificateUri:g[0],initData:b,keyIds:A,mediaTypes:d[0].mediaTypes},x.size>0&&(c.keySystemUris=x),d=m(d),x=d.next();!x.done;x=d.next())x=x.value,x.distinctiveIdentifierRequired&&(c.distinctiveIdentifierRequired=x.distinctiveIdentifierRequired),x.persistentStateRequired&&(c.persistentStateRequired=x.persistentStateRequired);if(e.g=c,!e.g.licenseServerUri)throw new D(2,6,6012,e.g.keySystem);return T(l,i.createMediaKeys(),4);case 4:if(a=l.h,Je(e.j),e.B=a,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.B)){l.A(5);break}return he(l,6),T(l,e.B.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),8);case 8:if(o=l.h,o!="usable")throw new D(2,6,6018);Je(e.j),ye(l,5,2);break;case 6:throw s=oe(l,2),s instanceof D?s:new D(2,6,6019,s.message);case 5:return e.T=!0,e.G.Da(e.h.updateExpirationTime),T(l,HS(e),9);case 9:Je(e.j),ye(l,0);break;case 2:throw u=oe(l),Je(e.j,u),e.g=null,u instanceof D?u:new D(2,6,6002,u.message)}})}function KS(e,t,n){for(var i=m(t),r=i.next();!r.done;r=i.next()){r=m(qg(r.value));for(var a=r.next();!a.done;a=r.next())a=a.value,n.getOrInsertComputed(a.keySystem,function(){return[]}).push(a)}if(n.size==1&&n.has(""))throw new D(2,6,6e3);i=e.h.preferredKeySystems,i.length||(r=Ia(e.h.servers),r.size==1&&(i=Array.from(r.keys()))),r=m(i);var o=r.next();for(a={};!o.done;a={Li:void 0},o=r.next()){a.Li=o.value,o=m(t);for(var s=o.next();!s.done;s=o.next())if(s=s.value.decodingInfos.find(function(d){return function(h){return h.supported&&h.keySystemAccess!=null&&h.keySystemAccess.keySystem==d.Li}}(a)))return s.keySystemAccess}for(r=m([!0,!1]),a=r.next();!a.done;a=r.next())for(a=a.value,o=m(t),s=o.next();!s.done;s=o.next()){s=m(s.value.decodingInfos);for(var u=s.next();!u.done;u=s.next())if(u=u.value,u.supported&&u.keySystemAccess){var l=u.keySystemAccess.keySystem;if(!i.includes(l)){var c=n.get(l);for(!c&&e.h.keySystemsMapping[l]&&(c=n.get(e.h.keySystemsMapping[l])),l=m(c),c=l.next();!c.done;c=l.next())if(!!c.value.licenseServerUri==a)return u.keySystemAccess}}}return null}function dd(e){Uo(e)&&e.m.resolve()}function Fg(e,t){new Ae(function(){t.loaded=!0,dd(e)}).ka(nT)}function Vg(e,t,n){var i,r,a,o,s,u,l;return R(function(c){switch(c.g){case 1:try{i=e.B.createSession("persistent-license")}catch(d){return r=new D(2,6,6005,d.message),e.u(r),c.return(Promise.reject(r))}return e.o.D(i,"message",function(d){fd(e)?e.N.push(d):hd(e,d)}),e.o.D(i,"keystatuseschange",function(d){return Hg(e,d)}),a={initData:n.initData,initDataType:n.initDataType,loaded:!1,Zg:1/0,Kb:null,type:"persistent-license"},e.i.set(i,a),he(c,2),T(c,i.load(t),4);case 4:return o=c.h,Je(e.j),o||(e.i.delete(i),s=e.h.persistentSessionOnlinePlayback?1:2,e.u(new D(s,6,6013)),a.loaded=!0),Fg(e,a),dd(e),c.return(i);case 2:u=oe(c),Je(e.j,u),e.i.delete(i),l=e.h.persistentSessionOnlinePlayback?1:2,e.u(new D(l,6,6005,u.message)),a.loaded=!0,dd(e);case 3:return c.return(Promise.resolve())}})}function zS(e,t,n,i){try{var r=e.B.createSession(i)}catch(a){e.u(new D(2,6,6005,a.message));return}e.o.D(r,"message",function(a){fd(e)?e.N.push(a):hd(e,a)}),e.o.D(r,"keystatuseschange",function(a){return Hg(e,a)}),e.i.set(r,{initData:n,initDataType:t,loaded:!1,Zg:1/0,Kb:null,type:i}),e.h.logLicenseExchange&&Pi(n),r.generateRequest(t,n).catch(function(a){if(!e.j.g){e.i.delete(r);var o=a.errorCode;if(o&&o.systemCode){var s=o.systemCode;s<0&&(s+=4294967296),s="0x"+s.toString(16)}e.u(new D(2,6,6006,a.message,a,s))}})}function fd(e){return e.l?e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.oa:!e.aa&&e.h.delayLicenseRequestUntilPlayed}function WS(e){return R(function(t){return t.g==1?!e.K||fd(e)?t.A(0):T(t,e.m,3):T(t,Promise.all(e.X.map(function(n){return n.promise})),0)})}function hd(e,t){var n,i,r,a,o,s,u,l,c,d,h,p,g,y,b,A;R(function(x){switch(x.g){case 1:if(n=t.target,e.h.logLicenseExchange&&Pi(t.message),i=e.i.get(n),r=e.g.licenseServerUri,a=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&a&&a.individualizationServer&&(r=a.individualizationServer),o=yt([r],e.h.retryParameters),o.body=t.message,o.method="POST",o.licenseRequestType=t.messageType,o.sessionId=n.sessionId,o.drmInfo=e.g,i&&(o.initData=i.initData,o.initDataType=i.initDataType),a&&a.headers)for(s in a.headers)o.headers[s]=a.headers[s];if(e.g.keySystem==="org.w3.clearkey"){var k=o,M=e.g;try{var N=vi(k.body);if(N){var I=JSON.parse(N);I.type||(I.type=M.sessionType,k.body=Zn(JSON.stringify(I)))}}catch{}}if(jc(e.g.keySystem))if(k=rr(o.body,!0,!0),k.includes("PlayReadyKeyMessage")){for(k=Fr(k,"PlayReadyKeyMessage"),M=fi(k,"HttpHeader"),M=m(M),N=M.next();!N.done;N=M.next())I=N.value,N=fi(I,"name")[0],I=fi(I,"value")[0],o.headers[pt(N)]=pt(I);k=fi(k,"Challenge")[0],o.body=jn(pt(k))}else o.headers["Content-Type"]="text/xml; charset=utf-8";return u=Date.now(),he(x,2),c=e.F.wc.request(2,o,{isPreload:e.V()}),e.X.push(c),T(x,c.promise,4);case 4:l=x.h,Qn(e.X,c),ye(x,3);break;case 2:return d=oe(x),e.j.g||(h={sessionId:n.sessionId,sessionType:i.type,initData:i.initData,initDataType:i.initDataType},p=new D(2,6,6007,d,h),e.i.size==1?(e.u(p),i&&i.Kb&&i.Kb.reject(p)):(i&&i.Kb&&i.Kb.reject(p),e.i.delete(n),Uo(e)&&(e.m.resolve(),e.M.ka(.1)))),x.return();case 3:return e.j.g?x.return():(e.J+=(Date.now()-u)/1e3,e.h.logLicenseExchange&&Pi(l.data),he(x,5),T(x,n.update(l.data),7));case 7:ye(x,6);break;case 5:return y=(g=oe(x))&&g.message||String(g),b=new D(2,6,6008,y),e.u(b),i&&i.Kb&&i.Kb.reject(b),x.return();case 6:if(e.j.g)return x.return();A=new Z("drmsessionupdate"),e.F.onEvent(A),i&&(i.Kb&&i.Kb.resolve(),Fg(e,i)),X(x)}})}function Hg(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach(function(a,o){if(typeof o=="string"){var s=o;o=a,a=s}if(s=Te(),jc(e.g.keySystem)&&o.byteLength==16&&s.Ff()){s=ln(o);var u=s.getUint32(0,!0),l=s.getUint16(4,!0),c=s.getUint16(6,!0);s.setUint32(0,u,!1),s.setUint16(4,l,!1),s.setUint16(6,c,!1)}a!="status-pending"&&(n.loaded=!0),a=="expired"&&(i=!0),o=Ri(o).slice(0,32),e.ha.set(o,a)});var r=t.expiration-Date.now();(r<0||i&&r<1e3)&&n&&!n.Kb&&(e.i.delete(t),Gg(t)),Uo(e)&&(e.m.resolve(),e.M.ka(iT))}function XS(e){var t=e.ha,n=e.ma;n.clear(),t.forEach(function(i,r){return n.set(r,i)}),t=Array.from(n.values()),t.length&&t.every(function(i){return i=="expired"})&&e.u(new D(2,6,6014)),e.F.zf(ld(n))}function YS(){var e,t,n,i,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M,N,I,C,E,O,L,_,j;return R(function(G){if(G.g==1){if(e="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(P.MediaKeys&&P.navigator&&P.navigator.requestMediaKeySystemAccess&&P.MediaKeySystemAccess&&P.MediaKeySystemAccess.prototype.getConfiguration)){for(t={},n=m(e),i=n.next();!i.done;i=n.next())r=i.value,t[r]=null;return G.return(t)}for(a="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),o=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],s=["150","2000","3000"],u={"com.widevine.alpha":o,"com.widevine.alpha.experiment":o,"com.microsoft.playready.recommendation":s},l=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],c=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],d={videoCapabilities:l,audioCapabilities:c,initDataTypes:["cenc","sinf","skd","keyids"]},h=[null,"cenc","cbcs"],p=new Map,g=Te(),y=function(H,B,F){var K,W,me,ne,He,ve,et,Ne,we,Pe,kt,Ye,De;return R(function(je){switch(je.g){case 1:return he(je,2),T(je,B.createMediaKeys(),5);case 5:K=je.h;case 4:ye(je,3);break;case 2:return oe(je),je.return();case 3:if(me=(W=B.getConfiguration().sessionTypes)?W.includes("persistent-license"):!1,g.Di()&&(me=!1),ne=B.getConfiguration().videoCapabilities,He=B.getConfiguration().audioCapabilities,ve={persistentState:me,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},p.get(H)?ve=p.get(H):p.set(H,ve),(et=ne[0].encryptionScheme)&&!ve.encryptionSchemes.includes(et)&&ve.encryptionSchemes.push(et),(Ne=ne[0].robustness)&&!ve.videoRobustnessLevels.includes(Ne)&&ve.videoRobustnessLevels.push(Ne),(we=He[0].robustness)&&!ve.audioRobustnessLevels.includes(we)&&ve.audioRobustnessLevels.push(we),!(F&&"getStatusForPolicy"in K)){je.A(0);break}Pe=m(a),kt=Pe.next();case 7:if(kt.done){je.A(0);break}if(Ye=kt.value,ve.minHdcpVersions.includes(Ye)){je.A(8);break}return T(je,K.getStatusForPolicy({minHdcpVersion:Ye}),10);case 10:if(De=je.h,De=="usable")ve.minHdcpVersions.includes(Ye)||ve.minHdcpVersions.push(Ye);else{je.A(0);break}case 8:kt=Pe.next(),je.A(7)}})},b=function(H,B,F,K,W){W=W===void 0?!1:W;var me,ne,He,ve,et,Ne,we,Pe,kt,Ye,De;return R(function(je){switch(je.g){case 1:for(he(je,2),me=ei(d),ne=m(me.videoCapabilities),He=ne.next();!He.done;He=ne.next())ve=He.value,ve.encryptionScheme=B,ve.robustness=F;for(et=m(me.audioCapabilities),Ne=et.next();!Ne.done;Ne=et.next())we=Ne.value,we.encryptionScheme=B,we.robustness=K;return Pe=ei(me),Pe.persistentState="required",Pe.sessionTypes=["persistent-license"],kt=[Pe,me],De=Te(),De.Oa()=="MOBILE"?T(je,fu(5,navigator.requestMediaKeySystemAccess(H,kt)),7):T(je,navigator.requestMediaKeySystemAccess(H,kt),6);case 6:Ye=je.h,je.A(5);break;case 7:Ye=je.h;case 5:return T(je,y(H,Ye,W),8);case 8:ye(je,0);break;case 2:oe(je),X(je)}})},A=function(H){return!(Te().Ga()==="WEBKIT"&&H==="org.w3.clearkey")},x=[],k=m(e),M=k.next();!M.done;M=k.next())if(N=M.value,p.set(N,null),A(N)){for(I=!0,C=m(h),E=C.next();!E.done;E=C.next())O=E.value,x.push(b(N,O,"","",I)),I=!1;for(L=m(u[N]||[]),_=L.next();!_.done;_=L.next())j=_.value,x.push(b(N,null,j,"")),x.push(b(N,null,"",j))}return T(G,Promise.all(x),2)}return G.return(ld(p))})}function Gg(e){return R(function(t){if(t.g==1)return he(t,2),T(t,fu(tT,Promise.all([e.close().catch(function(){}),e.closed])),4);if(t.g!=2)return ye(t,0);oe(t),X(t)})}function jo(e){var t;return R(function(n){return t=Array.from(e.i.entries()),e.i.clear(),T(n,Promise.all(t.map(function(i){i=m(i);var r=i.next().value,a=i.next().value;return R(function(o){if(o.g==1)return he(o,2),e.aa||e.C.has(r.sessionId)||a.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?T(o,Gg(r),5):T(o,r.remove(),5);if(o.g!=2)return ye(o,0);oe(o),X(o)})})),0)})}function qg(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function JS(e){e.i.forEach(function(t,n){var i=t.Zg,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.F.onExpirationUpdated(n.sessionId,r),t.Zg=r)})}function Uo(e){return e=e.i.values(),_S(e,function(t){return t.loaded})}function $S(e){for(var t=m(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.ha.get(n.value)!=="usable")return!1;return!0}function QS(e,t){var n=[];for(t.forEach(function(i,r){n.push({keySystem:r,licenseServerUri:i,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=m(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function ZS(e,t,n,i,r,a,o,s){var u=[];e=m(e);for(var l=e.next(),c={};!l.done;c={La:void 0},l=e.next()){if(c.La=l.value,t.includes(c.La.encryptionScheme)||t.push(c.La.encryptionScheme),c.La.keySystem=="org.w3.clearkey"&&c.La.licenseServerUri.startsWith("data:application/json;base64,")?u.includes(c.La.licenseServerUri)||u.push(c.La.licenseServerUri):n.includes(c.La.licenseServerUri)||n.push(c.La.licenseServerUri),r.includes(c.La.serverCertificateUri)||r.push(c.La.serverCertificateUri),c.La.serverCertificate&&(i.some(function(p){return function(g){return Ci(g,p.La.serverCertificate)}}(c))||i.push(c.La.serverCertificate)),c.La.initData){l=m(c.La.initData);for(var d=l.next(),h={};!d.done;h={Pg:void 0},d=l.next())h.Pg=d.value,a.some(function(p){return function(g){var y=p.Pg;return g.keyId&&g.keyId==y.keyId?!0:g.initDataType==y.initDataType&&Ci(g.initData,y.initData)}}(h))||a.push(h.Pg)}if(c.La.keyIds)for(l=m(c.La.keyIds),d=l.next();!d.done;d=l.next())o.add(d.value);if(c.La.keySystemUris&&s)for(c=m(c.La.keySystemUris),l=c.next();!l.done;l=c.next())s.add(l.value)}if(u.length==1)n.push(u[0]);else if(u.length>0){for(t=[],u=m(u),i=u.next();!i.done;i=u.next())i=P.atob(i.value.split("data:application/json;base64,").pop()),i=JSON.parse(i),t.push.apply(t,z(i.keys));u=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+P.btoa(u))}}function eT(e,t,n,i){var r=e.keySystem;r&&(r!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&t.get(r)&&(t=t.get(r),e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(r))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),i[r]&&(e.keySystem=i[r]),P.cast&&P.cast.__platform__&&r=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}function Kg(e,t){if(e=Ia(e),e.size!=0){e=Lp(e),t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.drmInfos=[e]),n.audio&&(n.audio.drmInfos=[e])}}var tT=1,nT=5,iT=.5;function rT(){this.g=Xr,this.j=new Map().set(Xr,2).set(Wr,1),this.i=0,this.h=-1}function pd(e,t){var n=e.g!==t;return e.g=t,n&&t===Xr&&(e.i=Date.now()),n}var Wr=0,Xr=1;function gd(e,t,n){this.h=e,this.i=t,this.g=n}function zg(e,t){return R(function(n){if(n.g==1)return T(n,SS(e.g,t,e.h.drm.preferredKeySystems,e.h.drm.keySystemsMapping),2);if(e.h.streaming.dontChooseCodecs||lg(t,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes,e.h.preferredTextFormats),!t.variants.some(Oo))throw new D(2,4,4032);return n.return(Xg(e,t))})}function Wg(e,t){var n=e.h.restrictions;e=e.i;var i=!1;t=m(t.variants);for(var r=t.next();!r.done;r=t.next()){r=r.value;var a=r.allowedByApplication;r.allowedByApplication=gu(r,n,e),a!=r.allowedByApplication&&(i=!0)}return i}function Xg(e,t){var n=Wg(e,t);if(t){var i=e.g?e.g.g:null;if(i&&e.g.B){for(var r=new Set,a=m(t.variants),o=a.next();!o.done;o=a.next())o=o.value,o.audio&&r.add(o.audio),o.video&&r.add(o.video);for(r=m(r),a=r.next();!a.done;a=r.next())Yg(e,i.keySystem,a.value)}Jg(e,t)}return n}function Yg(e,t,n){n=m(n.drmInfos);for(var i=n.next();!i.done;i=n.next())if(i=i.value,i.keySystem==t){for(var r=m(i.initData||[]),a=r.next();!a.done;a=r.next())a=a.value,_o(e.g,a.initDataType,a.initData);r=e.g,r.g&&r.g.mediaTypes!==i.mediaTypes&&(r.g.mediaTypes=i.mediaTypes)}}function Jg(e,t){function n(l){if(l&&!s.has(l)&&(s.add(l),l.keyIds.size)){l=m(l.keyIds);for(var c=l.next();!c.done;c=l.next()){c=c.value;var d=i[r?"00":c];d?$g.includes(d)&&o.add(d):a.add(c)}}}var i=e.g?e.g.$e():{};e=Object.keys(i);var r=e.length&&e[0]=="00";e=!1;var a=new Set,o=new Set,s=new WeakSet;t=m(t.variants);for(var u=t.next();!u.done;u=t.next()){if(u=u.value,!u.allowedByApplication)e=!0;else if(u.allowedByKeySystem)return;n(u.audio),n(u.video)}throw e={hasAppRestrictions:e,missingKeys:Array.from(a),restrictedKeyStatuses:Array.from(o)},new D(2,4,4012,e)}var $g=["output-restricted","internal-error"];Y("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function Zt(e){return aT.getOrInsertComputed(e,function(){var t,n;return(n=(t=P.ManagedMediaSource||P.MediaSource)==null?void 0:t.isTypeSupported(e))!=null?n:!1})}function Qg(){var e=P.ManagedMediaSource||P.MediaSource;return e&&e.prototype?!!e.prototype.setLiveSeekableRange&&!!e.prototype.clearLiveSeekableRange:!1}var aT=new Map;function Mu(e,t){var n=null,i=null,r=null,a=null,o=e.U();return t&1&&(r=e.Fd()),t&2&&(a=e.U()),t&8&&(n=e.U()),t&16&&(i=e.U()),{trackId:o,Xd:n,Yd:i,sj:r,Si:a}}function Cu(e,t){return t==1?(t=e.U(),e=e.U(),{baseMediaDecodeTime:t*4294967296+e}):{baseMediaDecodeTime:e.U()}}function Pu(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.U(),e.skip(4),e=e.Ca(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Ru(e,t,n){var i=e.U(),r=[],a=null;n&1&&(a=e.eh()),n&4&&e.skip(4);for(var o=0;o<i;o++){var s={oh:null,sampleSize:null,Gf:null};n&256&&(s.oh=e.U()),n&512&&(s.sampleSize=e.U()),n&1024&&e.skip(4),n&2048&&(s.Gf=t==0?e.U():e.eh()),r.push(s)}return{Im:i,nh:r,qg:a}}function Zg(e){e.skip(6),e.skip(2),e.skip(8);var t=e.Ca();return e.skip(2),e.skip(2),e.skip(2),e=e.Ca()+e.Ca()/65536,{channelCount:t,sampleRate:e}}function md(e){return e=e.U(),{codec:ku(e)}}function oT(e){var t=null,n=null,i=e.Tb(4,!1),r=String.fromCharCode(i[0]);if(r+=String.fromCharCode(i[1]),r+=String.fromCharCode(i[2]),r+=String.fromCharCode(i[3]),r==="nclx"){switch(e.Ca()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(i=e.Ca(),e.Ca(),i){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,ze:n}}function Bo(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function wn(e){return(e<10?"0":"")+e}function Ma(e){this.g=e=e===void 0?[]:e}function Ca(e){if(e.g.length===0)throw Error("StreamInfos must have elements");for(var t=[],n=m(e.g),i=n.next();!i.done;i=n.next()){var r=t,a=r.push,o=i.value;i=Me;var s=o.id+1,u=o.stream.width||0,l=o.stream.height||0;o.type=="audio"&&(l=u=0);var c=o.duration*o.timescale,d=Math.floor(c/(hr+1));switch(c=Math.floor(c%(hr+1)),s=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(z(st(s,4)),[0,0,0,0],z(st(d,4)),z(st(c,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],z(st(u,2)),[0,0],z(st(l,2)),[0,0])),s=Me("tkhd",s),u=Me,d=o.duration*o.timescale,l=Math.floor(d/(hr+1)),d=Math.floor(d%(hr+1)),c=o.stream.language,c=c.charCodeAt(0)-96<<10|c.charCodeAt(1)-96<<5|c.charCodeAt(2)-96,l=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(z(st(o.timescale,4)),z(st(l,4)),z(st(d,4)),z(st(c,2)),[0,0])),l=Me("mdhd",l),d=o,c=new Uint8Array([]),d.type){case"video":c=uT.value();break;case"audio":c=lT.value()}d=Me("hdlr",c);e:{switch(o.type){case"video":o=Me("minf",Me("vmhd",pT.value()),am.value(),em(o));break e;case"audio":o=Me("minf",Me("smhd",gT.value()),am.value(),em(o));break e}o=new Uint8Array([])}o=u("mdia",l,d,o),i=i("trak",s,o),a.call(r,i)}for(t=mt.apply(Vt,z(t)),a=e.g[0],n=Me,i=a.duration*a.timescale,r=Math.floor(i/(hr+1)),i=Math.floor(i%(hr+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(z(st(a.timescale,4)),z(st(r,4)),z(st(i,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),r=Me("mvhd",r),i=[],e=m(e.g),u=e.next();!u.done;u=e.next())o=i,s=o.push,u=new Uint8Array([0,0,0,0].concat(z(st(u.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),u=Me("trex",u),s.call(o,u);if(e=mt.apply(Vt,z(i)),e=Me("mvex",e),i=[],Jr(a.stream)){for(a=m(a.stream.drmInfos),o=a.next();!o.done;o=a.next())if(o=o.value,o.initData)for(o=m(o.initData),s=o.next();!s.done;s=o.next())i.push(s.value.initData);a=mt.apply(Vt,z(i))}else a=new Uint8Array([]);return e=n("moov",r,t,e,a),t=vT.value(),n=new Uint8Array(t.byteLength+e.byteLength),n.set(t),n.set(e,t.byteLength),n}function em(e){var t=Me,n="aac";e.codecs.includes("mp3")?n="mp3":e.codecs.includes("ac-3")?n=Te().se()?"ec-3":"ac-3":e.codecs.includes("ec-3")?n="ec-3":e.codecs.includes("opus")&&(n="opus");var i=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(n=e.stream.width||0,i=e.stream.height||0,e.Sa.byteLength>0)var r=Me("avcC",e.Sa);else{r=Me;for(var a=7,o=[],s=[],u=0,l=0,c=0,d=0;d<e.Bb.length;d++){var h=nm(e.Bb[d]);switch(h[0]&31){case 7:o.push(h),a+=h.length+2;break;case 8:s.push(h),a+=h.length+2}}for(o.length>0&&(u=o[0][1],c=o[0][2],l=o[0][3]),a=new Uint8Array(a),d=0,a[d++]=1,a[d++]=u,a[d++]=c,a[d++]=l,a[d++]=255,a[d++]=224|o.length,u=0;u<o.length;u++)a[d++]=(o[u].length&65280)>>8,a[d++]=o[u].length&255,a.set(o[u],d),d+=o[u].length;for(a[d++]=s.length,o=0;o<s.length;o++)a[d++]=(s[o].length&65280)>>8,a[d++]=s[o].length&255,a.set(s[o],d),d+=s[o].length;r=r("avcC",a)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(z(st(n,2)),z(st(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="avc1",s=tm(e),o=new Uint8Array([]),Jr(e.stream)&&(o=Yr(e.stream,e.codecs),i="encv"),i=Me(i,n,r,s,o)}else e.codecs.includes("hvc1")&&(i=e.stream.width||0,r=e.stream.height||0,n=new Uint8Array([]),e.Sa.byteLength>0&&(n=Me("hvcC",e.Sa)),i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(z(st(i,2)),z(st(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="hvc1",s=tm(e),o=new Uint8Array([]),Jr(e.stream)&&(o=Yr(e.stream,e.codecs),r="encv"),i=Me(r,i,n,s,o));break;case"audio":n=="mp3"?e=Me(".mp3",Fo(e)):n=="ac-3"?(n=Me("dac3",e.Fa),i="ac-3",r=new Uint8Array([]),Jr(e.stream)&&(r=Yr(e.stream,e.codecs),i="enca"),e=Me(i,Fo(e),n,r)):n=="ec-3"?(n=Me("dec3",e.Fa),i="ec-3",r=new Uint8Array([]),Jr(e.stream)&&(r=Yr(e.stream,e.codecs),i="enca"),e=Me(i,Fo(e),n,r)):n=="opus"?(n=Me("dOps",e.Fa),i="Opus",r=new Uint8Array([]),Jr(e.stream)&&(r=Yr(e.stream,e.codecs),i="enca"),e=Me(i,Fo(e),n,r)):(e.Fa.byteLength>0?n=Me("esds",e.Fa):(n=Me,i=e.id+1,r=e.stream.channelsCount||2,o=e.stream.audioSamplingRate||44100,u=ha("audio",e.codecs.split(",")),l={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},s=l[o],(u==="mp4a.40.5"||u==="mp4a.40.29")&&(s=l[o*2]),o=parseInt(u.split(".").pop(),10),i=new Uint8Array([0,0,0,0,3,25].concat(z(st(i,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,o<<3|s>>>1,s<<7|r<<3,6,1,2])),n=n("esds",i)),i="mp4a",r=new Uint8Array([]),Jr(e.stream)&&(r=Yr(e.stream,e.codecs),i="enca"),e=Me(i,Fo(e),n,r)),i=e}return e=Me("stsd",mT.value(),i),t("stbl",e,Me("stts",cT.value()),Me("stsc",dT.value()),Me("stsz",hT.value()),Me("stco",fT.value()))}function tm(e){if(!e.Za&&!e.$a)return new Uint8Array([]);var t=e.$a;return e=new Uint8Array([].concat(z(st(e.Za,4)),z(st(t,4)))),Me("pasp",e)}function Fo(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(z(st(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Yr(e,t){var n=Me;t=new Uint8Array([].concat(z(st(im(t.split(".")[0]),4)))),t=Me("frma",t);var i="cenc",r=e.drmInfos[0];r&&r.encryptionScheme&&(i=r.encryptionScheme),i=new Uint8Array([0,0,0,0].concat(z(st(im(i),4)),[0,1,0,0])),i=Me("schm",i),r=Me;var a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=m(e.drmInfos);for(var o=e.next();!o.done;o=e.next())if((o=o.value)&&o.keyIds&&o.keyIds.size){o=m(o.keyIds);for(var s=o.next();!s.done;s=o.next())a=nm(s.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),a=Me("tenc",e,a),n("sinf",t,i,r("schi",a))}function Vo(e){var t=[];e=m(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=t.push,r=i.apply,a=Me,o=new Uint8Array([0,0,0,0].concat(z(st(n.data?n.data.sequenceNumber:0,4))));o=Me("mfhd",o);var s,u=n.data?n.data.zb:[],l=new Uint8Array(4+u.length);for(s=0;s<u.length;s++){var c=u[s].flags;l[s+4]=c.hb<<4|c.kb<<2|c.jb}u=Me("sdtp",l);var d=u.length+32+20+8+16+8+8;l=Me,s=new Uint8Array([0,0,0,58].concat(z(st(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Me("tfhd",s),c=n.data?n.data.baseMediaDecodeTime:0;var h=Math.floor(c%(hr+1));c=new Uint8Array([1,0,0,0].concat(z(st(Math.floor(c/(hr+1)),4)),z(st(h,4)))),c=Me("tfdt",c);var p=d;d=n.data?n.data.zb:[],h=d.length;var g=12+16*h,y=new Uint8Array(g);for(p+=8+g,y.set([n.type==="video"?1:0,0,15,1].concat(z(st(h,4)),z(st(p,4))),0),p=0;p<h;p++){var b=d[p];g=st(b.duration,4);var A=st(b.size,4),x=b.flags;b=st(b.qb,4),y.set([].concat(z(g),z(A),[x.wb<<2|x.hb,x.kb<<6|x.jb<<4|x.xb,x.gb&61440,x.gb&15],z(b)),12+16*p)}d=Me("trun",y),u=l("traf",s,c,d,u),a=a("moof",o,u),r.call(i,t,[a,sT(n)])}return mt.apply(Vt,z(t))}function sT(e){return e=(e.data?e.data.zb:[]).map(function(t){return t.data}),e=mt.apply(Vt,z(e)),Me("mdat",e)}function st(e,t){var n=[];for(--t;t>=0;t--)n.push(e>>8*t&255);return n}function nm(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[n*2]+e[n*2+1]),16);return t}function im(e){for(var t=0,n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<(e.length-n-1)*8;return t}function Me(e){var t=Et.apply(1,arguments),n=rm.get(e);n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],rm.set(e,n));for(var i=8,r=t.length-1;r>=0;r--)i+=t[r].byteLength;for(r=new Uint8Array(i),r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=i&255,r.set(n,4),n=0,i=8;n<t.length;n++)r.set(t[n],i),i+=t[n].byteLength;return r}function Jr(e){return e.encrypted&&e.drmInfos.length>0}var hr=4294967295,rm=new Map,uT=new at(function(){return new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0])}),lT=new at(function(){return new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),cT=new at(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),dT=new at(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),fT=new at(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),hT=new at(function(){return new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])}),pT=new at(function(){return new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}),gT=new at(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),mT=new at(function(){return new Uint8Array([0,0,0,0,0,0,0,1])}),vT=new at(function(){var e=new Uint8Array([105,115,111,109]),t=new Uint8Array([97,118,99,49]),n=new Uint8Array([0,0,0,1]);return Me("ftyp",e,n,e,t)}),am=new at(function(){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);return e=Me("dref",e),Me("dinf",e)});function yT(e){e=pe(e);var t=null;return new Ke().box("moov",be).box("trak",be).box("mdia",be).box("minf",be).box("stbl",be).S("stsd",Vi).box("enca",function(n){return t=n.reader.h,Au(n)}).box("sinf",be).box("frma",function(n){n.parser.stop(),md(n.reader).codec==="ec-3"&&t&&t.getUint16(16)!==2&&t.setUint16(16,2)}).parse(e),e}function bT(e,t,n){function i(p){d.push({box:p,Fi:1701733217})}function r(p){d.push({box:p,Fi:1701733238})}function a(p){u=!0,p.parser.stop()}function o(p){c.push(p),be(p)}var s=t=pe(t),u=!1,l,c=[],d=[];if(new Ke().box("moov",o).box("trak",o).box("mdia",o).box("minf",o).box("stbl",o).S("stsd",function(p){l=p,c.push(p),Vi(p)}).S("encv",a).S("enca",a).S("dvav",r).S("dva1",r).S("dvh1",r).S("dvhe",r).S("dvc1",r).S("dvi1",r).S("hev1",r).S("hvc1",r).S("avc1",r).S("avc3",r).S("ac-3",i).S("ec-3",i).S("ac-4",i).S("Opus",i).S("fLaC",i).S("mp4a",i).parse(t),u)return t;if(d.length==0||!l)throw Ri(t),new D(2,3,3019,n);d.reverse(),n=m(d);for(var h=n.next();!h.done;h=n.next())h=h.value,s=TT(e,s,l,h.box,c,h.Fi);return Te().jh()?(e=new Uint8Array(t.byteLength+s.byteLength),e.set(s),e.set(t,s.byteLength),e):s}function wT(e){e=pe(e);var t=[];new Ke().box("mdat",function(o){t.push(o)}).parse(e);for(var n=[],i=0;i<t.length;i++){var r=t[i-1],a=t[i];n.push(ST(e.subarray(r?r.start+r.size:0,a.start+a.size)))}return mt.apply(Vt,z(n))}function ST(e){function t(d){o.push(d),be(d)}var n,i,r,a,o=[];if(new Ke().box("moof",t).box("traf",t).S("tfhd",function(d){n=d,r=Mu(d.reader,d.flags)}).S("trun",function(d){i=d,a=Ru(d.reader,d.version,d.flags)}).parse(e),r&&r.Si!==2){var s=n.start+fr(n)+4+(r.sj!==null?8:0),u=ln(e);if(r.Si!==null)u.setUint32(s,2);else{Du(e,n.start,n.size+4);var l=u.getUint32(n.start+8);u.setUint32(n.start+8,l|2),a&&a.qg!==null&&u.setInt32(i.start+fr(i)+4,a.qg+4),l=e.subarray(0,s),u=e.subarray(s),e=new Uint8Array(e.byteLength+4),e.set(l),l=[];for(var c=3;c>=0;c--)l.push(2>>8*c&255);for(e.set(new Uint8Array(l),s),e.set(u,s+4),s=m(o),u=s.next();!u.done;u=s.next())u=u.value,Du(e,u.start,u.size+4)}}return e}function TT(e,t,n,i,r,a){var o=Yr(e,i.name),s=t.subarray(i.start,i.start+i.size);for(e=new Uint8Array(i.size+o.byteLength),e.set(s,0),ln(e).setUint32(4,a),e.set(o,i.size),Du(e,0,e.byteLength),a=new Uint8Array(t.byteLength+e.byteLength),i=Te().jf()?i.start:i.start+i.size,o=t.subarray(i),a.set(t.subarray(0,i)),a.set(e,i),a.set(o,i+e.byteLength),t=m(r),r=t.next();!r.done;r=t.next())r=r.value,Du(a,r.start,r.size+e.byteLength);return e=ln(a,n.start),n=fr(n),t=e.getUint32(n),e.setUint32(n,t+1),a}function Du(e,t,n){e=ln(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}function xT(e){function t(r){i.push({start:r.start,size:r.size}),be(r)}var n=pe(e),i=[];return new Ke().box("moov",t).box("trak",t).box("mdia",t).box("minf",t).box("stbl",t).box("stsd",function(r){i.push({start:r.start,size:r.size});for(var a=ln(n,r.start),o=0;o<r.size-3;o++){var s=a.getUint32(o);s==1633889587?a.setUint32(o,1700998451):s==1684103987&&a.setUint32(o,1684366131)}}).parse(n),n}function fn(e,t,n,i,r,a,o,s){this.P=e,this.startByte=t,this.endByte=n,this.yd=i===void 0?null:i,this.timescale=r===void 0?null:r,this.h=a===void 0?null:a,this.aesKey=o===void 0?null:o,this.g=this.mimeType=this.codecs=null,this.encrypted=s===void 0?!1:s}fn.prototype.Kc=function(){return this.startByte},fn.prototype.Ic=function(){return this.endByte},fn.prototype.ue=function(e){this.h=e},fn.prototype.ac=function(){return this.h};function Ho(e,t){return e===t?!0:e&&t?e.Kc()==t.Kc()&&e.Ic()==t.Ic()&&ir(e.P().sort(),t.P().sort())&&Ci(e.ac(),t.ac()):e==t}Y("shaka.media.InitSegmentReference",fn),fn.prototype.getEndByte=fn.prototype.Ic,fn.prototype.getStartByte=fn.prototype.Kc;function se(e,t,n,i,r,a,o,s,u,l,c,d,h,p,g,y){for(l=l===void 0?[]:l,p=p===void 0?Hi:p,this.startTime=e,this.j=this.endTime=t,this.C=n,this.startByte=i,this.endByte=r,this.ba=a,this.timestampOffset=o,this.appendWindowStart=s,this.appendWindowEnd=u,this.g=l,this.tilesLayout=c===void 0?"":c,this.B=d===void 0?null:d,this.h=h===void 0?null:h,this.status=p,this.preload=!1,this.l=!0,this.o=!1,this.aesKey=g===void 0?null:g,this.thumbnailSprite=null,this.i=-1,this.m=y===void 0?!1:y,this.je=this.Xc=!1,e=m(this.g),t=e.next();!t.done;t=e.next())t.value.Bi();this.m&&this.g.length&&this.g[this.g.length-1].Ai(),this.u=this.bandwidth=this.mimeType=this.codecs=null,this.F=!1}f=se.prototype,f.P=function(){return this.C()},f.getStartTime=function(){return this.startTime},f.Lj=function(){return this.endTime},f.Kc=function(){return this.startByte},f.Ic=function(){return this.endByte};function vd(e){if(e.endByte)return e.endByte+1-e.startByte;if(e.bandwidth){var t=e.bandwidth*(e.endTime-e.startTime);if(!isNaN(t)&&t>0)return t}if(e.g.length>0&&e.m)for(e=m(e.g),e=e.next();!e.done;e=e.next()){vd(e.value);break}return null}f.fk=function(){return this.tilesLayout},f.ek=function(){return this.B},f.bc=function(){return this.status},f.Bk=function(){this.status=sm},f.Vg=function(){this.preload=!0},f.isPreload=function(){return this.preload},f.xd=function(){this.l=!1},f.rk=function(){return this.l},f.Bi=function(){this.Xc=!0},f.vk=function(){return this.Xc},f.Ai=function(){this.je=!0},f.tk=function(){return this.je},f.zi=function(){this.o=!0},f.lk=function(){return this.o},f.Mf=function(e){this.thumbnailSprite=e},f.ck=function(){return this.thumbnailSprite},f.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},f.Eh=function(e){this.h==null?mi("Sync attempted without sync time!"):(e=this.h-e-this.startTime,Math.abs(e)>=.001&&this.offset(e))},f.ue=function(e,t){this.u=e,this.F=t===void 0?!1:t},f.ac=function(e){var t=this.u;return(e===void 0||e)&&this.F&&(this.u=null),t};function om(e,t){e.ba=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())om(n.value,t)}Y("shaka.media.SegmentReference",se),se.prototype.getSegmentData=se.prototype.ac,se.prototype.setSegmentData=se.prototype.ue,se.prototype.syncAgainst=se.prototype.Eh,se.prototype.offset=se.prototype.offset,se.prototype.getThumbnailSprite=se.prototype.ck,se.prototype.setThumbnailSprite=se.prototype.Mf,se.prototype.hasByterangeOptimization=se.prototype.lk,se.prototype.markAsByterangeOptimization=se.prototype.zi,se.prototype.isLastPartial=se.prototype.tk,se.prototype.markAsLastPartial=se.prototype.Ai,se.prototype.isPartial=se.prototype.vk,se.prototype.markAsPartial=se.prototype.Bi,se.prototype.isIndependent=se.prototype.rk,se.prototype.markAsNonIndependent=se.prototype.xd,se.prototype.isPreload=se.prototype.isPreload,se.prototype.markAsPreload=se.prototype.Vg,se.prototype.markAsUnavailable=se.prototype.Bk,se.prototype.getStatus=se.prototype.bc,se.prototype.getTileDuration=se.prototype.ek,se.prototype.getTilesLayout=se.prototype.fk,se.prototype.getEndByte=se.prototype.Ic,se.prototype.getStartByte=se.prototype.Kc,se.prototype.getEndTime=se.prototype.Lj,se.prototype.getStartTime=se.prototype.getStartTime,se.prototype.getUris=se.prototype.P;var Hi=0,sm=1;se.Status={wl:Hi,Bm:sm,Xl:2};function Go(e){return e.length==1&&e.end(0)-e.start(0)<1e-4}function um(e){return!e||Go(e)?null:e.length==1&&e.start(0)<0?0:e.length?e.start(0):null}function Lu(e){return!e||Go(e)?null:e.length?e.end(e.length-1):null}function yd(e,t){return!e||!e.length||Go(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function lm(e,t){if(!e||!e.length||Go(e))return 0;var n=0;e=m(Gi(e));for(var i=e.next();!i.done;i=e.next()){var r=i.value;i=r.start,r=r.end,r>t&&(n+=r-Math.max(i,t))}return n}function AT(e,t,n){return!e||!e.length||Go(e)?null:(e=Gi(e).findIndex(function(i,r,a){return i.start>t&&(r==0||a[r-1].end-t<=n)}),e>=0?e:null)}function Gi(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function bd(){}function cm(e,t){var n=document.createElement("source");return n.src=e,n.type=t===void 0?"":t,n}function Nu(e){for(var t=!1,n=e.getElementsByTagName("source"),i=n.length-1;i>=0;--i)e.removeChild(n[i]),t=!0;return e.src&&(e.removeAttribute("src"),t=!0),t}function qo(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function $r(){return Ko||(wd||(wd=new Ae(function(){Ko=null})),(Ko=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Ko=document.createElement("video")),wd.ka(1),Ko)}function kT(e,t){var n,i,r,a,o;return R(function(s){if(s.g==1)return"fonts"in document&&"FontFace"in P?T(s,document.fonts.ready,2):s.return();if(!("entries"in document.fonts))return s.return();for(n=function(u){u=u.entries();for(var l=[],c=u.next();c.done===!1;)l.push(c.value),c=u.next();return l},i=m(n(document.fonts)),r=i.next();!r.done;r=i.next())if(a=r.value,a.family===e&&a.display==="swap")return s.return();o=new FontFace(e,"url("+t+")",{display:"swap"}),document.fonts.add(o),X(s)})}Y("shaka.util.Dom",bd),bd.removeAllChildren=qo,bd.clearSourceFromVideo=Nu;var wd=null,Ko=null;function Sd(){}function dm(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function fm(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Td(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function IT(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(e.size<2||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var i=ot(pe(e.data,1,n)),r=e.data[2+n],a=e.data.subarray(3+n).indexOf(0);if(a===-1)return null;var o=ot(pe(e.data,3+n,a)),s;return i==="-->"?s=ot(pe(e.data,4+n+a)):s=_n(e.data.subarray(4+n+a)),t.mimeType=i,t.pictureType=r,t.description=o,t.data=s,t}return e.type==="TXXX"?e.size<2||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=ot(pe(e.data,1,i)),e=ot(pe(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?e.size<2||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=ot(pe(e.data,1,i)),e=ot(pe(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?e.size<2||(n=e.data.indexOf(0),n===-1)?null:(n=ot(pe(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=_n(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?e.size<2||e.data[0]!==3?null:(e=ot(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=ot(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=_n(e.data),t):null}function Qr(e){for(var t=0,n=[];dm(e,t);){var i=Td(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,i=t+i;t+10<i;){var r=e.subarray(t),a=Td(r,4);r={type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:a,data:r.subarray(10,10+a)},(a=IT(r))&&n.push(a),t+=r.size+10}fm(e,t)&&(t+=10)}return n}function Pa(e,t){for(var n=t=t===void 0?0:t,i=0;dm(e,t);)e[t+5]>>6&1&&(i+=10),i+=10,i+=Td(e,t+6),fm(e,t+10)&&(i+=10),t+=i;return i>0?e.subarray(n,n+i):new Uint8Array([])}Y("shaka.util.Id3Utils",Sd),Sd.getID3Data=Pa,Sd.getID3Frames=Qr;function hm(e){return new Date(Date.UTC(1900,0,1,0,0,0,0)+e).getTime()}function qi(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,i=0;i<e.byteLength;i++)i>=2&&e[i]==3&&e[i-1]==0&&e[i-2]==0||(t[n]=e[i],n++);this.j=pe(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function xd(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),i=Math.min(4,e.i);i!==0&&(n.set(e.j.subarray(t,t+i)),e.h=new Ze(n,0).U(),e.g=i*8,e.i-=i)}function Sn(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=n*8,e.g-=n,xd(e)}e.h<<=t,e.g-=t}function Ie(e,t){var n=Math.min(e.g,t),i=e.h>>>32-n;return e.g-=n,e.g>0?e.h<<=n:e.i>0&&xd(e),n=t-n,n>0?i<<n|Ie(e,n):i}function Ad(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return xd(e),t+Ad(e)}function _t(e){Sn(e,1+Ad(e))}function $(e){var t=Ad(e);return Ie(e,t+1)-1}function Ra(e){return e=$(e),1&e?1+e>>>1:-1*(e>>>1)}function re(e){return Ie(e,1)===1}function Be(e){return Ie(e,8)}function Ou(e,t){for(var n=8,i=8,r=0;r<t;r++)i!==0&&(i=Ra(e),i=(n+i+256)%256),n=i===0?n:i}function ET(e){return Be(e),$(e),$(e)}Y("shaka.util.ExpGolomb",qi);function $e(){this.I=null,this.J=!1,this.m=this.K=null,this.j=[],this.g=[],this.C=this.F=null,this.i=[],this.h=[],this.G=null,this.l=[],this.B=this.H=this.o=this.u=null}f=$e.prototype,f.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},f.Kf=function(e){this.B!=null&&this.B!=e&&(this.o=this.u=null),this.B=e},f.parse=function(e){if(e.length<564)return this;for(var t=Math.max(0,Id(e)),n=e.length-(e.length+t)%188,i=!1,r=t;r<n;r+=188)if(e[r]==71){var a=!!(e[r+1]&64),o=((e[r+1]&31)<<8)+e[r+2];if((e[r+3]&48)>>4>1){var s=r+5+e[r+4];if(s==r+188)continue}else s=r+4;switch(o){case 0:a&&(s+=e[s]+1),this.I=(e[s+10]&31)<<8|e[s+11];break;case 17:case 8191:break;case this.I:a&&(s+=e[s]+1),a=e,o={audio:-1,video:-1,gf:-1,audioCodec:"",videoCodec:""};var u=s+3+((a[s+1]&15)<<8|a[s+2])-4;for(s+=12+((a[s+10]&15)<<8|a[s+11]);s<u;){var l=(a[s+1]&31)<<8|a[s+2],c=(a[s+3]&15)<<8|a[s+4];switch(a[s]){case 6:if(c>0)for(var d=s+5,h=c;h>2;){var p=a[d+1]+2;switch(a[d]){case 5:var g=a.subarray(d+2,d+p);g=$s.value()(g),o.audio==-1&&g==="Opus"?(o.audio=l,o.audioCodec="opus"):o.video==-1&&g==="AV01"&&(o.video=l,o.videoCodec="av1");break;case 106:o.audio==-1&&(o.audio=l,o.audioCodec="ac3");break;case 122:o.audio==-1&&(o.audio=l,o.audioCodec="ec3");break;case 124:o.audio==-1&&(o.audio=l,o.audioCodec="aac");break;case 127:o.audioCodec=="opus"&&(g=null,a[d+2]===128&&(g=a[d+3]),g!=null&&(this.H={channelCount:g&15?g&15:2,vj:g,sampleRate:48e3}))}d+=p,h-=p}break;case 15:o.audio==-1&&(o.audio=l,o.audioCodec="aac");break;case 17:o.audio==-1&&(o.audio=l,o.audioCodec="aac-loas");break;case 21:o.gf==-1&&(o.gf=l);break;case 27:o.video==-1&&(o.video=l,o.videoCodec="avc");break;case 3:case 4:o.audio==-1&&(o.audio=l,o.audioCodec="mp3");break;case 36:o.video==-1&&(o.video=l,o.videoCodec="hvc");break;case 129:o.audio==-1&&(o.audio=l,o.audioCodec="ac3");break;case 132:case 135:o.audio==-1&&(o.audio=l,o.audioCodec="ec3")}s+=c+5}a=o,a.video!=-1&&(this.K=a.video,this.m=a.videoCodec),a.audio!=-1&&(this.F=a.audio,this.C=a.audioCodec),a.gf!=-1&&(this.G=a.gf),i&&!this.J&&(i=!1,r=t-188),this.J=!0;break;case this.K:s=e.subarray(s,r+188),a?this.j.push([s]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(s);break;case this.F:s=e.subarray(s,r+188),a?this.i.push([s]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(s);break;case this.G:s=e.subarray(s,r+188),a?this.l.push([s]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(s);break;default:i=!0}}return this};function kd(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var i=t[7];if(i&192){var r=(t[9]&14)*536870912+(t[10]&255)*4194304+(t[11]&254)*16384+(t[12]&255)*128+(t[13]&254)/2;e.u==null&&(e.u=r),n.pts=gm(r,e.u),e.u=n.pts,n.dts=n.pts,i&64&&(i=(t[14]&14)*536870912+(t[15]&255)*4194304+(t[16]&254)*16384+(t[17]&255)*128+(t[18]&254)/2,e.o==null&&(e.o=i),n.dts=n.pts!=r?gm(i,e.o):i),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}f.Ik=function(e){return Ce("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.ah(e,{le:null,state:null})},f.ah=function(e,t){var n=e.pts?e.pts/9e4:null;e=e.data;var i=e.byteLength,r=1;this.m=="hvc"&&(r=2);var a=t.state||0,o=a,s=0,u=[],l=-1,c=0;for(a==-1&&(l=0,c=this.m=="hvc"?e[0]>>1&63:e[0]&31,a=0,s=1);s<i;){var d=e[s++];a?a===1?a=d?0:2:d?d==1?(d=s-a-1,l>=0?u.push({data:e.subarray(l+r,d),fullData:e.subarray(l,d),type:c,time:n,state:null}):(a=u.length?u[u.length-1]:t.le)&&(o&&s<=4-o&&a.state&&(a.data=a.data.subarray(0,a.data.byteLength-o),a.fullData=a.fullData.subarray(0,a.fullData.byteLength-o)),d>0&&(d=e.subarray(0,d),a.data=mt(a.data,d),a.fullData=mt(a.fullData,d),a.state=0)),s<i?(c=this.m=="hvc"?e[s]>>1&63:e[s]&31,l=s,a=0):a=-1):a=0:a=3:a=d?0:1}return l>=0&&a>=0&&u.push({data:e.subarray(l+r,i),fullData:e.subarray(l,i),type:c,time:n,state:a}),!u.length&&t.le&&(n=u.length?u[u.length-1]:t.le)&&(n.data=mt(n.data,e),n.fullData=mt(n.fullData,e)),t.state=a,u},f.getMetadata=function(){for(var e=[],t=m(this.l),n=t.next();!n.done;n=t.next())n=mt.apply(Vt,z(n.value)),(n=kd(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Qr(n.data),dts:n.dts,pts:n.pts});return e},f.rb=function(){if(this.i.length&&!this.h.length)for(var e=m(this.i),t=e.next();!t.done;t=e.next()){var n=mt.apply(Vt,z(t.value)),i=kd(this,n);t=this.h.length?this.h[this.h.length-1]:null,i&&i.pts!=null&&i.dts!=null&&(!t||t.pts!=i.pts&&t.dts!=i.dts)?this.h.push(i):this.h.length&&(n=i?i.data:n)&&(t=this.h.pop(),t.data=mt(t.data,n),this.h.push(t))}return this.h},f.ud=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=m(this.j),n=t.next();!n.done;n=t.next()){var i=mt.apply(Vt,z(n.value)),r=kd(this,i);n=this.g.length?this.g[this.g.length-1]:null,r&&r.pts!=null&&r.dts!=null&&(!n||n.pts!=r.pts&&n.dts!=r.dts)?this.g.push(r):this.g.length&&(i=r?r.data:i)&&(n=this.g.pop(),n.data=mt(n.data,i),this.g.push(n))}if(e){for(t={le:null,state:null},n=[],i=m(this.g),r=i.next();!r.done;r=i.next())r=r.value,r.nalus=this.ah(r,t),r.nalus.length&&(n.push(r),t.le=r.nalus[r.nalus.length-1]);this.g=n}}return e?this.g:(e=this.g,this.g=[],e)},f.getStartTime=function(e){if(e=="audio"){e=null;var t=this.rb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.ud(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},f.Zd=function(){return{audio:this.C,video:this.m}},f.ef=function(){for(var e=[],t=m(this.ud()),n=t.next();!n.done;n=t.next())e.push.apply(e,z(n.value.nalus));return e},f.ik=function(){Ce("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Ng();return{height:e.height,width:e.width}},f.Ng=function(){return this.m=="hvc"?CT(this):MT(this)};function pm(e){var t=e.ud();return t.length>1&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(Math.abs(1/(t-e)*9e4)):null}function MT(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.ef();if(!n.length||(n=n.find(function(p){return p.type==7}),!n))return t;n=new qi(n.data);var i=Be(n),r=Be(n),a=Be(n);if(_t(n),PT.includes(i)){var o=$(n);if(o===3&&Sn(n,1),_t(n),_t(n),Sn(n,1),re(n)){o=o!==3?8:12;for(var s=0;s<o;s++)re(n)&&(s<6?Ou(n,16):Ou(n,64))}}if(_t(n),o=$(n),o===0)$(n);else if(o===1)for(Sn(n,1),_t(n),_t(n),o=$(n),s=0;s<o;s++)_t(n);_t(n),Sn(n,1),o=$(n),s=$(n);var u=Ie(n,1);u===0&&Sn(n,1),Sn(n,1);var l=0,c=0,d=0,h=0;return re(n)&&(l=$(n),c=$(n),d=$(n),h=$(n)),t.height=String((2-u)*(s+1)*16-d*2-h*2),t.width=String((o+1)*16-l*2-c*2),t.codec="avc1."+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+a.toString(16).toUpperCase()).slice(-2),t.frameRate=pm(e),t}function CT(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.ef();if(!n.length||(n=n.find(function(N){return N.type==33}),!n))return t;var i=new qi(n.fullData,!0);Be(i),Be(i),Ie(i,4);var r=Ie(i,3);re(i);var a=Ie(i,2),o=Ie(i,1),s=Ie(i,5),u=Ie(i,32);n=Be(i);for(var l=Be(i),c=Be(i),d=Be(i),h=Be(i),p=Be(i),g=Be(i),y=[],b=[],A=0;A<r;A++)y.push(re(i)),b.push(re(i));if(r>0)for(A=r;A<8;A++)Ie(i,2);for(A=0;A<r;A++)y[A]&&Ie(i,88),b[A]&&Be(i);$(i),r=$(i),r==3&&Ie(i,1),y=$(i),b=$(i);var x=A=0,k=0,M=0;return re(i)&&(A+=$(i),x+=$(i),k+=$(i),M+=$(i)),t.width=String(y-(A+x)*(r===1||r===2?2:1)),t.height=String(b-(k+M)*(r===1?2:1)),i=function(N){for(var I=0,C=0;C<32;C++)I|=(N>>C&1)<<31-C;return I>>>0}(u),o=o==1?"H":"L",a="hvc1"+("."+["","A","B","C"][a]+s),a+="."+i.toString(16).toUpperCase(),a+="."+o+g,p&&(a+="."+p.toString(16).toUpperCase()),h&&(a+="."+h.toString(16).toUpperCase()),d&&(a+="."+d.toString(16).toUpperCase()),c&&(a+="."+c.toString(16).toUpperCase()),l&&(a+="."+l.toString(16).toUpperCase()),n&&(a+="."+n.toString(16).toUpperCase()),t.codec=a,t.frameRate=pm(e),t}function gm(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=n*8589934592;return e}function Da(e){return!(Id(e)<0)}function Id(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}Y("shaka.util.TsParser",$e),$e.syncOffset=Id,$e.probe=Da,$e.prototype.getVideoInfo=$e.prototype.Ng,$e.prototype.getVideoResolution=$e.prototype.ik,$e.prototype.getVideoNalus=$e.prototype.ef,$e.prototype.getCodecs=$e.prototype.Zd,$e.prototype.getStartTime=$e.prototype.getStartTime,$e.prototype.getVideoData=$e.prototype.ud,$e.prototype.getAudioData=$e.prototype.rb,$e.prototype.getMetadata=$e.prototype.getMetadata,$e.prototype.parseNalus=$e.prototype.ah,$e.prototype.parseAvcNalus=$e.prototype.Ik,$e.prototype.parse=$e.prototype.parse,$e.prototype.setDiscontinuitySequence=$e.prototype.Kf,$e.prototype.clearData=$e.prototype.clearData,$e.Timescale=9e4;var PT=[100,110,122,244,44,83,86,118,128,138,139,134];function mm(e,t,n,i,r){var a=this;this.g=e,this.O=n,this.B=i,this.aa=t,this.l=new Map,this.G=new Map,this.Ja=new Map,this.h=null,this.Ea=!1,this.C=r||null,this.o=new Map,this.u=new _e,this.j=new Map,this.K=null,this.M=new qe,this.Aa="",this.yb=!1,this.za=!0,this.N=!1,this.F=this.R=null,this.i=Ed(this,this.M),this.Ta=this.H=!1,this.I=new ka(function(){return LT(a)}),this.J=!1,this.X="UNKNOWN",this.ib=this.sb=!1,this.Ua=new qe,this.m=!1,this.wa=null,this.ab=new Map,this.ma=this.T=this.oa=this.V=null,this.ha=new qe,this.g.remote&&(this.N=this.g.remote.state!="disconnected",this.u.D(this.g.remote,"connect",function(){a.N=a.g.remote.state!="disconnected"}),this.u.D(this.g.remote,"connecting",function(){a.N=a.g.remote.state!="disconnected"}),this.u.D(this.g.remote,"disconnect",function(){a.N=a.g.remote.state!="disconnected"}))}function Ed(e,t){if(e.za=!0,P.ManagedMediaSource){e.F||(e.g.disableRemotePlayback=!0);var n=new ManagedMediaSource;e.u.D(n,"startstreaming",function(){e.za=!0}),e.u.D(n,"endstreaming",function(){e.za=!1})}else n=new MediaSource;return e.u.ya(n,"sourceopen",function(){URL.revokeObjectURL(e.Aa),t.resolve()}),e.u.ya(e.g,"playing",function(){e.yb=!0}),e.Aa=Rd(n),e.B.useSourceElements?(e.g.removeAttribute("src"),e.R&&e.g.removeChild(e.R),e.F&&e.g.removeChild(e.F),e.R=cm(e.Aa),e.g.appendChild(e.R),e.F&&e.g.appendChild(e.F),e.g.load()):e.g.src=e.Aa,n}function RT(e,t,n){e.g&&P.ManagedMediaSource&&e.i&&e.B.useSourceElements&&(e.F&&e.g.removeChild(e.F),e.F=cm(t,n),e.g.appendChild(e.F),e.g.disableRemotePlayback=!1)}function DT(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.20000000.L153.B0",video/mp4; codecs="hvc1.2.4.L120.b0",video/mp4; codecs="hvc1.2.4.L123.b0",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="av01.0.31M.10.0.111.09.16.09.0",video/mp4; codecs="av01.0.31M.10.0.112.09.18.09.0",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.08.01",video/mp4; codecs="dav1.10.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.03",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(z(ji)),t={};Te(),e=m(e);for(var n=e.next();!n.done;n=e.next()){if(n=n.value,Po(n))t[n]=!0;else if(Ai()){var i=yn(n),r=No(dn(n),i);i=dt(i,r),t[n]=Zt(i)||!!wa(i)}else t[n]=$r().canPlayType(n)!="";i=n.split(";")[0],t[i]=t[i]||t[n]}return t}f=mm.prototype,f.destroy=function(){return this.I.destroy()};function LT(e){var t,n,i,r,a,o,s,u,l,c,d,h,p,g,y;return R(function(b){if(b.g==1){for(t=[],n=m(e.o),i=n.next();!i.done;i=n.next())for(r=i.value,a=m(r),o=a.next().value,s=a.next().value,u=s[0],l=o,e.o.set(l,s.slice(0,1)),u&&t.push(u.p.catch(yS)),c=m(s.slice(1)),d=c.next();!d.done;d=c.next())h=d.value,h.p.reject(new D(2,7,7003,void 0));return e.h&&t.push(e.h.destroy()),T(b,Promise.all(t),2)}for(p=m(e.j.values()),g=p.next();!g.done;g=p.next())y=g.value,y.destroy();e.u&&(e.u.release(),e.u=null),e.g&&e.F&&e.g.removeChild(e.F),e.g&&e.R&&(e.g.removeChild(e.R),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.R=null,e.F=null,e.B=null,e.i=null,e.h=null,e.aa=null,e.l.clear(),e.Ja.clear(),e.j.clear(),e.K=null,e.o.clear(),e.C=null,e.ab.clear(),e.O=null,X(b)})}f.init=function(e,t,n,i){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,i=i===void 0?!1:i;var r=this,a,o,s,u,l,c;return R(function(d){if(d.g==1)return a=vt,T(d,r.M,2);if(d.g!=3)return!Zr(r)&&!pr(r)?d.A(3):(mi("Expected MediaSource to be open during init(); reopening the media source."),r.M=new qe,r.i=Ed(r,r.M),T(d,r.M,3));for(r.J=t,r.X=n,r.sb=i,r.ib=!r.J&&r.X=="HLS"&&!r.sb,r.ab.clear(),r.V=null,r.oa=null,r.T=null,r.ma=null,r.ha=new qe,o=m(e.keys()),s=o.next();!s.done;s=o.next())u=s.value,l=e.get(u),_u(r,u,l,l.codecs),r.m?(r.o.set(a.$,[]),r.o.set(a.va,[])):r.o.set(u,[]);(c=e.get(a.$))&&c.isAudioMuxedInVideo&&(r.m=!0),X(d)})};function _u(e,t,n,i){t=="audio"&&i&&(i=No(i,n.mimeType));var r=dt(n.mimeType,i);if(t==xe)ju(e,r,e.J,n.external);else{var a=e.B.forceTransmux;(!Zt(r)||!e.J&&ji.includes(r))&&(a=!0);var o=cu(n.mimeType,i);if(a){if(a=cn("audio",(i||"").split(",")),i=cn("video",(i||"").split(",")),a&&i){e.m=!0,_u(e,"audio",n,a),_u(e,"video",n,i);return}(i=wa(o))&&(r=i(),e.j.set(t,r),r=r.convertCodecs(t,o))}o=r+e.B.addExtraFeaturesToSourceBuffer(r),Je(e.I);try{var s=e.i.addSourceBuffer(o)}catch(u){throw new D(2,3,3015,u,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.J&&(s.mode=KT),e.u.D(s,"error",function(){var u=e.o.get(t)[0];u.p.reject(new D(2,3,3014,e.g.error?e.g.error.code:0,u.uri))}),e.u.D(s,"updateend",function(){return mr(e,t)}),e.l.set(t,s),e.G.set(t,r),e.Ja.set(t,!!n.drmInfos.length)}}f.configure=function(e){this.B=e,this.h&&(this.h.C=e.modifyCueCallback)};function vm(e){return e.za&&!e.N&&!e.H}function ju(e,t,n,i){e.h||(e.h=new Ui(e.aa),e.h&&(e.h.C=e.B.modifyCueCallback));var r=e.h,a=e.Ea;e=e.X,t=="application/cea-608"||t=="application/cea-708"?r.i=null:(r.i=Ro.get(t)(),r.i.setSequenceMode?r.i.setSequenceMode(n):Ce("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),r.i.setManifestType?r.i.setManifestType(e):Ce("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),r.G=a,r.B=i)}function Zr(e){return e.H?!1:e.i?e.i.readyState=="ended":!0}function pr(e){return e.H?!1:e.i?e.i.readyState=="closed":!0}function Md(e,t){return e.l.size?t==xe?e.h.g:um(La(e,t)):null}function gr(e,t){return e.l.size?t==xe?e.h.h:Lu(La(e,t)):null}function NT(e,t,n){return t==xe?(e=e.h,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=La(e,t),lm(e,n))}f.Hc=function(){var e={total:this.H?[]:Gi(this.g.buffered),audio:Gi(La(this,"audio")),video:Gi(La(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function La(e,t){if(e.H||e.N||pr(e))return null;try{return e.l.get(t).buffered}catch{return e.l.has(t),null}}function OT(e,t,n,i,r,a,o){o=o===void 0?!1:o;var s=null,u=[],l=pe(n);if(ji.includes(a))n=Qr(l),n.length&&i&&((o=n.find(function(g){return g.description==="com.apple.streaming.transportStreamTimestamp"}))&&typeof o.data=="number"&&(s=Math.round(o.data)/1e3),e.O.onMetadata([{cueTime:i.startTime,data:l,frames:n,dts:i.startTime,pts:i.startTime}],0,i.endTime));else if(a.includes("/mp4")&&i&&i.ba){l=new Ke;var c=r.emsgSchemeIdUris!=null&&r.emsgSchemeIdUris.length>0||e.B.dispatchAllEmsgBoxes;c&&l.S("emsg",function(g){var y=r.emsgSchemeIdUris;if(g.version===0)var b=g.reader.Yc(),A=g.reader.Yc(),x=g.reader.U(),k=g.reader.U(),M=g.reader.U(),N=g.reader.U(),I=i.startTime+k/x;else x=g.reader.U(),I=g.reader.Fd()/x+i.timestampOffset,k=I-i.startTime,M=g.reader.U(),N=g.reader.U(),b=g.reader.Yc(),A=g.reader.Yc();g=g.reader.Tb(g.reader.getLength()-g.reader.Pa(),!0),(y&&y.includes(b)||e.B.dispatchAllEmsgBoxes)&&(b=="urn:mpeg:dash:event:2012"?e.O.Hk():(y=I+M/x,e.O.Fk({startTime:I,endTime:y,schemeIdUri:b,value:A,timescale:x,presentationTimeDelta:k,eventDuration:M,id:N,messageData:g}),(b=="https://aomedia.org/emsg/ID3"||b=="https://developer.apple.com/streaming/emsg-id3")&&(x=Qr(g),x.length&&e.O.onMetadata([{cueTime:I,data:g,frames:x,dts:I,pts:I}],0,y))))});var d=i.ba.timescale;t=d&&!isNaN(d);var h=0,p=!1;t&&l.S("prft",function(g){var y=g.reader,b=g.version;y.U(),g=y.U();var A=y.U();g=g*1e3+A/4294967296*1e3,b===0?y=y.U():(b=y.U(),y=y.U(),y=b*4294967296+y),g=hm(g),y=new Map().set("detail",{wallClockTime:g,programStartDate:new Date(g-y/d*1e3)}),y=new Z("prft",y),e.O.onEvent(y)}).box("moof",be).box("traf",be).S("tfdt",function(g){p||(h=Cu(g.reader,g.version).baseMediaDecodeTime/d,p=!0,c||g.parser.stop())}),(c||t)&&l.parse(n,!1,o),p&&i.timestampOffset==0&&(s=h)}else a.includes("/mp4")||a.includes("/webm")||!Da(l)||(u=e.ab.getOrInsertComputed(t,function(){return new $e}),u.clearData(),u.Kf(i.i),u.parse(l),l=u.getStartTime(t),l!=null&&(s=l),u=u.getMetadata());return{timestamp:s,metadata:u}}function Uu(e,t,n,i,r,a,o,s,u,l,c){o=o===void 0?!1:o,s=s===void 0?!1:s,u=u===void 0?!1:u,l=l===void 0?!1:l;var d,h,p,g,y,b,A,x,k,M,N,I,C,E,O,L,_,j,G,H;return R(function(B){switch(B.g){case 1:if(d=vt,t!=d.Na){B.A(2);break}if(e.X!="HLS"){B.A(3);break}return T(B,e.Ua,4);case 4:h=B.h,e.h.u=h;case 3:return T(B,hS(e.h,n,i?i.startTime:null,i?i.endTime:null,i?i.P()[0]:null),5);case 5:return B.return();case 2:if(l||!e.m){B.A(6);break}return T(B,Uu(e,d.$,n,i,r,a,o,s,u,!0),7);case 7:return T(B,Uu(e,d.va,n,i,r,a,o,s,u,!0),8);case 8:return B.return();case 6:if(!e.l.has(t))return B.return();if(p=e.l.get(t).timestampOffset,g=e.G.get(t),e.j.has(t)&&(g=e.j.get(t).getOriginalMimeType()),i&&(y=OT(e,t,n,i,r,g,u),b=y.timestamp,A=y.metadata,b!=null&&(e.V==null&&t==d.va&&(e.V=b,e.oa=i.startTime,e.T!=null&&(x=0,e.oa==e.ma&&(x=e.V-e.T),e.ha.resolve(x))),e.T==null&&t==d.$&&(e.T=b,e.ma=i.startTime,e.V!=null&&(k=0,e.oa==e.ma&&(k=e.V-e.T),e.ha.resolve(k))),M=b,N=ji,!e.J&&N.includes(e.G.get(t))&&(M=0),I=i.startTime-M,C=Math.abs(p-I),(C>=.001||o||s)&&(!u||I>0||!p)&&(p=I,e.ib&&(St(e,t,function(){return Na(e,t)},null),St(e,t,function(){return Oa(e,t,p)},null))),(t==d.va||!e.l.has(d.va))&&e.Ua.resolve(p)),A.length)&&e.O.onMetadata(A,p,i?i.endTime:null),a&&t==d.va&&(e.h||ju(e,"application/cea-608",e.J,!1),e.K||(E=g.split(";",1)[0],e.K=new di(E)),i?(O=e.K.Af(n),O.length&&gS(e.h,O,p)):e.K.init(n,s,c)),!e.j.has(t)){B.A(9);break}return T(B,e.j.get(t).transmux(n,r,i,e.i.duration,t),10);case 10:L=B.h,ArrayBuffer.isView(L)?n=L:(_=L,_.init!=null&&(j=_.init,St(e,t,function(){e.C&&Zs(e.C,j,p,r),e.l.get(t).appendBuffer(j)},i?i.P()[0]:null)),n=_.data);case 9:if(n=FT(e,r,n,i,t),!i||!e.J||t==d.Na){B.A(11);break}if(!o&&!s){B.A(11);break}if(G=i.startTime,e.X!="HLS"||e.m||t!=d.$||!e.l.has(d.va)){B.A(13);break}return T(B,e.ha,14);case 14:H=B.h,Math.abs(H)>.15&&(G-=H);case 13:St(e,t,function(){return Na(e,t)},null),St(e,t,function(){return Oa(e,t,G)},null);case 11:return T(B,St(e,t,function(){var F=n;e.C&&Zs(e.C,F,p,r),e.l.get(t).appendBuffer(F)},i?i.P()[0]:null),15);case 15:X(B)}})}function _T(e,t){var n=gr(e,"video")||0;rg(e.h,t,n)}function jT(e){e.h&&rg(e.h,"",0)}f.remove=function(e,t,n,i){var r=this,a,o;return R(function(s){return s.g==1?(a=vt,e==a.va&&r.K&&(r.K.remove(i),o=r.h.g||0,r.h.remove(o,n,!0)),e==a.Na?T(s,r.h.remove(t,n),0):n>t?T(s,St(r,e,function(){return Bu(r,e,t,n)},null),5):s.A(0)):r.m?T(s,St(r,a.$,function(){return Bu(r,a.$,t,n)},null),0):s.A(0)})};function ym(e,t){var n;return R(function(i){return i.g==1?(n=vt,t==n.Na?e.h?T(i,e.h.remove(0,1/0),0):i.return():t===n.va&&e.K&&e.h?T(i,e.h.remove(0,1/0,!0),4):i.A(4)):i.g!=6?T(i,St(e,t,function(){return Bu(e,t,0,e.i.duration)},null),6):e.m?T(i,St(e,n.$,function(){return Bu(e,n.$,0,e.i.duration)},null),0):i.A(0)})}f.flush=function(e){var t=this,n;return R(function(i){return i.g==1?(n=vt,e==n.Na?i.return():T(i,St(t,e,function(){t.g.currentTime-=.001,mr(t,e)},null),2)):t.m?T(i,St(t,n.$,function(){var r=n.$;t.g.currentTime-=.001,mr(t,r)},null),0):i.A(0)})};function bm(e,t,n,i,r,a,o,s,u){var l,c,d;return R(function(h){return h.g==1?(l=vt,t==l.Na?(a||(e.h.u=n),pS(e.h,i,r),h.return()):(c=[],T(h,GT(e,t,o,s,u),2))):(d=h.h,d||(c.push(St(e,t,function(){return Na(e,t)},null)),e.m&&c.push(St(e,l.$,function(){return Na(e,l.$)},null))),a||(c.push(St(e,t,function(){return Oa(e,t,n)},null)),e.m&&c.push(St(e,l.$,function(){return Oa(e,l.$,n)},null))),(i!=0||r!=1/0)&&(c.push(St(e,t,function(){return Sm(e,t,i,r)},null)),e.m&&c.push(St(e,l.$,function(){return Sm(e,l.$,i,r)},null))),c.length?T(h,Promise.all(c),0):h.A(0))})}function wm(e,t,n){var i,r;return R(function(a){return a.g==1?(i=vt,t==i.Na||(t==i.va&&(e.Ua=new qe),!e.J||(r=gr(e,t))&&Math.abs(r-n)<.15)?a.return():(St(e,t,function(){return Na(e,t)},null),e.m&&St(e,i.$,function(){return Na(e,i.$)},null),T(a,St(e,t,function(){return Oa(e,t,n)},null),2))):e.m?T(a,St(e,i.$,function(){return Oa(e,i.$,n)},null),0):a.A(0)})}f.endOfStream=function(e){var t=this;return R(function(n){return T(n,zo(t,function(){Zr(t)||pr(t)||(e?t.i.endOfStream(e):t.i.endOfStream())}),0)})},f.Ab=function(e){var t=this;return R(function(n){return T(n,zo(t,function(){if(t.B.durationReductionEmitsUpdateEnd&&e<t.i.duration)for(var i=m(t.l.keys()),r=i.next();!r.done;r=i.next()){r=r.value;var a={start:function(){},p:new qe,uri:null};t.o.get(r).unshift(a)}t.i.duration=e,t.wa=e}),0)})},f.getDuration=function(){return this.i.duration};function UT(e,t,n){R(function(i){return e.I.g||e.g.error||e.N||e.H||Zr(e)||pr(e)?i.return():T(i,zo(e,function(){Zr(e)||pr(e)||e.i.setLiveSeekableRange(t,n)}),0)})}function Cd(e){R(function(t){return e.I.g||e.g.error||e.N||e.H||Zr(e)||pr(e)?t.return():T(t,zo(e,function(){Zr(e)||pr(e)||e.i.clearLiveSeekableRange()}),0)})}function Bu(e,t,n,i){if(i<=n)mr(e,t);else{if(e.C){var r=e.C;t==="video"&&r.g&&r.g.flushBuffer(n,i)}e.l.get(t).remove(n,i)}}function Na(e,t){var n=e.l.get(t),i=n.appendWindowStart,r=n.appendWindowEnd;n.abort(),n.appendWindowStart=i,n.appendWindowEnd=r,mr(e,t)}function Oa(e,t,n){n<0&&(n+=.001),e.l.get(t).timestampOffset=n,mr(e,t)}function Sm(e,t,n,i){var r=e.l.get(t);(r.appendWindowEnd!==i||r.appendWindowStart!==n)&&(r.appendWindowStart=0,r.appendWindowEnd=i,r.appendWindowStart=n),mr(e,t)}function mr(e,t){if(e.H||e.I.g){var n=e.o.get(t);n&&n.length&&((n=n[0])&&n.p&&n.p.resolve(),e.o.set(t,[]))}else(n=e.o.get(t)[0])&&(n.p.resolve(),Pd(e,t))}function St(e,t,n,i){return Je(e.I),n={start:n,p:new qe,uri:i},e.o.get(t).push(n),e.o.get(t).length==1&&Tm(e,t),n.p}function zo(e,t){var n,i,r,a,o,s,u,l,c,d,h,p,g;return R(function(y){switch(y.g){case 1:for(Je(e.I),n=[],i=Array.from(e.l.keys()),r=m(i),a=r.next(),o={};!a.done;o={ready:void 0},a=r.next())s=a.value,o.ready=new qe,u={start:function(b){return function(){return b.ready.resolve()}}(o),p:o.ready,uri:null},l=e.o.get(s),l.push(u),n.push(o.ready),l.length==1&&u.start();return he(y,2),T(y,Promise.all(n),4);case 4:ye(y,3);break;case 2:throw c=oe(y),c;case 3:return he(y,5,6),T(y,t(),6);case 6:for(Ft(y),d=m(i),h=d.next();!h.done;h=d.next())p=h.value,Pd(e,p);wt(y,0);break;case 5:throw g=oe(y),new D(2,3,3015,g,e.g.error||"No error in the media element",null)}})}function Pd(e,t){e.o.get(t).shift(),Tm(e,t)}function Tm(e,t){var n=e.o.get(t)[0];if(n)try{n.start()}catch(i){i.name=="QuotaExceededError"?n.p.reject(new D(2,3,3017,t)):vm(e)?n.p.reject(new D(2,3,3015,i,e.g.error||"No error in the media element",n.uri)):n.p.reject(new D(2,3,3024,t)),Pd(e,t)}}function BT(e,t){e.aa=t,e.h&&(e.h.j=t)}function FT(e,t,n,i,r){if(Mo(e.G.get(r))!="mp4")return n;var a=i===null,o=e.Ja.get(r),s=e.O.Qj(),u=!1;i&&i.ba&&(u=i.ba.encrypted),i=i?i.P()[0]:null;var l=Te();return e.B.correctEc3Enca&&a&&r==="audio"&&(n=yT(n)),e.B.insertFakeEncryptionInInit&&o&&l.Gd(s,r)&&(a?n=bT(t,n,i):!u&&l.Oi(r)&&(n=wT(n))),a&&l.se()&&(n=xT(n)),n}function VT(e,t,n,i){return St(e,t,function(){if(t!==xe){if(e.G.get(t),Te().Ib()){e.j.has(t)&&(e.j.get(t).destroy(),e.j.delete(t)),i&&e.j.set(t,i);var r=n+e.B.addExtraFeaturesToSourceBuffer(n);e.l.get(t).changeType(r),e.G.set(t,n)}mr(e,t)}},null)}function HT(e,t){var n,i,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M,N;return R(function(I){if(I.g==1){if(e.H||e.N)return I.return();for(n=vt,e.H=!0,e.m=!1,i=e.g.currentTime,r=e.g.autoplay,e.g.paused||(e.Ta=!0),e.yb&&(e.g.autoplay=!1),$t(I,2),e.u.Qa(),a=m(e.j.values()),o=a.next();!o.done;o=a.next())s=o.value,s.destroy();for(u=m(e.l.values()),l=u.next();!l.done;l=u.next()){c=l.value;try{e.i.removeSourceBuffer(c)}catch{}}return e.j.clear(),e.l.clear(),d=e.i.duration,e.M=new qe,e.i=Ed(e,e.M),T(I,e.M,4)}if(I.g!=2){for(!isNaN(d)&&d?e.i.duration=d:!isNaN(e.wa)&&e.wa&&(e.i.duration=e.wa),h=new qe,p=e.i.sourceBuffers,g=t.size,y=0,b=function(){y++,y===g&&(h.resolve(),e.u.Ma(p,"addsourcebuffer",b))},e.u.D(p,"addsourcebuffer",b),A=m(t.keys()),x=A.next();!x.done;x=A.next())k=x.value,M=t.get(k),_u(e,k,M,M.codecs);return(N=t.get(n.$))&&N.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.o.has(n.$)&&e.o.set(n.$,[]),T(I,h,2)}return Ft(I),e.H=!1,Je(e.I),e.u.ya(e.g,"loadedmetadata",function(){e.I.g||(e.g.currentTime=i)}),e.u.ya(e.g,"canplaythrough",function(){e.I.g||(e.g.autoplay=r,e.Ta&&(e.Ta=!1,e.g.play()))}),wt(I,0)})}function xm(e,t){return zo(e,function(){return HT(e,t)})}function Am(e,t,n,i){var r=!1,a=cn("audio",(i||"").split(",")),o=cn("video",(i||"").split(",")),s=o;t=="audio"&&(s=a),s||(s=i);var u=dt(n,s),l=yn(e.G.get(t)),c=e.B.forceTransmux;if(!Zt(u)||!e.J&&ji.includes(u)?c=!0:c||n==l||(c=!Te().Nf()&&ji.includes(n)),c&&(e=cu(n,s),s=wa(e))){var d=s();a&&o&&(r=!0),u=d.convertCodecs(t,e)}return!d&&t==="video"&&a&&(u=dt(n,i)),t=Ht(dn(u)),{lc:d,kl:r,Uh:yn(u),codec:t,mimeType:u}}function km(e,t,n,i,r){if(t==xe)return{type:Dd,wf:n,lc:null};var a=Ht(dn(e.G.get(t))),o=yn(e.G.get(t)),s=Am(e,t,n,i),u=s.lc,l=s.kl,c=s.Uh,d=s.codec;s=s.mimeType;var h=!0;return l&&e.G.has("audio")&&(n=Am(e,"audio",n,i),i=Ht(dn(e.G.get("audio"))),h=yn(e.G.get("audio")),h=i==n.codec&&h==n.Uh,n.lc&&n.lc.destroy()),a===d&&o===c&&h?{type:Dd,wf:s,lc:u}:(a=!0,(e.m&&!r.has("audio")||l&&u&&!e.j.has(t))&&(a=!1),t=Te(),a&&e.B.codecSwitchingStrategy==="smooth"&&t.Ib()?{type:Im,wf:s,lc:u}:(u&&u.destroy(),{type:Ld,wf:s,lc:null}))}function GT(e,t,n,i,r){var a,o,s,u,l,c;return R(function(d){return d.g==1?(a=vt,o=km(e,t,n,i,r),s=o.type,u=o.lc,l=o.wf,(c=r.get(a.$))&&(e.m=c.isAudioMuxedInVideo),s==Dd?(e.j.has(t)&&!u?(e.j.get(t).destroy(),e.j.delete(t)):!e.j.has(t)&&u?e.j.set(t,u):u&&(e.j.has(t)&&e.j.get(t).transmux!==u.transmux?(e.j.get(t).destroy(),e.j.set(t,u)):u.destroy()),d.return(!1)):s==Im?T(d,VT(e,t,l,u),3):s!=Ld?d.A(3):(u&&u.destroy(),T(d,xm(e,r),3))):d.return(!0)})}function qT(e,t,n,i,r){return e=km(e,t,n,i,r),e.lc&&e.lc.destroy(),e.type==Ld}var Rd=P.URL.createObjectURL,KT="sequence",Dd="none",Ld="reset",Im="changeType";function fe(e,t,n){this.i=e,this.F=t,this.u=this.l=1/0,this.h=1,this.g=this.j=null,this.B=0,this.C=!0,this.J=!1,this.I=0,this.G=n===void 0?!0:n,this.H=0,this.o=!1,this.m=e}f=fe.prototype,f.getDuration=function(){return this.l},f.Sj=function(){return this.h},f.Xi=function(e){this.i=e},f.Ab=function(e){this.l=e},f.Xj=function(){return this.i},f.Wi=function(e){this.B=e},f.cd=function(e){e&&!this.C&&(this.J=!0),this.C=e},f.Lf=function(e){this.u=e},f.df=function(){return this.u},f.sh=function(e){this.F=e},f.Kj=function(){return this.F},f.Ii=function(e,t){if(e.length!=0){var n=(Date.now()+this.B)/1e3;if(e=e.filter(function(r){return r.start+t<n}),e.length!=0){var i=e[e.length-1].end+t;this.xf(e[0].start+t),this.h=e.reduce(function(r,a){return Math.max(r,a.end-a.start)},this.h),this.g=Math.max(this.g,i),this.i!=null&&this.G&&!this.o&&(this.i=n-this.g-this.h)}}},f.me=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,i=(Date.now()+this.B)/1e3;e=m(e);for(var r=e.next();!r.done;r=e.next())r=r.value,i<r.startTime||(t=Math.min(t,r.startTime),n=Math.max(n,r.endTime),this.h=Math.max(this.h,r.endTime-r.startTime));this.xf(t),this.g=Math.max(this.g,n),this.i!=null&&this.G&&!this.o&&(this.i=i-this.g-this.h)}},f.Hi=function(e,t){this.xf(e),t==1/0||this.W()||(this.g=Math.max(this.g,t))},f.Tj=function(){return this.g},f.qf=function(){this.o=!0},f.wk=function(){return this.o},f.uh=function(e){this.m=e},f.Pj=function(){return this.m},f.xf=function(e){this.j==null?this.j=e:this.J||(this.j=Math.min(this.j,e))},f.Xg=function(e){this.h=Math.max(this.h,e)},f.offset=function(e){this.j!=null&&(this.j+=e),this.g!=null&&(this.g+=e)},f.W=function(){return this.l==1/0&&!this.C},f.Vc=function(){return this.l!=1/0&&!this.C},f.Hb=function(){return Math.max(this.I,this.Jc()-this.u)},f.Zi=function(e){this.I=e},f.Jc=function(){return this.W()||this.Vc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.h-this.i)+this.H,this.l):this.g?Math.min(this.g,this.l):this.l},f.be=function(e){var t=Math.max(this.j,this.I);return this.u==1/0?Math.ceil(t*1e3)/1e3:Math.max(t,Math.min(this.Jc()-this.u+e,this.Gb()))},f.$b=function(){return this.be(0)},f.Gb=function(){return Math.max(0,this.Jc()-(this.W()||this.Vc()?this.F:0))},f.lj=function(){return!(this.i==null||this.g!=null&&this.G)},f.Vi=function(e){this.H=e},f.Fj=function(){return this.H},Y("shaka.media.PresentationTimeline",fe),fe.prototype.getAvailabilityTimeOffset=fe.prototype.Fj,fe.prototype.setAvailabilityTimeOffset=fe.prototype.Vi,fe.prototype.usingPresentationStartTime=fe.prototype.lj,fe.prototype.getSeekRangeEnd=fe.prototype.Gb,fe.prototype.getSeekRangeStart=fe.prototype.$b,fe.prototype.getSafeSeekRangeStart=fe.prototype.be,fe.prototype.getSegmentAvailabilityEnd=fe.prototype.Jc,fe.prototype.setUserSeekStart=fe.prototype.Zi,fe.prototype.getSegmentAvailabilityStart=fe.prototype.Hb,fe.prototype.isInProgress=fe.prototype.Vc,fe.prototype.isLive=fe.prototype.W,fe.prototype.offset=fe.prototype.offset,fe.prototype.notifyMaxSegmentDuration=fe.prototype.Xg,fe.prototype.notifyMinSegmentStartTime=fe.prototype.xf,fe.prototype.getInitialProgramDateTime=fe.prototype.Pj,fe.prototype.setInitialProgramDateTime=fe.prototype.uh,fe.prototype.isStartTimeLocked=fe.prototype.wk,fe.prototype.lockStartTime=fe.prototype.qf,fe.prototype.getMaxSegmentEndTime=fe.prototype.Tj,fe.prototype.notifyPeriodDuration=fe.prototype.Hi,fe.prototype.notifySegments=fe.prototype.me,fe.prototype.notifyTimeRange=fe.prototype.Ii,fe.prototype.getDelay=fe.prototype.Kj,fe.prototype.setDelay=fe.prototype.sh,fe.prototype.getSegmentAvailabilityDuration=fe.prototype.df,fe.prototype.setSegmentAvailabilityDuration=fe.prototype.Lf,fe.prototype.setStatic=fe.prototype.cd,fe.prototype.setClockOffset=fe.prototype.Wi,fe.prototype.getPresentationStartTime=fe.prototype.Xj,fe.prototype.setDuration=fe.prototype.Ab,fe.prototype.setPresentationStartTime=fe.prototype.Xi,fe.prototype.getMaxSegmentDuration=fe.prototype.Sj,fe.prototype.getDuration=fe.prototype.getDuration;function Nd(e,t,n,i){var r=this;this.u=i,this.g=e,this.F=t,this.h=n,this.j=new _e,this.m=!1,this.l=0,this.C=!1,this.H=this.G=0,this.o=WT(this),this.B=!1,this.j.D(e,"waiting",function(){return Wo(r)}),this.i=new Ae(function(){Wo(r)}).Da(this.h.gapJumpTimerTime)}Nd.prototype.release=function(){this.j&&(this.j.release(),this.j=null),this.i!=null&&(this.i.stop(),this.i=null),this.o&&(this.o.release(),this.o=null),this.g=this.F=this.u=null},Nd.prototype.Bd=function(){this.B=!0,this.i&&this.i.Da(this.h.gapJumpTimerTime),Wo(this)};function Wo(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||e.g.currentTime==e.l&&(e.g.autoplay||e.g.currentTime!=e.l)){var t;if(!(t=!e.o)){t=e.o;var n=t.h,i=Cm(n),r=n.g.currentTime,a=Date.now()/1e3;(t.g!=r||t.m!=i)&&(t.l=a,t.g=r,t.m=i,t.i=!1),r=a-t.l,(i=r>=t.o&&i&&!t.i)&&(t.j&&t.j(t.g,r),t.i=!0,t.g=n.g.currentTime),t=!i}t&&(t=e.g.currentTime,n=e.g.buffered,i=AT(n,t,e.h.gapDetectionThreshold),i==null||i==0&&!e.B||(r=n.start(i),(a=e.h.gapPadding)&&(r=Math.ceil((r+a)*100)/100),r>=e.F.Gb()||r-t<.001||(i!=0&&n.end(i-1),zT(e,r),t==e.l&&(e.l=r),e.G++,e.u(new Z("gapjumped")))))}}}function zT(e,t){e.C=!0,e.j.ya(e.g,"seeked",function(){e.C=!1}),e.g.currentTime=t}function WT(e){if(!e.h.stallEnabled)return null;var t=e.h.stallThreshold,n=e.h.stallSkip;return new Em(new Mm(e.g),t,function(){var i;return R(function(r){if(r.g==1)return i=Gi(e.g.buffered),i.length?n?(e.g.currentTime+=n,r.A(2)):T(r,e.g.play(),3):r.return();if(r.g!=2){if(!e.g)return r.return();e.g.pause(),e.g.play()}e.H++,e.u(new Z("stalldetected")),X(r)})})}function Em(e,t,n){this.h=e,this.m=Cm(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.i=!1,this.o=t,this.j=n}Em.prototype.release=function(){this.h&&this.h.release(),this.j=this.h=null};function Mm(e){var t=this;this.g=e,this.h=new _e,this.i=!1,this.h.D(this.g,"audiofocuspaused",function(){t.i=!0}),this.h.D(this.g,"audiofocusgranted",function(){t.i=!1}),this.h.D(this.g,"audiofocuslost",function(){t.i=!0})}function Cm(e){if(e.g.paused||e.g.playbackRate==0||e.i||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=m(Gi(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}Mm.prototype.release=function(){this.h&&this.h.release(),this.h=null};function _a(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=XT.value().get(t),n.ya(e,t,i))}var XT=new at(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function Pm(e,t,n,i){var r=this;this.g=e,this.m=t,this.u=n,this.l=null,this.j=function(){return r.l==null&&(r.l=i()),r.l},this.o=!1,this.h=new _e,this.i=new Nm(e),_a(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){Dm(r,r.j())})}Pm.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function Od(e){return e.o?e.g.currentTime:e.j()}function Rm(e,t){e.g.readyState>0?Om(e.i,t):_a(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){Dm(e,e.j())})}function Dm(e,t){Math.abs(e.g.currentTime-t)<.001?Lm(e):(e.h.ya(e.g,"seeking",function(){Lm(e)}),Om(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function Lm(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.u(e.g.currentTime)}function Nm(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new Ae(function(){t.i<=0||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}Nm.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function Om(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Da(.1)}function _m(e){this.g=e,this.i=!1,this.h=null,this.j=new _e}f=_m.prototype,f.ready=function(){function e(){if(t.h==null||t.h==0&&t.g.duration!=1/0)t.i=!0;else{var n=t.g.currentTime,i=null;if(typeof t.h=="number")i=t.h;else if(t.h instanceof Date){var r=jm(t);r!==null&&(i=t.h.getTime()/1e3-r,i=Um(t,i))}i==null?t.i=!0:(i<0&&(i=Math.max(0,n+i)),n!=i?(t.j.ya(t.g,"seeking",function(){t.i=!0}),t.g.currentTime=i):t.i=!0)}}var t=this;_a(this.g,HTMLMediaElement.HAVE_FUTURE_DATA,this.j,function(){e()})},f.release=function(){this.j&&(this.j.release(),this.j=null),this.g=null},f.$f=function(e){this.h=this.i?this.h:e},f.Rd=function(){var e=this.i?this.g.currentTime:this.h;return e instanceof Date&&(e=e.getTime()/1e3-(jm(this)||0),e=Um(this,e)),e||0},f.Oh=function(){return 0},f.Mh=function(){return 0},f.Nh=function(){return!1},f.Gi=function(){},f.si=function(){var e=Lu(this.g.buffered);return e!=null&&e>=this.g.duration-1};function jm(e){return e.g.getStartDate&&(e=e.g.getStartDate().getTime(),!isNaN(e))?e/1e3:null}function Um(e,t){return e=e.g.seekable,e.length>0&&(t=Math.max(e.start(0),t),t=Math.min(e.end(e.length-1),t)),t}function Bm(e,t,n,i,r,a){var o=this;this.h=e,this.g=t.presentationTimeline,this.l=n,this.u=r,this.o=null,this.i=new Nd(e,t.presentationTimeline,n,a),this.j=new Pm(e,function(){e:{var s=o.i;s.m=!0,s.B=!1,s.i&&s.i.Da(s.h.gapJumpTimerTime),Wo(s);var u=Od(o.j);if(s=Hm(o,u),!Qg()&&Math.abs(s-u)>.001){u=!1;var l=Te().Ti();if(l){var c=Date.now()/1e3;(!o.o||o.o<c-l)&&(o.o=c,u=!0)}else u=!0;if(u){Rm(o.j,s),s=void 0;break e}}o.u(),s=void 0}return s},function(s){var u=o.i;u.g.seeking&&!u.m&&(u.m=!0,u.l=s),u.i&&u.i.Da(u.h.gapJumpTimerTime),Wo(u)},function(){return Fm(o,i)}),this.m=new Ae(function(){if(o.h.readyState!=0&&!o.h.paused){var s=Od(o.j),u=o.g.$b(),l=o.g.Gb();l-u<3&&(u=l-3),s<u&&(s=Hm(o,s),o.h.currentTime=s)}})}f=Bm.prototype,f.ready=function(){this.m.Da(.25)},f.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.m&&(this.m.stop(),this.m=null),this.h=this.j=this.g=this.l=null,this.u=function(){}},f.$f=function(e){Rm(this.j,Fm(this,e))},f.Rd=function(){var e=Od(this.j);return this.h.readyState>0&&!this.h.paused?Gm(this,e):e},f.Oh=function(){return this.i.H},f.Mh=function(){return this.i.G},f.Nh=function(){return this.i.C};function Fm(e,t){return t==null?t=e.g.getDuration()<1/0?e.g.$b():e.g.Gb():t instanceof Date?t=t.getTime()/1e3-(e.g.m||e.g.i):t<0&&(t=e.g.Gb()+t),Vm(e,Gm(e,t))}f.Gi=function(){this.i.Bd()},f.si=function(){if(this.g.W()){var e=this.g.Jc(),t=Lu(this.h.buffered);if(t!=null&&t>=e)return!0}return!1};function Vm(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function Hm(e,t){var n=e.l.rebufferingGoal,i=e.l.safeSeekOffset,r=e.g.$b(),a=e.g.Gb(),o=e.g.getDuration();a-r<3&&(r=a-3);var s=e.g.be(n),u=e.g.be(i);return n=e.g.be(n+i),t>=o?Vm(e,t):t>a?a-e.l.safeSeekEndOffset:t<r?e.g.W()&&e.l.returnToEndOfLiveWindowWhenOutside?a-e.l.safeSeekEndOffset:yd(e.h.buffered,u)?u:n:t>=s||yd(e.h.buffered,t)?t:n}function Gm(e,t){var n=e.g.$b();return t<n?n:(e=e.g.Gb(),t>e?e:t)}function Re(e){this.g=e,this.m=null,this.i=0,this.o=!1}f=Re.prototype,f.getNumReferences=function(){return this.g.length},f.getNumEvicted=function(){return this.i},f.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},f.Ck=function(){this.o=!0},f.Fb=function(e){for(var t=m(this.g),n=t.next();!n.done;n=t.next())e(n.value)};function hi(e){return e.g[0]||null}f.find=function(e){for(var t=this.g.length-1,n=t;n>=0;--n){var i=this.g[n],r=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},f.get=function(e){return this.g.length==0?null:(e-=this.i,e<0||e>=this.g.length?null:this.g[e])},f.offset=function(e){if(!this.o)for(var t=m(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},f.tf=function(e){if(!this.o&&e.length){var t=Math.round(e[0].startTime*1e3)/1e3;this.g=this.g.filter(function(n){return Math.round(n.startTime*1e3)/1e3<t}),this.g.push.apply(this.g,z(e))}},f.ke=function(e,t){var n=this;e=e.filter(function(i){return i.endTime>t&&(n.g.length==0||i.endTime>n.g[0].startTime)}),this.tf(e),this.Ya(t)},f.Ya=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.i+=t-this.g.length}},f.pd=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new se(e.startTime,t,e.C,e.startByte,e.endByte,e.ba,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},f.Rf=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new Ae(function(){var i=t();i?n.g.push.apply(n.g,z(i)):(n.m.stop(),n.m=null)}),this.m.Da(e))},Re.prototype[Symbol.iterator]=function(){return this.Xb(0)},Re.prototype.Xb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var i=this.find(e);if(i==null)return null;var r=this.get(i);n?i++:i--;var a=-1;if(r&&r.g.length>0)for(var o=r.g.length-1;o>=0;--o){var s=r.g[o];if(e>=s.startTime&&e<s.endTime){if(!t){for(;o&&!s.l;)o--,s=r.g[o];if(!s.l)return mi("No independent partial segment found!"),null}n?i--:i++,a=o-1;break}}return new Fn(this,i,a,n)},Re.prototype.We=function(){return-1};function Fu(e,t,n){return e=new se(e,e+t,function(){return n},0,null,null,e,e,e+t),new Re([e])}Y("shaka.media.SegmentIndex",Re),Re.forSingleSegment=Fu,Re.prototype.getIteratorForTime=Re.prototype.Xb,Re.prototype.updateEvery=Re.prototype.Rf,Re.prototype.fit=Re.prototype.pd,Re.prototype.evict=Re.prototype.Ya,Re.prototype.mergeAndEvict=Re.prototype.ke,Re.prototype.offset=Re.prototype.offset,Re.prototype.get=Re.prototype.get,Re.prototype.find=Re.prototype.find,Re.prototype.markImmutable=Re.prototype.Ck,Re.prototype.release=Re.prototype.release,Re.prototype.getNumEvicted=Re.prototype.getNumEvicted,Re.prototype.getNumReferences=Re.prototype.getNumReferences;function Fn(e,t,n,i){this.i=e,this.h=t,this.g=n,this.reverse=i}f=Fn.prototype,f.Kd=function(e){this.reverse=e},f.Aj=function(){return this.h},f.current=function(){var e=this.i.get(this.h);return e&&e.g.length>0&&e.m&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&e.g.length>0?e.g[this.g]:e},f.next=function(){var e=this.i.get(this.h);return this.reverse?e&&e.g.length>0?(this.g--,this.g<0&&(this.h--,this.g=(e=this.i.get(this.h))&&e.g.length>0?e.g.length-1:0)):(this.h--,this.g=0):e&&e.g.length>0?(this.g++,e.m&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},f.kh=function(){var e=this.current();if(e&&e.Xc&&!e.l&&(e=this.i.get(this.h))&&e.g.length>0)for(var t=e.g[this.g];t.l&&!(this.g<=0);)this.g--,t=e.g[this.g]},Y("shaka.media.SegmentIterator",Fn),Fn.prototype.resetToLastIndependent=Fn.prototype.kh,Fn.prototype.next=Fn.prototype.next,Fn.prototype.current=Fn.prototype.current,Fn.prototype.currentPosition=Fn.prototype.Aj,Fn.prototype.setReverse=Fn.prototype.Kd;function lt(){Re.call(this,[]),this.h=[]}rt(lt,Re),f=lt.prototype,f.clone=function(){var e=new lt;return e.h=this.h.slice(),e.i=this.i,e},f.release=function(){this.h=[]},f.Fb=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.Fb(e)};function YT(e,t){e=m(e.h);for(var n=e.next();!n.done;n=e.next())t(n.value)}f.find=function(e){for(var t=this.i,n=m(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.find(e);if(r!=null)return r+t;t+=i.getNumEvicted()+i.getNumReferences()}return null};function JT(e,t){e=m(e.h);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.find(t)!=null)return n.We();return-1}f.get=function(e){for(var t=this.i,n=m(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.get(e-t);if(r)return r;r=i.getNumReferences(),t+=i.getNumEvicted()+r}return null},f.offset=function(){},f.tf=function(){},f.Ya=function(e){if(this.h.length){var t=this.h[0];t.Ya(e),t.getNumReferences()==0&&(this.h.shift(),this.i+=t.getNumEvicted(),t.release(),this.Ya(e))}},f.ke=function(){},f.pd=function(){},f.Rf=function(){},Y("shaka.media.MetaSegmentIndex",lt),lt.prototype.updateEvery=lt.prototype.Rf,lt.prototype.fit=lt.prototype.pd,lt.prototype.mergeAndEvict=lt.prototype.ke,lt.prototype.evict=lt.prototype.Ya,lt.prototype.merge=lt.prototype.tf,lt.prototype.offset=lt.prototype.offset,lt.prototype.get=lt.prototype.get,lt.prototype.find=lt.prototype.find,lt.prototype.forEachTopLevelReference=lt.prototype.Fb,lt.prototype.release=lt.prototype.release;function Xo(e){var t=this;this.g=e,this.j=!1,this.i=this.g.cf(),this.h=new Ae(function(){t.g.Ei(t.i*.25)})}Xo.prototype.release=function(){this.set(this.Tc()),this.h&&(this.h.stop(),this.h=null),this.g=null},Xo.prototype.set=function(e){this.i=e,_d(this)},Xo.prototype.Tc=function(){return this.g.Tc()};function _d(e){e.h.stop();var t=e.j?0:e.i;if(t>=0)try{e.g.cf()!=t&&e.g.wh(t);return}catch{}e.h.Da(.25),e.g.cf()!=0&&e.g.wh(0)}function jd(e){var t=this;this.j=e,this.h=new _e,this.g=new Set,this.i=new Ae(function(){qm(t,!1)}).Jb(),e.paused||this.i.Da(.25),this.h.D(e,"playing",function(){t.i.Jb().Da(.25)}),this.h.D(e,"pause",function(){t.i.stop()})}jd.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=m(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function qm(e,t){var n=e.j.currentTime;e=m(e.g);for(var i=e.next();!i.done;i=e.next())i.value.j(n,t)}function Vu(e){Ge.call(this),this.g=new Map,this.h=e}rt(Vu,Ge),Vu.prototype.release=function(){this.g.clear(),Ge.prototype.release.call(this)};function $T(e,t){var n=e.g.get(t);return n||(n={re:[],pg:null,contentType:t},e.g.set(t,n)),n}function QT(e,t,n){var i=$T(e,t.contentType);ZT(e,i),e={yd:t,position:n},i=i.re,t=i.findIndex(function(r){return r.position>=n}),t>=0?i.splice(t,i[t].position==n?1:0,e):i.push(e)}Vu.prototype.j=function(e){for(var t=m(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var i=n.pg;e:{for(var r=n.re,a=r.length-1;a>=0;a--){var o=r[a];if(o.position<=e){r=o.yd;break e}}r=null}a=r&&!(i===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width),o=r&&i&&r.label&&i.label&&i.label!==r.label;var s=r&&i&&r.language&&i.language&&i.language!==r.language;i=r&&i&&r.roles&&i.roles&&!ir(i.roles,r.roles),(o||s||i)&&Km(this,e,r.contentType)&&(n.pg=r,i=new Z("audiotrackchange",new Map([["quality",r],["position",e]])),this.dispatchEvent(i)),a&&Km(this,e,r.contentType)&&(n.pg=r,JSON.stringify(r),n=new Z("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}};function Km(e,t,n){return!!((e=e.h()[n])&&e.length>0&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function ZT(e,t){if((e=e.h()[t.contentType])&&e.length>0){var n=e[0].start,i=e[e.length-1].end,r=t.re;t.re=r.filter(function(a,o){return!(a.position<=n&&o+1<r.length&&r[o+1].position<=n||a.position>=i)})}else t.re=[]}function Hu(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function Yo(e){Ge.call(this),this.h=new Map,this.i=e,this.g=null}rt(Yo,Ge),Yo.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),Ge.prototype.release.call(this)};function Ud(e,t){var n=t.schemeIdUri+"_"+t.id+"_"+(t.startTime.toFixed(1)+"_"+t.endTime.toFixed(1));e.h.has(n)||(e.h.set(n,t),t=new Z("regionadd",new Map([["region",t]])),e.dispatchEvent(t),ex(e))}function ex(e){e.g||(e.g=new Ae(function(){for(var t=e.i(),n=m(e.h),i=n.next();!i.done;i=n.next()){var r=m(i.value);i=r.next().value,r=r.next().value,r.endTime<t.start&&(e.h.delete(i),i=new Z("regionremove",new Map([["region",r]])),e.dispatchEvent(i))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).Da(2))}function Gu(e,t,n,i,r){function a(o,s){return!(s.fastSwitching&&o.Xc&&o.je)}this.m=e,this.i=t,this.l=n,this.g=new Map,this.j=new Map,this.h=null,this.o=i,this.u=r||a}function tx(e,t){e.l=t,e=m(e.g.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function Jo(e,t,n){if(n=n===void 0?!1:n,!e.i.segmentIndex||(e.h||(e.h=e.i.segmentIndex.Xb(t,!0,e.o)),!e.h))return Promise.resolve();for(n&&e.h.next(),t=[];e.g.size<e.m&&(n=e.h.next().value,!!n);){var i=!0;if(n.isPreload()&&n.endByte!=null&&(i=!1),n.bc()==2&&(i=!1),n.ac(!1)&&(i=!1),i&&n.ba&&t.push(zm(e,n.ba)),i&&!e.g.has(n)&&(i=new Fd(e.l),t.push(Ym(i,n,e.i)),e.g.set(n,i)),!e.u(n,e.i))break}return Bd(e),Promise.all(t)}function zm(e,t){if(!e.i.segmentIndex||t.ac()||Array.from(e.j.keys()).some(function(r){return Ho(r,t)}))return Promise.resolve();var n=new Fd(e.l),i=Ym(n,t,e.i);return e.j.set(t,n),i}function Wm(e,t){t=m(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&$o(e,n)}function pi(e){Wm(e,e.g),Wm(e,e.j),e.h=null}Gu.prototype.Ya=function(e,t){t=t===void 0?!1:t;for(var n=m(this.g.keys()),i=n.next();!i.done;i=n.next())i=i.value,e>i.endTime&&$o(this,i);t&&Bd(this)},Gu.prototype.Kd=function(e){this.o=e,this.h&&this.h.Kd(e)};function Bd(e){if(e.g.size)for(var t=Array.from(e.g.keys()),n=m(e.j.keys()),i=n.next(),r={};!i.done;r={Qg:void 0},i=n.next())r.Qg=i.value,t.some(function(a){return function(o){return Ho(o.ba,a.Qg)}}(r))||$o(e,r.Qg)}function Xm(e,t){e.m=t;for(var n=Array.from(e.g.keys());n.length>t;){var i=n.pop();i&&$o(e,i)}Bd(e)}function nx(e,t){t&&t!==e.i&&(pi(e),e.i=t)}function $o(e,t){var n=e.g;t instanceof fn&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function Fd(e){this.g=e,this.oe=this.Ch=null}function Ym(e,t,n){var i=new Uint8Array(0);return e.oe=e.g(t,n,function(r){return R(function(a){if(a.g==1)return i.byteLength>0?i=mt(i,r):i=r,e.Ch?T(a,e.Ch(i),3):a.A(0);i=new Uint8Array(0),X(a)})}),e.oe.promise.catch(function(r){return r instanceof D&&r.code==7001?Promise.resolve():Promise.reject(r)})}Fd.prototype.abort=function(){this.oe&&this.oe.abort()},Y("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"});function Vd(e){var t=yn(e),n=t.split("/")[0];return e=dn(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,ze:null,colorGamut:null,frameRate:null,timescale:null}}function ix(e,t,n){function i(E){x=E.name;var O=E.reader;O.skip(24);var L=O.Ca(),_=O.Ca();O.skip(50),h=String(L),d=String(_),E.reader.Ka()&&be(E)}function r(E){var O=Zg(E.reader);p=O.channelCount,g=O.sampleRate,a(E.name)}function a(E){switch(E=E.toLowerCase(),E){case"avc1":case"avc3":s.push(E+".42E01E"),l=!0;break;case"hev1":case"hvc1":s.push(E+".1.6.L93.90"),l=!0;break;case"dvh1":case"dvhe":s.push(E+".05.04"),l=!0;break;case"vp09":s.push(E+".00.10.08"),l=!0;break;case"av01":s.push(E+".0.01M.08"),l=!0;break;case"mp4a":o.push("mp4a.40.2"),u=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":o.push(E),u=!0;break;case"apac":o.push("apac.31.00"),u=!0}}var o=[],s=[],u=!1,l=!1,c=null,d=null,h=null,p=null,g=null,y=null,b=null,A=null,x;if(new Ke().box("moov",be).box("trak",be).box("mdia",be).S("mdhd",function(E){E=Pu(E.reader,E.version),c=E.language,A=E.timescale}).box("minf",be).box("stbl",be).S("stsd",Vi).box("mp4a",function(E){var O=Zg(E.reader);p=O.channelCount,g=O.sampleRate,E.reader.Ka()?be(E):a(E.name)}).box("esds",function(E){E=E.reader;for(var O="mp4a",L,_;E.Ka();){L=E.Z();for(var j=E.Z();j&128;)j=E.Z();if(L==3)E.Ca(),j=E.Z(),j&128&&E.Ca(),j&64&&E.skip(E.Z()),j&32&&E.Ca();else if(L==4)_=E.Z(),E.skip(12);else if(L==5)break}_&&(O+="."+Bo(_),L==5&&E.Ka()&&(L=E.Z(),_=(L&248)>>3,_===31&&E.Ka()&&(_=32+((L&7)<<3)+((E.Z()&224)>>5)),O+="."+_)),o.push(O),u=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("apac",r).box("avc1",i).box("avc3",i).box("hev1",i).box("hvc1",i).box("dva1",i).box("dvav",i).box("dvh1",i).box("dvhe",i).box("vp09",i).box("av01",i).box("avcC",function(E){var O=x||"";switch(x){case"dvav":O="avc3";break;case"dva1":O="avc1"}E=E.reader,E.skip(1),E=O+"."+Bo(E.Z())+Bo(E.Z())+Bo(E.Z()),s.push(E),l=!0}).box("hvcC",function(E){var O=x||"";switch(x){case"dvh1":O="hvc1";break;case"dvhe":O="hev1"}var L=E.reader;L.skip(1),E=L.Z();var _=["","A","B","C"][E>>6],j=E&31,G=L.U(),H=(E&32)>>5?"H":"L";E=[L.Z(),L.Z(),L.Z(),L.Z(),L.Z(),L.Z()],L=L.Z();for(var B=0,F=0;F<32&&(B|=G&1,F!=31);F++)B<<=1,G>>=1;for(O=O+("."+_+j)+("."+Bo(B,!0)),O+="."+H+L,_="",j=E.length;j--;)((H=E[j])||_)&&(_="."+H.toString(16).toUpperCase()+_);O+=_,s.push(O),l=!0}).box("dvcC",function(E){var O=x||"";switch(x){case"hvc1":O="dvh1";break;case"hev1":O="dvhe";break;case"avc1":O="dva1";break;case"avc3":O="dvav";break;case"av01":O="dav1"}var L=E.reader;L.skip(2),E=L.Z(),L=L.Z(),s.push(O+"."+wn(E>>1&127)+"."+wn(E<<5&32|L>>3&31)),l=!0}).box("dvvC",function(E){var O=x||"";switch(x){case"hvc1":O="dvh1";break;case"hev1":O="dvhe";break;case"avc1":O="dva1";break;case"avc3":O="dvav";break;case"av01":O="dav1"}var L=E.reader;L.skip(2),E=L.Z(),L=L.Z(),s.push(O+"."+wn(E>>1&127)+"."+wn(E<<5&32|L>>3&31)),l=!0}).S("vpcC",function(E){var O=x||"",L=E.reader;E=L.Z();var _=L.Z();L=L.Z()>>4&15,s.push(O+"."+wn(E)+"."+wn(_)+"."+wn(L)),l=!0}).box("av1C",function(E){var O=x||"";x==="dav1"&&(O="av01");var L=E.reader;L.skip(1),E=L.Z(),L=L.Z();var _=E>>>5,j=(L&64)>>6;s.push(O+"."+_+"."+wn(E&31)+(L>>>7?"H":"M")+"."+wn(_===2&&j?(L&32)>>5?12:10:j?10:8)+"."+((L&16)>>4)+"."+((L&8)>>3)+((L&4)>>2)+(L&3)+"."+wn(1)+"."+wn(1)+"."+wn(1)+".0"),l=!0}).box("enca",Au).box("encv",bn).box("sinf",be).box("frma",function(E){E=md(E.reader).codec,a(E)}).box("colr",function(E){s=s.map(function(_){if(_.startsWith("av01.")){var j=E.reader,G=j.Pa(),H=j.Tb(4,!1),B=String.fromCharCode(H[0]);if(B+=String.fromCharCode(H[1]),B+=String.fromCharCode(H[2]),B+=String.fromCharCode(H[3]),B==="nclx"){H=j.Ca(),B=j.Ca();var F=j.Ca(),K=j.Z()>>7,W=_.split(".");W.length==10&&(W[6]=wn(H),W[7]=wn(B),W[8]=wn(F),W[9]=String(K),_=W.join("."))}j.seek(G)}return _});var O=oT(E.reader),L=O.colorGamut;y=O.ze,b=L}).parse(e||t,!0,!0),!o.length&&!s.length)return null;var k=u&&!l,M=new Map;if(l&&!n){n=new di("video/mp4"),e&&n.init(e);try{n.Af(t);for(var N=m(n.Zf()),I=N.next();!I.done;I=N.next()){var C=I.value;M.set(C,C)}}catch{}n.Qd()}return{type:k?"audio":"video",mimeType:k?"audio/mp4":"video/mp4",codecs:Hd(o.concat(s)).join(", "),language:c,height:d,width:h,channelCount:p,sampleRate:g,closedCaptions:M,ze:y,colorGamut:b,frameRate:null,timescale:A}}function Hd(e){var t=new Set,n=[];e=m(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r=lr(i);t.has(r)||(n.push(i),t.add(r))}return t=Fc("audio",n),i=Fc("video",n),e=Fc(xe,n),i=rx(i),t=t.concat(i).concat(e),n.length&&!t.length?n:t}function rx(e){if(e.length<=1)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?Zt('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function ax(e){var t=null;return new Ke().box("moov",be).box("trak",be).box("mdia",be).box("minf",be).box("stbl",be).S("stsd",Vi).box("encv",bn).box("enca",Au).box("sinf",be).box("schi",be).S("tenc",function(n){n=n.reader,n.Z(),n.Z(),n.Z(),n.Z(),n=n.Tb(16,!1),t=Ri(n)}).parse(e,!0),t}function Gd(e,t,n){var i,r,a,o,s;return R(function(u){if(u.g==1)return i=t,i.cryptoKey?u.A(2):T(u,i.fetchKey(),3);if(r=i.iv,!r)for(r=pe(new ArrayBuffer(16)),a=i.firstMediaSequenceNumber+n,o=r.byteLength-1;o>=0;o--)r[o]=a&255,a>>=8;return t.blockCipherMode=="CBC"?s={name:"AES-CBC",iv:r}:s={name:"AES-CTR",counter:r,length:64},u.return(P.crypto.subtle.decrypt(s,i.cryptoKey,e))})}function ja(e,t,n){var i,r,a,o,s,u,l;return R(function(c){switch(c.g){case 1:return i=Ua(e),(r=ox.get(i))?c.return(r):(a=0,o=yt([e],n),he(c,2),o.method="HEAD",T(c,t.request(a,o).promise,4));case 4:s=c.h,r=s.headers["content-type"],ye(c,3);break;case 2:if(u=oe(c),!u||u.code!=1002&&u.code!=1001){c.A(3);break}return o.method="GET",T(c,t.request(a,o).promise,6);case 6:l=c.h,r=l.headers["content-type"];case 3:return c.return(r?r.toLowerCase().split(";").shift():"")}})}function Ua(e){return e=new ht(e).Sb.split("/").pop().split("."),e.length==1?"":e.pop().toLowerCase()}function Qo(e,t,n,i,r){return e=yt(e,i,r),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}var ox=new Map().set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html");function Jm(e,t){var n=this;this.g=t,this.j=e,this.i=null,this.O=new Map,this.C=1,this.B=this.o=null,this.V=0,this.h=new Map,this.M=!1,this.X=null,this.F=!1,this.l=new ka(function(){return sx(n)}),this.R=Date.now()/1e3,this.m=new Map,this.T={projection:null,hfov:null},this.ha=0,this.aa=1/0,this.H=null,this.N=[],this.u=new Ae(function(){if(n.j&&n.g)if(n.j.presentationTimeline.W()){var i=n.j.presentationTimeline.$b(),r=n.j.presentationTimeline.Gb();r-i>1?UT(n.g.Y,i,r):Cd(n.g.Y)}else Cd(n.g.Y),n.u&&n.u.stop();else n.u&&n.u.stop()}),this.I=null,this.J=!1,this.K=new Ae(function(){var i=n.g.video;!i.ended&&n.I&&(n.J=!0,i.currentTime=n.I,n.I=null)}),this.G=new _e}f=Jm.prototype,f.destroy=function(){return this.l.destroy()};function sx(e){var t,n,i,r,a,o,s;return R(function(u){if(u.g==1){for(e.u&&e.u.stop(),e.u=null,e.K&&e.K.stop(),e.K=null,e.G&&(e.G.release(),e.G=null),t=[],n=m(e.h.values()),i=n.next();!i.done;i=n.next())r=i.value,Ti(r),t.push(Yu(r)),r.ia&&(pi(r.ia),r.ia=null);for(a=m(e.m.values()),o=a.next();!o.done;o=a.next())s=o.value,pi(s);return T(u,Promise.all(t),2)}e.h.clear(),e.m.clear(),e.g=null,e.j=null,e.i=null,e.I=null,X(u)})}f.configure=function(e){if(this.i=e,this.X=new Sg({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var t=this.h.get("audio");t&&t.ia&&(pi(t.ia),t.ia=null),t=m(this.m.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,pi(this.m.get(n)),this.m.delete(n)}for(e.disableTextPrefetch&&(t=this.h.get(xe))&&t.ia&&(pi(t.ia),t.ia=null),e.disableVideoPrefetch&&(t=this.h.get("video"))&&t.ia&&(pi(t.ia),t.ia=null),t=m(this.h.keys()),n=t.next();!n.done;n=t.next())n=this.h.get(n.value),n.ia?(Xm(n.ia,e.segmentPrefetchLimit),e.segmentPrefetchLimit>0||(pi(n.ia),n.ia=null)):e.segmentPrefetchLimit>0&&(n.ia=Kd(this,n.stream));e.disableAudioPrefetch||px(this)};function ux(e,t,n){e.j.presentationTimeline.W()||(e.ha=t,e.aa=n)}f.start=function(e){var t=this;return R(function(n){if(n.g==1)return T(n,hx(t,e||new Map),2);Je(t.l),t.M=!0,X(n)})};function lx(e,t){var n,i,r,a,o,s;R(function(u){switch(u.g){case 1:return n=vt,e.V++,i=e.V,he(u,2),T(u,ym(e.g.Y,n.Na),4);case 4:ye(u,3);break;case 2:r=oe(u),e.g&&e.g.onError(r);case 3:a=dt(t.mimeType,t.codecs),ju(e.g.Y,a,e.j.sequenceMode,t.external),o=e.g.Y.aa,(o.isTextVisible()||e.i.alwaysStreamText)&&e.V==i&&(s=Ku(e,t),e.h.set(n.Na,s),Gt(e,s,0)),X(u)}})}function cx(e){var t=e.h.get(xe);t&&(Ti(t),Yu(t).catch(function(){}),e.H=e.h.get(xe),e.h.delete(xe),t.stream&&t.stream.closeSegmentIndex&&t.stream.closeSegmentIndex()),e.B=null}function $m(e,t){for(var n=e.g.Ob()<0,i=m(e.h.values()),r=i.next();!r.done;r=i.next())r=r.value,r.sa&&r.sa.Kd(n),r.ia&&r.ia.Kd(n);for(i=m(e.m.values()),r=i.next();!r.done;r=i.next())r.value.Kd(n);(n=e.h.get("video"))&&(i=n.stream)&&(t?(t=i.trickModeVideo)&&!n.Nc&&(Ba(e,t,!1,0,!1),n.Nc=i):(t=n.Nc)&&(n.Nc=null,Ba(e,t,!0,0,!1)))}function Qm(e,t,n,i,r,a){n=n===void 0?!1:n,i=i===void 0?0:i,r=r===void 0?!1:r,a=a===void 0?!1:a,e.o=t,e.M&&(t.video&&Ba(e,t.video,n,i,r,a),t.audio&&Ba(e,t.audio,n,i,r,a))}function qu(e,t){R(function(n){if(n.g==1)return e.H=null,e.B=t,e.M?t.segmentIndex?n.A(2):T(n,t.createSegmentIndex(),2):n.return();Ba(e,t,!0,0,!1),X(n)})}function dx(e){var t=e.h.get(xe);t&&Ba(e,t.stream,!0,0,!0)}function fx(e,t){for(var n=m(e.O.entries()),i=n.next();!i.done;i=n.next()){var r=m(i.value);i=r.next().value,r=r.next().value,i.includes(t.type)&&(r(),e.O.delete(i))}}function Ba(e,t,n,i,r,a){var o=e.h.get(t.type);o||t.type!=xe?o&&(o.Nc&&(t.trickModeVideo?(o.Nc=t,t=t.trickModeVideo):o.Nc=null),o.stream!=t||r)&&(e.m.has(t)?o.ia=e.m.get(t):o.ia&&nx(o.ia,t),t.type==xe&&o.stream!=t&&(r=dt(t.mimeType,t.codecs),ju(e.g.Y,r,e.j.sequenceMode,t.external)),e.m.has(o.stream)||o.stream.closeSegmentIndex&&(o.Ia?e.O.getOrInsert("("+o.type+":"+o.stream.id+")",o.stream.closeSegmentIndex):o.stream.closeSegmentIndex()),r=o.stream.isAudioMuxedInVideo!=t.isAudioMuxedInVideo,o.stream=t,o.sa=null,o.gg=!!a,t.dependencyStream?o.Gc=Ku(e,t.dependencyStream):o.Gc=null,nv(e),r&&(o.mb=null,o.uc=null,o.tc=null,t.isAudioMuxedInVideo&&(t=null,o.type==="video"?t=e.h.get("audio"):o.type==="audio"&&(t=e.h.get("video")),t&&(Yu(t).catch(function(){}),t.mb=null,t.uc=null,t.tc=null,qd(e,t),Zm(e,t).catch(function(s){e.g&&e.g.onError(s)})))),n?o.Wb?o.Nd=!0:o.Ia?(o.Ub=!0,o.ld=i,o.Nd=!0):(Ti(o),Xd(e,o,!0,i).catch(function(s){e.g&&e.g.onError(s)})):o.Ia||o.ob||Gt(e,o,0),Zm(e,o).catch(function(s){e.g&&e.g.onError(s)})):lx(e,t)}function Zm(e,t){var n,i,r;return R(function(a){if(a.g==1)return t.Va?(n=t.stream,i=t.Va,n.segmentIndex?a.A(2):T(a,n.createSegmentIndex(),2)):a.return();if(a.g!=4)return r=n.dependencyStream,!r||r.segmentIndex?a.A(4):T(a,r.createSegmentIndex(),4);if(t.Va!=i||t.stream!=n)return a.return();var o=e.g.Zb(),s=gr(e.g.Y,t.type),u=t.stream.segmentIndex.find(t.Ha?t.Ha.endTime:o),l=u==null?null:t.stream.segmentIndex.get(u);u=l?vd(l):null,l&&!u&&(u=(l.endTime-l.getStartTime())*(t.stream.bandwidth||e.o.bandwidth)/8),u?((l=l.ba)&&(u+=(l.endByte?l.endByte+1-l.startByte:null)||0),l=e.g.getBandwidthEstimate(),o=u*8/l<(s||0)-o-e.i.rebufferingGoal||t.Va.h.g>u):o=!0,o&&t.Va.abort(),X(a)})}f.bd=function(){if(this.g){for(var e=this.g.Zb(),t=m(this.h.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=this.h.get(i);var r;if((r=!this.J)&&(r=this.g.Y,i==xe?(r=r.h,r=r.g==null||r.h==null?!1:e>=r.g&&e<r.h):(r=La(r,i),r=yd(r,e)),r=!r),r){if(this.R=0,n.ia&&(n.ia.h=null),n.type==="audio"){r=m(this.m.values());for(var a=r.next();!a.done;a=r.next())a.value.h=null}n.sa=null,(gr(this.g.Y,i)!=null||n.Ia)&&qd(this,n),n.Va&&(n.Va.abort(),n.Va=null),i===xe&&(i=this.g.Y,i.K&&i.K.Qd()),n.bd=!0}!this.J||n.Wb||n.Ia||n.ob||Gt(this,n,0)}es(this)&&$d(this)}};function qd(e,t){t.Wb||t.Ub||(t.Ia?(t.Ub=!0,t.ld=0):Md(e.g.Y,t.type)==null?t.ob==null&&Gt(e,t,0):(Ti(t),Xd(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function hx(e,t){var n,i,r,a,o,s,u,l;return R(function(c){if(c.g==1){if(!e.o)throw new D(2,5,5006);return n=$u(e,!0),i=e.g.Y,T(c,i.init(n,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(Je(e.l),e.updateDuration(),r=m(n.keys()),a=r.next();!a.done;a=r.next())o=a.value,s=n.get(o),!e.h.has(o)&&(u=Ku(e,s),(l=t.get(s.id))&&(tx(l,function(d,h,p){return Xu(d,h,p||null,e.i.retryParameters,e.g.wc)}),u.ia=l),e.h.set(o,u),Gt(e,u,0));nv(e),X(c)})}function Ku(e,t){var n={stream:t,type:t.type,sa:null,ia:Kd(e,t),Ha:null,mb:null,pf:null,uc:null,tc:null,mf:null,nf:null,Nc:null,endOfStream:!1,Ia:!1,ob:null,Ub:!1,ld:0,Nd:!1,Wb:!1,bd:!0,gg:!1,gh:!1,vd:!1,Va:null,Gc:null};return t.dependencyStream&&(n.Gc=Ku(e,t.dependencyStream)),n}function Kd(e,t){if(t.type==="video"&&e.i.disableVideoPrefetch||t.type==="audio"&&e.i.disableAudioPrefetch||t.type===xe&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===xe&&e.i.disableTextPrefetch)return null;if(e.m.has(t))return e.m.get(t);var n=e.h.get(t.type);return(n=n&&n.ia)&&t===n.i?n:e.i.segmentPrefetchLimit>0?new Gu(e.i.segmentPrefetchLimit,t,function(i,r,a){return Xu(i,r,a||null,e.i.retryParameters,e.g.wc)},e.g.Ob()<0,e.g.il):null}function px(e){for(var t=e.i.segmentPrefetchLimit,n=e.i.prefetchAudioLanguages,i=m(e.j.variants),r=i.next(),a={};!r.done;a={Mb:void 0},r=i.next())if(a.Mb=r.value,a.Mb.audio)if(e.m.has(a.Mb.audio)){if(r=e.m.get(a.Mb.audio),Xm(r,t),!(t>0&&n.some(function(s){return function(u){return Sa(s.Mb.audio.language,u)}}(a)))){var o=e.h.get(a.Mb.audio.type);r!==(o&&o.ia)&&pi(r),e.m.delete(a.Mb.audio)}}else t<=0||!n.some(function(s){return function(u){return Sa(s.Mb.audio.language,u)}}(a))||!(r=Kd(e,a.Mb.audio))||(a.Mb.audio.segmentIndex||a.Mb.audio.createSegmentIndex(),e.m.set(a.Mb.audio,r))}f.updateDuration=function(){var e=Qg(),t=this.j.presentationTimeline.getDuration();t<1/0?(e&&(this.u&&this.u.stop(),Cd(this.g.Y)),this.g.Y.Ab(t)):e?(this.u&&this.u.Da(.5),this.g.Y.Ab(1/0)):this.g.Y.Ab(4294967296)};function gx(e,t){var n,i,r,a,o,s,u,l,c;return R(function(d){switch(d.g){case 1:if(Je(e.l),n=vt,t.Ia||t.ob==null||t.Wb)return d.return();if(t.ob=null,!t.Ub){d.A(2);break}return T(d,Xd(e,t,t.Nd,t.ld),3);case 3:return d.return();case 2:if(fx(e,t),t.stream.segmentIndex){d.A(4);break}return i=t.stream,he(d,5),T(d,t.stream.createSegmentIndex(),7);case 7:ye(d,6);break;case 5:return r=oe(d),T(d,Yd(e,t,r),8);case 8:return d.return();case 6:if(i!=t.stream)return i.closeSegmentIndex&&i.closeSegmentIndex(),t.Ia||t.ob||Gt(e,t,0),d.return();case 4:if(!t.Gc){d.A(9);break}if(t.Gc.stream.segmentIndex){d.A(9);break}return he(d,11),T(d,t.Gc.stream.createSegmentIndex(),13);case 13:ye(d,9);break;case 11:oe(d);case 9:he(d,14),a=mx(e,t),a!=null&&(Gt(e,t,a),t.vd=!1),ye(d,15);break;case 14:return o=oe(d),T(d,Yd(e,t,o),16);case 16:return d.return();case 15:if(t.type===n.Na)return d.return();if(s=[],t.stream&&!t.stream.isAudioMuxedInVideo&&s.push(t),u=t.type===n.$?n.va:n.$,(l=e.h.get(u))&&l.stream&&!l.stream.isAudioMuxedInVideo&&s.push(l),!e.M||!s.every(function(h){return h.endOfStream})){d.A(0);break}return T(d,e.g.Y.endOfStream(),18);case 18:Je(e.l),c=e.g.Y.getDuration(),c!=0&&c<e.j.presentationTimeline.getDuration()&&e.j.presentationTimeline.Ab(c),X(d)}})}function mx(e,t){if(Wd(t))return _T(e.g.Y,t.stream.originalId||""),null;if(t.type==xe&&jT(e.g.Y),t.stream.isAudioMuxedInVideo&&t.type=="audio")return null;if(t.type!=xe&&pr(e.g.Y))return Ju(e,!0),null;var n=e.i.updateIntervalSeconds/Math.max(1,Math.abs(e.g.Ob()));if(!vm(e.g.Y)&&t.type!=xe)return n/2;var i=e.g.Zb();if(t.type==="audio")for(var r=m(e.m.keys()),a=r.next();!a.done;a=r.next())a=e.m.get(a.value),a.Ya(i,!0),Jo(a,i);r=t.Ha?t.Ha.endTime:i;var o=NT(e.g.Y,t.type,i);a=Math.max(1,Math.max(e.i.rebufferingGoal,e.i.bufferingGoal)*e.C);var s=e.j.presentationTimeline.getDuration()-r,u=gr(e.g.Y,t.type);if(s<1e-6&&u)return t.endOfStream=!0,t.type=="video"&&(n=e.h.get(xe))&&Wd(n)&&(n.endOfStream=!0),null;if(t.endOfStream=!1,o>=a)return n/2;if(s=!t.sa,u=zu(e,t,i,u),!u)return e=1/0,(t=t.Ha)&&(e=t.endTime-t.startTime),Math.min(e/2,n);o=t.mb;var l=u.ba;o&&l&&Ho(l,o)&&(o.g=l.g),o=!1,s&&t.gg&&(o=!0,t.gg=!1),s=1/0,l=Array.from(e.h.values()),l=m(l);for(var c=l.next();!c.done;c=l.next())c=c.value,Wd(c)||c.sa&&!c.sa.current()||(s=Math.min(s,c.Ha?c.Ha.endTime:i));return r>=s+e.j.presentationTimeline.h?n:(t.ia&&t.sa&&!e.m.has(t.stream)&&(t.ia.Ya(u.startTime+.001),Jo(t.ia,u.startTime).catch(function(){})),es(e)&&Sx(e,t,u)||(vx(e,t,i,u,o).catch(function(){}),t.Gc&&ev(e,t.Gc,i,a)),null)}function zu(e,t,n,i){if(t.sa){var r=t.sa.current();return r&&t.Ha&&Math.abs(t.Ha.startTime-r.startTime)<.001&&(r=t.sa.next().value),r}if(t.Ha||i)return r=t.Ha?t.Ha.endTime:i,n=e.g.Ob()<0,t.stream.segmentIndex&&(t.sa=t.stream.segmentIndex.Xb(r,!1,n)),t.sa&&t.sa.next().value;i=e.j.sequenceMode||es(e)?0:e.i.inaccurateManifestTolerance;var a=Math.max(n-i,0),o=e.g.Ob()<0;for(e=null,i&&(t.stream.segmentIndex&&(t.sa=t.stream.segmentIndex.Xb(a,!1,o)),e=t.sa&&t.sa.next().value),e||(t.stream.segmentIndex&&(t.sa=t.stream.segmentIndex.Xb(n,!1,o)),e=t.sa&&t.sa.next().value);((r=e)==null?void 0:r.bc())===2;)i=n=void 0,e=(i=(n=t.sa)==null?void 0:n.next().value)!=null?i:null;return e}function vx(e,t,n,i,r){var a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M,N;return R(function(I){switch(I.g){case 1:if(a=vt,o=t.stream,s=t.sa,t.Ia=!0,he(I,2),i.bc()==2)throw new D(1,1,1011);return T(I,bx(e,t,i,r),4);case 4:return Je(e.l),e.F?I.return():(u=o.mimeType=="video/mp4"||o.mimeType=="audio/mp4",l=P.ReadableStream,e.i.lowLatencyMode&&e.j.isLowLatency&&l&&u&&(e.j.type!="HLS"||i.o)?(h=new Uint8Array(0),g=p=!1,b=function(C){var E,O,L;return R(function(_){switch(_.g){case 1:if(p||(g=!0,Je(e.l),e.F))return _.return();if(he(_,2),h=mt(h,C),E=!1,O=0,new Ke().box("mdat",function(j){O=j.size+j.start,E=!0}).parse(h,!1,!0),!E){_.A(4);break}return L=h.subarray(0,O),h=h.subarray(O),T(_,zd(e,t,n,o,i,L,!0,r),5);case 5:t.ia&&t.sa&&Jo(t.ia,i.startTime,!0);case 4:ye(_,0);break;case 2:y=oe(_),X(_)}})},T(I,Zo(e,t,i,b),9)):(c=Zo(e,t,i),T(I,c,7)));case 7:return d=I.h,Je(e.l),e.F?I.return():(Je(e.l),t.Ub?(t.Ia=!1,Gt(e,t,0),I.return()):T(I,zd(e,t,n,o,i,d,!1,r),6));case 9:if(A=I.h,y)throw y;if(g){I.A(10);break}return p=!0,Je(e.l),e.F?I.return():t.Ub?(t.Ia=!1,Gt(e,t,0),I.return()):T(I,zd(e,t,n,o,i,A,!1,r),10);case 10:t.ia&&t.sa&&Jo(t.ia,i.startTime,!0);case 6:if(Je(e.l),e.F)return I.return();t.Ha=i,s.next(),t.Ia=!1,t.gh=!1,x=e.g.Y.Hc(),k=x[t.type],JSON.stringify(k),t.Ub||(M=null,t.type===a.va?M=e.h.get(a.$):t.type===a.$&&(M=e.h.get(a.va)),M&&M.type==a.$?e.g.Bd(i,t.stream,M.stream.isAudioMuxedInVideo,!1):e.g.Bd(i,t.stream,t.stream.codecs.includes(","),!1)),Ti(t),Gt(e,t,0),ye(I,0);break;case 2:if(N=oe(I),Je(e.l,N),e.F)return I.return();if(t.Ia=!1,N.code==7001)t.Ia=!1,Ti(t),Gt(e,t,0),I.A(0);else if(t.type==a.Na&&e.i.ignoreTextStreamFailures)e.h.delete(a.Na),I.A(0);else return N.code==3017?T(I,yx(e,t,N),0):(t.vd=!0,N.category==1&&t.ia&&$o(t.ia,i),N.severity=2,T(I,Yd(e,t,N),0))}})}function ev(e,t,n,i){var r,a,o,s,u,l,c,d,h,p,g,y,b;return R(function(A){switch(A.g){case 1:for(r=vt,a=t.stream,u=(s=(o=a.segmentIndex)&&o.Xb(n))&&s.next().value;u&&e.N.includes(u.startTime);)u=s&&s.next().value;if(!u){A.A(0);break}if(l=u.ba,!l||Ho(l,t.mb)){A.A(3);break}return t.mb=l,he(A,4),T(A,Zo(e,t,l),6);case 6:c=A.h;var x=e.g.Y;x.C&&Zs(x.C,c,0,a),e.N=[],ye(A,3);break;case 4:throw d=oe(A),t.mb=null,d;case 3:if(t.Ha&&t.Ha==u){A.A(0);break}return t.Ha=u,he(A,8),T(A,Zo(e,t,u),10);case 10:h=A.h,x=e.g.Y,x.C&&Zs(x.C,h,0,a),e.N.push(u.startTime),ye(A,9);break;case 8:throw p=oe(A),t.Ha=null,p;case 9:if(t.Ub||(g=null,t.type===r.va?g=e.h.get(r.$):t.type===r.$&&(g=e.h.get(r.va)),g&&g.type==r.$?e.g.Bd(u,t.stream,g.stream.isAudioMuxedInVideo,!0):e.g.Bd(u,t.stream,t.stream.codecs.includes(","),!0)),y=Math.max.apply(Math,[0].concat(z(e.N))),b=e.g.Zb(),b+i>y)return T(A,ev(e,t,u.startTime,i),0);A.A(0)}})}function yx(e,t,n){var i,r,a,o,s,u,l;return R(function(c){switch(c.g){case 1:if(i=Array.from(e.h.values()),i.some(function(d){return d!=t&&d.gh})){c.A(2);break}if(e.i.avoidEvictionOnQuotaExceededError)return r=Jd(e,n),e.g.disableStream(t.stream,r)||Gt(e,t,4),c.return();if(a=Math.round(100*e.C),a>20){e.C-=.2,c.A(3);break}if(a>4){e.C-=.04,c.A(3);break}if(o=Jd(e,n),s=e.g.disableStream(t.stream,o),!s){t.vd=!0,e.F=!0,e.g.onError(n),c.A(5);break}return e.C=1,u=e.g.Zb(),T(c,Wu(e,t,u),5);case 5:return c.return();case 3:return t.gh=!0,l=e.g.Zb(),T(c,Wu(e,t,l),2);case 2:Gt(e,t,4),X(c)}})}function bx(e,t,n,i){var r,a,o,s,u,l,c,d,h,p,g,y,b,A,x,k;return R(function(M){switch(M.g){case 1:if(r=vt,a=t.Ha==null,o=[],s=Math.max(0,Math.max(n.appendWindowStart,e.ha)-.1),u=Math.min(n.appendWindowEnd,e.aa)+.1,l=n.codecs||t.stream.codecs,c=lr(l),d=yn(n.mimeType||t.stream.mimeType),h=n.timestampOffset,h==t.pf&&s==t.uc&&u==t.tc&&c==t.mf&&d==t.nf){M.A(2);break}if(p=t.mf&&t.nf&&qT(e.g.Y,t.type,d,l,$u(e)),!p){M.A(3);break}if(g=null,t.type===r.va?g=e.h.get(r.$):t.type===r.$&&(g=e.h.get(r.va)),!g){M.A(3);break}return T(M,Yu(g).catch(function(){}),5);case 5:g.mb=null,g.uc=null,g.tc=null,qd(e,g);case 3:return T(M,tv(e,t,h,s,u,n,c,d),2);case 2:return Ho(n.ba,t.mb)||(t.mb=n.ba,n.l&&n.ba&&(y=Zo(e,t,n.ba),b=function(){var N,I,C,E,O,L,_,j,G,H,B;return R(function(F){switch(F.g){case 1:return he(F,2),T(F,y,4);case 4:return N=F.h,Je(e.l),I=null,C=new Map,E={projection:null,hfov:null},t.stream&&(O=t.stream.videoLayout)&&(L=O.split("/"),L.includes("PROJ-RECT")?E.projection="rect":L.includes("PROJ-EQUI")?E.projection="equi":L.includes("PROJ-HEQU")?E.projection="hequ":L.includes("PROJ-PRIM")?E.projection="prim":L.includes("PROJ-AIV")&&(E.projection="hequ")),_=new Ke,_.box("moov",be).box("trak",be).box("mdia",be).S("mdhd",function(K){I=Pu(K.reader,K.version).timescale}).box("hdlr",function(K){switch(K=K.reader,K.skip(8),K.Yc()){case"soun":C.set(r.$,I);break;case"vide":C.set(r.va,I)}I=null}),t.type!==r.va||E.projection||_.box("minf",be).box("stbl",be).S("stsd",Vi).box("encv",bn).box("avc1",bn).box("avc3",bn).box("hev1",bn).box("hvc1",bn).box("dvav",bn).box("dva1",bn).box("dvh1",bn).box("dvhe",bn).box("dvc1",bn).box("dvi1",bn).box("vexu",be).box("proj",be).S("prji",function(K){K=K.reader.Yc(),E.projection=K}).box("hfov",function(K){K=K.reader.U()/1e3,E.hfov=K}),_.parse(N,!0,!0),t.type===r.va&&wx(e,E),C.has(t.type)?n.ba.timescale=C.get(t.type):I!=null&&(n.ba.timescale=I),j=t.stream.segmentIndex,j instanceof lt&&(G=JT(j,n.startTime)),H=t.stream.closedCaptions&&t.stream.closedCaptions.size>0,T(F,e.g.Vh(t.type,N),5);case 5:return T(F,Uu(e.g.Y,t.type,N,null,t.stream,H,t.bd,i,!1,!1,G),6);case 6:ye(F,0);break;case 2:throw B=oe(F),t.mb=null,B}})},A=n.startTime,a&&(x=gr(e.g.Y,t.type),x!=null&&(A=x)),e.g.Gk(A,n.ba),o.push(b()))),k=t.Ha?t.Ha.i:-1,n.i!=k&&o.push(wm(e.g.Y,t.type,n.startTime)),T(M,Promise.all(o),0)}})}function tv(e,t,n,i,r,a,o,s){var u,l,c,d,h;return R(function(p){switch(p.g){case 1:if(u=vt,l=$u(e),he(p,2),t.uc=i,t.tc=r,o&&(t.mf=o),s&&(t.nf=s),t.pf=n,c=e.j.sequenceMode||e.j.type=="HLS",d=null,t.type===u.va?d=e.h.get(u.$):t.type===u.$&&(d=e.h.get(u.va)),!(d&&d.stream&&d.stream.isAudioMuxedInVideo)){p.A(4);break}return T(p,bm(e.g.Y,d.type,n,i,r,c,d.stream.mimeType,d.stream.codecs,l),4);case 4:return T(p,bm(e.g.Y,t.type,n,i,r,c,a.mimeType||t.stream.mimeType,a.codecs||t.stream.codecs,l),6);case 6:ye(p,0);break;case 2:throw h=oe(p),t.uc=null,t.tc=null,t.mf=null,t.nf=null,t.pf=null,h}})}function zd(e,t,n,i,r,a,o,s){o=o===void 0?!1:o,s=s===void 0?!1:s;var u,l,c,d;return R(function(h){switch(h.g){case 1:return u=i.closedCaptions&&i.closedCaptions.size>0,e.i.shouldFixTimestampOffset&&(l=i.mimeType=="video/mp4"||i.mimeType=="audio/mp4",c=null,r.ba&&(c=r.ba.timescale),l&&c&&i.type==="video"&&e.j.type=="DASH"&&new Ke().box("moof",be).box("traf",be).S("tfdt",function(p){var g,y,b,A,x,k;return R(function(M){return g=Cu(p.reader,p.version),y=g.baseMediaDecodeTime,y?(b=-y/c,A=Number(t.pf)||0,A<b?(x=t.uc,k=t.tc,T(M,tv(e,t,b,x,k,r),0)):M.A(0)):M.return()})}).parse(a,!1,o)),T(h,Wu(e,t,n),2);case 2:return Je(e.l),d=t.bd,t.bd=!1,T(h,e.g.Vh(t.type,a),3);case 3:return T(h,Uu(e.g.Y,t.type,a,r,i,u,d,s,o),4);case 4:Je(e.l),X(h)}})}function Wu(e,t,n){var i,r,a,o,s,u,l,c,d;return R(function(h){if(h.g==1)return e.H==t&&(e.H=null),i=t.stream.segmentIndex,i instanceof lt&&(i.Ya(e.j.presentationTimeline.Hb()),r=[],YT(i,function(p){r.push(p.We())})),a=Math.max(e.i.bufferBehind*e.C,e.j.presentationTimeline.h),o=Md(e.g.Y,t.type),o==null?h.return():(s=n-o,u=e.i.evictionGoal,l=e.j.presentationTimeline.$b(),c=e.j.presentationTimeline.Gb(),d=s-a,c-l>u&&(d=Math.max(s-a,l-u-o)),d<=u?h.return():T(h,e.g.Y.remove(t.type,o,o+d,r),2));if(h.g!=4)return Je(e.l),e.H?T(h,Wu(e,e.H,n),4):h.A(0);Je(e.l),X(h)})}function Wd(e){return e&&e.type==xe&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function Zo(e,t,n,i){var r,a,o,s,u;return R(function(l){switch(l.g){case 1:if(r=n.ac())return l.return(r);if(a=null,t.ia){var c=t.ia,d=c.g;n instanceof fn&&(d=c.j),d.has(n)?(c=d.get(n),i&&(c.Ch=i),a=c.oe):a=null}return a||(a=Xu(n,t.stream,i||null,e.i.retryParameters,e.g.wc)),o=0,t.sa&&(o=t.sa.h),t.Va=a,T(l,a.promise,2);case 2:if(s=l.h,t.Va=null,u=s.data,!n.aesKey){l.A(3);break}return T(l,Gd(u,n.aesKey,o),4);case 4:u=l.h;case 3:return l.return(u)}})}function Xu(e,t,n,i,r,a){a=a===void 0?!1:a;var o=e instanceof se?e:void 0,s=o?1:0;return e=Qo(e.P(),e.startByte,e.endByte,i,n),e.contentType=t.type,r.request(Bn,e,{type:s,stream:t,segment:o,isPreload:a})}function Xd(e,t,n,i){var r,a;return R(function(o){if(o.g==1)return t.Ub=!1,t.Nd=!1,t.ld=0,t.Wb=!0,t.Ha=null,t.sa=null,t.ia&&!e.m.has(t.stream)&&pi(t.ia),i?(r=e.g.Zb(),a=e.g.Y.getDuration(),T(o,e.g.Y.remove(t.type,r+i,a),3)):T(o,ym(e.g.Y,t.type),4);if(o.g!=3)return Je(e.l),n?T(o,e.g.Y.flush(t.type),3):o.A(3);Je(e.l),t.Wb=!1,t.endOfStream=!1,t.Ia||t.ob||Gt(e,t,0),X(o)})}function Gt(e,t,n){var i=t.type;(i!=xe||e.h.has(i))&&(t.ob=new Do(function(){var r;return R(function(a){if(a.g==1)return he(a,2),T(a,gx(e,t),4);if(a.g!=2)return ye(a,0);r=oe(a),e.g&&e.g.onError(r),X(a)})}).ka(n))}function Ti(e){e.ob!=null&&(e.ob.stop(),e.ob=null)}function Yu(e){return R(function(t){return e.Va?T(t,e.Va.abort(),0):t.A(0)})}function Yd(e,t,n){var i,r,a,o,s;return R(function(u){switch(u.g){case 1:return n.code==3024?(t.Ia=!1,Ti(t),Gt(e,t,0),u.return()):T(u,Tg(e.X),2);case 2:if(Je(e.l),n.category===1&&n.code!=1003){if(t.Nc)return $m(e,!1),u.return();i=Jd(e,n),n.handled=e.g.disableStream(t.stream,i),n.handled&&(n.severity=1)}if(n.handled||n.code!=1011){u.A(3);break}for(r=e.g.Zb(),a=gr(e.g.Y,t.type),o=zu(e,t,r,a);((s=o)==null?void 0:s.bc())===2;)t.Ha=o,o=zu(e,t,r,a);if(!o){u.A(3);break}return T(u,wm(e.g.Y,t.type,o.startTime),5);case 5:return t.Ia=!1,t.vd=!1,Ti(t),Gt(e,t,0),u.return();case 3:(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.i.failureCallback(n),X(u)}})}function Jd(e,t){return e.i.maxDisabledTime===0&&t.code==1011?1:e.i.maxDisabledTime}function Ju(e,t){t=t===void 0?!1:t;var n,i,r,a,o,s;return R(function(u){if(u.g==1){if(n=Date.now()/1e3,i=e.i.minTimeBetweenRecoveries,!t){if(!e.i.allowMediaSourceRecoveries||n-e.R<i)return u.return(!1);e.R=n}return r=vt,(a=e.h.get(r.$))&&(Ti(a),a.Va&&(a.Va.abort(),a.Va=null),a.mb=null,a.uc=null,a.tc=null,a.Ia=!1,a.Ub=!1,a.ld=0,a.Nd=!1,a.Wb=!1,a.sa&&a.sa.kh()),(o=e.h.get(r.va))&&(Ti(o),o.Va&&(o.Va.abort(),o.Va=null),o.mb=null,o.uc=null,o.tc=null,o.Ia=!1,o.Ub=!1,o.ld=0,o.Nd=!1,o.Wb=!1,o.sa&&o.sa.kh()),s=e.g.video.paused,T(u,xm(e.g.Y,$u(e)),2)}return!o||o.Wb||o.Ia||o.ob||Gt(e,o,0),!a||a.Wb||a.Ia||a.ob||Gt(e,a,0),s||e.g.video.play(),u.return(!0)})}function wx(e,t){if(e.T.projection!=t.projection||e.T.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new Z("spatialvideoinfo",n)}else n=new Z("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.T=t}}function es(e){if(e.i.crossBoundaryStrategy!=="keep")return!0;var t=Te();if(t.Ib()){if(!t.Nf()){for(t=m(e.h.keys()),n=t.next();!n.done;n=t.next())if(n=e.h.get(n.value),n.type!==vt.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1){for(e=new Set,t=m(n.fullMimeTypes),n=t.next();!n.done;n=t.next())e.add(Mo(n.value));return e.size>1}}}else{t=m(e.h.keys());for(var n=t.next();!n.done;n=t.next())if(n=e.h.get(n.value),n.type!==vt.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1)return!0}return!1}function nv(e){e.G.Qa(),es(e)&&(e.G.D(e.g.video,"waiting",function(){return $d(e)}),e.G.D(e.g.video,"timeupdate",function(){return $d(e)}))}function $d(e){if(es(e)){e.K.stop();var t=e.g.Zb(),n=e.h.get("video")||e.h.get("audio");n&&(n=n.mb)&&n.g!==null&&(t=n.g-t,t<0||t>1||(e.I=n.g+.1,e.K.ka(t)))}}function Sx(e,t,n){if(t.type===xe)return!1;var i=t.mb;if(!i)return!1;var r=n.ba;if(n=i.g!==r.g,e.i.crossBoundaryStrategy==="reset_to_encrypted"&&(i.encrypted||r.encrypted||(n=!1),i.encrypted&&(e.i.crossBoundaryStrategy="keep")),e.i.crossBoundaryStrategy==="RESET_ON_ENCRYPTION_CHANGE"&&i.encrypted==r.encrypted&&(n=!1),e.i.crossBoundaryStrategy==="keep"&&i.mimeType&&r.mimeType){var a=Ht(dn(i.mimeType)),o=Ht(dn(i.mimeType));i.mimeType==r.mimeType&&a==o&&(n=!1)}return n&&(e.J||t.bd)&&(e.J=!1,Ju(e,!0).then(function(){var s=new Map().set("oldEncrypted",i.encrypted).set("newEncrypted",r.encrypted);e.g.onEvent(new Z("boundarycrossed",s))})),n}function $u(e,t){function n(a){if(a.fullMimeTypes&&a.fullMimeTypes.size>1&&e.h.has(a.type)){var o=e.h.get(a.type),s=gr(e.g.Y,o.type),u=e.g.Zb();(o=zu(e,o,u,s))&&o.codecs&&o.mimeType&&(a.codecs=o.codecs,a.mimeType=o.mimeType)}}t=t===void 0?!1:t;var i=new Map,r=e.o.audio;return r&&(n(r),i.set("audio",r)),(r=e.o.video)&&(n(r),i.set("video",r)),t&&e.B&&i.set(xe,e.B),i}function Qu(){}function Qd(e,t,n,i,r){var a=r in i,o=a?n.constructor==Object&&Object.keys(i).length==0:n.constructor==Object&&Object.keys(n).length==0,s=a||o,u=!0,l;for(l in t){var c=r+"."+l,d=a?i[r]:n[l];s||l in n?t[l]===void 0?d===void 0||s?delete e[l]:e[l]=ei(d):o?e[l]=t[l]:d.constructor==Object&&t[l]&&t[l].constructor==Object?(e[l]||(e[l]=ei(d)),c=Qd(e[l],t[l],d,i,c),u=u&&c):typeof t[l]!=typeof d||t[l]==null||typeof t[l]!="function"&&t[l].constructor!=d.constructor?(mi("Invalid config, wrong type for "+c),u=!1):typeof n[l]=="function"&&n[l].length!=t[l].length?(Ee("Unexpected number of arguments for "+c),e[l]=t[l]):e[l]=Array.isArray(e[l])?t[l].slice():t[l]:(mi("Invalid config, unrecognized key "+c),u=!1)}return u}function Zu(e,t){for(var n={},i=n,r=0,a=0;r=e.indexOf(".",r),!(r<0);)(r==0||e[r-1]!="\\")&&(a=e.substring(a,r).replace(/\\\./g,"."),i[a]={},i=i[a],a=r+1),r+=1;return i[e.substring(a).replace(/\\\./g,".")]=t,n}function Fa(e,t){return e&&t}function iv(e,t){function n(a){for(var o=m(Object.keys(a)),s=o.next();!s.done;s=o.next())if(s=s.value,!(a[s]instanceof HTMLElement))if(r(a[s])&&Object.keys(a[s]).length===0)delete a[s];else{var u=a[s];Array.isArray(u)&&u.length===0||typeof a[s]=="function"?delete a[s]:r(a[s])&&(n(a[s]),Object.keys(a[s]).length===0&&delete a[s])}}function i(a,o){return Object.keys(a).reduce(function(s,u){var l=a[u];return o.hasOwnProperty(u)?l instanceof HTMLElement&&o[u]instanceof HTMLElement?l.isEqualNode(o[u])||(s[u]=l):r(l)&&r(o[u])?(l=i(l,o[u]),(Object.keys(l).length>0||!r(l))&&(s[u]=l)):Array.isArray(l)&&Array.isArray(o[u])?Dr(l,o[u])||(s[u]=l):Number.isNaN(l)&&Number.isNaN(o[u])||l!==o[u]&&(s[u]=l):s[u]=l,s},{})}function r(a){return a&&typeof a=="object"&&!Array.isArray(a)}return e=i(e,t),n(e),e}Y("shaka.util.ConfigUtils",Qu),Qu.getDifferenceFromConfigObjects=iv,Qu.convertToConfigObject=Zu,Qu.mergeConfigObjects=Qd,Y("shaka.config.RepeatMode",{OFF:0,ALL:1,SINGLE:2});function hn(){}function rv(e){return e=vi(e),new ht(e).Db}function ts(e,t,n){function i(s){ln(a).setUint32(o,s.byteLength,!0),o+=4,a.set(pe(s),o),o+=s.byteLength}if(!n||!n.byteLength)throw new D(2,6,6015);var r;typeof t=="string"?r=Bc(t,!0):r=t,e=vi(e),e=Bc(e,!0);var a=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),o=0;return i(e),i(r),i(n),a}function Zd(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=vi(e).split("skd://").pop(),ts(e,n,t))}function el(e,t){e===2&&(e=t.drmInfo)&&yo(e.keySystem)&&(t.headers["Content-Type"]="application/octet-stream")}Y("shaka.drm.FairPlay",hn),hn.commonFairPlayResponse=function(e,t){if(e===2&&(e=t.originalRequest.drmInfo)&&yo(e.keySystem)){try{var n=ot(t.data)}catch{return}if(e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0),!e)try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch{}e&&(t.data=_n(jn(n)))}},hn.muxFairPlayRequest=function(e,t){el(e,t)},hn.expressplayFairPlayRequest=function(e,t){if(e===2){var n=t.drmInfo;n&&yo(n.keySystem)&&el(e,t)}},hn.conaxFairPlayRequest=function(e,t){el(e,t)},hn.ezdrmFairPlayRequest=function(e,t){el(e,t)},hn.verimatrixFairPlayRequest=function(e,t){e===2&&(e=t.drmInfo)&&yo(e.keySystem)&&(e=pe(t.body),e=Pi(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Zn("spc="+e))},hn.muxInitDataTransform=function(e,t,n){return Zd(e,t,n)},hn.expressplayInitDataTransform=function(e,t,n){return Zd(e,t,n)},hn.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=vi(e).split("skd://").pop().split("?").shift(),n=P.atob(n);var i=new ArrayBuffer(n.length*2);i=Pp(i);for(var r=0,a=n.length;r<a;r++)i[r]=n.charCodeAt(r);return ts(e,i,t)},hn.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=vi(e).split(";").pop(),ts(e,n,t))},hn.verimatrixInitDataTransform=function(e,t,n){return Zd(e,t,n)},hn.initDataTransform=ts,hn.defaultGetContentId=rv,hn.isFairPlaySupported=function(){var e;return R(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},he(t,2),T(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(oe(t),t.return(!1))})};function tl(e,t,n){for(n=n===void 0?!0:n,this.h=e,this.g=new Set([e]),t=t||[],e=m(t),t=e.next();!t.done;t=e.next())this.add(t.value,n)}tl.prototype.add=function(e,t){var n=this.h;t=t===void 0?!0:t;var i;if(!(i=!!n.audio!=!!e.audio||!!n.video!=!!e.video||n.language!=e.language)&&(i=n.audio&&e.audio)){i=n.audio;var r=e.audio;i=!(!((!i.channelsCount||!r.channelsCount||i.channelsCount>2||r.channelsCount>2)&&i.channelsCount!=r.channelsCount||i.spatialAudio!==r.spatialAudio||t&&!av(i,r))&&Dr(i.roles,r.roles)&&i.groupId===r.groupId)}return!i&&(i=n.video&&e.video)&&(n=n.video,i=e.video,i=!((!t||av(n,i))&&Dr(n.roles,i.roles))),i?!1:(this.g.add(e),!0)},tl.prototype.values=function(){return this.g.values()};function av(e,t){return e.mimeType!=t.mimeType?!1:(e=e.codecs.split(",").map(function(n){return lr(n)}),t=t.codecs.split(",").map(function(n){return lr(n)}),Dr(e,t))}Y("shaka.media.AdaptationSet",tl);function ns(){this.h=this.g=null}ns.prototype.configure=function(e){this.g=e},ns.prototype.getConfiguration=function(){return this.g},ns.prototype.create=function(e){var t;if(this.g.language){var n=Tx(e,this.g.language);n.length&&(t=n)}t||(t=e.filter(function(a){return a.primary}),t=t.length?t:e),e=xx(t,this.g.role),e.length&&(t=e),e=Ax(t,this.g.videoRole),e.length&&(t=e),this.g.videoLayout&&(e=Cx(t,this.g.videoLayout),e.length&&(t=e)),this.g.hdrLevel&&(e=Mx(t,this.g.hdrLevel),e.length&&(t=e));var i=[this.g.channelCount,this.g.preferredAudioChannelCount];if(e=i.filter(function(a,o){return a&&i.indexOf(a)===o}),e.length){for(e=m(e),n=e.next();!n.done;n=e.next())if(n=Ex(t,n.value),n.length){t=n;break}}this.g.audioLabel&&(e=kx(t,this.g.audioLabel),e.length&&(t=e)),this.g.videoLabel&&(e=Ix(t,this.g.videoLabel),e.length&&(t=e)),e=Px(t,this.g.spatialAudio),e.length&&(t=e);var r=[this.g.audioCodec,this.g.activeAudioCodec].concat(z(this.g.preferredAudioCodecs));if(e=r.filter(function(a,o){return a&&r.indexOf(a)===o}),e.length){for(e=m(e),n=e.next();!n.done;n=e.next())if(n=Rx(t,n.value),n.length){t=n;break}}return e=Te(),e=this.g.codecSwitchingStrategy=="smooth"&&e.Ib(),this.h=new tl(t[0],t,!e)},ns.prototype.getLastAdaptationSet=function(){return this.h};function Tx(e,t){t=Ue(t);var n=pu(t,e.map(function(i){return id(i)}));return n?e.filter(function(i){return n==id(i)}):[]}function xx(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function Ax(e,t){return e.filter(function(n){return n.video?t?n.video.roles.includes(t):n.video.roles.length==0:!1})}function kx(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function Ix(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function Ex(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount>t)}).sort(function(n,i){return n.audio||i.audio?n.audio?i.audio?(i.audio.channelsCount||0)-(n.audio.channelsCount||0):1:-1:0})}function Mx(e,t){if(t=="AUTO"){var n=e.some(function(i){return!!(i.video&&i.video.hdr&&i.video.hdr=="HLG")});t=Te().sd(n)}return e.filter(function(i){return!(i.video&&i.video.hdr&&i.video.hdr!=t)})}function Cx(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function Px(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function Rx(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function nl(){}function Va(){var e=1/0,t=Te();navigator.connection&&navigator.connection.saveData&&(e=360);var n={retryParameters:ni(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(s,u,l){return P.shakaMediaKeysPolyfill==="apple"&&u=="skd"&&(u=l.serverCertificate,l=rv(s),s=ts(s,l,u)),s},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:!1,minHdcpVersion:"",ignoreDuplicateInitData:!0,defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"},i="reload";t.Ib()&&(i="smooth");var r={retryParameters:ni(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,enableAudioGroups:!0,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:il,manifestPreprocessorTXml:rl,sequenceMode:!1,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:t.fd(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:il,manifestPreprocessorTXml:rl,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},a={trackSelectionCallback:function(s){return R(function(u){return u.return(s)})},downloadSizeCallback:function(s){var u;return R(function(l){return l.g==1?navigator.storage&&navigator.storage.estimate?T(l,navigator.storage.estimate(),3):l.return(!0):(u=l.h,l.return(u.usage+s<u.quota*.95))})},progressCallback:function(s,u){return Fa([s,u])},usePersistentLicense:!0,numberOfParallelDownloads:5},o={drm:n,manifest:r,streaming:{retryParameters:ni(),failureCallback:function(s){return Fa([s])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!0,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:!1,dontChooseCodecs:!1,shouldFixTimestampOffset:!1,avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep",returnToEndOfLiveWindowWhenOutside:!1},networking:{forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3},mediaSource:{codecSwitchingStrategy:i,addExtraFeaturesToSourceBuffer:function(s){return Fa([s],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,correctEc3Enca:!1,modifyCueCallback:function(s,u,l){return Fa([s,u,l])},dispatchAllEmsgBoxes:!1,useSourceElements:!0,durationReductionEmitsUpdateEnd:!0},offline:a,abrFactory:function(){return new ut},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(ns,[null].concat(z(Et.apply(0,arguments)))))},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:5,minTimeToSwitch:0,preferNetworkInformationBandwidth:!1,removeLatencyFromFirstPacketTime:!1},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredAudioRole:"",preferredVideoRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1,targets:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:!1,skipPlayDetection:!1,supportsMultipleMediaElements:!0,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0,allowStartInMiddleOfInterstitial:!0},ignoreHardwareResolution:!1,queue:{preloadNextUrlWindow:1/0,preloadPrevItem:!0,repeatMode:0}};return a.trackSelectionCallback=function(s){return R(function(u){return u.return(Dx(s,o.preferredAudioLanguage,o.preferredVideoHdrLevel))})},t.Wa(o)}function ov(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function Ki(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return Qd(e,t,n||Va(),i,"")}function Dx(e,t,n){var i=n;i=="AUTO"&&(n=e.some(function(s){return!!(s.hdr&&s.hdr=="HLG")}),i=Te().sd(n));var r=e.filter(function(s){return!(s.type!="variant"||s.hdr&&s.hdr!=i)});n=[];var a=pu(t,r.map(function(s){return s.language}));a&&(n=r.filter(function(s){return Ue(s.language)==a})),n.length==0&&(n=r.filter(function(s){return s.primary})),n.length==0&&(r.map(function(s){return s.language}),n=r);var o=n.filter(function(s){return s.height&&s.height<=480});for(o.length&&(o.sort(function(s,u){return u.height-s.height}),n=o.filter(function(s){return s.height==o[0].height})),t=[],n.length&&(r=Math.floor(n.length/2),n.sort(function(s,u){return s.bandwidth-u.bandwidth}),t.push(n[r])),e=m(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=xe&&n.type!="image"||t.push(n);return t}function il(e){return Fa([e],e)}function rl(e){return Fa([e],e)}Y("shaka.util.PlayerConfiguration",nl),nl.mergeConfigObjects=Ki,nl.createDefaultForLL=ov,nl.createDefault=Va;function Lx(){this.g=null,this.h=[]}function ef(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=m(e.h);for(var i=e.next();!i.done;i=e.next())i=i.value,n+=i.state==t?i.duration:0;return n}function Nx(e){function t(a){return{timestamp:a.timestamp,state:a.state,duration:a.duration}}for(var n=[],i=m(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}function Ox(){this.i=this.h=null,this.g=[]}function tf(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function al(){this.C=this.X=NaN,this.l="",this.j=this.xi=this.u=this.B=this.K=this.F=this.o=this.m=this.J=this.G=this.i=this.T=this.V=this.N=this.O=this.R=NaN,this.M=0,this.H=this.I=NaN,this.g=new Lx,this.h=new Ox}function _x(e,t,n){e.R=t,e.O=n}function sv(e,t,n){e.X=t,e.C=n}function jx(e,t){e.i=isNaN(e.i)?t:Math.max(e.i,t)}function uv(e,t){e.j=isNaN(e.j)?t:e.j+t}function Ux(e){var t=e.X,n=e.C,i=e.l,r=e.B,a=e.O,o=e.R,s=e.N,u=e.V,l=e.T,c=e.u,d=e.i,h=e.G,p=e.J,g=e.m,y=ef(e.g,"playing"),b=ef(e.g,"paused"),A=ef(e.g,"buffering"),x=e.o,k=e.F,M=e.K,N=e.xi,I=e.j,C=e.M,E=e.I,O=e.H,L=Nx(e.g),_=[];e=m(e.h.g);for(var j=e.next();!j.done;j=e.next())j=j.value,_.push({timestamp:j.timestamp,id:j.id,type:j.type,fromAdaptation:j.fromAdaptation,bandwidth:j.bandwidth});return{width:t,height:n,currentCodecs:i,streamBandwidth:r,decodedFrames:a,droppedFrames:o,corruptedFrames:s,stallsDetected:u,gapsJumped:l,estimatedBandwidth:c,completionPercent:d,loadLatency:h,manifestTimeSeconds:p,drmTimeSeconds:g,playTime:y,pauseTime:b,bufferingTime:A,licenseTime:x,liveLatency:k,maxSegmentDuration:M,manifestSizeBytes:N,bytesDownloaded:I,nonFatalErrorCount:C,manifestPeriodCount:E,manifestGapCount:O,stateHistory:L,switchHistory:_}}function Vn(e,t,n,i){Ge.call(this),this.N=e,this.V=t,this.Ea=i.networkingEngine,this.o=n,this.C=null,this.Aa=0,this.Ta=i.md,this.G=i.zk,this.Ua=i.Ak,this.g=i.config,this.m=this.H=this.h=null,this.oa=!1,this.I=i.Lk,this.wa=!1,this.j=null,this.ha=!1,this.u=null,this.M=new Map,this.za=!1,this.Ja=i.Kk,this.X=new al,this.ma=new qe,this.B=new qe,this.O=null,this.l=!1,this.aa=i.qj,this.T=this.i=null,this.R=!1,this.K=[],this.J=[],this.F=!0}rt(Vn,Ge);function is(e,t,n){(e=t?e.J:e.K)?e.push(n):n()}function Bx(e){if(e.J)for(var t=m(e.J),n=t.next();!n.done;n=t.next())n=n.value,n();e.J=null}function lv(e,t){if(e.O=t,e.R=!0,e.K){t=m(e.K);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.K=null}f=Vn.prototype,f.getStartTime=function(){return this.o},f.rd=function(){return this.N},f.Lg=function(){return this.h};function Fx(e){return e.wa=!0,e.I}f.getStats=function(){return this.X};function Vx(e){return e.ha=!0,e.j}f.Wj=function(){return this.i?qr(this.i):null},f.Vj=function(){return this.T?Kr(this.T):null};function Hx(e){return e.za=!0,e.M}f.start=function(){var e=this;(function(){var t;return R(function(n){switch(n.g){case 1:return T(n,Promise.resolve(),2);case 2:return he(n,3),T(n,Gx(e),5);case 5:if(vr(e),P.shakaMediaKeysPolyfill==="webkit"){n.A(6);break}return T(n,cv(e),7);case 7:vr(e);case 6:return T(n,Kx(e),8);case 8:if(vr(e),!e.aa){n.A(9);break}return T(n,zx(e),10);case 10:vr(e);case 9:if(!e.aa||!e.j){n.A(11);break}return T(n,WS(e.j),12);case 12:vr(e);case 11:e.B.resolve(),ye(n,0);break;case 3:t=oe(n),t instanceof D&&(t.code==7001||t.code==7003)||e.B.reject(t),X(n)}})})()},f.dispatchEvent=function(e){return this.O?this.O.dispatchEvent(e):Ge.prototype.dispatchEvent.call(this,e)},f.onError=function(e){e.severity===2&&(this.B.reject(e),this.destroy());var t=new Map().set("detail",e);t=new Z("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function vr(e){if(e.l)throw new D(2,7,7003)}function nf(e,t){e.dispatchEvent(new Z("onstatechange",new Map().set("state",t)))}function Gx(e){var t,n,i,r,a,o;return R(function(s){switch(s.g){case 1:if(nf(e,"manifest-parser"),e.m||(e.H=Up(e.N,e.V),e.m=e.H(),e.m.configure(e.g.manifest,function(){return e.F})),t=Date.now()/1e3,nf(e,"manifest"),e.h){s.A(2);break}return T(s,e.m.start(e.N,e.Ua),3);case 3:return e.h=s.h,fv(e.h),T(s,qx(e),2);case 2:return e.ma.resolve(),n=new Z("manifestparsed",void 0),T(s,Promise.resolve(),5);case 5:if(e.dispatchEvent(n),e.h.variants.length==0)throw new D(2,4,4036);if(fv(e.h),i=Wg(e.G,e.h),!i){s.A(6);break}return r=new Z("trackschanged",void 0),T(s,Promise.resolve(),7);case 7:vr(e),e.dispatchEvent(r);case 6:a=Date.now()/1e3,o=a-t,e.X.J=o,X(s)}})}function cv(e,t){var n,i,r,a;return R(function(o){switch(o.g){case 1:return!e.h||e.j?o.return():(nf(e,"drm-engine"),e.Aa=Date.now()/1e3,e.j=e.Ta(),e.G.g=e.j,e.j.configure(e.g.drm,function(){return e.F}),n=yu(e.h.variants),i=!0,e.h&&e.h.presentationTimeline&&(i=e.h.presentationTimeline.W()),T(o,Ng(e.j,n,e.h.offlineSessionIds,i),2));case 2:if(vr(e),!t){o.A(3);break}return T(o,e.j.Vb(t),4);case 4:vr(e);case 3:return T(o,zg(e.G,e.h),5);case 5:if(r=o.h,!r){o.A(0);break}return a=new Z("trackschanged",void 0),T(o,Promise.resolve(),7);case 7:e.dispatchEvent(a),X(o)}})}f.configure=function(e,t){e=Zu(e,t),Ki(this.g,e)},f.getConfiguration=function(){return ei(this.g)};function qx(e){return R(function(t){return e.C||(e.C=e.g.adaptationSetCriteriaFactory(),e.C.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredAudioRole,videoRole:e.g.preferredVideoRole,channelCount:0,hdrLevel:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,audioLabel:e.g.preferredAudioLabel,videoLabel:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:e.g.preferredAudioCodecs,preferredAudioChannelCount:e.g.preferredAudioChannelCount})),e.i||!e.h.variants.length||e.h.variants.length!=1&&e.h.type!="HLS"?t.A(0):(e.i=rf(e),e.i?T(t,dv(e.i),0):t.A(0))})}function Kx(e){return R(function(t){return t.g==1?!e.i||e.h.variants.includes(e.i)?t.A(0):T(t,Wx(e.i),3):(e.i=rf(e),e.i?T(t,dv(e.i),0):t.A(0))})}function zx(e){var t,n,i,r,a;return R(function(o){return!e.i&&(t=rf(e))&&(e.i=t),e.i?(n=e.h.presentationTimeline.W(),i=[],r=e.i,r.video&&i.push(af(e,r.video,n)),r.audio&&i.push(af(e,r.audio,n)),(a=Ta(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&yg(r.audio,a,e.g)&&(i.push(af(e,a,n)),e.T=a),T(o,Promise.all(i),0)):o.A(0)})}function rf(e){if(!e.u){var t=e.g.abrFactory;e.u=t(),e.u.configure(e.g.abr)}return t=yu(e.h.variants),t=e.C.create(t),e.u.setVariants(Array.from(t.values())),e.u.chooseVariant(!0)}function af(e,t,n){var i,r,a,o,s;return R(function(u){return u.g==1?(i=e.g.streaming.segmentPrefetchLimit||2,r=new Gu(i,t,function(l,c,d){return Xu(l,c,d||null,e.g.streaming.retryParameters,e.Ea,e.F)},!1),e.M.set(t.id,r),t.segmentIndex?u.A(2):T(u,t.createSegmentIndex(),2)):(a=typeof e.o=="number"?e.o:0,o=t.segmentIndex.Xb(a),s=null,o&&(s=o.current(),s||(s=o.next().value)),s||(s=hi(t.segmentIndex)),s?n?s.ba?T(u,zm(r,s.ba),0):u.A(0):T(u,Jo(r,s.startTime),0):u.A(0))})}function dv(e){var t,n,i,r;return R(function(a){for(t=[],n=m([e.video,e.audio]),i=n.next();!i.done;i=n.next())(r=i.value)&&!r.segmentIndex&&t.push(r.createSegmentIndex());return t.length>0?T(a,Promise.all(t),0):a.A(0)})}function Wx(e){var t,n,i,r;return R(function(a){for(t=[],n=m([e.video,e.audio]),i=n.next();!i.done;i=n.next())(r=i.value)&&r.segmentIndex&&r.closeSegmentIndex&&t.push(r.closeSegmentIndex());return t.length>0?T(a,Promise.all(t),0):a.A(0)})}f.ul=function(){return this.B},f.destroy=function(){var e=this,t,n,i;return R(function(r){if(r.g==1)return e.l=!0,!e.m||e.oa?r.A(2):T(r,e.m.stop(),2);if(r.g!=4)return e.u&&e.u.release(),e.I&&!e.wa&&e.I.release(),!e.j||e.ha?r.A(4):T(r,e.j.destroy(),4);if(e.M.size>0&&!e.za)for(t=m(e.M.values()),n=t.next();!n.done;n=t.next())i=n.value,pi(i);X(r)})};function fv(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}Y("shaka.media.PreloadManager",Vn),Vn.prototype.destroy=Vn.prototype.destroy,Vn.prototype.waitForFinish=Vn.prototype.ul,Vn.prototype.getPrefetchedTextTrack=Vn.prototype.Vj,Vn.prototype.getPrefetchedVariantTrack=Vn.prototype.Wj;function ea(e,t){Ge.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{kd:null,jd:Ha,Uc:function(i,r){return zi(n,"enter",i,r)}},{kd:rs,jd:Ha,Uc:function(i,r){return zi(n,"enter",i,r)}},{kd:as,jd:Ha,Uc:function(i,r){return zi(n,"enter",i,r)}},{kd:Ha,jd:rs,Uc:function(i,r){return zi(n,"exit",i,r)}},{kd:Ha,jd:as,Uc:function(i,r){return zi(n,"exit",i,r)}},{kd:rs,jd:as,Uc:function(i,r){r?zi(n,"skip",i,r):(zi(n,"enter",i,r),zi(n,"exit",i,r))}},{kd:as,jd:rs,Uc:function(i,r){return zi(n,"skip",i,r)}}],this.h=new _e,this.h.D(this.i,"regionremove",function(i){n.g.delete(i.region)})}rt(ea,Ge),ea.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Ge.prototype.release.call(this)},ea.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=m(this.i.h.values()),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),a=e<i.startTime?rs:e>i.endTime?as:Ha;this.g.set(i,a);for(var o=m(this.m),s=o.next();!s.done;s=o.next())s=s.value,s.kd==r&&s.jd==a&&s.Uc(i,t)}}};function zi(e,t,n,i){t=new Z(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}for(var rs=1,Ha=2,as=3,yr={ach:"Lwo",ady:"ÐÐ´Ñ‹Ð³ÑÐ±Ð·Ñ",af:"Afrikaans","af-NA":"Afrikaans (Namibia)","af-ZA":"Afrikaans (South Africa)",ak:"TÉ•É¥i",ar:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©","ar-AR":"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©","ar-MA":"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©","ar-SA":"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©)","ay-BO":"Aymar aru",az:"AzÉ™rbaycan dili","az-AZ":"AzÉ™rbaycan dili","be-BY":"Ð‘ÐµÐ»Ð°Ñ€ÑƒÑÐºÐ°Ñ",bg:"Ð‘ÑŠÐ»Ð³Ð°Ñ€ÑÐºÐ¸","bg-BG":"Ð‘ÑŠÐ»Ð³Ð°Ñ€ÑÐºÐ¸",bn:"à¦¬à¦¾à¦‚à¦²à¦¾","bn-IN":"à¦¬à¦¾à¦‚à¦²à¦¾ (à¦­à¦¾à¦°à¦¤)","bn-BD":"à¦¬à¦¾à¦‚à¦²à¦¾(à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶)","bs-BA":"Bosanski",ca:"CatalÃ ","ca-ES":"CatalÃ ",cak:"Maya Kaqchikel","ck-US":"á£áŽ³áŽ© (tsalagi)",cs:"ÄŒeÅ¡tina","cs-CZ":"ÄŒeÅ¡tina",cy:"Cymraeg","cy-GB":"Cymraeg",da:"Dansk","da-DK":"Dansk",de:"Deutsch","de-AT":"Deutsch (Ã–sterreich)","de-DE":"Deutsch (Deutschland)","de-CH":"Deutsch (Schweiz)",dsb:"DolnoserbÅ¡Ä‡ina",el:"Î•Î»Î»Î·Î½Î¹ÎºÎ¬","el-GR":"Î•Î»Î»Î·Î½Î¹ÎºÎ¬",en:"English","en-GB":"English (UK)","en-AU":"English (Australia)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-IN":"English (India)","en-PI":"English (Pirate)","en-UD":"English (Upside Down)","en-US":"English (US)","en-ZA":"English (South Africa)","en@pirate":"English (Pirate)",eo:"Esperanto","eo-EO":"Esperanto",es:"EspaÃ±ol","es-AR":"EspaÃ±ol (Argentine)","es-419":"EspaÃ±ol (LatinoamÃ©rica)","es-CL":"EspaÃ±ol (Chile)","es-CO":"EspaÃ±ol (Colombia)","es-EC":"EspaÃ±ol (Ecuador)","es-ES":"EspaÃ±ol (EspaÃ±a)","es-LA":"EspaÃ±ol (LatinoamÃ©rica)","es-NI":"EspaÃ±ol (Nicaragua)","es-MX":"EspaÃ±ol (MÃ©xico)","es-US":"EspaÃ±ol (Estados Unidos)","es-VE":"EspaÃ±ol (Venezuela)",et:"eesti keel","et-EE":"Eesti (Estonia)",eu:"Euskara","eu-ES":"Euskara",fa:"ÙØ§Ø±Ø³ÛŒ","fa-IR":"ÙØ§Ø±Ø³ÛŒ","fb-LT":"Leet Speak",ff:"Fulah",fi:"Suomi","fi-FI":"Suomi","fo-FO":"FÃ¸royskt",fr:"FranÃ§ais","fr-CA":"FranÃ§ais (Canada)","fr-FR":"FranÃ§ais (France)","fr-BE":"FranÃ§ais (Belgique)","fr-CH":"FranÃ§ais (Suisse)","fy-NL":"Frysk",ga:"Gaeilge","ga-IE":"Gaeilge (Gaelic)",gl:"Galego","gl-ES":"Galego","gn-PY":"AvaÃ±e'áº½","gu-IN":"àª—à«àªœàª°àª¾àª¤à«€","gx-GR":"á¼™Î»Î»Î·Î½Î¹ÎºÎ® á¼€ÏÏ‡Î±Î¯Î±",he:"×¢×‘×¨×™×ªâ€","he-IL":"×¢×‘×¨×™×ªâ€",hi:"à¤¹à¤¿à¤¨à¥à¤¦à¥€","hi-IN":"à¤¹à¤¿à¤¨à¥à¤¦à¥€",hr:"Hrvatski","hr-HR":"Hrvatski",hsb:"HornjoserbÅ¡Ä‡ina",ht:"KreyÃ²l",hu:"Magyar","hu-HU":"Magyar","hy-AM":"Õ€Õ¡ÕµÕ¥Ö€Õ¥Õ¶",id:"Bahasa Indonesia","id-ID":"Bahasa Indonesia",is:"Ãslenska","is-IS":"Ãslenska (Iceland)",it:"Italiano","it-IT":"Italiano",ja:"æ—¥æœ¬èªž","ja-JP":"æ—¥æœ¬èªž","jv-ID":"Basa Jawa","ka-GE":"áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜","kk-KZ":"ÒšÐ°Ð·Ð°Ò›ÑˆÐ°",km:"áž—áž¶ážŸáž¶ážáŸ’áž˜áŸ‚ážš","km-KH":"áž—áž¶ážŸáž¶ážáŸ’áž˜áŸ‚ážš",kab:"Taqbaylit",kn:"à²•à²¨à³à²¨à²¡","kn-IN":"à²•à²¨à³à²¨à²¡ (India)",ko:"í•œêµ­ì–´","ko-KR":"í•œêµ­ì–´ (éŸ©å›½)",ku:"KurdÃ®","ku-TR":"KurdÃ®",la:"Latin","la-VA":"Latin",lb:"LÃ«tzebuergesch","li-NL":"LÃ¨mbÃ¶rgs",lt:"LietuviÅ³","lt-LT":"LietuviÅ³",lv:"LatvieÅ¡u","lv-LV":"LatvieÅ¡u",mai:"à¤®à¥ˆà¤¥à¤¿à¤²à¥€, à¦®à§ˆà¦¥à¦¿à¦²à§€","mg-MG":"Malagasy",mk:"ÐœÐ°ÐºÐµÐ´Ð¾Ð½ÑÐºÐ¸","mk-MK":"ÐœÐ°ÐºÐµÐ´Ð¾Ð½ÑÐºÐ¸ (ÐœÐ°ÐºÐµÐ´Ð¾Ð½ÑÐºÐ¸)",ml:"à´®à´²à´¯à´¾à´³à´‚","ml-IN":"à´®à´²à´¯à´¾à´³à´‚","mn-MN":"ÐœÐ¾Ð½Ð³Ð¾Ð»",mr:"à¤®à¤°à¤¾à¤ à¥€","mr-IN":"à¤®à¤°à¤¾à¤ à¥€",ms:"Bahasa Melayu","ms-MY":"Bahasa Melayu",mt:"Malti","mt-MT":"Malti",my:"á€—á€™á€¬á€…á€€á€¬",nb:"Norsk (bokmÃ¥l)","nb-NO":"Norsk (bokmÃ¥l)",ne:"à¤¨à¥‡à¤ªà¤¾à¤²à¥€","ne-NP":"à¤¨à¥‡à¤ªà¤¾à¤²à¥€",nl:"Nederlands","nl-BE":"Nederlands (BelgiÃ«)","nl-NL":"Nederlands (Nederland)","nn-NO":"Norsk (nynorsk)",no:"Norsk",oc:"Occitan","or-IN":"à¬“à¬¡à¬¼à¬¿à¬†",pa:"à¨ªà©°à¨œà¨¾à¨¬à©€","pa-IN":"à¨ªà©°à¨œà¨¾à¨¬à©€ (à¨­à¨¾à¨°à¨¤ à¨¨à©‚à©°)",pl:"Polski","pl-PL":"Polski","ps-AF":"Ù¾ÚšØªÙˆ",pt:"PortuguÃªs","pt-BR":"PortuguÃªs (Brasil)","pt-PT":"PortuguÃªs (Portugal)","qu-PE":"Qhichwa","rm-CH":"Rumantsch",ro:"RomÃ¢nÄƒ","ro-RO":"RomÃ¢nÄƒ",ru:"Ð ÑƒÑÑÐºÐ¸Ð¹","ru-RU":"Ð ÑƒÑÑÐºÐ¸Ð¹","sa-IN":"à¤¸à¤‚à¤¸à¥à¤•à¥ƒà¤¤à¤®à¥","se-NO":"DavvisÃ¡megiella","si-LK":"à¶´à·…à·à¶­",sk:"SlovenÄina","sk-SK":"SlovenÄina (Slovakia)",sl:"SlovenÅ¡Äina","sl-SI":"SlovenÅ¡Äina","so-SO":"Soomaaliga",sq:"Shqip","sq-AL":"Shqip",sr:"Ð¡Ñ€Ð¿ÑÐºÐ¸","sr-RS":"Ð¡Ñ€Ð¿ÑÐºÐ¸ (Serbia)",su:"Basa Sunda",sv:"Svenska","sv-SE":"Svenska",sw:"Kiswahili","sw-KE":"Kiswahili",ta:"à®¤à®®à®¿à®´à¯","ta-IN":"à®¤à®®à®¿à®´à¯",te:"à°¤à±†à°²à±à°—à±","te-IN":"à°¤à±†à°²à±à°—à±",tg:"Ð·Ð°Ð±Ð¾ÌÐ½Ð¸ Ñ‚Ð¾Ò·Ð¸ÐºÓ£Ì","tg-TJ":"Ñ‚Ð¾Ò·Ð¸ÐºÓ£",th:"à¸ à¸²à¸©à¸²à¹„à¸—à¸¢","th-TH":"à¸ à¸²à¸©à¸²à¹„à¸—à¸¢ (à¸›à¸£à¸°à¹€à¸—à¸¨à¹„à¸—à¸¢)",tl:"Filipino","tl-PH":"Filipino",tlh:"tlhIngan-Hol",tr:"TÃ¼rkÃ§e","tr-TR":"TÃ¼rkÃ§e","tt-RU":"Ñ‚Ð°Ñ‚Ð°Ñ€Ñ‡Ð°",uk:"Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°","uk-UA":"Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°",ur:"Ø§Ø±Ø¯Ùˆ","ur-PK":"Ø§Ø±Ø¯Ùˆ",uz:"O'zbek","uz-UZ":"O'zbek",vi:"Tiáº¿ng Viá»‡t","vi-VN":"Tiáº¿ng Viá»‡t","xh-ZA":"isiXhosa",yi:"×™×™Ö´×“×™×©","yi-DE":"×™×™Ö´×“×™×© (German)",zh:"ä¸­æ–‡","zh-HANS":"ä¸­æ–‡ç®€ä½“","zh-HANT":"ä¸­æ–‡ç¹é«”","zh-CN":"ä¸­æ–‡ï¼ˆä¸­å›½ï¼‰","zh-HK":"ä¸­æ–‡ï¼ˆé¦™æ¸¯ï¼‰","zh-SG":"ä¸­æ–‡ï¼ˆæ–°åŠ å¡ï¼‰","zh-TW":"ä¸­æ–‡ï¼ˆå°ç£ï¼‰","zu-ZA":"isiZulu"},hv=m(Object.keys(yr)),of=hv.next();!of.done;of=hv.next()){var pv=of.value;yr[pv.toLowerCase()]=yr[pv]}function gv(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(o){return gv(o,e)}).join("");if(!e.payload)return e.payload;var n=[],i=e.fontWeight>=ya,r=e.fontStyle==ba,a=e.textDecoration.includes(Oi);return i&&n.push(["b"]),r&&n.push(["i"]),a&&n.push(["u"]),r=e.color,r==""&&t&&(r=t.color),i="",(r=mv(r))&&(i+="."+r),r=e.backgroundColor,r==""&&t&&(r=t.backgroundColor),(t=mv(r))&&(i+=".bg_"+t),i&&n.push(["c",i]),n.reduceRight(function(o,s){var u=m(s);return s=u.next().value,u=u.next().value,"<"+s+(u===void 0?"":u)+">"+o+"</"+s+">"},e.payload)}function mv(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&e.length>7&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function sf(e,t){var n=[];e=m(vv(e));for(var i=e.next();!i.done;i=e.next())if(i=i.value,i.isContainer)n.push.apply(n,z(sf(i.nestedCues,i)));else{var r=i.clone();r.nestedCues=[],r.payload=gv(i,t),n.push(r)}return n}function vv(e){var t=[];e=m(e);for(var n=e.next(),i={};!n.done;i={mg:void 0},n=e.next())i.mg=n.value,t.some(function(r){return function(a){return su(r.mg,a)}}(i))||t.push(i.mg);return t}function Xx(e){function t(i){for(var r=5381,a=i.length;a;)r=r*33^i.charCodeAt(--a);return(r>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function yv(e,t){var n=sf(t),i=[];t=e.cues?Array.from(e.cues):[],n=m(n);for(var r=n.next(),a={};!r.done;a={wd:void 0},r=n.next())a.wd=r.value,!t.some(function(o){return function(s){return s.startTime==o.wd.startTime&&s.endTime==o.wd.endTime&&s.text==o.wd.payload}}(a))&&a.wd.payload&&(r=Xx(a.wd))&&i.push(r);for(t=i.slice().sort(function(o,s){return o.startTime!=s.startTime?o.startTime-s.startTime:o.endTime!=s.endTime?o.endTime-s.startTime:"line"in VTTCue.prototype?i.indexOf(s)-i.indexOf(o):i.indexOf(o)-i.indexOf(s)}),t=m(t),n=t.next();!n.done;n=t.next())e.addCue(n.value)}function uf(e,t){var n=!1;e.mode==="disabled"&&(n=!0,e.mode="hidden");for(var i=0;i<e.cues.length;){var r=e.cues[i];t(r)?e.removeCue(r):i++}n&&(e.mode="disabled")}function Tt(e){var t=this;this.i=e,this.l=new _e,this.j=null,this.h=new Map,this.g=-1,this.u=!1,this.o=null,this.C=function(){t.l.Ma(t.i,"textchanged",t.m),t.l.Ma(t.j.textTracks,"change",t.B);for(var n=m(t.h.values()),i=n.next();!i.done;i=n.next())i.value.remove();t.h.clear(),t.g=-1,t.j=null},this.m=function(){var n=new Map,i=t.i.Lc();i=m(i);for(var r=i.next();!r.done;r=i.next()){if(r=r.value,t.h.has(r.id)){var a=t.h.get(r.id);r.active||a.track.mode==="disabled"||(a.track.mode="disabled"),t.h.delete(r.id)}else{a=t.j.ownerDocument.createElement("track"),a.kind=Yx(r);var o=a,s=void 0;if(r.label)s=r.label;else if(r.language)if(r.language in yr)s=yr[r.language];else{var u=hu(r.language);u in yr&&(s=yr[u]+" ("+r.language+")")}s||(s=r.originalTextId,r.language&&r.language!==r.originalTextId&&(s+=" ("+r.language+")")),o.label=s,r.language in yr&&(a.srclang=r.language),a.src="data:,WEBVTT",a.track.mode="disabled",t.j.appendChild(a)}n.set(r.id,a),r.active&&(t.g=r.id)}for(i=m(t.h.values()),r=i.next();!r.done;r=i.next())r.value.remove();t.g>-1&&(n.has(t.g)?(i=n.get(t.g).track,i.mode==="disabled"&&(i.mode=t.u?"showing":"hidden")):t.g=-1),t.h=n},this.B=function(){if(!t.o){var n=t.j;t.o=new Ae(function(){if(t.o=null,t.j===n){var i=-1,r=!1;if(t.h.has(t.g)){var a=t.h.get(t.g);a.track.mode==="showing"?(i=t.g,r=!0):a.track.mode==="hidden"&&(i=t.g)}if(!r)for(r=m(t.h),a=r.next();!a.done;a=r.next()){var o=m(a.value);if(a=o.next().value,o=o.next().value,o.track.mode==="showing"){i=a;break}else i<0&&o.track.mode==="hidden"&&(i=a)}for(r=m(t.h),a=r.next();!a.done;a=r.next())o=m(a.value),a=o.next().value,o=o.next().value,a!==i&&o.track.mode!=="disabled"&&(o.track.mode="disabled");t.g!==i&&(t.g=i,i>-1&&t.i.qh({id:i})),t.i.xh(i>-1&&t.h.get(i).track.mode==="showing")}}).ka(0)}},this.l.D(e,"loaded",function(){return t.enableTextDisplayer()}),this.enableTextDisplayer()}f=Tt.prototype,f.configure=function(){},f.remove=function(e,t){if(this.i)this.h.has(this.g)&&uf(this.h.get(this.g).track,function(n){return n.startTime<t&&n.endTime>e});else return!1;return!0},f.append=function(e){this.h.has(this.g)&&yv(this.h.get(this.g).track,e)},f.destroy=function(){return this.i&&(this.j&&this.C(),this.i=null),this.l&&(this.l.release(),this.l=null),Promise.resolve()},f.isTextVisible=function(){return this.u},f.setTextVisibility=function(e){if(this.u=e,this.h.has(this.g)){var t=this.h.get(this.g).track;t.mode!=="disabled"&&(e=e?"showing":"hidden",t.mode!==e&&(t.mode=e))}else if(this.i&&this.i.ae()===3)if(t=Array.from(this.i.bf().textTracks).filter(function(i){return["captions","subtitles","forced"].includes(i.kind)}),e){e=null,t=m(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.mode==="showing"){e=null;break}else e||n.mode!=="hidden"||(e=n);e&&(e.mode="showing")}else for(e=m(t),t=e.next();!t.done;t=e.next())t=t.value,t.mode==="showing"&&(t.mode="hidden")},f.setTextLanguage=function(){},f.enableTextDisplayer=function(){!this.j&&this.i&&this.i.ae()===2&&(this.j=this.i.bf(),this.l.ya(this.i,"unloading",this.C),this.l.D(this.i,"textchanged",this.m),this.l.D(this.j.textTracks,"change",this.B),this.m())};function Yx(e){var t=Te();return e.forced&&t.Ga()==="WEBKIT"?"forced":e.kind==="caption"||e.roles&&e.roles.some(function(n){return n.includes("transcribes-spoken-dialog")})&&e.roles.some(function(n){return n.includes("describes-music-and-sound")})?"captions":"subtitles"}Y("shaka.text.NativeTextDisplayer",Tt),Tt.prototype.enableTextDisplayer=Tt.prototype.enableTextDisplayer,Tt.prototype.setTextLanguage=Tt.prototype.setTextLanguage,Tt.prototype.setTextVisibility=Tt.prototype.setTextVisibility,Tt.prototype.isTextVisible=Tt.prototype.isTextVisible,Tt.prototype.destroy=Tt.prototype.destroy,Tt.prototype.append=Tt.prototype.append,Tt.prototype.remove=Tt.prototype.remove,Tt.prototype.configure=Tt.prototype.configure;function qt(e,t){for(Ce("SimpleTextDisplayer","Please migrate to NativeTextDisplayer"),this.h=e,this.i=t,this.g=null,e=m(Array.from(this.h.textTracks)),t=e.next();!t.done;t=e.next())t=t.value,t.kind!=="metadata"&&t.kind!=="chapters"&&(t.mode="disabled",t.label==this.i&&(this.g=t));this.g&&(this.g.mode="hidden")}f=qt.prototype,f.configure=function(){},f.remove=function(e,t){return this.g?(uf(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},f.append=function(e){this.g&&yv(this.g,e)},f.destroy=function(){return this.g&&(uf(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},f.isTextVisible=function(){return this.g?this.g.mode=="showing":!1},f.setTextVisibility=function(e){e&&!this.g&&bv(this),this.g&&(this.g.mode=e?"showing":"hidden")},f.setTextLanguage=function(){},f.enableTextDisplayer=function(){bv(this)};function bv(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}Y("shaka.text.SimpleTextDisplayer",qt),qt.prototype.enableTextDisplayer=qt.prototype.enableTextDisplayer,qt.prototype.setTextLanguage=qt.prototype.setTextLanguage,qt.prototype.setTextVisibility=qt.prototype.setTextVisibility,qt.prototype.isTextVisible=qt.prototype.isTextVisible,qt.prototype.destroy=qt.prototype.destroy,qt.prototype.append=qt.prototype.append,qt.prototype.remove=qt.prototype.remove,qt.prototype.configure=qt.prototype.configure;function Kt(){}f=Kt.prototype,f.configure=function(){},f.remove=function(){},f.append=function(){},f.destroy=function(){},f.isTextVisible=function(){return!1},f.setTextVisibility=function(){},f.setTextLanguage=function(){},f.enableTextDisplayer=function(){},Y("shaka.text.StubTextDisplayer",Kt),Kt.prototype.enableTextDisplayer=Kt.prototype.enableTextDisplayer,Kt.prototype.setTextLanguage=Kt.prototype.setTextLanguage,Kt.prototype.setTextVisibility=Kt.prototype.setTextVisibility,Kt.prototype.isTextVisible=Kt.prototype.isTextVisible,Kt.prototype.destroy=Kt.prototype.destroy,Kt.prototype.append=Kt.prototype.append,Kt.prototype.remove=Kt.prototype.remove,Kt.prototype.configure=Kt.prototype.configure;function zt(e,t){var n=this;this.m=!1,this.h=[],this.j=e,this.o=t,this.C=this.u=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.B=new Ae(function(){n.j.paused||br(n)}),os(this),this.l=new Map,this.i=new _e,this.i.D(document,"fullscreenchange",function(){br(n,!0)}),this.i.D(this.j,"seeking",function(){br(n,!0)}),this.i.D(this.j,"ratechange",function(){os(n)}),this.i.D(this.j,"resize",function(){var i=n.j,r=i.videoWidth;i=i.videoHeight,r&&i?n.u=r/i:n.u=null}),this.F=null,"ResizeObserver"in P&&(this.F=new ResizeObserver(function(){br(n,!0)}),this.F.observe(this.g)),this.G=new Map}f=zt.prototype,f.configure=function(e){this.C=e,os(this),br(this,!0)},f.append=function(e){var t=[].concat(z(this.h));e=m(vv(e));for(var n=e.next(),i={};!n.done;i={ng:void 0},n=e.next())i.ng=n.value,t.some(function(r){return function(a){return su(a,r.ng)}}(i))||this.h.push(i.ng);this.h.length&&os(this),br(this)},f.destroy=function(){return this.g&&(this.g.parentElement&&this.o.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.B&&(this.B.stop(),this.B=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.F&&(this.F.disconnect(),this.F=null)),Promise.resolve()},f.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(i){return i.startTime<e||i.endTime>=t}),br(this,n>this.h.length),this.h.length||os(this),!0},f.isTextVisible=function(){return this.m},f.setTextVisibility=function(e){(this.m=e)?(this.g.parentElement||this.o.appendChild(this.g),br(this,!0)):this.g.parentElement&&this.o.removeChild(this.g)},f.setTextLanguage=function(e){e&&e!="und"?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},f.enableTextDisplayer=function(){};function os(e){e.B&&(e.h.length?e.B.Da((e.C?e.C.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.B.stop())}function Jx(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function wv(e,t,n,i,r){var a=!1,o=[],s=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value,r.push(u);var l=e.l.get(u),c=u.startTime<=i&&u.endTime>i,d=l?l.oj:null;l&&(o.push(l.og),l.$c&&o.push(l.$c),c||(a=!0,e.l.delete(u),l=null)),c&&(s.push(u),l?Jx(e,d)||(a=!0):($x(e,u,r),l=e.l.get(u),d=l.oj,a=!0)),u.nestedCues.length>0&&d&&wv(e,u.nestedCues,d,i,r),r.pop()}if(a){for(i=m(o),r=i.next();!r.done;r=i.next())r=r.value,r.parentElement&&r.parentElement.removeChild(r);for(s.sort(function(h,p){return h.startTime!=p.startTime?h.startTime-p.startTime:h.endTime-p.endTime}),s=m(s),i=s.next();!i.done;i=s.next())i=e.l.get(i.value),i.$c?(i.$c.contains(n)&&i.$c.removeChild(n),n.appendChild(i.$c),i.$c.appendChild(i.og)):n.appendChild(i.og)}}function br(e,t){if(e.g){var n=e.j.currentTime;if(!e.m||t!==void 0&&t){t=m(e.G.values());for(var i=t.next();!i.done;i=t.next())qo(i.value);qo(e.g),e.l.clear(),e.G.clear()}e.m&&wv(e,e.h,e.g,n,[])}}function $x(e,t,n){var i=n.length>1,r=i?"span":"div";t.lineBreak&&(r="br"),t.rubyTag&&(r=t.rubyTag),i=!i&&t.nestedCues.length>0;var a=document.createElement(r);if(r!="br"&&Zx(e,a,t,n,i),n=null,t.region&&t.region.id){var o=t.region,s=e.u===4/3?2.5:1.9;if(n=o.id+"_"+o.width+"x"+o.height+(o.heightUnits==vn?"%":"px")+"-"+o.viewportAnchorX+"x"+o.viewportAnchorY+(o.viewportAnchorUnits==vn?"%":"px"),e.G.has(n))n=e.G.get(n);else{r=document.createElement("span");var u=o.heightUnits==vn?"%":"px",l=o.widthUnits==vn?"%":"px",c=o.viewportAnchorUnits==vn?"%":"px";r.id="shaka-text-region---"+n,r.classList.add("shaka-text-region"),r.style.position="absolute";var d=o.height,h=o.width;o.heightUnits===2&&(d=o.height*5.33,u="%"),o.widthUnits===2&&(h=o.width*s,l="%"),r.style.height=d+u,r.style.width=h+l,o.viewportAnchorUnits===2?(s=o.viewportAnchorY/75*100,u=o.viewportAnchorX/(e.u===4/3?160:210)*100,s-=o.regionAnchorY*d/100,u-=o.regionAnchorX*h/100,r.style.top=s+"%",r.style.left=u+"%"):(r.style.top=o.viewportAnchorY-o.regionAnchorY*d/100+c,r.style.left=o.viewportAnchorX-o.regionAnchorX*h/100+c),o.heightUnits!==0&&o.widthUnits!==0&&o.viewportAnchorUnits!==0&&(o=Math.max(0,Math.min(100-(parseInt(r.style.width.slice(0,-1),10)||0),parseInt(r.style.left.slice(0,-1),10)||0)),r.style.top=Math.max(0,Math.min(100-(parseInt(r.style.height.slice(0,-1),10)||0),parseInt(r.style.top.slice(0,-1),10)||0))+"%",r.style.left=o+"%"),r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.G.set(n,r),n=r}}r=a,i&&(r=document.createElement("span"),r.classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,r.style.lineHeight="normal",a.appendChild(r)),e.l.set(t,{og:a,oj:r,$c:n})}function Qx(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==lu?n:e==="left"||e==="start"&&t===Io||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===Io?"line-right":"center"}function Zx(e,t,n,i,r){var a=t.style,o=n.nestedCues.length==0,s=i.length>1;a.whiteSpace="pre-wrap";var u=n.payload.replace(/\s+$/g,function(c){return"Â ".repeat(c.length)});if(a.webkitTextStrokeColor=n.textStrokeColor,a.webkitTextStrokeWidth=n.textStrokeWidth,a.color=n.color,a.direction=n.direction,a.opacity=n.opacity,a.paddingLeft=lf(n.linePadding,n,e.o),a.paddingRight=lf(n.linePadding,n,e.o),a.textCombineUpright=n.textCombineUpright,a.textShadow=n.textShadow,n.backgroundImage)a.backgroundImage="url('"+n.backgroundImage+"')",a.backgroundRepeat="no-repeat",a.backgroundSize="contain",a.backgroundPosition="center",n.backgroundColor&&(a.backgroundColor=n.backgroundColor),a.width="100%",a.height="100%";else{if(n.nestedCues.length)var l=t;else l=document.createElement("span"),t.appendChild(l);n.border&&(l.style.border=n.border),r||((t=eA(i,function(c){return c.backgroundColor}))?l.style.backgroundColor=t:u&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)")),u&&(l.setAttribute("translate","no"),l.textContent=u)}s&&!i[i.length-1].isContainer?a.display="inline":(a.display="flex",a.flexDirection="column",a.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(a.width="100%",a.alignItems="flex-start"):(n.textAlign=="right"||n.textAlign=="end")&&(a.width="100%",a.alignItems="flex-end"),a.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),o||(a.margin="0"),a.fontFamily=n.fontFamily,a.fontWeight=n.fontWeight.toString(),a.fontStyle=n.fontStyle,a.letterSpacing=n.letterSpacing,i=e.C?e.C.fontScaleFactor:1,(i!==1||n.fontSize)&&(a.fontSize=lf(n.fontSize||"1em",n,e.o,i)),i=n.line,i!=null&&(o=n.lineInterpretation,o==Eo&&(o=1,s=16,e.u&&e.u<1&&(s=32),i=i<0?100+i/s*100:i/s*100),o==1&&(a.position="absolute",n.writingMode==Vr?(a.width="100%",n.lineAlign==Hr?a.top=i+"%":n.lineAlign=="end"&&(a.bottom=100-i+"%")):n.writingMode=="vertical-lr"?(a.height="100%",n.lineAlign==Hr?a.left=i+"%":n.lineAlign=="end"&&(a.right=100-i+"%")):(a.height="100%",n.lineAlign==Hr?a.right=i+"%":n.lineAlign=="end"&&(a.left=100-i+"%")))),a.lineHeight=n.lineHeight,e=Qx(n),e=="line-left"?(a.cssFloat="left",n.position!==null&&(a.position="absolute",n.writingMode==Vr?(a.left=n.position+"%",a.width="auto"):a.top=n.position+"%")):e=="line-right"?(a.cssFloat="right",n.position!==null&&(a.position="absolute",n.writingMode==Vr?(a.right=100-n.position+"%",a.width="auto"):a.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(a.position="absolute",n.writingMode==Vr?(a.left=n.position+"%",a.width="auto"):a.top=n.position+"%",n.size&&(a.transform="translateX(-50%)")),a.textAlign=n.textAlign,a.textDecoration=n.textDecoration.join(" "),a.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&a.writingMode==n.writingMode||(a.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Vr?a.width=n.size+"%":a.height=n.size+"%")}function lf(e,t,n,i){i=i===void 0?1:i;var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;switch(e=r.unit,i*=r.value,e){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return i+e}}function eA(e,t){for(var n=e.length-1;n>=0;n--){var i=t(e[n]);if(i||i===0)return i}return null}Y("shaka.text.UITextDisplayer",zt),zt.prototype.enableTextDisplayer=zt.prototype.enableTextDisplayer,zt.prototype.setTextLanguage=zt.prototype.setTextLanguage,zt.prototype.setTextVisibility=zt.prototype.setTextVisibility,zt.prototype.isTextVisible=zt.prototype.isTextVisible,zt.prototype.remove=zt.prototype.remove,zt.prototype.destroy=zt.prototype.destroy,zt.prototype.append=zt.prototype.append,zt.prototype.configure=zt.prototype.configure;function tA(e,t){function n(a){for(var o=a,s=m(t),u=s.next();!u.done;u=s.next())u=u.value,u.end&&u.start<a&&(o+=u.end-u.start);return a=Math.floor(o/3600),s=Math.floor(o/60%60),u=Math.floor(o%60),o=Math.floor(o*1e3%1e3),(a<10?"0":"")+a+":"+(s<10?"0":"")+s+":"+(u<10?"0":"")+u+"."+(o<100?o<10?"00":"0":"")+o}var i=sf(e);e=`WEBVTT

`,i=m(i);for(var r=i.next();!r.done;r=i.next())r=r.value,e+=n(r.startTime)+" --> "+n(r.endTime)+function(a){var o=[];switch(a.textAlign){case"left":o.push("align:left");break;case"right":o.push("align:right");break;case Si:o.push("align:middle");break;case"start":o.push("align:start");break;case"end":o.push("align:end")}switch(a.writingMode){case"vertical-lr":o.push("vertical:lr");break;case"vertical-rl":o.push("vertical:rl")}return o.length?" "+o.join(" "):""}(r)+`
`,e+=r.payload+`

`;return e}Y("shaka.text.WebVttGenerator",function(){});function cf(e,t){this.g=t,this.j=e,this.m=new Map,this.l=void 0,this.F=!1,this.J=!0,this.u=this.I=!1,this.C=this.B=void 0,this.H=0,this.K={request:!1,response:!1,event:!1},this.o={},this.i=new _e,this.G=[],this.h=null}cf.prototype.setMediaElement=function(e){this.h=e,oA(this)},cf.prototype.configure=function(e){this.g=e,sA(this)};function nA(e){e.m.clear(),e.F=!1,e.J=!0,e.I=!1,e.u=!1,e.B=0,e.C=0,e.H=0,e.K={request:!1,response:!1,event:!1},Sv(e),e.o={},e.h=null,e.i.Qa()}function iA(e,t){e.u=t,e.u?e.l==dl?e.l=fl:e.l==hl&&(e.l=pl):e.l==fl?e.l=dl:e.l==pl&&(e.l=hl)}function rA(e,t){if(e.g&&e.g.enabled&&(Wt(e,"ps",{dd:"d"}),e.h&&e.h.autoplay)){var n=e.h.play();n&&n.then(function(){e.H=t}).catch(function(){e.H=0})}}function aA(e,t,n){try{if(!e.g.enabled)return t;var i=ff(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var r=sl;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":r=ll;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":r=Mv;break e}r=void 0}i.ot=r,i.su=!0;var a=ss(i);return ol(t,a)}catch(o){return nr("CMCD_SRC_ERROR","Could not generate src CMCD data.",o),t}}function oA(e){e.i.D(e.h,"playing",function(){e.C||(e.C=Date.now()),Wt(e,"ps",{dd:"p"})}),e.i.D(e.h,"volumechange",function(){Wt(e,e.h.muted?"m":"um")}),e.i.D(e.h,"play",function(){e.B||(e.B=Date.now(),Wt(e,"ps",{dd:"s"}))}),e.i.D(e.h,"pause",function(){Wt(e,"ps",{dd:"a"})}),e.i.D(e.j,"buffering",function(){Wt(e,"ps",{dd:"w"})}),e.i.D(e.h,"seeking",function(){return Wt(e,"ps",{dd:"k"})}),e.i.D(document,"fullscreenchange",function(){Wt(e,document.fullscreenElement?"pe":"pc")});var t=e.h;(t.webkitPresentationMode||t.webkitSupportsFullscreen)&&e.i.D(t,"webkitpresentationmodechanged",function(){t.webkitPresentationMode?Wt(e,t.webkitPresentationMode!=="inline"?"pe":"pc"):t.webkitSupportsFullscreen&&Wt(e,t.webkitDisplayingFullscreen?"pe":"pc")}),e.i.D(e.h,"enterpictureinpicture",function(){Wt(e,"pe")}),e.i.D(e.h,"leavepictureinpicture",function(){Wt(e,"pc")}),"documentPictureInPicture"in P&&e.i.D(P.documentPictureInPicture,"enter",function(n){Wt(e,"pe"),e.i.ya(n.window,"pagehide",function(){Wt(e,"pc")})}),e.i.D(document,"visibilitychange",function(){document.hidden?Wt(e,"b",{bg:!0}):Wt(e,"b")}),e.i.D(e.j,"complete",function(){Wt(e,"ps",{dd:"e"})})}function sA(e){Sv(e);var t=Tv(e);t=m(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value.timeInterval,n===void 0&&(n=wA),n>=1){var i=new Ae(function(){return Wt(e,SA)});i.Da(n),e.G.push(i)}}function Sv(e){if(e.G)for(var t=m(e.G),n=t.next();!n.done;n=t.next())n.value.stop();e.G=[]}function Tv(e){return(e=e.g.targets)?e.filter(function(t){return t.mode===Lv&&t.enabled}):[]}function df(e){return(e=e.g.targets)?e.filter(function(t){return t.mode===Dv&&t.enabled===!0}):[]}function ff(e){return e.g.sessionId||(e.g.sessionId=P.crypto.randomUUID()),{v:e.g.version,sf:e.l,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.j.getBandwidthEstimate()/1e3}}function Wt(e,t,n){if(n=n===void 0?{}:n,t=Object.assign({e:t,ts:Date.now()},n),t=gf(e,t,Lv),n=e.g.targets,!(e.g.version<vf)&&n){var i=Tv(e);n=Array.from(new Set([].concat(z(yf),z(vA)))),i=m(i);for(var r=i.next();!r.done;r=i.next()){r=r.value;var a=hf(r.includeKeys||[],n);a.includes(Pv)||a.push(Pv),a=pf(t,a);var o=r.events||[],s=a.e,u=a.sta;s&&(!yA.includes(s)||!(s!=="ps"||u&&bA.includes(u))||o&&o.length>0&&!o.includes(s))||xv(e,a,r)}}}function Ga(e,t,n){if(e.g.enabled){n=gf(e,n,Rv);var i=Av({mode:Rv,useHeaders:e.g.useHeaders,includeKeys:e.g.includeKeys||[]});e.o[i]||(e.o[i]={request:1,response:1}),n.sn=e.o[i].request++,i=e.g.includeKeys||[];var r=e.g.version==vf?Array.from(new Set([].concat(z(yf),z(gA)))):Cv;i=hf(i,r),n=pf(n,i),uA(e,n,t,e.g.useHeaders)}}function xv(e,t,n,i){var r=ni(),a=n.url;if(n.useHeaders){if(t=Ev(t),!Object.keys(t).length)return;i&&Object.assign(i.headers,t),i=yt([a],r),Object.assign(i.headers,t)}else{if(t=ss(t),!t)return;a=ol(a,t),i&&(i.uri=a),i=yt([a],r)}e.j.Yb().request(9,i)}function uA(e,t,n,i){if(i){if(t=Ev(t),!Object.keys(t).length)return;Object.assign(n.headers,t)}else{var r=ss(t);if(!r)return;n.uris=n.uris.map(function(a){return ol(a,r)})}df(e).length>0||!e.m.has(n)||e.m.delete(n)}function hf(e,t){if(!e||e.length===0)return t;for(var n=m(e),i=n.next();!i.done;i=n.next())t.includes(i.value);return e=e.filter(function(r){return t.includes(r)})}function pf(e,t){return Object.keys(e).reduce(function(n,i){return t.includes(i)&&(n[i]=e[i]),n},{})}function lA(e){if(e.type===0)return fA;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?ll:ul;if(t=="audio")return sl;if(t=="text")return e.mimeType==="application/mp4"?cl:mf}}function Av(e){var t=Object.keys(e).sort().reduce(function(n,i){return i!=="enabled"&&(n[i]=e[i]),n},{});return JSON.stringify(t)}function cA(e,t){if(t=e.j.Hc()[t],!t.length)return NaN;var n=e.h?e.h.currentTime:0;return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?(e.end-n)*1e3:NaN}function kv(e,t){if(t=e.j.Hc()[t],!t.length)return 0;var n=e.h?e.h.currentTime:0;return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?(e.end-n)*1e3:0}function dA(e,t){var n=e.j.sc();if(!n.length)return NaN;e=n[0],n=m(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.type==="variant"&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case ul:return e.videoBandwidth||NaN;case sl:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Iv(e,t,n){var i=t.segment,r=0;i&&(r=i.endTime-i.startTime),r={d:r*1e3,st:e.j.W()?pA:hA},r.ot=lA(t);var a=r.ot===ul||r.ot===sl||r.ot===ll||r.ot===cl;if(t=t.stream){var o=e.j.Ob();if(a&&(r.bl=cA(e,t.type),r.ot!==cl)){var s=kv(e,t.type);r.dl=o?s/Math.abs(o):s}if(t.bandwidth&&(r.br=t.bandwidth/1e3),t.segmentIndex&&i){if((o=t.segmentIndex.Xb(i.endTime,!0,o<0))&&(o=o.next().value)&&o!=i){if(n&&!ir(i.P(),o.P())){var u=o.P()[0];s=new URL(u);var l=new URL(n);if(s.origin!==l.origin)n=u;else{n=s.pathname.split("/").slice(1),u=l.pathname.split("/").slice(1,-1),l=Math.min(n.length,u.length);for(var c=0;c<l&&n[c]===u[c];c++)n.shift(),u.shift();for(;u.length;)u.shift(),n.unshift("..");n=n.join("/")+s.search+s.hash}r.nor=n}!o.startByte&&!o.endByte||i.startByte==o.startByte&&i.endByte==o.endByte||(n=o.startByte+"-",o.endByte&&(n+=o.endByte),r.nrr=n)}o=e.j.Ob()||1,n=kv(e,t.type)||500,i=(t=t.bandwidth)?t*(i.endTime-i.startTime)/1e3/(n/o/1e3)*e.g.rtpSafetyFactor:NaN,isNaN(i)||(r.rtp=i)}}return a&&r.ot!==cl&&(r.tb=dA(e,r.ot)/1e3),r}function gf(e,t,n){Object.assign(t,ff(e)),t.pr=e.j.Ob();var i=t.ot===ul||t.ot===ll;return e.I&&i&&(t.bs=!0,t.su=!0,e.I=!1),t.su==null&&(t.su=e.J),e.j.W()&&(i=ey(e.j),t.ltc=i||void 0),document.hidden&&(t.bg=!0),i=e.C&&e.B?e.C-(e.H||e.B):void 0,i==null||e.K[n]||(t.msd=i,e.K[n]=!0),t}function ss(e){function t(d){return n(d/100)*100}function n(d){return Math.round(d)}function i(d){return!Number.isNaN(d)&&d!=null&&d!==""&&d!==!1}var r=[],a={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(d){return encodeURIComponent(d)},rtp:t,tb:n,ttfb:n,ttlb:n},o=Object.keys(e||{}).sort();o=m(o);for(var s=o.next();!s.done;s=o.next()){s=s.value;var u=e[s];if(i(u)&&(s!=="v"||u!==1)&&(s!="pr"||u!==1)){var l=a[s];l&&(u=l(u)),l=typeof u;var c=void 0;c=l==="string"&&s!=="ot"&&s!=="sf"&&s!=="st"?s+"="+JSON.stringify(u):l==="boolean"?s:l==="symbol"?s+"="+u.description:s+"="+u,r.push(c)}}return r.join(",")}function Ev(e){var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,url:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,ttfb:1,ttlb:1,ts:1,rc:1,cmsdd:1,cmsds:1,sn:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3,bg:3};t=m(t);for(var o=t.next();!o.done;o=t.next())o=o.value,r[a[o]!=null?a[o]:1][o]=e[o];for(e=0;e<r.length;e++)(a=ss(r[e]))&&(n["CMCD-"+i[e]]=a);return n}function ol(e,t){return!t||e.includes("offline:")?e:(e=new ht(e),e.g.set("CMCD",t),e.toString())}var Mv="m",sl="a",ul="v",ll="av",fA="i",mf="c",cl="tt",vf=2,hA="v",pA="l",dl="d",fl="ld",hl="h",pl="lh";Y("shaka.util.CmcdManager.StreamingFormat",{DASH:dl,Tl:fl,HLS:hl,Ul:pl,jm:"s",OTHER:"o"});var Cv="br bl bs cid d dl mtp nor nrr ot pr rtp sf sid st su tb v".split(" "),yf="br ab bl tbl bs cdn cid ltc mtp pr sf sid bg sta st ts tpb tb lb tab lab pt ec msd v sn".split(" "),gA="ab bl tbl bs cdn cid d dl ltc mtp nor ot pr rtp sf sid bg sta st su ts tpb tb lb tab lab pt ec msd v".split(" "),mA="d dl nor ot rtp rc su ttfb ttfbb ttlb url cmsdd cmsds".split(" "),vA=["e","sta"],yA="ps e t c b m um pe pc".split(" "),bA="spawkrfeqd".split(""),wA=10,Pv="ts",SA="t",Rv="request",Dv="response",Lv="event";function Hn(e){this.h=e,this.g=null}f=Hn.prototype,f.configure=function(e){this.h=e},f.ki=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(_v)?this.g.get(_v)*1e3:null},f.ii=function(){return this.h.enabled&&this.g&&this.g.has(Ov)?this.g.get(Ov)*1e3:null},f.Yj=function(){return this.h.enabled&&this.g&&this.g.has(jv)?this.g.get(jv):null},f.Zj=function(){return this.h.enabled&&this.g&&this.g.has(Uv)?this.g.get(Uv):null},f.getBandwidthEstimate=function(e){var t=this.ii();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return n>0&&n<=1?e*(1-n)+t*n:e};function Nv(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}Y("shaka.util.CmsdManager",Hn),Hn.prototype.getBandwidthEstimate=Hn.prototype.getBandwidthEstimate,Hn.prototype.getRoundTripTime=Hn.prototype.Zj,Hn.prototype.getResponseDelay=Hn.prototype.Yj,Hn.prototype.getEstimatedThroughput=Hn.prototype.ii,Hn.prototype.getMaxBitrate=Hn.prototype.ki;var Ov="etp",_v="mb",jv="rd",Uv="rtt";function Bv(){this.g=null,this.h=[]}function bf(e,t){return R(function(n){if(n.g==1)return e.g?T(n,new Promise(function(i){return e.h.push(i)}),2):n.A(2);e.g=t,X(n)})}Bv.prototype.release=function(){this.h.length>0?this.h.shift()():this.g=null};function wf(e,t,n){return n=n===void 0?Number.EPSILON:n,e===t?!0:(e=Math.abs(e-t),e<=n?!0:n!==Number.EPSILON?Math.abs(e-n)<=Number.EPSILON:!1)}function V(e,t,n){t=t===void 0?null:t,Ge.call(this);var i=this;this.m=Sl,this.h=null,this.Be=t,this.aa=!1,this.Le=new _e,this.Ce=new _e,this.j=new _e,this.fc=new _e,this.Hd=new _e,this.G=this.H=this.F=this.N=null,this.Me=0,this.ha=new Bv,this.O=this.Ja=this.X=this.i=this.Ac=this.I=this.l=this.ye=this.T=this.Qh=this.wa=this.K=this.sb=this.Aa=this.Ae=this.R=this.Ta=this.M=this.cc=null,this.Ua=!1,this.Ge=this.o=null,this.Fe=1e9,this.Ke=[],this.zc=new Map,this.yb=[],this.ag=-1,this.g=gi(this),this.dg=ov(),this.V=null,this.Ne=-1,this.ec=null,this.za={width:1/0,height:1/0},this.Ee=new gd(this.g,this.za,null),this.Ie=[],this.B=null,this.J=this.g.adaptationSetCriteriaFactory(),this.J.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredAudioRole,videoRole:this.g.preferredVideoRole,channelCount:0,hdrLevel:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,audioLabel:this.g.preferredAudioLabel,videoLabel:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:this.g.preferredAudioCodecs,preferredAudioChannelCount:this.g.preferredAudioChannelCount}),this.Ld=this.g.preferredTextLanguage,this.Pd=this.g.preferredTextRole,this.Od=this.g.preferForcedSubs,this.De=[],n&&n(this),this.K=new cf(this,this.g.cmcd),this.wa=new Hn(this.g.cmsd),this.N=zv(this),this.ma=this.oa=this.Ea=this.C=null,this.fg=!1,this.cg=[],this.eg=new Ae(function(){return R(function(r){if(r.g==1)return i.oa?T(r,i.Vb(i.ma,!0),3):r.A(0);if(r.g!=4)return T(r,i.load(i.oa),4);i.fg?i.ma.pause():i.ma.play(),i.oa=null,i.fg=!1,X(r)})}),Tl&&(this.C=Tl(),this.C.configure(this.g.ads),this.Hd.D(this.C,"ad-content-pause-requested",function(r){var a,o;return R(function(s){if(s.g==1)return i.eg.stop(),i.oa?s.A(0):(i.ma=i.h,i.fg=i.ge(),a=r.saveLivePosition||!1,o=!0,i.W()&&(o=a),T(s,i.ai(!0,o),3));i.oa=s.h,X(s)})}),this.Hd.D(this.C,"ad-content-resume-requested",function(r){if(r=r.offset||0,i.oa){var a=i.oa;a.o&&r&&(typeof a.o=="number"?a.o+=r:a.o.setTime(a.o.getTime()+r*1e3))}i.eg.ka(.1)}),this.Hd.D(this.C,"ad-content-attach-requested",function(){return R(function(r){if(r.g==1)return i.h||!i.ma?r.A(0):T(r,i.Vb(i.ma,!0),3);i.ma=null,X(r)})})),xl&&(this.Ea=xl(this),this.Ea.configure(this.g.queue)),this.Le.D(P,"online",function(){Ef(i),i.mh()}),this.He=new Ae(function(){for(var r=Date.now()/1e3,a=!1,o=!0,s=m(i.i.variants),u=s.next();!u.done;u=s.next())u=u.value,u.disabledUntilTime>0&&u.disabledUntilTime<=r&&(u.disabledUntilTime=0,a=!0),u.disabledUntilTime>0&&(o=!1);o&&i.He.stop(),a&&Sr(i,!1,void 0,!1,!1)}),this.ib=null,e&&(Ce("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Vb(e,!0)),this.u=null}rt(V,Ge);function gl(e){e.T!=null&&(_p(e.T),e.T.release(),e.T=null)}function TA(e,t,n){n||t.lcevc.enabled?(gl(e),e.T==null&&(e.T=new bo(e.h,e.Qh,t.lcevc,n),e.H&&(e.H.C=e.T))):gl(e)}function Xe(e,t){return new Z(e,t)}f=V.prototype,f.destroy=function(){var e=this,t;return R(function(n){switch(n.g){case 1:return e.m==ii?n.return():(gl(e),t=e.detach(),e.m=ii,T(n,t,2));case 2:return T(n,e.rg(),3);case 3:if(e.Le&&(e.Le.release(),e.Le=null),e.Ce&&(e.Ce.release(),e.Ce=null),e.j&&(e.j.release(),e.j=null),e.fc&&(e.fc.release(),e.fc=null),e.Hd&&(e.Hd.release(),e.Hd=null),e.Ge=null,e.g=null,e.B=null,e.Be=null,e.K=null,e.wa=null,!e.N){n.A(4);break}return T(n,e.N.destroy(),5);case 5:e.N=null;case 4:e.o&&(e.o.release(),e.o=null),e.Ea&&(e.Ea.destroy(),e.Ea=null),Ge.prototype.release.call(e),X(n)}})};function Fv(e,t){gy.set(e,t)}function qa(e,t){e.dispatchEvent(Xe("onstatechange",new Map().set("state",t)))}f.Vb=function(e,t){t=t===void 0?!0:t;var n=this,i,r,a;return R(function(o){switch(o.g){case 1:if(n.m==ii)throw new D(2,7,7e3);if(i=n.h&&n.h==e,!n.h||n.h==e){o.A(2);break}return T(o,n.detach(),2);case 2:return T(o,Sf(n,"attach"),4);case 4:if(o.h)return o.return();if(he(o,5,6),i||(qa(n,"attach"),r=function(){var s=Mf(n,!1);s&&Ka(n,s)},n.Ce.D(e,"error",r),n.h=e,n.K&&n.K.setMediaElement(e)),Te(),!t||!Ai()||n.H){o.A(6);break}return T(o,Tf(n),6);case 6:Ft(o),n.ha.release(),wt(o,0);break;case 5:return a=oe(o),T(o,n.detach(),10);case 10:throw a}})},f.rj=function(e){this.Qh=e},f.detach=function(e){e=e===void 0?!1:e;var t=this;return R(function(n){if(n.g==1){if(t.m==ii)throw new D(2,7,7e3);return T(n,t.Dc(!1,e),2)}if(n.g!=3)return T(n,Sf(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.Ce.Qa(),t.h=null),qa(t,"detach"),t.C&&!e&&t.C.release()}finally{t.ha.release()}X(n)})};function Sf(e,t){var n;return R(function(i){return i.g==1?(n=++e.Me,T(i,bf(e.ha,t),2)):n!=e.Me?(e.ha.release(),i.return(!0)):i.return(!1)})}f.Dc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,i,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x;return R(function(k){switch(k.g){case 1:return n.m!=ii&&(n.m=Sl),T(k,Sf(n,"unload"),2);case 2:return k.h?k.return():($t(k,3),n.Ua=!1,qa(n,"unload"),gl(n),i=n.De.map(function(M){return M()}),n.De=[],T(k,Promise.all(i),5));case 5:if(n.dispatchEvent(Xe("unloading")),n.Ae&&(n.Ae.release(),n.Ae=null),n.Aa&&(n.Aa.release(),n.Aa=null),n.sb&&(n.sb.release(),n.sb=null),n.h&&(n.j.Qa(),n.fc.Qa()),n.He.stop(),n.cc&&(n.cc.release(),n.cc=null),n.Ta&&(n.Ta.stop(),n.Ta=null),!n.I){k.A(6);break}return T(k,n.I.stop(),7);case 7:n.I=null,n.Ac=null;case 6:if(n.o&&n.o.stop(),!n.l){k.A(8);break}return T(k,n.l.destroy(),9);case 9:n.l=null;case 8:if(n.M&&(n.M.release(),n.M=null),n.G&&(n.G.release(),n.G=null),P.shakaMediaKeysPolyfill!=="webkit"||!n.F){k.A(10);break}return T(k,n.F.destroy(),11);case 11:n.F=null;case 10:if(!n.H){k.A(12);break}return T(k,n.H.destroy(),13);case 13:n.H=null;case 12:if(n.C&&!t&&n.C.onAssetUnload(),n.oa&&!t&&(n.oa.destroy(),n.oa=null),t||n.eg.stop(),n.K&&nA(n.K),n.wa&&(n.wa.g=null),!n.u){k.A(14);break}return T(k,n.u.destroy(),15);case 15:n.u=null;case 14:if(n.aa=!1,n.h){for(r=m(n.cg),a=r.next();!a.done;a=r.next())o=a.value,o.src.startsWith("blob:")&&URL.revokeObjectURL(o.src),o.remove();n.cg=[],Nu(n.h)&&n.h.load()}if(!n.F){k.A(16);break}return T(k,n.F.destroy(),17);case 17:n.F=null;case 16:if(n.ib&&n.X!=n.ib.rd()&&(n.ib.l||n.ib.destroy(),n.ib=null),n.X=null,n.Ja=null,n.R=null,n.i){for(s=m(n.i.variants),u=s.next();!u.done;u=s.next())for(l=u.value,c=m([l.audio,l.video]),d=c.next();!d.done;d=c.next())(h=d.value)&&h.segmentIndex&&h.segmentIndex.release();for(p=m(n.i.textStreams),g=p.next();!g.done;g=p.next())y=g.value,y.segmentIndex&&y.segmentIndex.release()}for(n.g&&n.g.streaming.clearDecodingCache&&(bu.clear(),fa.clear()),n.i=null,n.B=new al,n.Ph=null,n.ec=null,n.V=null,n.Ne=-1,n.Ke=[],b=m(n.zc.values()),A=b.next();!A.done;A=b.next())x=A.value,x.stop();n.zc.clear(),n.yb=[],n.ag=-1,n.N&&n.N.Xh(),us(n);case 3:Ft(k),n.ha.release(),wt(k,4);break;case 4:if(Te(),e&&Ai()&&!n.H&&n.h)return T(k,Tf(n),0);k.A(0)}})},f.rl=function(e){this.O=e},f.load=function(e,t,n){t=t===void 0?null:t;var i=this,r,a,o,s,u,l,c,d,h,p,g,y,b,A;return R(function(x){switch(x.g){case 1:if(i.m==ii)throw new D(2,7,7e3);if(i.h||!i.ma){x.A(2);break}return T(x,i.Vb(i.ma,!0),3);case 3:i.ma=null;case 2:if(r=null,a="",e instanceof Vn){if(e.l)throw new D(2,7,7006);r=e,a=r.rd()||""}else a=e||"";return T(x,bf(i.ha,"load"),4);case 4:if(i.ha.release(),!i.h)throw new D(2,7,7002);if(!i.X){x.A(5);break}return i.X=a,T(x,i.Dc(!1),5);case 5:if(o=++i.Me,s=function(){return R(function(k){if(k.g==1)return i.Me==o?k.A(0):r?T(k,r.destroy(),3):k.A(3);throw new D(2,7,7e3)})},u=function(k,M){return R(function(N){switch(N.g){case 1:return $t(N,2),T(N,bf(i.ha,M),4);case 4:return T(N,s(),5);case 5:return T(N,k(),6);case 6:return T(N,s(),7);case 7:r&&i.g&&(r.g=i.g);case 2:Ft(N),i.ha.release(),wt(N,0)}})},he(x,7,8),t==null&&r&&(t=r.getStartTime()),i.O=t,i.Ua=!1,i.dispatchEvent(Xe("loading")),r){n=r.V,x.A(10);break}if(n){x.A(10);break}return T(x,u(function(){return R(function(k){if(k.g==1)return T(k,qv(i,a),2);n=k.h,X(k)})},"guessMimeType_"),10);case 10:if(l=!!r,r){lv(r,i),i.B=r.getStats(),x.A(13);break}return T(x,Hv(i,a,t,n,!0,i.g),14);case 14:(r=x.h)?(r.F=!1,lv(r,i),i.B=r.getStats(),r.start(),r.B.catch(function(){})):i.B=new al;case 13:return c=!r,d=Date.now()/1e3,i.B=r?r.getStats():new al,i.X=a,i.Ja=n||null,us(i),h=function(){var k=i.h?i.h.buffered:null;return{start:um(k)||0,end:Lu(k)||0}},i.Aa=new Yo(h),i.Aa.addEventListener("regionadd",function(k){xf(i,k.region,"metadataadded")}),c?T(x,u(function(){return R(function(k){return T(k,IA(i,n),0)})},"initializeSrcEqualsDrmInner_"),25):(i.sb=new Yo(h),T(x,u(function(){return R(function(k){if(k.g==1)return T(k,Promise.race([r.ma,r.B]),2);i.Ac=r.H;var M=r;M.oa=!0,i.I=M.m,i.i=r.Lg(),X(k)})},"waitForFinish"),17));case 17:if(i.H){x.A(18);break}return T(x,u(function(){return R(function(k){return T(k,Tf(i),0)})},"initializeMediaSourceEngineInner_"),18);case 18:return i.i&&i.i.textStreams.length&&(i.u.enableTextDisplayer?i.u.enableTextDisplayer():Ce("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),T(x,u(function(){return R(function(k){return T(k,r.B,0)})},"waitForFinish"),20);case 20:if(i.g=r.getConfiguration(),i.Ee=r.G,i.I&&i.I.setMediaElement&&i.h&&i.I.setMediaElement(i.h),i.Ae=Fx(r),i.ye=r.Ja,(p=r.C)&&(i.J=p),l&&i.h&&i.h.nodeName==="AUDIO"&&(xA(i),i.configure("manifest.disableVideo",!0)),r.j){x.A(21);break}return T(x,u(function(){return R(function(k){return T(k,cv(r,i.h),0)})},"drmEngine_.init"),21);case 21:return i.F=Vx(r),T(x,u(function(){return R(function(k){return T(k,i.F.Vb(i.h),0)})},"drmEngine_.attach"),23);case 23:return g=i.g.abrFactory,i.o&&i.Ge==g||(i.Ge=g,i.o&&i.o.release(),i.o=g(),typeof i.o.setMediaElement!="function"&&(Ce("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),i.o.setMediaElement=function(){}),typeof i.o.setCmsdManager!="function"&&(Ce("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),i.o.setCmsdManager=function(){}),typeof i.o.trySuggestStreams!="function"&&(Ce("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),i.o.trySuggestStreams=function(){}),i.o.configure(i.g.abr)),y=Hx(r),b=r.i,T(x,u(function(){return R(function(k){return T(k,kA(i,d,b,y),0)})},"loadInner_"),24);case 24:Bx(r),i.Ja&&Te().hj()&&du(i.Ja)&&RT(i.H,i.X,i.Ja),x.A(16);break;case 25:return T(x,u(function(){return R(function(k){return T(k,EA(i,d,n),0)})},"srcEqualsInner_"),16);case 16:i.dispatchEvent(Xe("loaded"));case 8:if(Ft(x),!r){x.A(27);break}return T(x,r.destroy(),27);case 27:i.ib=null,wt(x,0);break;case 7:if(A=oe(x),!A||A.code==7e3){x.A(29);break}return T(x,i.Dc(!1),29);case 29:throw A}})};function xA(e){for(var t=m(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(i){return i.audio})}f.kj=function(e,t,n){e=e===void 0?!0:e,t=t===void 0?!1:t,n=n===void 0?!1:n;var i=this,r;return R(function(a){return a.g==1?T(a,Vv(i,n),2):a.g!=3?(r=a.h,T(a,i.Dc(e,t),3)):a.return(r)})},f.ai=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,i;return R(function(r){return r.g==1?T(r,Vv(n,t),2):r.g!=3?(i=r.h,T(r,n.detach(e),3)):r.return(i)})};function Vv(e,t){t=t===void 0?!1:t;var n,i,r;return R(function(a){if(a.g==1)return n=null,e.i&&e.I&&e.Ac&&e.X&&e.g?(i=e.h.currentTime,t||(i=null),T(a,Gv(e,e.X,i,e.Ja,e.g,!0,!1),3)):a.A(2);if(a.g!=2){n=a.h,e.Ie.push(n),e.I&&e.I.setMediaElement&&e.I.setMediaElement(null),(r=e.l?e.l.o:null)&&(n.i=r);var o=n,s=e.I,u=e.Ac;o.h=e.i,o.m=s,o.H=u,n.C=e.J,n.start(),e.i=null,e.I=null,e.Ac=null,e.o=null,e.Ge=null}return a.return(n)})}f.preload=function(e,t,n,i){t=t===void 0?null:t;var r=this,a,o;return R(function(s){return s.g==1?(a=gi(r),Ki(a,i||r.g,gi(r)),T(s,Hv(r,e,t,n,!1,a),2)):((o=s.h)?o.start():Ka(r,new D(2,7,7005)),s.return(o))})},f.rg=function(){var e=this,t,n,i,r;return R(function(a){for(t=[],n=m(e.Ie),i=n.next();!i.done;i=n.next())r=i.value,r.l||t.push(r.destroy());return e.Ie=[],T(a,Promise.all(t),0)})};function Hv(e,t,n,i,r,a){r=r===void 0?!1:r;var o,s,u;return R(function(l){return l.g==1?i?l.A(2):T(l,qv(e,t),3):(l.g!=2&&(i=l.h),AA(e,i)?l.return(null):(o=a||e.g,s=!1,r&&e.h&&e.h.nodeName==="AUDIO"&&(s=!0),u=Gv(e,t,n,i||null,o,!r,s),u=r?u.then(function(c){return c.F=!1,c}):u.then(function(c){return e.Ie.push(c),c}),l.return(u)))})}function Gv(e,t,n,i,r,a,o){a=a===void 0?!0:a,o=o===void 0?!1:o;var s,u,l,c,d,h,p,g,y,b,A,x,k,M,N;return R(function(I){return I.g==1?(s=null,u=ei(r),o&&(u.manifest.disableVideo=!0),l=function(){return s.R&&s.l?null:s},c=function(){return l()?l().getConfiguration():e.g},e.za.width!=1/0||e.za.height!=1/0||e.g.ignoreHardwareResolution?I.A(2):(d=Te(),T(I,d.nc(),3))):(I.g!=2&&(h=I.h,e.za.width=h.width,e.za.height=h.height),p=new gd(u,e.za,null),g={networkingEngine:e.N,filter:function(C){var E,O;return R(function(L){if(L.g==1)return T(L,zg(p,C),2);if(L.g!=4)return E=L.h,E?(O=Xe("trackschanged"),T(L,Promise.resolve(),4)):L.A(0);s.dispatchEvent(O),X(L)})},makeTextStreamsForClosedCaptions:function(C){return FA(e,C)},onTimelineRegionAdded:function(C){Ud(s.I,C)},onEvent:function(C){return s.dispatchEvent(C)},onError:function(C){return s.onError(C)},isLowLatencyMode:function(){return c().streaming.lowLatencyMode},updateDuration:function(){e.l&&s.R&&e.l.updateDuration()},newDrmInfo:function(C){var E=s.j,O=E?E.g:null;O&&E.B&&Yg(p,O.keySystem,C)},onManifestUpdated:function(){var C=new Map().set("isLive",e.W());s.dispatchEvent(Xe("manifestupdated",C)),is(s,!1,function(){e.C&&e.C.onManifestUpdated(e.W())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(C,E,O,L){var _=C;(C=="com.apple.hls.interstitial"||C=="com.apple.hls.overlay")&&(_="com.apple.quicktime.HLS",C={startTime:E,endTime:O,values:L},e.C&&e.C.onHLSInterstitialMetadata(e,e.h,C)),L=m(L),C=L.next();for(var j={};!C.done;j={dh:void 0},C=L.next())j.dh=C.value,j.dh.name!="ID"&&is(s,!1,function(G){return function(){Af(e,E,O,_,G.dh)}}(j))},disableStream:function(C){return e.disableStream(C,e.g.streaming.maxDisabledTime)},addFont:function(C,E){return e.addFont(C,E)}},y=new Yo(function(){return e.Ra()}),y.addEventListener("regionadd",function(C){var E=C.region;ds(e,"timelineregionadded",E,s),is(s,!1,function(){e.C&&(e.C.onDashTimedMetadata(E),e.C.onDASHInterstitialMetadata(e,e.h,E))})}),b=null,u.streaming.observeQualityChanges&&(b=new Vu(function(){return e.Hc()}),b.addEventListener("qualitychange",function(C){dy(e,C.quality,C.position)}),b.addEventListener("audiotrackchange",function(C){dy(e,C.quality,C.position,!0)})),A=!0,x={wc:e.N,onError:function(C){return s.onError(C)},zf:function(C){is(s,!0,function(){e.F&&HA(e,C)})},onExpirationUpdated:function(C,E){var O=Xe("expirationupdated");s.dispatchEvent(O),(O=s.m)&&O.onExpirationUpdated&&O.onExpirationUpdated(C,E)},onEvent:function(C){s.dispatchEvent(C),C.type=="drmsessionupdate"&&A&&(A=!1,C=Date.now()/1e3-s.Aa,(e.B||s.getStats()).m=C,e.T&&_p(e.T))}},k=zv(e,l),Ig(e.N,k),M=function(){return e.md(x)},N={config:u,Ak:g,Lk:y,Kk:b,md:M,zk:p,networkingEngine:k,qj:a},s=new Vn(t,i,n,N),I.return(s))})}function qv(e,t){var n,i,r,a;return R(function(o){return o.g==1?(n=e.g.manifest.retryParameters,T(o,ja(t,e.N,n),2)):(i=o.h,i=="application/x-mpegurl"&&(r=Te(),r.Ga()==="WEBKIT"&&(i="application/vnd.apple.mpegurl")),i=="video/quicktime"&&(a=Te(),a.Ga()==="CHROMIUM"&&(i="video/mp4")),o.return(i))})}function AA(e,t){if(!Ai(Te()))return!0;if(t){if((e.h||$r()).canPlayType(t)=="")return!1;if(!Ai(Te())||!pa.has(t.toLowerCase()))return!0;if(du(t))return Te().Ga()==="WEBKIT"&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if(t==="application/dash+xml"||t==="video/vnd.mpeg.dash.mpd")return e.g.streaming.preferNativeDash}return!1}function ml(e,t){var n=e.g.textDisplayFactory;e.Ph!==n||t!==void 0&&t?(t=e.u,e.u=n(),e.u.configure?e.u.configure(e.g.textDisplayer):Ce("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.u.setTextLanguage||Ce("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),t?(e.u.setTextVisibility(t.isTextVisible()),t.destroy().catch(function(){})):e.u.setTextVisibility(e.aa),e.H&&BT(e.H,e.u),e.Ph=n,e.l&&dx(e.l)):e.u&&e.u.configure&&e.u.configure(e.g.textDisplayer)}function Tf(e){var t,n,i;return R(function(r){if(r.g==1)return Te(),qa(e,"media-source"),e.g.mediaSource.useSourceElements&&Nu(e.h),ml(e),t=OA(e.h,e.u,{Qj:function(){return e.keySystem()},onMetadata:function(a,o,s){a=m(a);for(var u=a.next();!u.done;u=a.next())if(u=u.value,u.data&&typeof u.cueTime=="number"&&u.frames){var l=u.cueTime+o,c=s;c&&l>c&&(c=l);for(var d=m(u.frames),h=d.next();!h.done;h=d.next())Af(e,l,c,"org.id3",h.value);e.C&&e.C.onHlsTimedMetadata(u,l)}},Fk:function(a){e.sb&&Ud(e.sb,{schemeIdUri:a.schemeIdUri,startTime:a.startTime,endTime:a.endTime,id:String(a.id),emsg:a})},onEvent:function(a){return e.dispatchEvent(a)},Hk:function(){e.I&&e.I.update&&e.I.update()}},e.T,e.g.mediaSource),n=e.g.manifest,i=n.segmentRelativeVttTiming,t.Ea=i,T(r,t.M,2);e.H=t,X(r)})}function Kv(e,t,n){function i(){return kf(e)}if(e.j.D(t,"playing",i),e.j.D(t,"pause",i),e.j.D(t,"ended",i),e.j.D(t,"ratechange",function(){var a=e.h.playbackRate;a!=0&&(e.M&&(e.M.set(a),e.m==jt&&e.o.playbackRateChanged(a),ny(e,a)),a=Xe("ratechange"),e.dispatchEvent(a))}),t.remote&&(e.j.D(t.remote,"connect",function(){e.l&&t.remote.state=="connected"&&Wi(e),an(e)}),e.j.D(t.remote,"connecting",function(){return an(e)}),e.j.D(t.remote,"disconnect",function(){return R(function(a){if(a.g==1)return e.l&&t.remote.state=="disconnected"?T(a,Ju(e.l),3):a.A(2);a.g!=2&&Wi(e),an(e),X(a)})})),t.audioTracks&&(e.j.D(t.audioTracks,"addtrack",function(){return an(e)}),e.j.D(t.audioTracks,"removetrack",function(){return an(e)}),e.j.D(t.audioTracks,"change",function(){return an(e)})),t.videoTracks&&(e.j.D(t.videoTracks,"addtrack",function(){return an(e)}),e.j.D(t.videoTracks,"removetrack",function(){return an(e)}),e.j.D(t.videoTracks,"change",function(){return an(e)})),(t.webkitPresentationMode||t.webkitSupportsFullscreen)&&e.j.D(t,"webkitpresentationmodechanged",function(){e.Be&&ml(e,!0)}),t.textTracks){var r=function(){e.m===Tn&&e.u instanceof Tt&&Wi(e),an(e)};e.j.D(t.textTracks,"addtrack",function(a){if(a.track)switch(a=a.track,a.kind){case"metadata":PA(e,a);break;case"chapters":RA(e,a);break;default:r()}}),e.j.D(t.textTracks,"removetrack",r),e.j.D(t.textTracks,"change",r)}t.preload!="none"&&e.j.ya(t,"loadedmetadata",function(){e.B.G=Date.now()/1e3-n})}function kA(e,t,n,i){var r,a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M,N,I,C,E,O,L,_,j,G,H,B;return R(function(F){switch(F.g){case 1:for(qa(e,"load"),r=e.h,e.M=new Xo({cf:function(){return r.playbackRate},Tc:function(){return r.defaultPlaybackRate},wh:function(K){r.playbackRate=K},Ei:function(K){r.currentTime+=K}}),Kv(e,r,t),("onchange"in P.screen)&&e.j.D(P.screen,"change",function(){if(e.J.getConfiguration){var K=e.J.getConfiguration();K.hdrLevel=="AUTO"?wr(e):e.g.preferredVideoHdrLevel=="AUTO"&&e.g.abr.enabled&&(K.hdrLevel="AUTO",e.J.configure(K),wr(e))}}),a=!1,o=m(e.i.variants),s=o.next();!s.done;s=o.next())u=s.value,(l=u.video&&u.video.dependencyStream)&&(a=jp(l));TA(e,e.g,a),e.Ld=e.g.preferredTextLanguage,e.Pd=e.g.preferredTextRole,e.Od=e.g.preferForcedSubs,Cf(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(K,W,me){e.i&&e.l&&K!=e.l.o&&ls(e,K,!0,W===void 0?!1:W,me===void 0?0:me)}),e.o.setMediaElement(r),e.o.setCmsdManager(e.wa),e.l=_A(e),e.l.configure(e.g.streaming),e.m=jt,e.dispatchEvent(Xe("streaming")),c=n;case 2:for((h=e.l.o)||c||(c=ry(e,!0)),p=[],d=h||c,g=m([d.video,d.audio]),y=g.next();!y.done;y=g.next())(b=y.value)&&!b.segmentIndex&&(p.push(b.createSegmentIndex()),b.dependencyStream&&p.push(b.dependencyStream.createSegmentIndex()));if(!(p.length>0)){F.A(4);break}return T(F,Promise.all(p),4);case 4:if(!d||d.disabledUntilTime!=0){F.A(2);break}if(wr(e),e.I&&e.I.onInitialVariantChosen&&e.I.onInitialVariantChosen(d),e.i.isLowLatency&&(e.g.streaming.lowLatencyMode?e.configure(e.dg):Ee("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),e.K&&(iA(e.K,e.i.isLowLatency&&e.g.streaming.lowLatencyMode),rA(e.K,t*1e3)),Cf(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),ux(e.l,e.g.playRangeStart,e.g.playRangeEnd),e.Ua=!0,e.dispatchEvent(Xe("canupdatestarttime")),A=function(K){e.G=DA(e,K),e.cc=LA(e,K),Wv(e,r,!1)},e.g.streaming.startAtSegmentBoundary||(x=e.O,x==null&&e.i.startTime&&(x=e.i.startTime),A(x)),h){F.A(7);break}if(!e.g.streaming.startAtSegmentBoundary){F.A(8);break}return k=e.i.presentationTimeline,e.O instanceof Date&&(N=k.m||k.i,I=e.O.getTime()/1e3-N,I!=null&&(M=I)),M==null&&(M=typeof e.O=="number"?e.O:e.h.currentTime),e.O==null&&e.i.startTime&&(M=e.i.startTime),C=k.$b(),E=k.Gb(),M<C?M=C:M>E&&(M=E),T(F,VA(c,M),9);case 9:O=F.h,A(O);case 8:ls(e,c,!0,!1,0);case 7:return e.G.ready(),L=e.Lc().find(function(K){return K.active}),L||((_=Ta(e.i.textStreams,e.Ld,e.Pd,e.Od)[0]||null)&&tf(e.B.h,_,!0),c&&(_?(yg(c.audio,_,e.g)&&(e.aa=!0),e.aa&&e.u.setTextVisibility(!0)):(e.aa=!1,e.u.setTextVisibility(!1)),ly(e)),_&&(e.g.streaming.alwaysStreamText||e.Sg())&&(qu(e.l,_),cs(e))),T(F,e.l.start(i),10);case 10:e.g.abr.enabled&&(e.o.enable(),cy(e)),an(e),e.i.variants.some(function(K){return K.primary}),((j=e.W())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(G=function(){return iy(e)},e.j.D(r,"timeupdate",G)),j||(H=function(){return wl(e)},e.j.D(r,"timeupdate",H),wl(e),e.i.nextUrl&&(e.g.streaming.preloadNextUrlWindow>0&&(B=function(){var K;return R(function(W){if(W.g==1)return K=e.Ra().end-e.h.currentTime,isNaN(K)||!(K<=e.g.streaming.preloadNextUrlWindow)?W.A(0):(e.j.Ma(r,"timeupdate",B),T(W,e.preload(e.i.nextUrl),4));e.ib=W.h,X(W)})},e.j.D(r,"timeupdate",B)),e.j.D(r,"ended",function(){e.load(e.ib||e.i.nextUrl)}))),e.C&&e.C.onManifestUpdated(j),X(F)}})}function IA(e,t){var n,i,r;return R(function(a){return a.g==1?(n=Date.now()/1e3,i=!0,e.F=e.md({wc:e.N,onError:function(o){Ka(e,o)},zf:function(){},onExpirationUpdated:function(){var o=Xe("expirationupdated");e.dispatchEvent(o)},onEvent:function(o){e.dispatchEvent(o),o.type=="drmsessionupdate"&&i&&(i=!1,e.B.m=Date.now()/1e3-n)}}),e.F.configure(e.g.drm),r=bg([t]),e.F.O=!0,T(a,Ng(e.F,[r],[]),2)):T(a,e.F.Vb(e.h),0)})}function EA(e,t,n){var i,r,a,o,s,u,l,c,d,h,p,g;return R(function(y){switch(y.g){case 1:if(qa(e,"src-equals"),i=e.h,e.G=new _m(i),r=!1,e.De.push(function(){r=!0}),e.dispatchEvent(Xe("canupdatestarttime")),e.O!=null&&e.G.$f(e.O),e.cc=NA(e,e.O||0),e.M=new Xo({cf:function(){return i.playbackRate},Tc:function(){return i.defaultPlaybackRate},wh:function(b){i.playbackRate=b},Ei:function(b){i.currentTime+=b}}),Wv(e,i,!0),i.textTracks&&(ml(e),a=function(b){if(!(e.u instanceof Tt)){var A=vl(e).find(function(x){return x.mode!=="disabled"});A&&(A.mode=b?"showing":"hidden"),e.u instanceof qt&&(A=jA(e))&&(A.mode=!b&&e.u.isTextVisible()?"showing":"hidden")}},e.j.D(i,"enterpictureinpicture",function(){return a(!0)}),e.j.D(i,"leavepictureinpicture",function(){return a(!1)}),i.remote?(e.j.D(i.remote,"connect",function(){return a(!1)}),e.j.D(i.remote,"connecting",function(){return a(!1)}),e.j.D(i.remote,"disconnect",function(){return a(!1)})):"webkitCurrentPlaybackTargetIsWireless"in i&&e.j.D(i,"webkitcurrentplaybacktargetiswirelesschanged",function(){return a(!1)}),o=i,(o.webkitPresentationMode||o.webkitSupportsFullscreen)&&e.j.D(o,"webkitpresentationmodechanged",function(){o.webkitPresentationMode?a(o.webkitPresentationMode!=="inline"):o.webkitSupportsFullscreen&&a(o.webkitDisplayingFullscreen)})),Kv(e,i,t),s=aA(e.K,e.X,n),!s.includes("#t=")&&(e.g.playRangeStart>0||isFinite(e.g.playRangeEnd))&&(s+="#t=",e.g.playRangeStart>0&&(s+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(s+=","+e.g.playRangeEnd)),!e.H){y.A(2);break}return T(y,e.H.destroy(),3);case 3:e.H=null;case 2:return Nu(i),i.src=s,u=Te(),u.Oa()=="TV"&&i.load(),i.preload!="none"&&!i.autoplay&&du(n)&&u.Ga()==="WEBKIT"&&i.load(),e.m=Tn,e.dispatchEvent(Xe("streaming")),l=function(){return new Promise(function(b){var A=new Ae(b);e.j.D(i.textTracks,"change",function(){return A.ka(.5)}),A.ka(.5)})},c=new qe,_a(i,HTMLMediaElement.HAVE_METADATA,e.j,function(){return R(function(b){if(b.g==1)return e.G.ready(),e.Ja&&du(e.Ja)?T(b,l(),3):(c.resolve(),b.A(0));c.resolve(),X(b)})}),_a(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.j,function(){var b,A,x,k,M;return R(function(N){if(N.g==1)return T(N,l(),2);if(r)return N.return();if(MA(e),b=vl(e),b.some(function(I){return I.mode==="showing"})&&(e.aa=!0,e.u.setTextVisibility(!0)),!(e.u instanceof Tt))for(b.length&&(e.u.enableTextDisplayer?e.u.enableTextDisplayer():Ce("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method')),A=!1,x=m(b),k=x.next();!k.done;k=x.next())M=k.value,M.mode!=="disabled"&&(A?(M.mode="disabled",Ee("Found more than one enabled text track, disabling it",M)):(Zv(e,M),A=!0));CA(e),X(N)})}),i.error?c.reject(Mf(e)):i.preload=="none"&&(Ee('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),c.resolve()),e.j.ya(i,"error",function(){c.reject(Mf(e))}),T(y,fu(e.g.streaming.loadTimeout,c),4);case 4:((d=e.W())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(h=function(){return iy(e)},e.j.D(i,"timeupdate",h)),d||(p=function(){return wl(e)},e.j.D(i,"timeupdate",p),wl(e)),e.C&&(e.C.onManifestUpdated(d),d&&(g=e.Ra().end,e.j.D(i,"progress",function(){var b=e.Ra().end;g!=b&&(e.C.onManifestUpdated(e.W()),g=b)}))),e.Ua=!0,X(y)}})}function MA(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Ui(t,e.g.preferredAudioRole)}function CA(e){var t=e.g.preferredTextLanguage;t!=""&&e.ph(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function PA(e,t){if(t.kind=="metadata"){t.mode="hidden",e.j.D(t,"cuechange",function(){if(t.activeCues)for(var i=m(t.activeCues),r=i.next();!r.done;r=i.next())r=r.value,Af(e,r.startTime,r.endTime,r.type,r.value),e.C&&e.C.onCueMetadataChange(r.value);if(t.cues){i=[],r=m(t.cues);for(var a=r.next(),o={};!a.done;o={Fc:void 0},a=r.next())o.Fc=a.value,o.Fc.type=="com.apple.quicktime.HLS"&&o.Fc.startTime!=null&&(a=i.find(function(s){return function(u){return u.startTime==s.Fc.startTime&&u.endTime==s.Fc.endTime}}(o)),a||(a={startTime:o.Fc.startTime,endTime:o.Fc.endTime,values:[]},i.push(a)),a.values.push(o.Fc.value));for(i=m(i),r=i.next();!r.done;r=i.next())r=r.value,r.values.some(function(s){return s.key=="X-ASSET-URI"||s.key=="X-ASSET-LIST"})&&e.C&&(r.values.push({key:"CUE",description:"",data:r.startTime!=0||e.W()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.C.onHLSInterstitialMetadata(e,e.h,r))}});var n=new Ae(function(){var i=UA(e);i=m(i);for(var r=i.next();!r.done;r=i.next())r.value.mode="hidden"}).Jb().ka(.5);e.De.push(function(){n.stop()})}}function xf(e,t,n){t=new Map().set("startTime",t.startTime).set("endTime",t.endTime).set("metadataType",t.schemeIdUri).set("payload",t.payload),e.dispatchEvent(Xe(n,t))}function Af(e,t,n,i,r){e.Aa&&(t={schemeIdUri:i,startTime:t,endTime:n||1/0,id:"",payload:r},t.id=JSON.stringify(t),Ud(e.Aa,t))}function RA(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new Ae(function(){t.mode="hidden"}).Jb().ka(.5);e.De.push(function(){n.stop()})}}f.Pk=function(){for(var e=this.ha;e.g;)e.release()},f.md=function(e){return new Eu(e)};function zv(e,t){function n(a){t()?t().dispatchEvent(a):e.dispatchEvent(a)}function i(a){t()?is(t(),!0,a):a()}t||(t=function(){return null});var r=new nt(function(a,o,s,u,l){i(function(){e.o&&e.o.segmentDownloaded(a,o,s,u,l)})},function(a,o,s){o=new Map().set("headers",a).set("request",o).set("requestType",s),n(Xe("downloadheadersreceived",o)),i(function(){if(e.wa){var u=e.wa;if(u.h.enabled){var l=a["cmsd-static"];if(l)try{var c=new Map,d=l.split(",");for(l=0;l<d.length;l++){var h=d[l].split("=");c.set(h[0],Nv(h[1]))}}catch{}if(c=a["cmsd-dynamic"]){e:{try{var p=new Map,g=c.split(";");for(c=1;c<g.length;c++){var y=g[c].split("=");p.set(y[0],Nv(y[1]))}var b=p;break e}catch{b=null;break e}b=void 0}b&&(u.g=b)}}}})},function(a,o){a=new Map().set("request",a).set("response",o),n(Xe("downloadcompleted",a))},function(a,o,s,u){a=new Map().set("request",a).set("error",o).set("httpResponseCode",s).set("aborted",u),n(Xe("downloadfailed",a))},function(a,o,s){i(function(){if(e.K){var u=e.K,l=s;if(l=l===void 0?{}:l,u.g.enabled)if(o.method==="HEAD")Ga(u,o,{});else switch(a){case 0:try{if(u.g.enabled){if(l.type){e:{switch(l.type){case 4:var c=u.u?fl:dl;break e;case 3:case 2:c=u.u?pl:hl;break e;case 5:c="s";break e}c=void 0}u.l=c}Ga(u,o,{ot:Mv,su:!u.F})}}catch(h){nr("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",h)}break;case Bn:try{if(u.g.enabled){var d=Iv(u,l,o.uris[0]);d.ts=Date.now(),u.m.has(o)&&u.m.delete(o),u.m.set(o,d.ts),Ga(u,o,d)}}catch(h){nr("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",h)}break;case 2:case 5:case 6:Ga(u,o,{ot:"k"});break;case 4:Ga(u,o,{ot:"o"})}}})},function(a,o,s,u){(a=t()?t().m:e.I)&&a.banLocation&&a.banLocation(u)},function(a,o,s){if(o.data){var u=o.data.byteLength,l=t()?t().getStats():e.B;if(l&&(uv(l,u),a===0&&(l.xi=u)),u=e.K,s=s===void 0?{}:s,df(u).length!==0)switch(a){case Bn:try{var c=Iv(u,s,o.uri);o.originalRequest&&o.originalRequest.timeToFirstByte!=null&&(c.ttfb=o.originalRequest.timeToFirstByte),o.timeMs!=null&&(c.ttlb=o.timeMs);var d=o.originalUri||o.uri;if(d.includes("CMCD="))try{var h=new URL(d);h.searchParams.delete("CMCD");var p=h.toString()}catch{p=d}else p=d;c.url=p,u.m.has(o.originalRequest)?(c.ts=u.m.get(o.originalRequest),u.m.delete(o.originalRequest)):c.ts||(c.ts=Date.now());var g=df(u);if(g.length!==0){var y=u.g.version==vf?Array.from(new Set([].concat(z(yf),z(mA)))):Cv;c.rc=o.status||0;var b=gf(u,c,Dv);o.headers&&o.headers["CMSD-Static"]&&(b.cmsds=btoa(o.headers["CMSD-Static"])),o.headers&&o.headers["CMSD-Dynamic"]&&(b.cmsdd=btoa(o.headers["CMSD-Dynamic"]));for(var A=m(g),x=A.next();!x.done;x=A.next()){var k=x.value,M=hf(k.includeKeys||[],y),N=Av(k);u.o[N]||(u.o[N]={request:1,response:1}),b.sn=u.o[N].response++;var I=pf(b,M);xv(u,I,k,o)}}}catch(C){nr("CMCD_SEGMENT_ERROR","Could not generate response segment CMCD data.",C)}}}});return r.configure(e.g.networking),r}function DA(e,t){return new Bm(e.h,e.i,e.g.streaming,t,function(){e.cc&&qm(e.cc,!e.G.Nh()),e.l&&e.l.bd(),e.R&&xi(e,"seeking")},function(n){return e.dispatchEvent(n)})}function LA(e,t){var n=e.W()||typeof t=="number"&&t>0;t=new ea(e.Ae,n),t.addEventListener("enter",function(a){ds(e,"timelineregionenter",a.region)}),t.addEventListener("exit",function(a){ds(e,"timelineregionexit",a.region)}),t.addEventListener("skip",function(a){var o=a.region;a.seeking||(ds(e,"timelineregionenter",o),ds(e,"timelineregionexit",o))});var i=new ea(e.Aa,n);i.addEventListener("enter",function(a){xf(e,a.region,"metadata")}),n=new ea(e.sb,n),n.addEventListener("enter",function(a){a=new Map().set("detail",a.region.emsg),e.dispatchEvent(Xe("emsg",a))});var r=new jd(e.h);return r.g.add(t),r.g.add(i),r.g.add(n),e.ye&&r.g.add(e.ye),r}function NA(e,t){t=new ea(e.Aa,t instanceof Date||t>0),t.addEventListener("enter",function(i){xf(e,i.region,"metadata")});var n=new jd(e.h);return n.g.add(t),n}function Wv(e,t,n){e.R=new rT,pd(e.R,Wr),Xv(e),us(e),e.Ta=new Ae(function(){xi(e)}),e.g.streaming.rebufferingGoal&&e.Ta.Da(.25),e.j.D(t,"waiting",function(){return xi(e,"waiting")}),e.j.D(t,"canplaythrough",function(){return xi(e,"canplaythrough")}),e.j.D(t,"playing",function(){return xi(e,"playing")}),e.j.D(t,"seeked",function(){return xi(e,"seeked")}),e.j.D(t,"timeupdate",function(){return xi(e,"timeupdate")}),n&&(e.j.D(t,"progress",function(){return xi(e,"progress")}),e.j.D(t,"stalled",function(){return xi(e,"stalled")}))}function Xv(e){var t=e.g.streaming.rebufferingGoal;e.R.j.set(Xr,Math.min(.5,t/2)).set(Wr,t)}function xi(e,t){if(e.g.streaming.rebufferingGoal){t=e.H?Zr(e.H):!1,t=e.ge()||t||e.G.si();var n=lm(e.h.buffered,e.h.currentTime),i=e.R,r=i.j.get(i.g);pd(i,t||n>=r&&n>0?Xr:Wr)&&us(e)}else if(t){n=e.R,i=e.h.currentTime,r=n.h,n.h=i;var a=void 0;switch(t){case"seeking":case"waiting":n.h=-1,a=Wr;break;case"canplaythrough":case"playing":case"seeked":a=Xr;break;case"timeupdate":r>=0&&i-r>.01&&(a=Xr)}a!==void 0&&pd(n,a)&&us(e)}}function OA(e,t,n,i,r){return new mm(e,t,n,r,i)}function _A(e){return new Jm(e.i,{Zb:function(){return e.G?e.G.Rd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},Ob:function(){return e.Ob()},video:e.h,Y:e.H,wc:e.N,onError:function(t){return Ka(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Bd:function(t,n,i,r){var a=t.startTime,o=t.endTime,s=n.type;if(s!=xe){if(e.G){e.G.Gi();var u=Md(e.H,s);!e.W()&&e.h.paused&&!e.h.seeking&&u!=null&&u>0&&e.G.Rd()<u&&!wf(e.G.Rd(),u,.001)&&e.G.$f(u)}xi(e)}i=new Map().set("start",a).set("end",o).set("contentType",s).set("isMuxed",i).set("isDependency",r),e.dispatchEvent(Xe("segmentappended",i)),e.o&&n.fastSwitching&&t.Xc&&t.je&&e.o.trySuggestStreams()},Gk:function(t,n){(n=n.yd)&&e.ye&&QT(e.ye,n,t)},Vh:function(t,n){var i=e.F;if(i.h.parseInbandPsshEnabled&&!i.H&&["audio","video"].includes(t)){t=new cd(pe(n)),n=0;for(var r=m(t.data),a=r.next();!a.done;a=r.next())n+=a.value.length;if(n==0)i=Promise.resolve();else{for(n=new Uint8Array(n),r=0,t=m(t.data),a=t.next();!a.done;a=t.next())a=a.value,n.set(a,r),r+=a.length;_o(i,"cenc",n),i=i.m}}else i=Promise.resolve();return i},disableStream:function(t,n){return e.disableStream(t,n)},il:function(t,n){return!(e.g.abr.enabled&&n.fastSwitching&&t.Xc&&t.je)}})}f.configure=function(e,t){var n=this.getConfiguration();if(arguments.length==2&&typeof e=="string"&&(e=Zu(e,t)),"preferredVariantRole"in e&&(Ce("preferredVariantRole configuration","Please Use preferredAudioRole instead."),e.preferredAudioRole=e.preferredVariantRole,delete e.preferredVariantRole),e.streaming&&"forceTransmuxTS"in e.streaming&&(Ce("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(Ce("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming){Ce("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.");var i=Te();e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&i.Ga()==="WEBKIT",delete e.streaming.useNativeHlsOnSafari}if(e.streaming&&typeof e.streaming.liveSync=="boolean"&&(Ce("streaming.liveSync","Please Use streaming.liveSync.enabled instead."),i=e.streaming.liveSync,e.streaming.liveSync={},e.streaming.liveSync.enabled=i),e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){i=e.streaming.liveSyncMinLatency||0;var r=Math.abs((e.streaming.liveSyncMaxLatency||1)-i)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=i+r,e.streaming.liveSync.targetLatencyTolerance=r}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(Ce("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(Ce("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(Ce("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(Ce("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(Ce("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(Ce("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(Ce("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(Ce("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){Ce("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var a=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return a},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(Ce("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(Ce("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(Ce("manifest.dash.enableAudioGroups configuration","Please Use manifest.enableAudioGroups instead."),e.manifest.enableAudioGroups=e.manifest.dash.enableAudioGroups,delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(Ce("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(Ce("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(Ce("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(Ce("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(Ce("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(Ce("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(Ce("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){i=!1;for(var o in e.drm.advanced){var s=e.drm.advanced[o];r=s.videoRobustness,s=s.audioRobustness,"videoRobustness"in e.drm.advanced[o]&&!Array.isArray(e.drm.advanced[o].videoRobustness)&&(e.drm.advanced[o].videoRobustness=[r],i=!0),"audioRobustness"in e.drm.advanced[o]&&!Array.isArray(e.drm.advanced[o].audioRobustness)&&(e.drm.advanced[o].audioRobustness=[s],i=!0)}i&&Ce("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"forceHTTP"in e.streaming&&(Ce("streaming.forceHTTP configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTP=e.streaming.forceHTTP,delete e.streaming.forceHTTP),e.streaming&&"forceHTTPS"in e.streaming&&(Ce("streaming.forceHTTPS configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTPS=e.streaming.forceHTTPS,delete e.streaming.forceHTTPS),e.streaming&&"minBytesForProgressEvents"in e.streaming&&(Ce("streaming.minBytesForProgressEvents configuration","Please Use networking.minBytesForProgressEvents instead."),e.networking=e.networking||{},e.networking.minBytesForProgressEvents=e.streaming.minBytesForProgressEvents,delete e.streaming.minBytesForProgressEvents),o=Ki(this.g,e,gi(this)),Yv(this,n),o},f.zj=function(e){this.dg=e};function Yv(e,t){if(e.Ee=new gd(e.g,e.za,e.F),e.I){var n=ei(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(n.disableVideo=!0),e.I.configure(n)}if(e.F&&e.F.configure(e.g.drm),e.l){e.l.configure(e.g.streaming);try{e.m!=ii&&Xg(e.Ee,e.i)&&an(e)}catch(r){Ka(e,r)}e.o&&wr(e),n=e.l.o,!n||n.allowedByApplication&&n.allowedByKeySystem||Sr(e)}if(e.N&&e.N.configure(e.g.networking),e.H&&(e.H.configure(e.g.mediaSource),e.H.Ea=e.g.manifest.segmentRelativeVttTiming),e.u&&ml(e),e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),cy(e)),e.R&&Xv(e),e.Ta&&(e.g.streaming.rebufferingGoal?e.Ta.Da(.25):e.Ta.stop()),e.i&&Cf(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.C&&e.C.configure(e.g.ads),e.K&&e.K.configure(e.g.cmcd),e.wa&&e.wa.configure(e.g.cmsd),e.Ea&&e.Ea.configure(e.g.queue),e.m==jt&&e.J.getConfiguration){n=e.J.getConfiguration();var i=!1;t.preferredVideoHdrLevel!=e.g.preferredVideoHdrLevel&&n.hdrLevel!=e.g.preferredVideoHdrLevel&&(n.hdrLevel=e.g.preferredVideoHdrLevel,i=!0),t.preferredVideoLayout!=e.g.preferredVideoLayout&&n.videoLayout!=e.g.preferredVideoLayout&&(n.videoLayout=e.g.preferredVideoLayout,i=!0),t.preferSpatialAudio!=e.g.preferSpatialAudio&&n.spatialAudio!=e.g.preferSpatialAudio&&(n.spatialAudio=e.g.preferSpatialAudio,i=!0),t.preferredVideoRole!=e.g.preferredVideoRole&&n.videoRole!=e.g.preferredVideoRole&&(n.videoRole=e.g.preferredVideoRole,i=!0),i&&(e.J.configure(n),Sr(e))}}f.getConfiguration=function(){var e=gi(this);return Ki(e,this.g,gi(this)),e},f.Jj=function(){return this.dg},f.li=function(){var e=gi(this);return Ki(e,this.g,gi(this)),iv(this.g,gi(this))},f.gi=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Ra().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},f.Pi=function(){var e=this.getConfiguration(),t;for(t in this.g)delete this.g[t];Ki(this.g,gi(this),gi(this)),Yv(this,e)},f.ae=function(){return this.m},f.ji=function(){return this.i?this.i.type:null},f.bf=function(){return this.h},f.Yb=function(){return this.N},f.rd=function(){return this.X},f.ei=function(){return this.C?this.C:null},f.ni=function(){return this.Ea?this.Ea:null},f.W=function(){return this.i&&!this.xa()?this.i.presentationTimeline.W():this.h&&(this.h.src||this.xa())?this.h.duration==1/0:!1},f.Vc=function(){return this.i?this.i.presentationTimeline.Vc():!1},f.nk=function(){if(this.i&&!this.xa()){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&(this.h.src||this.xa())?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},f.ui=function(){if(this.i&&!this.xa()){var e=this.i.variants;return e.length?(e=e[0],e.audio||!e.video?!1:!e.video.codecs.includes(",")):!1}return this.h&&(this.h.src||this.xa())&&this.h.audioTracks?this.h.audioTracks.length==0:!1},f.Ra=function(){if(this.i&&!this.xa()){if(!this.Ua&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.$b(),end:e.Gb()}}if(this.h&&(this.h.src||this.xa())&&(e=this.h.seekable)&&e.length){var t=this.g?this.g.playRangeStart:0;t=Math.max(e.start(0),t);var n=this.g?this.g.playRangeEnd:1/0;return e=Math.min(e.end(e.length-1),n),{start:t,end:e}}return{start:0,end:0}},f.jk=function(){this.W()&&(this.h.currentTime=this.Ra().end)},f.pk=function(){return this.Ua},f.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},f.drmInfo=function(){return this.F?this.F.g:null},f.$d=function(){return this.F?this.F.$d():1/0},f.Kg=function(){return this.F?this.F.Kg():[]},f.$e=function(){return this.F?this.F.$e():{}},f.Rg=function(){return this.R?this.R.g==Wr:!!this.X},f.Ob=function(){return this.h?this.M?this.M.i:1:0},f.Lh=function(e){this.m==jt&&this.l&&$m(this.l,e)},f.xe=function(e,t){t=t===void 0?!0:t,e==0?Ee("A trick play rate of 0 is unsupported!"):(this.M.set(e),this.m==jt&&(this.o.playbackRateChanged(e),this.Lh(t&&e!=1)),ny(this,e))},f.Td=function(){var e=this.M.Tc();this.m==Tn&&this.M.set(e),this.m==jt&&(this.M.set(e),this.o.playbackRateChanged(e),this.Lh(!1)),this.fc.Qa()},f.sc=function(){if(this.i&&!this.xa()){for(var e=this.l?this.l.o:null,t=[],n=0,i=m(this.i.variants),r=i.next();!r.done;r=i.next())if(r=r.value,Oo(r)){var a=qr(r);a.active=r==e,a.active||n==1||e==null||r.video!=e.video||r.audio!=e.audio||(a.active=!0),a.active&&n++,t.push(a)}return t}if(this.h&&this.h.audioTracks){var o=ay(this);return e=Array.from(this.h.audioTracks),e.length?e.map(function(s){return vu(s,o)}):o?[vu(null,o)]:[]}return[]},f.Lc=function(){if(this.i){if(this.xa())return[];for(var e=this.l?this.l.B:null,t=[],n=m(this.i.textStreams),i=n.next();!i.done;i=n.next()){i=i.value;var r=Kr(i);r.active=i==e,t.push(r)}return t}return this.h&&this.h.src&&this.h.textTracks?vl(this).map(function(a){return pg(a)}):[]},f.Oj=function(){var e=this.Ke;return this.i&&(e=this.i.imageStreams),e.map(function(t){return ad(t)})},f.Cj=function(e){var t=this,n,i;return R(function(r){return r.g==1?T(r,$v(t,e),2):(n=r.h,n?(i=[],n.segmentIndex.Fb(function(a){var o=Jv(a.tilesLayout||n.tilesLayout);if(o)for(var s=o.rows*o.columns,u=(a.j-a.startTime)/s,l=0;l<s;l++){var c=Qv(a,n,a.startTime+l*u,o);if(!c)break;i.push(c)}}),n.closeSegmentIndex&&n.closeSegmentIndex(),r.return(i)):r.return(null))})};function Jv(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}f.dk=function(e,t){var n=this,i,r,a,o,s,u;return R(function(l){return l.g==1?T(l,$v(n,e),2):(i=l.h,!i||(i.closeSegmentIndex&&(n.zc.has(i)||(r=new Ae(function(){i.closeSegmentIndex(),n.zc.delete(i)}),n.zc.set(i,r)),a=n.zc.get(i),a.ka(5)),o=i.segmentIndex.find(t),o==null)?l.return(null):(s=i.segmentIndex.get(o),(u=Jv(s.tilesLayout||i.tilesLayout))?l.return(Qv(s,i,t,u)):l.return(null)))})};function $v(e,t){var n,i;return R(function(r){return r.g==1?e.m!=jt&&e.m!=Tn||(n=e.Ke,e.i&&(n=e.i.imageStreams),i=n[0],!i)?r.return(null):(t!=null&&(i=n.find(function(a){return a.id==t})),i?i.segmentIndex?r.A(2):T(r,i.createSegmentIndex(),2):r.return(null)):r.return(i)})}function Qv(e,t,n,i){var r=t.width||0,a=t.height||0,o=r/i.columns,s=a/i.rows,u=i.columns*i.rows,l=e.j-e.startTime;l=e.B||l/u;var c=e.startTime,d=0,h=0;return u>1&&(h=Math.floor((n-e.startTime)/l+1e-4),c=e.startTime+h*l,d=h%i.columns*o,h=Math.floor(h/i.columns)*s),c>=e.endTime||wf(c,e.endTime,1e-4)?null:(i=!1,(n=e.thumbnailSprite)&&(i=!0,s=n.height,d=n.positionX,h=n.positionY,o=n.width),{segment:e,imageHeight:a,imageWidth:r,height:s,positionX:d,positionY:h,startTime:c,duration:l,uris:e.P(),startByte:e.Kc(),endByte:e.Ic(),width:o,sprite:i,mimeType:e.mimeType||t.mimeType,codecs:e.codecs||t.codecs})}f.qh=function(e){function t(){var i=n.i.textStreams.find(function(r){return r.id==e.id});i&&i!=n.l.B&&(tf(n.B.h,i,!1),qu(n.l,i),Wi(n),cs(n),n.Ld=i.language)}var n=this;this.i&&this.G&&(t(),!this.xa())||function(){if(n.h&&n.h.textTracks){var i=vl(n),r=i.find(function(s){return mu(s)===e.id});if(r){if(n.u instanceof Tt){i=m(i);for(var a=i.next();!a.done;a=i.next()){a=a.value;var o=a===r?n.aa?"showing":"hidden":"disabled";a.mode!==o&&(a.mode=o)}}else i=i.find(function(s){return s.mode!=="disabled"}),i!==r&&(i&&(i.mode="disabled",n.j.Ma(i,"cuechange"),n.u.remove(0,1/0)),r&&Zv(n,r));Wi(n),cs(n)}}}()};function Zv(e,t){e.j.D(t,"cuechange",function(){e.u.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));var n={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},i=[],r=Array.from(t.activeCues||[]);r=m(r);for(var a=r.next();!a.done;a=r.next()){if(a=a.value,a.endTime===1/0||a.endTime<a.startTime)a=null;else{var o=new Qe(a.startTime,a.endTime,a.text);o.line=typeof a.line=="number"?a.line:null,a.lineAlign&&(o.lineAlign=a.lineAlign),o.lineInterpretation=a.snapToLines?Eo:1,o.position=typeof a.position=="number"?a.position:null,a.positionAlign&&(o.positionAlign=a.positionAlign),o.size=a.size,o.textAlign=a.align,a.vertical==="lr"?o.writingMode="vertical-lr":a.vertical==="rl"&&(o.writingMode="vertical-rl"),a.region&&(o.region.id=a.region.id,o.region.height=a.region.lines,o.region.heightUnits=2,o.region.regionAnchorX=a.region.regionAnchorX,o.region.regionAnchorY=a.region.regionAnchorY,o.region.scroll=a.region.scroll,o.region.viewportAnchorX=a.region.viewportAnchorX,o.region.viewportAnchorY=a.region.viewportAnchorY,o.region.viewportAnchorUnits=vn,o.region.width=a.region.width,o.region.widthUnits=vn),uu(o),a=o}a&&((o=e.g.mediaSource.modifyCueCallback)&&o(a,null,n),i.push(a))}e.u.append(i)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}f.Jf=function(e,t,n){function i(){var a=r.i.variants.find(function(s){return s.id==e.id});if(a&&Oo(a)){var o=r.l.o;r.g.abr.enabled&&(o.video!=a.video||o.audio&&a.audio&&o.audio.language==a.audio.language&&o.audio.channelsCount==a.audio.channelsCount&&o.audio.label==a.audio.label)&&Ee("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),r.xa()?ls(r,a,!1,!1,0):ls(r,a,!1,t||!1,n||0),r.J.configure({language:a.language,role:a.audio&&a.audio.roles&&a.audio.roles[0]||"",videoRole:a.video&&a.video.roles&&a.video.roles[0]||"",channelCount:a.audio&&a.audio.channelsCount?a.audio.channelsCount:0,hdrLevel:a.video&&a.video.hdr?a.video.hdr:"",spatialAudio:a.audio&&a.audio.spatialAudio?a.audio.spatialAudio:!1,videoLayout:a.video&&a.video.videoLayout?a.video.videoLayout:"",audioLabel:a.audio&&a.audio.label?a.audio.label:"",videoLabel:a.video&&a.video.label?a.video.label:"",codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:a.audio&&a.audio.codecs?a.audio.codecs:"",activeAudioCodec:o.audio&&o.audio.codecs?o.audio.codecs:"",activeAudioChannelCount:o.audio&&o.audio.channelsCount?o.audio.channelsCount:0,preferredAudioCodecs:r.g.preferredAudioCodecs,preferredAudioChannelCount:r.g.preferredAudioChannelCount}),wr(r)}}var r=this;t=t===void 0?!1:t,n=n===void 0?0:n,!(this.i&&this.G&&(i(),!this.xa()))&&function(){if(e.originalAudioId&&r.h&&r.h.audioTracks){var a=Array.from(r.h.audioTracks);a=m(a);for(var o=a.next();!o.done;o=a.next())if(o=o.value,mu(o)==e.id){If(r,o);break}}}()},f.Xk=function(e,t){function n(){var r=i.J.getConfiguration();r.audioCodec=e.codecs||"",r.audioLabel=e.label||"",r.channelCount=e.channelsCount||0,r.language=e.language,r.role=e.roles[0]||"",r.spatialAudio=e.spatialAudio;var a=i.l.o;(a=a&&a.audio)&&(r.activeAudioCodec=a.codecs||"",r.activeAudioChannelCount=a.channelsCount||0),i.J.configure(r),Sr(i,!0,t,!1,!1)}var i=this;t=t===void 0?0:t,!(this.i&&this.G&&(n(),!this.xa()))&&function(){if(i.h&&i.h.audioTracks){var r=Ue(e.language),a=Array.from(i.h.audioTracks),o=null;a=m(a);for(var s=a.next();!s.done;s=a.next()){s=s.value;var u=s.language||"und";if(s.label==e.label&&Ue(u)==r&&s.kind==e.roles[0]){o=s;break}}o&&If(i,o)}}()},f.getAudioTracks=function(){if(this.i&&!this.xa()){var e=this.sc();if(!e.length)return[];var t=e.find(function(a){return a.active});if(!t)return[];var n=e;if(this.m!=jt||this.xa()||(n=e.filter(function(a){return a.originalVideoId===t.originalVideoId&&(a.audioCodec||ji.includes(a.audioMimeType||""))})),!n.length)return[];e=new Map,n=m(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.originalAudioId;r||i.audioId==null||(r=String(i.audioId)),!r&&i.codecs.includes(",")&&i.audioCodec&&(r="muxed-in-video"),r&&(r+=[i.language,i.label,i.channelsCount,i.spatialAudio,i.audioCodec||""].join("_"),e.set(r,{active:i.active,language:i.language,label:i.label,mimeType:i.audioMimeType,codecs:i.audioCodec,primary:i.primary,roles:i.audioRoles||[],accessibilityPurpose:i.accessibilityPurpose,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,originalLanguage:i.originalLanguage}))}return Array.from(e.values())}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(a){var o=a.language;return o={active:a.enabled,language:Ue(o||"und"),label:a.label,mimeType:null,codecs:null,primary:a.kind=="main",roles:[],accessibilityPurpose:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,originalLanguage:o},a.kind&&(a.kind=="description"&&(o.accessibilityPurpose="visually impaired"),o.roles.push(a.kind)),a.configuration&&(a.configuration.codec&&(o.codecs=a.configuration.codec),a.configuration.sampleRate&&(o.audioSamplingRate=a.configuration.sampleRate),a.configuration.numberOfChannels&&(o.channelsCount=a.configuration.numberOfChannels)),o}):[]},f.Zk=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?0:n;var i=this.sc();if(i.length){var r=i.find(function(o){return o.active});if(r){i=i.filter(function(o){return(o.videoBandwidth||o.bandwidth)==e.bandwidth&&o.width==e.width&&o.height==e.height&&o.frameRate==e.frameRate&&o.pixelAspectRatio==e.pixelAspectRatio&&o.hdr==e.hdr&&o.colorGamut==e.colorGamut&&o.videoLayout==e.videoLayout&&o.videoMimeType==e.mimeType&&o.videoCodec==e.codecs&&ir(o.videoRoles,e.roles)&&o.videoLabel==e.label});var a;i.length==1?a=i[0]:a=i.find(function(o){return o.audioId===r.audioId}),a||(a=i.find(function(o){return o.language==r.language&&o.label===r.label&&o.channelsCount===r.channelsCount&&o.spatialAudio===r.spatialAudio&&o.audioMimeType===r.audioMimeType&&Ht(o.audioCodec||"")===Ht(r.audioCodec||"")&&ir(o.audioRoles,r.audioRoles)})),a&&!a.active&&this.Jf(a,t,n)}}},f.getVideoTracks=function(){if(this.m==Tn||this.xa())return[];var e=this.sc();if(!e.length)return[];var t=e.find(function(a){return a.active});if(!t)return[];var n=e;if(this.ui()||(n=e.filter(function(a){return a.videoCodec&&a.audioGroupId===t.audioGroupId&&a.originalAudioId===t.originalAudioId?a.audioId===t.audioId?!0:a.language===t.language&&a.label===t.label&&a.channelsCount===t.channelsCount&&a.spatialAudio===t.spatialAudio&&a.audioMimeType===t.audioMimeType&&Ht(a.audioCodec||"")===Ht(t.audioCodec||"")&&ir(a.audioRoles,t.audioRoles):!1})),!n.length)return[];e=new Map,n=m(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.originalVideoId;r||i.videoId==null||(r=String(i.videoId)),r&&e.set(r,{active:i.active,bandwidth:i.videoBandwidth||i.bandwidth,width:i.width,height:i.height,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,colorGamut:i.colorGamut,videoLayout:i.videoLayout,mimeType:i.videoMimeType,codecs:i.videoCodec,roles:i.videoRoles||[],label:i.videoLabel})}return Array.from(e.values())},f.Ej=function(){return hy(this.sc())},f.bk=function(){return hy(this.Lc())},f.Dj=function(){return Array.from(fy(this.sc()))},f.$j=function(){return Array.from(fy(this.Lc()))},f.Ui=function(e,t,n,i,r,a,o){function s(){function l(g,y){return g.video||y.video?g.video&&y.video?Math.abs((g.video.height||0)-(y.video.height||0))+Math.abs((g.video.width||0)-(y.video.width||0)):1/0:0}var c=u.l.o;u.J=u.g.adaptationSetCriteriaFactory(),u.J.configure({language:e,role:t||"",videoRole:c.video&&c.video.roles&&c.video.roles[0]||"",channelCount:n||0,hdrLevel:"",spatialAudio:a||!1,videoLayout:"",audioLabel:o||"",videoLabel:"",codecSwitchingStrategy:u.g.mediaSource.codecSwitchingStrategy,audioCodec:r||"",activeAudioCodec:c.audio&&c.audio.codecs?c.audio.codecs:"",activeAudioChannelCount:c.audio&&c.audio.channelsCount?c.audio.channelsCount:0,preferredAudioCodecs:u.g.preferredAudioCodecs,preferredAudioChannelCount:u.g.preferredAudioChannelCount});var d=u.J.create(u.i.variants),h=null;d=m(d.values());for(var p=d.next();!p.done;p=d.next())p=p.value,Oo(p)&&(!h||l(h,c)>l(p,c))&&(h=p);h!=c&&(h?(c=qr(h),u.Jf(c,!0,i||0)):Sr(u))}var u=this;n=n===void 0?0:n,i=i===void 0?0:i,r=r===void 0?"":r,a=a===void 0?!1:a,o=o===void 0?"":o,!(this.i&&this.G&&(s(),!this.xa()))&&function(){if(u.h&&u.h.audioTracks){var l=Ta(u.sc(),e,t||"",!1)[0];l&&u.Jf(l)}}()},f.ph=function(e,t,n){function i(){r.Ld=e,r.Pd=t||"",r.Od=n||!1;var a=Ta(r.i.textStreams,r.Ld,r.Pd,r.Od)[0]||null;a&&a!=r.l.B&&(tf(r.B.h,a,!1),r.g.streaming.alwaysStreamText||r.Sg())&&(qu(r.l,a),Wi(r),cs(r))}var r=this;n=n===void 0?!1:n,!(this.i&&this.G&&(i(),!this.xa()))&&function(){var a=Ta(r.Lc(),e,t||"",n||!1)[0];a&&r.qh(a)}()},f.Yk=function(e,t,n){function i(){for(var a=null,o=m(r.i.variants),s=o.next();!s.done;s=o.next())if(s=s.value,s.audio.label==e){a=s;break}a!=null&&(r.J=r.g.adaptationSetCriteriaFactory(),r.J.configure({language:a.language,role:"",videoRole:"",channelCount:0,hdrLevel:"",spatialAudio:!1,videoLayout:"",videoLabel:"",audioLabel:e,codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:r.g.preferredAudioCodecs,preferredAudioChannelCount:r.g.preferredAudioChannelCount}),Sr(r,t,n))}var r=this;t=t===void 0?!0:t,n=n===void 0?0:n,!(this.i&&this.G&&(i(),!this.xa()))&&function(){if(r.h&&r.h.audioTracks){var a=Array.from(r.h.audioTracks),o=null;a=m(a);for(var s=a.next();!s.done;s=a.next())s=s.value,s.label==e&&(o=s);o&&If(r,o)}}()},f.Sg=function(){var e=this.aa;return this.u?this.u.isTextVisible():e},f.Ij=function(){return this.yb.map(function(e){return Kr(e)})},f.Gj=function(e){if(Ce("getChapters","Please use an getChaptersAsync."),!this.yb.length)return[];var t=Ue(e);if(e=this.yb.filter(function(a){return Ue(a.language)==t}),!e.length)return[];var n=[],i=new Set;e=m(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.segmentIndex&&r.segmentIndex.Fb(function(a){var o=a.P()[0],s=a.startTime+"-"+a.endTime+"-"+o;a={id:s,title:o,startTime:a.startTime,endTime:a.endTime},i.has(s)||(n.push(a),i.add(s))});return n},f.Hj=function(e){var t=this,n,i,r,a,o,s,u;return R(function(l){switch(l.g){case 1:if(!t.yb.length)return l.return([]);if(n=Ue(e),i=t.yb.filter(function(c){return Ue(c.language)==n}),!i.length)return l.return([]);r=[],a=new Set,o=m(i),s=o.next();case 2:if(s.done){l.A(4);break}if(u=s.value,u.segmentIndex){l.A(5);break}return T(l,u.createSegmentIndex(),5);case 5:u.segmentIndex.Fb(function(c){var d=c.P()[0],h=c.startTime+"-"+c.endTime+"-"+d;c={id:h,title:d,startTime:c.startTime,endTime:c.endTime},a.has(h)||(r.push(c),a.add(h))}),s=o.next(),l.A(2);break;case 4:return l.return(r)}})};function vl(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function jA(e){return Array.from(e.h.textTracks).find(function(t){return t.label=="Shaka Player TextTrack"})}function UA(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}f.xh=function(e){e=!!e,this.aa!=e&&(this.aa=e,this.m==jt?(this.u.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.l.B||(e=Ta(this.i.textStreams,this.Ld,this.Pd,this.Od),e.length>0&&(qu(this.l,e[0]),Wi(this),cs(this))):cx(this.l))):this.h&&this.h.src&&this.h.textTracks&&this.u.setTextVisibility(e),ly(this))},f.Uj=function(){if(this.G)var e=this.G.Rd();else{if(this.O==null)return new Date;if(this.O instanceof Date)return this.O;e=this.O}if(this.i&&!this.xa()){var t=this.i.presentationTimeline;return new Date(((t.m||t.i)+e)*1e3)}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+e*1e3)):null},f.mi=function(){if(this.i&&!this.xa()){var e=this.i.presentationTimeline;return e=e.m||e.i,e===null?null:new Date(e*1e3)}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},f.df=function(){return this.W()&&this.i?this.i.presentationTimeline.df():null},f.Hc=function(){if(this.m==jt)return this.H.Hc();var e={total:[],audio:[],video:[],text:[]};return this.m==Tn&&(e.total=Gi(this.h.buffered)),e};function ey(e){if(!e.h||!e.h.currentTime)return null;var t=e.mi();return t?Math.floor(Date.now()-(t.getTime()+e.h.currentTime*1e3)):null}f.getBandwidthEstimate=function(){return this.o?this.o.getBandwidthEstimate():NaN},f.getStats=function(){if(this.m!=jt&&this.m!=Tn)return{width:NaN,height:NaN,currentCodecs:"",streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};kf(this);var e=this.h,t=e.currentTime/e.duration;if(isNaN(t)||this.W()||jx(this.B,Math.round(100*t)),this.G&&(this.B.T=this.G.Mh(),this.B.V=this.G.Oh()),e.getVideoPlaybackQuality&&(t=e.getVideoPlaybackQuality(),_x(this.B,Number(t.droppedVideoFrames),Number(t.totalVideoFrames)),this.B.N=Number(t.corruptedVideoFrames)),this.B.o=this.F?qS(this.F):NaN,sv(this.B,e.videoWidth||NaN,e.videoHeight||NaN),this.B.l="",this.W()&&(e=ey(this),e!=null&&(this.B.F=e/1e3)),t=this.sc().find(function(r){return r.active}),e=this.Lc().find(function(r){return r.active}),t){if(t.bandwidth){var n=this.M?this.M.i:1,i=n*t.bandwidth;e&&e.bandwidth&&(i+=n*e.bandwidth),this.B.B=i}t.width&&t.height&&sv(this.B,t.width||NaN,t.height||NaN),t=t.codecs,e&&(t+=","+(e.codecs||e.mimeType)),t&&(this.B.l=t)}return this.m!=jt||this.xa()||(this.i&&(this.B.I=this.i.periodCount,this.B.H=this.i.gapCount,this.i.presentationTimeline&&(this.B.K=this.i.presentationTimeline.h)),e=this.o.getBandwidthEstimate(),this.B.u=e),this.m==Tn&&uv(this.B,NaN),Ux(this.B)},f.Sd=function(e,t,n,i,r,a,o){o=o===void 0?!1:o;var s=this,u,l,c,d,h,p,g,y,b,A,x,k;return R(function(M){switch(M.g){case 1:if(s.m!=jt&&s.m!=Tn)throw new D(1,7,7004);if(n!="subtitles"&&n!="captions"&&Ee("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),i){M.A(2);break}return T(M,yl(s,e),3);case 3:i=M.h;case 2:if(u=[],s.C&&(u=s.C.getCuePoints()),s.m!=Tn){M.A(4);break}return l=Te(),o&&l.Ga()==="WEBKIT"&&(n="forced"),T(M,BA(s,e,t,n,i,a||"",u),5);case 5:if(c=M.h,c.track)return an(s),Wi(s),M.return(pg(c.track));throw new D(1,2,2012);case 4:if(d=vt,h=s.Ra(),p=h.end-h.start,s.i&&(p=s.i.presentationTimeline.getDuration()),p==1/0)throw new D(1,4,4033);if(!u.length){M.A(6);break}return T(M,bl(s,e),7);case 7:g=M.h,y=ty(s,g,i,u),b=new Blob([y],{type:"text/vtt"}),e=Rd(b),i="text/vtt";case 6:if(A={id:s.Fe++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Fu(0,p,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:a||null,type:d.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([dt(i||"",r||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},x=dt(A.mimeType,A.codecs),k=Po(x),!k)throw new D(2,2,2014,i);return s.i.textStreams.push(A),an(s),Wi(s),M.return(Kr(A))}})},f.Pe=function(e,t){var n=this,i,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M;return R(function(N){switch(N.g){case 1:if(n.m!=jt&&n.m!=Tn)throw new D(1,7,7004);if(t){N.A(2);break}return T(N,yl(n,e),3);case 3:t=N.h;case 2:if(t!="text/vtt")throw new D(1,2,2017,e);if(i=vt,r=n.Ra(),a=r.end-r.start,n.i&&(a=n.i.presentationTimeline.getDuration()),a==1/0)throw new D(1,4,4045);return T(N,bl(n,e),4);case 4:if(o=N.h,s=Co(t),!s)throw new D(2,2,2014,t);for(u=s(),l={periodStart:0,segmentStart:0,segmentEnd:a,vttOffset:0},c=pe(o),d=u.parseMedia(c,l,e,[]),h=[],p=m(d),g=p.next(),y={};!g.done;y={Wf:void 0,nd:void 0},g=p.next())y.nd=g.value,y.Wf=null,b=function(I){return function(){return I.Wf==null&&(I.Wf=Mt([e],[I.nd.payload])),I.Wf||[]}}(y),A=new se(y.nd.startTime,y.nd.endTime,b,0,null,null,0,0,1/0),y.nd.payload.includes("#xywh")&&(x=y.nd.payload.split("#xywh=")[1].split(","),x.length===4&&A.Mf({height:parseInt(x[3],10),positionX:parseInt(x[0],10),positionY:parseInt(x[1],10),width:parseInt(x[2],10)})),h.push(A);if(k=t,!h.length){N.A(5);break}return T(N,yl(n,h[0].P()[0]),6);case 6:k=N.h;case 5:return M={id:n.Fe++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Re(h),mimeType:k||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:i.Yf,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([dt(k||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},n.m==Tn?n.Ke.push(M):n.i.imageStreams.push(M),an(n),N.return(ad(M))}})},f.Oe=function(e,t,n){var i=this,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x;return R(function(k){switch(k.g){case 1:if(i.m!=jt&&i.m!=Tn)throw new D(1,7,7004);if(n){k.A(2);break}return T(k,yl(i,e),3);case 3:n=k.h;case 2:if(r=vt,a=i.Ra(),o=a.end-a.start,i.i&&(o=i.i.presentationTimeline.getDuration()),o==1/0)throw new D(1,4,4055);if(s=Co(n),!s)throw new D(2,2,2014,n);return T(k,bl(i,e),4);case 4:for(u=k.h,l=s(),c={periodStart:0,segmentStart:0,segmentEnd:o,vttOffset:0},d=pe(u),h=l.parseMedia(d,c,e,[]),p=[],g=m(h),y=g.next(),b={};!y.done;b={Xe:void 0},y=g.next())b.Xe=y.value,A=new se(b.Xe.startTime,b.Xe.endTime,function(M){return function(){return[M.Xe.payload]}}(b),0,null,null,0,0,1/0),p.push(A);return x={id:i.Fe++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Re(p),mimeType:"text/plain",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:null,type:r.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([dt("text/plain","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},i.yb.push(x),an(i),k.return(Kr(x))}})};function yl(e,t){var n;return R(function(i){switch(i.g){case 1:return he(i,2),T(i,ja(t,e.N,e.g.streaming.retryParameters),4);case 4:n=i.h,ye(i,3);break;case 2:oe(i);case 3:if(n)return i.return(n);throw new D(1,2,2011,t)}})}function BA(e,t,n,i,r,a,o){var s,u,l,c;return R(function(d){if(d.g==1)return r!="text/vtt"||o.length?T(d,bl(e,t),3):d.A(2);d.g!=2&&(s=d.h,u=ty(e,s,r,o),l=new Blob([u],{type:"text/vtt"}),t=Rd(l),r="text/vtt"),c=document.createElement("track");e:{var h=e.K,p=t;try{if(!h.g.enabled){var g=p;break e}var y=ff(h);y.ot=mf,y.su=!0;var b=ss(y);g=ol(p,b);break e}catch(A){nr("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",A),g=p;break e}g=void 0}return c.src=g,c.label=a,c.kind=i,c.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(c),e.cg.push(c),d.return(c)})}function bl(e,t){var n,i,r,a;return R(function(o){if(o.g==1){n=Bn,i=e.g.streaming.retryParameters,r=yt([t],i),r.method="GET";var s=e.K;try{s.g.enabled&&Ga(s,r,{ot:mf,su:!0})}catch(u){nr("CMCD_TEXT_ERROR","Could not generate text CMCD data.",u)}return T(o,e.N.request(n,r).promise,2)}return a=o.h,o.return(a.data)})}function ty(e,t,n,i){var r=Co(n);if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=pe(t),t=n.parseMedia(t,e,null,[]),tA(t,i);throw new D(2,2,2014,n)}f.hl=function(e,t){this.za.width=e,this.za.height=t},f.mh=function(e){if(this.m==jt){var t=this.l;if(e=e===void 0?.1:e,t.l.g)t=!1;else if(t.F)t=!1;else{for(var n=m(t.h.values()),i=n.next();!i.done;i=n.next())i=i.value,!i.vd||i.Ia||i.ob||(i.vd=!1,Gt(t,i,e));t=!0}}else t=!1;return t},f.Lg=function(){return Ee("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},f.Rj=function(){return this.Ac},f.Mj=function(){var e={video:null,audio:null,text:null};if(this.m!=jt)return e;var t=this.l.o,n=this.h.currentTime;t=m([t.video,t.audio,this.l.B]);for(var i=t.next();!i.done;i=t.next())if((i=i.value)&&i.segmentIndex){var r=i.segmentIndex.find(n);r=i.segmentIndex.get(r),r={codecs:r.codecs||i.codecs,mimeType:r.mimeType||i.mimeType,bandwidth:r.bandwidth||i.bandwidth},i.type=="video"?(r.width=i.width,r.height=i.height,e.video=r):i.type=="audio"?e.audio=r:i.type==xe&&(e.text=r)}return e};function gi(e){var t=Va();return t.streaming.failureCallback=function(n){if(e.W()){var i=null;n.code==1001||n.code==1002?(i=1,e.g.streaming.lowLatencyMode&&(i=.1)):n.code==1003&&(i=.1),i!=null&&(n.severity=1,e.mh(i))}},t.textDisplayFactory=function(){if(e.Be){var n=e.h;n=!(n.webkitDisplayingFullscreen||n.webkitPresentationMode&&n.webkitPresentationMode!="inline")}else n=!1;return n?new zt(e.h,e.Be):"track"in document.createElement("track")?new Tt(e):new Kt},t}f.$i=function(e){this.Be=e};function FA(e,t){for(var n=new Set,i=m(t.textStreams),r=i.next();!r.done;r=i.next())r=r.value,r.mimeType!="application/cea-608"&&r.mimeType!="application/cea-708"||n.add(r.originalId);for(i=m(t.variants),r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions){for(var a=m(r.closedCaptions.keys()),o=a.next();!o.done;o=a.next())if(o=o.value,!n.has(o)){var s=o.startsWith("CC")?"application/cea-608":"application/cea-708",u=new lt,l=r.closedCaptions.get(o);s={id:e.Fe++,originalId:o,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:u,mimeType:s,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l,originalLanguage:l,label:null,type:xe,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([dt(s,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},t.textStreams.push(s),n.add(o)}}}function VA(e,t){var n,i,r,a,o;return R(function(s){return s.g==1?(n=e.audio,i=e.video,r=function(u,l){var c,d,h;return R(function(p){return p.g==1?u?u.segmentIndex?p.A(2):T(p,u.createSegmentIndex(),2):p.return(null):(d=(c=u.segmentIndex.Xb(l))?c.next().value:null,d?(h=d.startTime,p.return(h)):p.return(null))})},T(s,r(n,t),2)):s.g!=3?(a=s.h,T(s,r(i,t),3)):(o=s.h,o!=null&&a!=null?s.return(Math.max(o,a)):o!=null?s.return(o):a!=null?s.return(a):s.return(t))})}function us(e){var t=e.Rg();if(e.B&&e.R&&e.G){if(e.g.streaming.rebufferingGoal==0){var n=e.M;n.j=!1,_d(n)}else n=e.M,n.j=t,_d(n);if(e.K&&(n=e.K,t||n.F||(n.F=!0),n.F&&t&&(n.I=!0,Wt(n,"ps",{dd:"r"})),n.J=t),kf(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Ne<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.V&&(e.V=Math.min(e.V+ ++e.Ne*r,n-i))}}t=new Map().set("buffering",t),e.dispatchEvent(Xe("buffering",t))}function ny(e,t){e.fc.Qa(),e.fc.D(e.h,"timeupdate",function(){var n=e.h.currentTime,i=e.Ra(),r=e.W(),a=r?e.g.streaming.safeSeekOffset:0;t>0?r&&t>1&&Math.floor(n)>=Math.floor(i.end)&&e.Td():Math.floor(n)<=Math.floor(i.start+a)&&e.Td()})}function kf(e){if(e.B&&e.R){var t=e.B.g,n="playing";e.R.g==Wr?n="buffering":e.ge()?n="ended":e.h.paused&&(n="paused");var i=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:i,duration:0},t=!0;else{var r=Date.now()/1e3;t.g.duration=r-t.g.timestamp,t.g.state==i?t=!1:(t.h.push(t.g),t.g={timestamp:r,state:i,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(Xe("statechanged",n)))}}function iy(e){var t=e.h.playbackRate,n=e.W();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var i=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,r=e.gi();r<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=i&&e.xe(i,!1):r==1&&t!==e.M.Tc()&&e.Td()}if(n&&(n=e.Ra(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start||e.h.paused))){i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var a=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var o=e.g.streaming.liveSync.targetLatency,s=o+i,u=Math.max(0,o-i),l=e.g.streaming.liveSync.maxPlaybackRate,c=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(o=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?s=e.i.serviceDescription.targetLatency+i:e.i.serviceDescription.maxLatency!=null&&(s=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?u=Math.max(0,e.i.serviceDescription.targetLatency-i):e.i.serviceDescription.minLatency!=null&&(u=e.i.serviceDescription.minLatency),l=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,c=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.V||typeof o!="number"||(e.V=o);var d=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;r&&e.ec&&e.V!==null&&typeof o=="number"&&e.Ne<d&&Date.now()-e.ec>a*1e3&&(a=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.V=Math.max(e.V-(o-a)/2,a+i),e.ec=Date.now()),r&&e.V!==null&&(s=e.V+i,u=e.V-i),o=n.end-e.h.currentTime,i=0,e.m==Tn&&(r=e.h.buffered,r.length>0&&(i=r.end(r.length-1),i=Math.max(l,i-n.end))),n=e.g.streaming.liveSync.panicMode,r=e.g.streaming.liveSync.panicThreshold*1e3,a=Date.now()-e.R.i,n&&!c&&(c=e.g.streaming.liveSync.minPlaybackRate),n&&c&&a<=r?t!=c&&e.xe(c,!1):s!=null&&l&&o-i>s?(t!=l&&e.xe(l,!1),e.ec=null):u!=null&&c&&o-i<u?(t!=c&&e.xe(c,!1),e.ec=null):t!==e.M.Tc()&&(e.Td(),e.ec=Date.now())}}function wl(e){if(e.h){var t=function(r,a){return(wf(r,a,.01)||a>r)&&e.ag<r?(e.ag=r,!0):!1},n=e.Ra();if(n=n.end-n.start,n=n>0?e.h.currentTime/n:0,!isNaN(n)){if(n*=100,t(0,n))var i=Xe("started");else t(25,n)?i=Xe("firstquartile"):t(50,n)?i=Xe("midpoint"):t(75,n)?i=Xe("thirdquartile"):((t(100,n)||n>100)&&(i=Xe("complete")),e.g&&e.g.playRangeEnd!=1/0&&e.ge()&&e.h.pause());i&&e.dispatchEvent(i)}}}function wr(e){try{Jg(e.Ee,e.i)}catch(n){return Ka(e,n),!1}var t=yu(e.i.variants);return t=e.J.create(t),e=e.o.setVariants(Array.from(t.values())),typeof e=="boolean"?e:!0}function ry(e,t){if(t=t===void 0?!1:t,wr(e)){if(!e.g.abr.enabled){var n=e.J;if(typeof n.getLastAdaptationSet!="function"&&(Ce("AdaptationSetCriteria w/o getLastAdaptationSet","Please use an AdaptationSetCriteria with getLastAdaptationSet."),n.getLastAdaptationSet=function(){return null}),(n=n.getLastAdaptationSet())&&(n=Array.from(n.values()),n.length)){var i=e.l.o;if(i&&i.video&&(n=n.find(function(r){return r.video==i.video})))return n}}return e.o.chooseVariant(t)}return null}function Sr(e,t,n,i,r){t=t===void 0?!0:t,n=n===void 0?0:n,i=i===void 0?!1:i,r=r===void 0?!0:r;var a=ry(e);a&&ls(e,a,r,t,n,i)}function ls(e,t,n,i,r,a){a=a===void 0?!1:a;var o=e.l.o;if(t==o)i&&Qm(e.l,t,i,r,!0);else{var s=e.B.h;if(s.h!=t&&(s.h=t,s.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),Qm(e.l,t,i,r,a,n),i=null,o&&(i=qr(o)),o=qr(t),o.active=!0,e.T&&(r=e.T,t=t.video)){switch(t.dependencyStream&&(t=t.dependencyStream),a=0,s=-1,t.mimeType){case"video/webm":a=1;break;case"video/mp4":a=2}switch(e.ji()){case"DASH":s=1;break;case"HLS":s=0}r.g&&(r.g.setLevelSwitching(t.id,!0),r.g.setContainerFormat(a),r.j||r.g.setStreamingFormat(s))}n?(n=new Map().set("oldTrack",i).set("newTrack",o),n=Xe("adaptation",n),ta(e,n)):oy(e,i,o),sy(e,i,o)}}function If(e,t){var n=Array.from(e.h.audioTracks).find(function(r){return r.enabled});if(t.enabled=!0,n){t.id!==n.id&&(n.enabled=!1);var i=ay(e);n=vu(n,i),t=vu(t,i),oy(e,n,t),sy(e,n,t)}}function ay(e){return e.h&&e.h.videoTracks?Array.from(e.h.videoTracks).find(function(t){return t.selected}):null}function an(e){var t=Xe("trackschanged");ta(e,t),uy(e)}function oy(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),t=Xe("variantchanged",t),ta(e,t)}function sy(e,t,n){var i=!1;t&&t.audioId==n.audioId&&t.audioGroupId==n.audioGroupId||(i=!0),i&&uy(e)}function uy(e){var t=Xe("audiotrackschanged");ta(e,t)}function Wi(e){var t=Xe("textchanged");ta(e,t)}function ly(e){var t=Xe("texttrackvisibility");ta(e,t)}function cy(e){e.g.abr.enabled||Ef(e);var t=new Map().set("newStatus",e.g.abr.enabled);ta(e,Xe("abrstatuschanged",t))}function cs(e){var t=e.Lc().find(function(n){return n.active});t&&e.u&&e.u.setTextLanguage&&e.u.setTextLanguage(t.language)}function Ef(e,t){if(t=t===void 0?!0:t,e.m==jt){e.He.stop();for(var n=m(e.i.variants),i=n.next();!i.done;i=n.next())i.value.disabledUntilTime=0;t&&wr(e)}}f.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===ii||!navigator.onLine||t==0||!this.i)return!1;if(this.i.variants.some(function(s){var u=s[e.type];return u&&u.id!==e.id&&!s.disabledUntilTime?e.type=="audio"?e.language===u.language:!0:!1})){for(var n=!1,i=!1,r=m(this.i.variants),a=r.next();!a.done;a=r.next()){a=a.value;var o=a[e.type];o&&(o.id===e.id?(a.disabledUntilTime=Date.now()/1e3+t,n=!0):o.trickModeVideo&&o.trickModeVideo.id==e.id&&(i=!0))}return!n&&i?!1:(this.He.Da(1),t=this.Hc().video.reduce(function(s,u){return s+u.end-u.start},0),Sr(this,!1,t,!0,!1),!0)}return!1};function Ka(e,t){var n,i,r,a,o;return R(function(s){switch(s.g){case 1:if(e.m==ii)return s.return();if(t.severity===1&&e.B.M++,n=!0,!(e.Ua&&e.i&&e.l)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3024&&t.code!=3018){s.A(2);break}return i=Te(),i.Ga()==="WEBKIT"&&t.code==3016?s.return():(he(s,3),T(s,Ju(e.l),5));case 5:r=s.h,n=!r,r&&(a=Xe("mediasourcerecovered"),e.dispatchEvent(a)),ye(s,2);break;case 3:oe(s),n=!0;case 2:if(!n)return s.return();t.severity===2&&Ef(e,!1),o=Xe("error",new Map().set("detail",t)),e.dispatchEvent(o),o.defaultPrevented&&(t.handled=!0),X(s)}})}f.addFont=function(e,t){return kT(e,t)};function ds(e,t,n,i){i=i===void 0?e:i,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,timescale:n.timescale,eventElement:n.eventElement,eventNode:n.eventNode}),i.dispatchEvent(Xe(t,e))}function dy(e,t,n,i){i=i===void 0?!1:i,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(Xe(i?"audiotrackchanged":"mediaqualitychanged",t))}function Mf(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new D(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(t<0&&(t+=4294967296),t=t.toString(16)),new D(2,3,3016,n,t,e.h.error.message))}function HA(e,t){var n=Xe("keystatuschanged");e.dispatchEvent(n);var i=Object.keys(t);i.length==1&&i[0]==""&&(i=["00"],t={"00":t[""]});var r=i.length==1&&i[0]=="00";if(n=!1,i.length){i=e.keySystem();for(var a=Ia(e.g.drm.clearKeys),o=function(g,y){g.allowedByKeySystem=!0,y=m(y);for(var b=y.next();!b.done;b=y.next())b=b.value,((b=t[r?"00":b])||e.F.H)&&(g.allowedByKeySystem=g.allowedByKeySystem&&!!b&&!$g.includes(b))},s=m(e.i.variants),u=s.next();!u.done;u=s.next()){u=u.value;var l=MS(u);l=m(l);for(var c=l.next();!c.done;c=l.next()){c=c.value;var d=u.allowedByKeySystem;if(c.keyIds.size)if(c.drmInfos.length&&!a.size&&e.i.type=="HLS")for(var h=m(c.drmInfos),p=h.next();!p.done;p=h.next())p=p.value,p.keySystem==i&&(p.keyIds.size?o(u,p.keyIds):o(u,c.keyIds));else o(u,c.keyIds);d!=u.allowedByKeySystem&&(n=!0)}}}n&&(an(e),(n=e.l.o)&&!n.allowedByKeySystem?Sr(e):wr(e))}function Cf(e,t,n){t>0&&(e.W()||e.Zi(t)),t=e.getDuration(),n<t&&(e.W()||e.Ab(n))}function ta(e,t){R(function(n){if(n.g==1)return T(n,Promise.resolve(),2);e.m!=ii&&e.dispatchEvent(t),X(n)})}function fy(e){var t=new Set;e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Ue(n.language)):t.add("und");return t}function hy(e){for(var t=new Map,n=new Map,i=0;i<e.length;i++){var r=e[i],a="und",o=[];r.language&&(a=Ue(r.language)),r.type=="variant"?o=r.audioRoles:o=r.roles,o&&o.length||(o=[""]),t.has(a)||t.set(a,new Set),o=m(o);for(var s=o.next();!s.done;s=o.next())s=s.value,t.get(a).add(s),r.label&&(n.has(a)||n.set(a,new Map),n.get(a).set(s,r.label))}var u=[];return t.forEach(function(l,c){l=m(l);for(var d=l.next();!d.done;d=l.next()){d=d.value;var h=null;n.has(c)&&n.get(c).has(d)&&(h=n.get(c).get(d)),u.push({language:c,role:d,label:h})}}),u}f.xa=function(){return this.h&&this.h.remote?this.h.remote.state!="disconnected":!1},f.ge=function(){return!this.h||this.h.ended?!0:this.Ua&&!this.W()&&this.h.currentTime>=this.Ra().end},Y("shaka.Player",V),V.prototype.isEnded=V.prototype.ge,V.prototype.isRemotePlayback=V.prototype.xa,V.prototype.addFont=V.prototype.addFont,V.prototype.setVideoContainer=V.prototype.$i,V.prototype.getFetchedPlaybackInfo=V.prototype.Mj,V.prototype.getManifestParserFactory=V.prototype.Rj,V.prototype.getManifest=V.prototype.Lg,V.prototype.retryStreaming=V.prototype.mh,V.prototype.setMaxHardwareResolution=V.prototype.hl,V.prototype.addChaptersTrack=V.prototype.Oe,V.prototype.addThumbnailsTrack=V.prototype.Pe,V.prototype.addTextTrackAsync=V.prototype.Sd,V.prototype.getStats=V.prototype.getStats,V.prototype.getBufferedInfo=V.prototype.Hc,V.prototype.getSegmentAvailabilityDuration=V.prototype.df,V.prototype.getPresentationStartTimeAsDate=V.prototype.mi,V.prototype.getPlayheadTimeAsDate=V.prototype.Uj,V.prototype.setTextTrackVisibility=V.prototype.xh,V.prototype.getChaptersAsync=V.prototype.Hj,V.prototype.getChapters=V.prototype.Gj,V.prototype.getChaptersTracks=V.prototype.Ij,V.prototype.isTextTrackVisible=V.prototype.Sg,V.prototype.selectVariantsByLabel=V.prototype.Yk,V.prototype.selectTextLanguage=V.prototype.ph,V.prototype.selectAudioLanguage=V.prototype.Ui,V.prototype.getTextLanguages=V.prototype.$j,V.prototype.getAudioLanguages=V.prototype.Dj,V.prototype.getTextLanguagesAndRoles=V.prototype.bk,V.prototype.getAudioLanguagesAndRoles=V.prototype.Ej,V.prototype.getVideoTracks=V.prototype.getVideoTracks,V.prototype.selectVideoTrack=V.prototype.Zk,V.prototype.getAudioTracks=V.prototype.getAudioTracks,V.prototype.selectAudioTrack=V.prototype.Xk,V.prototype.selectVariantTrack=V.prototype.Jf,V.prototype.selectTextTrack=V.prototype.qh,V.prototype.getThumbnails=V.prototype.dk,V.prototype.getAllThumbnails=V.prototype.Cj,V.prototype.getImageTracks=V.prototype.Oj,V.prototype.getTextTracks=V.prototype.Lc,V.prototype.getVariantTracks=V.prototype.sc,V.prototype.cancelTrickPlay=V.prototype.Td,V.prototype.trickPlay=V.prototype.xe,V.prototype.useTrickPlayTrackIfAvailable=V.prototype.Lh,V.prototype.getPlaybackRate=V.prototype.Ob,V.prototype.isBuffering=V.prototype.Rg,V.prototype.getKeyStatuses=V.prototype.$e,V.prototype.getActiveSessionsMetadata=V.prototype.Kg,V.prototype.getExpiration=V.prototype.$d,V.prototype.drmInfo=V.prototype.drmInfo,V.prototype.keySystem=V.prototype.keySystem,V.prototype.isFullyLoaded=V.prototype.pk,V.prototype.goToLive=V.prototype.jk,V.prototype.seekRange=V.prototype.Ra,V.prototype.isVideoOnly=V.prototype.ui,V.prototype.isAudioOnly=V.prototype.nk,V.prototype.isInProgress=V.prototype.Vc,V.prototype.isLive=V.prototype.W,V.prototype.getQueueManager=V.prototype.ni,V.prototype.getAdManager=V.prototype.ei,V.prototype.getAssetUri=V.prototype.rd,V.prototype.getNetworkingEngine=V.prototype.Yb,V.prototype.getMediaElement=V.prototype.bf,V.prototype.getManifestType=V.prototype.ji,V.prototype.getLoadMode=V.prototype.ae,V.prototype.resetConfiguration=V.prototype.Pi,V.prototype.getBufferFullness=V.prototype.gi,V.prototype.getNonDefaultConfiguration=V.prototype.li,V.prototype.getConfigurationForLowLatency=V.prototype.Jj,V.prototype.getConfiguration=V.prototype.getConfiguration,V.prototype.configurationForLowLatency=V.prototype.zj,V.prototype.configure=V.prototype.configure,V.prototype.releaseAllMutexes=V.prototype.Pk,V.prototype.destroyAllPreloads=V.prototype.rg,V.prototype.preload=V.prototype.preload,V.prototype.detachAndSavePreload=V.prototype.ai,V.prototype.unloadAndSavePreload=V.prototype.kj,V.prototype.load=V.prototype.load,V.prototype.updateStartTime=V.prototype.rl,V.prototype.unload=V.prototype.Dc,V.prototype.detach=V.prototype.detach,V.prototype.attachCanvas=V.prototype.rj,V.prototype.attach=V.prototype.Vb,V.probeSupport=function(e){e=e===void 0?!0:e;var t,n,i,r,a,o,s;return R(function(u){switch(u.g){case 1:if(t={},!e){u.A(2);break}return T(u,YS(),3);case 3:t=u.h;case 2:return n=sS(),i=DT(),r=Te(),T(u,r.nc(),4);case 4:return a=u.h,o={manifest:n,media:i,drm:t,hardwareResolution:a},s=gy,s.forEach(function(l,c){o[c]=l()}),u.return(o)}})},V.isBrowserSupported=function(){return P.Promise||Ee("A Promise implementation or polyfill is required"),!(P.Promise&&P.Uint8Array&&Array.prototype.forEach)||(navigator.userAgent||"").includes("Trident/")?!1:(Te(),Ai()?!0:$r().canPlayType("application/x-mpegurl")!="")},V.setQueueManagerFactory=function(e){xl=e},V.setAdManagerFactory=function(e){Tl=e},V.registerSupportPlugin=Fv,V.prototype.destroy=V.prototype.destroy;var ii=0,Sl=1,jt=2,Tn=3;V.LoadMode={DESTROYED:ii,NOT_LOADED:Sl,MEDIA_SOURCE:jt,SRC_EQUALS:Tn},V.version="v4.16.14";var py=["4","16"];Ep=new function(e){this.g=e,this.i=Zw,this.h=eS}(new Nc(Number(py[0]),Number(py[1])));var gy=new Map,Tl=null,xl=null;function my(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function GA(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function ue(e,t,n){var i=this;this.g=e,this.h=t,this.m=n,this.i=!1,this.j=this.h.getVolume(),this.l=new _e,this.l.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){i.i=!0}),this.l.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){i.i=!1})}f=ue.prototype,f.needsSkipUI=function(){return!1},f.isClientRendering=function(){return!0},f.hasCustomClick=function(){return!0},f.isUsingAnotherMediaElement=function(){return!0},f.getDuration=function(){return this.g.getDuration()},f.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},f.getRemainingTime=function(){return this.h.getRemainingTime()},f.isPaused=function(){return this.i},f.isSkippable=function(){return this.g.getSkipTimeOffset()>=0},f.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},f.canSkipNow=function(){return this.h.getAdSkippableState()},f.skip=function(){return this.h.skip()},f.pause=function(){return this.h.pause()},f.play=function(){return this.h.resume()},f.getVolume=function(){return this.h.getVolume()},f.setVolume=function(e){return this.m.volume=e,this.h.setVolume(e)},f.isMuted=function(){return this.h.getVolume()==0},f.isLinear=function(){return this.g.isLinear()},f.resize=function(e,t){this.h.resize(e,t)},f.setMuted=function(e){(this.m.muted=e)?(this.j=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.j)},f.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},f.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},f.getTitle=function(){return this.g.getTitle()},f.getDescription=function(){return this.g.getDescription()},f.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},f.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},f.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},f.getVastAdId=function(){return""},f.getAdId=function(){return this.g.getAdId()},f.getCreativeAdId=function(){return this.g.getCreativeAdId()},f.getAdvertiserName=function(){return this.g.getAdvertiserName()},f.getMediaUrl=function(){return this.g.getMediaUrl()},f.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},f.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},f.release=function(){this.h=this.g=null},Y("shaka.ads.ClientSideAd",ue),ue.prototype.release=ue.prototype.release,ue.prototype.getPodIndex=ue.prototype.getPodIndex,ue.prototype.getTimeOffset=ue.prototype.getTimeOffset,ue.prototype.getMediaUrl=ue.prototype.getMediaUrl,ue.prototype.getAdvertiserName=ue.prototype.getAdvertiserName,ue.prototype.getCreativeAdId=ue.prototype.getCreativeAdId,ue.prototype.getAdId=ue.prototype.getAdId,ue.prototype.getVastAdId=ue.prototype.getVastAdId,ue.prototype.getVastMediaWidth=ue.prototype.getVastMediaWidth,ue.prototype.getVastMediaHeight=ue.prototype.getVastMediaHeight,ue.prototype.getVastMediaBitrate=ue.prototype.getVastMediaBitrate,ue.prototype.getDescription=ue.prototype.getDescription,ue.prototype.getTitle=ue.prototype.getTitle,ue.prototype.getPositionInSequence=ue.prototype.getPositionInSequence,ue.prototype.getSequenceLength=ue.prototype.getSequenceLength,ue.prototype.setMuted=ue.prototype.setMuted,ue.prototype.resize=ue.prototype.resize,ue.prototype.isLinear=ue.prototype.isLinear,ue.prototype.isMuted=ue.prototype.isMuted,ue.prototype.setVolume=ue.prototype.setVolume,ue.prototype.getVolume=ue.prototype.getVolume,ue.prototype.play=ue.prototype.play,ue.prototype.pause=ue.prototype.pause,ue.prototype.skip=ue.prototype.skip,ue.prototype.canSkipNow=ue.prototype.canSkipNow,ue.prototype.getTimeUntilSkippable=ue.prototype.getTimeUntilSkippable,ue.prototype.isSkippable=ue.prototype.isSkippable,ue.prototype.isPaused=ue.prototype.isPaused,ue.prototype.getRemainingTime=ue.prototype.getRemainingTime,ue.prototype.getMinSuggestedDuration=ue.prototype.getMinSuggestedDuration,ue.prototype.getDuration=ue.prototype.getDuration,ue.prototype.isUsingAnotherMediaElement=ue.prototype.isUsingAnotherMediaElement,ue.prototype.hasCustomClick=ue.prototype.hasCustomClick,ue.prototype.isClientRendering=ue.prototype.isClientRendering,ue.prototype.needsSkipUI=ue.prototype.needsSkipUI;function it(){}function vy(e,t){var n=[];e=m(Ve(e,"Ad"));for(var i=e.next();!i.done;i=e.next())if((i=tt(i.value,"InLine"))&&(i=tt(i,"Creatives"))){i=m(Ve(i,"Creative"));for(var r=i.next();!r.done;r=i.next()){r=r.value;var a=tt(r,"Linear");if(a&&qA(n,t,a),r=tt(r,"NonLinearAds")){r=Ve(r,"NonLinear"),r=m(r);for(var o=r.next();!o.done;o=r.next())e:{a=n;var s=t,u=o.value,l=tt(u,"StaticResource");if(l)o=l.attributes.creativeType;else{if(l=tt(u,"HTMLResource"),!l)break e;o="text/html"}if(l=rn(l)){o==="text/html"&&(l="data:text/html;charset=UTF-8,"+encodeURIComponent(l));var c=ge(u,"width",Lt)||ge(u,"expandedWidth",Lt),d=ge(u,"height",Lt)||ge(u,"expandedHeight",Lt);if(c||d){var h=null,p=tt(u,"NonLinearClickThrough");p&&(p=rn(p))&&(h=p),p=null,(u=u.attributes.minSuggestedDuration)&&(p=va(u)),u=0,s!=null&&(u=s),a.push({id:null,groupId:null,startTime:u,endTime:null,uri:l,mimeType:o,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:p,once:!0,pre:s==null,post:s==1/0,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:c||0,y:d||0}},displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:h})}}}}}}return n}function qA(e,t,n){var i=0;t!=null&&(i=t);var r=null;n.attributes.skipoffset&&(r=va(n.attributes.skipoffset),isNaN(r)&&(r=null));var a=tt(n,"MediaFiles");if(a){var o=null;for((n=tt(n,"VideoClicks"))&&(n=tt(n,"ClickThrough"))&&(n=rn(n))&&(o=n),a=n=Ve(a,"MediaFile"),n=n.filter(function(u){return u.attributes.delivery=="streaming"}),n.length&&(a=n),a=a.sort(function(u,l){return(parseInt(l.attributes.height,10)||0)-(parseInt(u.attributes.height,10)||0)}),a=m(a),n=a.next();!n.done;n=a.next())if(n=n.value,!n.attributes.apiFramework){var s=rn(n);if(s){e.push({id:null,groupId:null,startTime:i,endTime:null,uri:s,mimeType:n.attributes.type||null,isSkippable:r!=null,skipOffset:r,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:t==null,post:t==1/0,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:o});break}}}}function KA(e){var t=[];e=m(Ve(e,"vmap:AdBreak"));for(var n=e.next();!n.done;n=e.next()){var i=n.value,r=i.attributes.timeOffset;r&&(n=null,r=="start"?n=null:r=="end"?n=1/0:n=va(r),(i=tt(i,"vmap:AdSource"))&&(i=tt(i,"vmap:AdTagURI"))&&(i=pt(i))&&t.push({time:n,uri:i}))}return t}Y("shaka.ads.Utils",it),it.ADS_LOADED="ads-loaded",it.AD_STARTED="ad-started",it.AD_FIRST_QUARTILE="ad-first-quartile",it.AD_MIDPOINT="ad-midpoint",it.AD_THIRD_QUARTILE="ad-third-quartile",it.AD_COMPLETE="ad-complete",it.AD_STOPPED="ad-stopped",it.AD_SKIPPED="ad-skipped",it.AD_VOLUME_CHANGED="ad-volume-changed",it.AD_MUTED="ad-muted",it.AD_PAUSED="ad-paused",it.AD_RESUMED="ad-resumed",it.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",it.CUEPOINTS_CHANGED="ad-cue-points-changed",it.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",it.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",it.AD_CLICKED="ad-clicked",it.AD_PROGRESS="ad-progress",it.AD_BUFFERING="ad-buffering",it.AD_IMPRESSION="ad-impression",it.AD_DURATION_CHANGED="ad-duration-changed",it.AD_CLOSED="ad-closed",it.AD_LOADED="ad-loaded",it.ALL_ADS_COMPLETED="all-ads-completed",it.AD_LINEAR_CHANGED="ad-linear-changed",it.AD_METADATA="ad-metadata",it.AD_RECOVERABLE_ERROR="ad-recoverable-error",it.AD_ERROR="ad-error",it.AD_BREAK_READY="ad-break-ready",it.AD_INTERACTION="ad-interaction",it.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",it.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",it.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function Al(e,t,n,i,r){var a=this;this.u=e,this.i=t,this.G=!1,this.B=this.o=null,this.H=NaN,this.l=r,this.j=null,this.h=new _e,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.F=new google.ima.AdDisplayContainer(this.u,this.i),this.F.initialize(),this.m=new google.ima.AdsLoader(this.F),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.16.14"),this.g=null,this.C=i||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(o){zA(a,o)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(o){yy(a,o)}),this.h.D(this.i,"ended",function(){a.m.contentComplete()}),this.h.ya(this.i,"play",function(){a.G=!0})}Al.prototype.configure=function(e){this.o=e},Al.prototype.stop=function(){this.g&&this.g.stop(),this.u&&qo(this.u)},Al.prototype.release=function(){this.stop(),this.B&&this.B.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.F.destroy()};function yy(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new Z("ad-error",t)),kl(e,null),e.l(new Z("ad-cue-points-changed",new Map().set("cuepoints",[])))}function zA(e,t){if(e.l(new Z("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.H))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.C),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.C);e.l(new Z("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var i=e.g.getCuePoints();if(i.length){t=[],i=m(i);for(var r=i.next();!r.done;r=i.next())t.push({start:r.value,end:null});e.l(new Z("ad-cue-points-changed",new Map().set("cuepoints",t)))}WA(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),"ResizeObserver"in P?(e.B=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),e.B.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),e.G||e.o.skipPlayDetection?e.g.start():e.h.ya(e.i,"play",function(){e.G=!0,e.g.start()})}catch{kl(e,null)}}function WA(e){function t(n,i){n=new Map().set("originalEvent",n),e.l(new Z(i,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){yy(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){by(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){by(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){kl(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed"),kl(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function by(e,t){var n=t.getAd();n?(e.j=new ue(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new Z("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new Z("ad-started",t)),e.j.isLinear()&&(e.u.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.j=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):Ee("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function kl(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new Z("ad-content-resume-requested")),e.l(new Z("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.u.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function le(e,t,n,i,r,a){this.g=e,this.h=t,this.j=(this.i=t.isSkippable)?t.skipOffset||0:t.skipOffset,this.l=t.skipFor,this.B=n,this.o=i,this.m=r,this.u=a,this.C=t.overlay}f=le.prototype,f.needsSkipUI=function(){return!0},f.isClientRendering=function(){return!0},f.hasCustomClick=function(){return this.h.clickThroughUrl!=null},f.isUsingAnotherMediaElement=function(){return this.u},f.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},f.getMinSuggestedDuration=function(){return this.getDuration()},f.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},f.isPaused=function(){return this.g.paused},f.isSkippable=function(){return this.i&&this.l!=null?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.i},f.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},f.canSkipNow=function(){return this.i&&this.getTimeUntilSkippable()==0},f.skip=function(){this.canSkipNow()&&this.B()},f.pause=function(){return this.g.pause()},f.play=function(){return this.g.play()},f.getVolume=function(){return this.g.volume},f.setVolume=function(e){this.g.volume=e},f.isMuted=function(){return this.g.muted},f.isLinear=function(){return this.C==null},f.resize=function(){},f.setMuted=function(e){this.g.muted=e},f.getSequenceLength=function(){return this.o},f.getPositionInSequence=function(){return this.m},f.getTitle=function(){return""},f.getDescription=function(){return""},f.getVastMediaBitrate=function(){return 0},f.getVastMediaHeight=function(){return 0},f.getVastMediaWidth=function(){return 0},f.getVastAdId=function(){return""},f.getAdId=function(){return this.h.id||""},f.getCreativeAdId=function(){return""},f.getAdvertiserName=function(){return""},f.getMediaUrl=function(){return this.h.uri},f.getTimeOffset=function(){return this.h.pre?0:this.h.post?-1:this.h.startTime},f.getPodIndex=function(){return 0},f.release=function(){this.g=null},Y("shaka.ads.InterstitialAd",le),le.prototype.release=le.prototype.release,le.prototype.getPodIndex=le.prototype.getPodIndex,le.prototype.getTimeOffset=le.prototype.getTimeOffset,le.prototype.getMediaUrl=le.prototype.getMediaUrl,le.prototype.getAdvertiserName=le.prototype.getAdvertiserName,le.prototype.getCreativeAdId=le.prototype.getCreativeAdId,le.prototype.getAdId=le.prototype.getAdId,le.prototype.getVastAdId=le.prototype.getVastAdId,le.prototype.getVastMediaWidth=le.prototype.getVastMediaWidth,le.prototype.getVastMediaHeight=le.prototype.getVastMediaHeight,le.prototype.getVastMediaBitrate=le.prototype.getVastMediaBitrate,le.prototype.getDescription=le.prototype.getDescription,le.prototype.getTitle=le.prototype.getTitle,le.prototype.getPositionInSequence=le.prototype.getPositionInSequence,le.prototype.getSequenceLength=le.prototype.getSequenceLength,le.prototype.setMuted=le.prototype.setMuted,le.prototype.resize=le.prototype.resize,le.prototype.isLinear=le.prototype.isLinear,le.prototype.isMuted=le.prototype.isMuted,le.prototype.setVolume=le.prototype.setVolume,le.prototype.getVolume=le.prototype.getVolume,le.prototype.play=le.prototype.play,le.prototype.pause=le.prototype.pause,le.prototype.skip=le.prototype.skip,le.prototype.canSkipNow=le.prototype.canSkipNow,le.prototype.getTimeUntilSkippable=le.prototype.getTimeUntilSkippable,le.prototype.isSkippable=le.prototype.isSkippable,le.prototype.isPaused=le.prototype.isPaused,le.prototype.getRemainingTime=le.prototype.getRemainingTime,le.prototype.getMinSuggestedDuration=le.prototype.getMinSuggestedDuration,le.prototype.getDuration=le.prototype.getDuration,le.prototype.isUsingAnotherMediaElement=le.prototype.isUsingAnotherMediaElement,le.prototype.hasCustomClick=le.prototype.hasCustomClick,le.prototype.isClientRendering=le.prototype.isClientRendering,le.prototype.needsSkipUI=le.prototype.needsSkipUI;function ce(e,t,n){this.g=e,this.j=t,this.h=n,this.i=e.overlay==null}f=ce.prototype,f.needsSkipUI=function(){return!0},f.isClientRendering=function(){return!0},f.hasCustomClick=function(){return this.g.clickThroughUrl!=null},f.isUsingAnotherMediaElement=function(){return!1},f.getDuration=function(){return-1},f.getMinSuggestedDuration=function(){return this.getDuration()},f.getRemainingTime=function(){return-1},f.isPaused=function(){return!1},f.isSkippable=function(){return!1},f.getTimeUntilSkippable=function(){return 0},f.canSkipNow=function(){return!1},f.skip=function(){},f.pause=function(){},f.play=function(){},f.getVolume=function(){return 1},f.setVolume=function(){},f.isMuted=function(){return!1},f.isLinear=function(){return this.i},f.resize=function(){},f.setMuted=function(){},f.getSequenceLength=function(){return this.j},f.getPositionInSequence=function(){return this.h},f.getTitle=function(){return""},f.getDescription=function(){return""},f.getVastMediaBitrate=function(){return 0},f.getVastMediaHeight=function(){return 0},f.getVastMediaWidth=function(){return 0},f.getVastAdId=function(){return""},f.getAdId=function(){return this.g.id||""},f.getCreativeAdId=function(){return""},f.getAdvertiserName=function(){return""},f.getMediaUrl=function(){return this.g.uri},f.getTimeOffset=function(){return this.g.pre?0:this.g.post?-1:this.g.startTime},f.getPodIndex=function(){return 0},f.release=function(){},Y("shaka.ads.InterstitialStaticAd",ce),ce.prototype.release=ce.prototype.release,ce.prototype.getPodIndex=ce.prototype.getPodIndex,ce.prototype.getTimeOffset=ce.prototype.getTimeOffset,ce.prototype.getMediaUrl=ce.prototype.getMediaUrl,ce.prototype.getAdvertiserName=ce.prototype.getAdvertiserName,ce.prototype.getCreativeAdId=ce.prototype.getCreativeAdId,ce.prototype.getAdId=ce.prototype.getAdId,ce.prototype.getVastAdId=ce.prototype.getVastAdId,ce.prototype.getVastMediaWidth=ce.prototype.getVastMediaWidth,ce.prototype.getVastMediaHeight=ce.prototype.getVastMediaHeight,ce.prototype.getVastMediaBitrate=ce.prototype.getVastMediaBitrate,ce.prototype.getDescription=ce.prototype.getDescription,ce.prototype.getTitle=ce.prototype.getTitle,ce.prototype.getPositionInSequence=ce.prototype.getPositionInSequence,ce.prototype.getSequenceLength=ce.prototype.getSequenceLength,ce.prototype.setMuted=ce.prototype.setMuted,ce.prototype.resize=ce.prototype.resize,ce.prototype.isLinear=ce.prototype.isLinear,ce.prototype.isMuted=ce.prototype.isMuted,ce.prototype.setVolume=ce.prototype.setVolume,ce.prototype.getVolume=ce.prototype.getVolume,ce.prototype.play=ce.prototype.play,ce.prototype.pause=ce.prototype.pause,ce.prototype.skip=ce.prototype.skip,ce.prototype.canSkipNow=ce.prototype.canSkipNow,ce.prototype.getTimeUntilSkippable=ce.prototype.getTimeUntilSkippable,ce.prototype.isSkippable=ce.prototype.isSkippable,ce.prototype.isPaused=ce.prototype.isPaused,ce.prototype.getRemainingTime=ce.prototype.getRemainingTime,ce.prototype.getMinSuggestedDuration=ce.prototype.getMinSuggestedDuration,ce.prototype.getDuration=ce.prototype.getDuration,ce.prototype.isUsingAnotherMediaElement=ce.prototype.isUsingAnotherMediaElement,ce.prototype.hasCustomClick=ce.prototype.hasCustomClick,ce.prototype.isClientRendering=ce.prototype.isClientRendering,ce.prototype.needsSkipUI=ce.prototype.needsSkipUI;function wy(e,t,n,i){function r(o){return o?o.overlay?!0:a.g.ended?o.post:!a.g.paused:!1}var a=this;this.M=null,this.m=e,this.C=t,this.g=n,this.G=null,this.u=!0,this.h=this.g,this.wa=i,this.ma=new Set,this.T=new Set,this.H=new Set,this.F=new Map,this.K=new Map,this.i=new V,Lf(this),this.I=new _e,this.j=new _e,this.J=!1,this.aa=this.o=this.B=this.l=null,this.ha=!1,this.O=-1,this.X=function(){if(!a.J&&a.l&&!a.C.xa()){a.l=a.g.currentTime;var o=za(a);o&&r(o)&&Il(a,o,1,1,Date.now())}},this.V=function(){if(!(a.J||a.l||a.C.xa())){a.g.paused||(a.l=a.g.currentTime);var o=za(a,!0);o||(o=za(a)),o&&r(o)&&Il(a,o,1,1,Date.now())}},this.oa=function(){if(!a.J&&a.l&&!a.C.xa()){var o=a.g.currentTime;a.B&&!a.B.pre&&!a.B.post&&o<(a.B.endTime||a.B.startTime)&&(a.B=null)}},this.R=new Ae(this.X),this.N=new Ae(function(){var o,s,u,l,c,d,h,p,g,y,b;return R(function(A){switch(A.g){case 1:if(!a.H.size||a.l==null){A.A(0);break}if(o=a.C.ae(),o==ii||o==Sl)return A.return();s=!1,u=Array.from(a.H),l=a.C.Ra(),c=m(u),d=c.next();case 3:if(d.done){A.A(5);break}if(h=d.value,h==a.B){A.A(4);break}if(p=h.endTime||h.startTime,!(l.start-p>=1)){g=h.startTime-a.l,g>0&&g<=10&&(!a.F.has(h)&&Ty(h)&&a.F.set(h,a.i.preload(h.uri,null,h.mimeType||void 0)),Ay(a,h)),A.A(4);break}if(!a.F.has(h)){A.A(7);break}return T(A,a.F.get(h),8);case 8:(y=A.h)&&y.destroy(),a.F.delete(h);case 7:ky(a,h),b=h.id||JSON.stringify(h),a.T.has(b)&&a.T.delete(b),a.H.delete(h),Pf(a),h.overlay||(s=!0);case 4:d=c.next(),A.A(3);break;case 5:s&&El(a),X(A)}})}),this.configure(this.C.getConfiguration().ads)}f=wy.prototype,f.configure=function(e){this.M=e,this.J||Rf(this)};function XA(e){if(!e.ha&&e.H.size){if(e.I.D(e.g,"playing",e.V),e.I.D(e.g,"timeupdate",e.V),e.I.D(e.g,"seeked",e.oa),e.I.D(e.g,"ended",e.X),"requestVideoFrameCallback"in e.g&&!xy()){var t=e.g,n=function(){e.O!=-1&&(e.X(),e.O!=-1&&(e.O=t.requestVideoFrameCallback(n)))};e.O=t.requestVideoFrameCallback(n)}else e.R.Da(.025);e.N&&e.N.Da(1),e.ha=!0}}function Pf(e){e.ha&&!e.H.size&&(e.I.Ma(e.g,"playing",e.V),e.I.Ma(e.g,"timeupdate",e.V),e.I.Ma(e.g,"seeked",e.oa),e.I.Ma(e.g,"ended",e.X),e.O!=-1&&(e.g.cancelVideoFrameCallback(e.O),e.O=-1),e.R&&e.R.stop(),e.N&&e.N.stop(),e.ha=!1)}function Rf(e){if(e.m&&e.M){var t=e.M.supportsMultipleMediaElements,n=e.g;(n.controls||n.webkitPresentationMode&&n.webkitPresentationMode!=="inline"||n.webkitDisplayingFullscreen)&&(t=!1),e.u==t&&(e.u=!t,e.u?(e.h=e.g,e.G&&(e.G.parentElement&&e.m.removeChild(e.G),e.G=null)):(e.G||(t=document.createElement(e.g.tagName),t.autoplay=!0,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="none",t.setAttribute("playsinline",""),e.G=t),e.h=e.G))}else e.u=!0}f.stop=function(){if(this.j&&this.j.Qa(),this.ma.clear(),this.T.clear(),this.H.clear(),this.i.rg(),this.F.size){var e=Array.from(this.F.values());e=m(e);for(var t=e.next();!t.done;t=e.next())(t=t.value)&&t.then(function(n){n&&n.destroy()})}if(this.F.clear(),this.K.size)for(e=Array.from(this.K.keys()),e=m(e),t=e.next();!t.done;t=e.next())ky(this,t.value);this.K.clear(),this.i.detach(),this.J=!1,this.B=this.l=null,this.u=!0,this.h=this.g,this.G=null,Df(this),Pf(this),this.m&&qo(this.m),this.o&&(this.o.stop(),this.o=null)},f.release=function(){this.stop(),this.I&&this.I.release(),this.j&&this.j.release(),this.R&&(this.R.stop(),this.R=null),this.N&&(this.N.stop(),this.N=null),this.i.destroy()},f.td=function(){return this.i};function YA(e,t){var n,i,r;R(function(a){if(a.g==1){if(n=null,(i=t.values.find(function(o){return o.key=="ID"}))&&(n=i.data),n){if(e.ma.has(n))return a.return();e.ma.add(n)}return Lf(e),r=[],t&&t.values.find(function(o){return o.key=="X-OVERLAY-ID"})?(r=ek(t),a.A(2)):T(a,ZA(e,t),3)}a.g!=2&&(r=a.h),r.length?fs(e,r):Ee("Unsupported HLS interstitial",t),X(a)})}function JA(e,t){var n=tt(t.eventNode,"OverlayEvent"),i=n.attributes.uri,r=n.attributes.mimeType,a=n.attributes.loop=="true",o=ge(n,"z",Lt);if(i&&o!=0){var s=null,u=tt(n,"Background");if(u){var l=u.attributes.uri;l?s="center / contain no-repeat url('"+l+"')":s=rn(u)}u=1920,l=1080;var c=tt(n,"Viewport");if(c&&(u=ge(c,"x",Lt),u==null||(l=ge(c,"y",Lt),l==null)))return;var d={viewport:{x:u,y:l},topLeft:{x:0,y:0},size:{x:u,y:l}},h=tt(n,"Overlay");if(c&&h){var p=tt(h,"TopLeft"),g=tt(h,"Size");if(p&&g){if(h=ge(p,"x",Lt),h==null||(p=ge(p,"y",Lt),p==null))return;var y=ge(g,"x",Lt);if(y==null||(g=ge(g,"y",Lt),g==null))return;d.topLeft.x=h,d.topLeft.y=p,d.size.x=y,d.size.y=g}}if(h=null,n=tt(n,"Squeeze"),c&&n&&(g=tt(n,"TopLeft"),n=tt(n,"Size"),g&&n)){if(c=ge(g,"x",Lt),c==null||(h=ge(g,"y",Lt),h==null)||(g=ge(n,"x",Lt),g==null)||(n=ge(n,"y",Lt),n==null))return;h={viewport:{x:u,y:l},topLeft:{x:c,y:h},size:{x:g,y:n}}}fs(e,[{id:t.id,groupId:null,startTime:t.startTime,endTime:t.endTime,uri:i,mimeType:r,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:a,overlay:d,displayOnBackground:o==-1,currentVideo:h,background:s,clickThroughUrl:null}])}}f.addAdUrlInterstitial=function(e){var t=this,n,i,r,a,o,s,u,l,c;return R(function(d){if(d.g==1)return n={type:12},T(d,Nf(t,e,n),2);if(d.g!=3){if(i=d.h,r=xo(i,"VAST,vmap:VMAP"),!r)throw new D(2,10,10007);if(a=[],r.tagName=="VAST")return a=vy(r,t.l),d.A(3);if(r.tagName!="vmap:VMAP")return d.A(3);for(o=function(h){var p,g;return R(function(y){if(y.g==1)return T(y,Nf(t,h.uri,n),2);if(p=y.h,g=xo(p,"VAST"),!g)throw new D(2,10,10007);a.push.apply(a,z(vy(g,h.time))),X(y)})},s=[],u=m(KA(r)),l=u.next();!l.done;l=u.next())c=l.value,s.push(o(c));return s.length?T(d,Promise.all(s),3):d.A(3)}fs(t,a),X(d)})};function fs(e,t){var n,i,r,a,o,s,u,l;R(function(c){switch(c.g){case 1:n=!1,i=m(t),r=i.next();case 2:if(r.done){c.A(4);break}if(a=r.value,!a.uri){Ee("Missing URL in interstitial",a),c.A(3);break}if(a.mimeType){c.A(5);break}return he(c,6),o=e.i.Yb(),T(c,ja(a.uri,o,e.C.getConfiguration().streaming.retryParameters),8);case 8:a.mimeType=c.h,ye(c,5);break;case 6:oe(c);case 5:if(s=a.id||JSON.stringify(a),e.T.has(s)){c.A(3);break}a.loop&&!a.overlay&&Ee("Loop is only supported in overlay interstitials",a),a.overlay||(n=!0),e.T.add(s),e.H.add(a),u=!1,a.pre&&e.l==null?u=!0:a.startTime!=0||a.canJump?e.l!=null&&(l=a.startTime-e.l,l>0&&l<=10&&(u=!0)):u=!0,u&&(!e.F.has(a)&&Ty(a)&&e.F.set(a,e.i.preload(a.uri,null,a.mimeType||void 0)),Ay(e,a));case 3:r=i.next(),c.A(2);break;case 4:n&&El(e),XA(e),X(c)}})}function za(e,t,n){t=t===void 0?!1:t,n=n===void 0?null:n;var i=0,r=null;if(e.H.size&&e.l!=null){var a=e.g.ended,o=Array.from(e.H).sort(function(d,h){return h.startTime-d.startTime}),s=o;for(s=t?o.filter(function(d){return d.pre}):a?o.filter(function(d){return d.post}):o.filter(function(d){return!d.pre&&!d.post}),o=m(s),s=o.next();!s.done;s=o.next()){s=s.value;var u=!1;if(t)u=s.pre;else if(a)u=s.post;else if(!s.pre&&!s.post){var l=e.l-Math.round(s.startTime*1e3)/1e3,c=1;e.M.allowStartInMiddleOfInterstitial&&s.endTime&&s.endTime!=1/0&&(c=s.endTime-s.startTime),(l>0||l==0&&e.l==0)&&(l<=c||!s.canJump)&&(u=!(n==null&&e.B&&!e.B.pre&&!e.B.post&&e.B.startTime>=s.startTime))}u&&(!e.B||s.startTime>=e.B.startTime)&&(i==(n||0)?r=s:r&&!s.canJump&&Math.round(s.startTime*1e3)/1e3-Math.round(r.startTime*1e3)/1e3>.001&&(r=s,i=0),i++)}}return r}function Il(e,t,n,i,r,a){a=a===void 0?0:a,e.B=t,Rf(e),e.u||!e.m||e.h.parentElement||e.m.appendChild(e.h),i==1&&n==1&&(n=Array.from(e.H).filter(function(o){return t.pre?o.pre==t.pre:t.post?o.post==t.post:Math.abs(o.startTime-t.startTime)<.001}).length),t.once&&(a++,e.H.delete(t),Pf(e),t.overlay||El(e)),t.mimeType&&(t.mimeType.startsWith("image/")||t.mimeType==="text/html")?t.overlay?$A(e,t,n,i,a):Ee("Unsupported interstitial",t):e.u&&t.overlay?Ee("Unsupported interstitial",t):QA(e,t,n,i,r,a)}function $A(e,t,n,i,r){function a(){e.o&&(e.o.stop(),e.o=null),e.m.removeChild(u),Df(e,t),gt(e,"ad-stopped"),e.j.Qa();var h=za(e,t.pre,i-r);h?Il(e,h,n,++i,Date.now(),r):e.J=!1}e.J=!0;var o=t.overlay,s=t.mimeType=="text/html"?"iframe":"img",u=document.createElement(s);u.style.objectFit="contain",u.style.position="absolute",u.style.border="none",Sy(e,t);var l=new ce(t,n,i);gt(e,"ad-impression"),gt(e,"ad-started",new Map().set("ad",l)),s=="iframe"?u.src=t.uri:(u.src=t.uri,u.onerror=function(h){gt(e,"ad-error",new Map().set("originalEvent",h)),a()}),l=o.viewport;var c=o.topLeft;o=o.size,l.x==0&&l.y==0?(u.width=t.overlay.size.x,u.height=t.overlay.size.y,u.style.bottom="10%",u.style.left="0",u.style.right="0",u.style.width="100%",t.overlay.size.y||s!="iframe"||(u.style.height="auto")):(u.style.height=o.y/l.y*100+"%",u.style.left=c.x/l.x*100+"%",u.style.top=c.y/l.y*100+"%",u.style.width=o.x/l.x*100+"%"),e.m.appendChild(u);var d=Date.now();e.o&&e.o.stop(),e.o=new Ae(function(){t.playoutLimit&&(Date.now()-d)/1e3>t.playoutLimit||t.endTime&&e.g.currentTime>t.endTime?(gt(e,"ad-complete"),a()):e.g.currentTime<t.startTime&&(gt(e,"ad-skipped"),a())}),t.playoutLimit&&!t.endTime?e.o.ka(t.playoutLimit):t.endTime&&e.o.Da(.025),e.j.D(e.g,"seeked",function(){var h=e.g.currentTime;(h<t.startTime||t.endTime&&h>t.endTime)&&(e.o&&e.o.stop(),gt(e,"ad-skipped"),a())}),t.clickThroughUrl&&e.j.D(u,"click",function(){t.clickThroughUrl&&P.open(t.clickThroughUrl,"_blank")})}function QA(e,t,n,i,r,a){var o,s,u,l,c,d,h,p,g,y,b,A,x,k,M,N,I,C,E,O,L;R(function(_){switch(_.g){case 1:if(o=Date.now(),e.J=!0,s=!1,u=function(){if(!e.u&&!t.overlay&&t.resumeOffset==null)if(t.timelineRange&&t.endTime&&t.endTime!=1/0)e.g.currentTime!=t.endTime&&(e.g.currentTime=t.endTime);else{var j=Date.now();e.g.currentTime+=(j-r)/1e3,r=j}},l=function(j){var G,H;return R(function(B){if(B.g==1){if(u(),G=za(e,t.pre,i-a),j&&t.groupId)for(;G&&G.groupId==t.groupId;)i++,G=za(e,t.pre,i-a);return e.o&&(!t.groupId||G&&G.groupId!=t.groupId)&&(e.o.stop(),e.o=null),Df(e,t),G&&!G.overlay?B.A(2):(t.post&&(e.l=null,e.B=null),e.u?T(B,e.i.detach(),4):T(B,e.i.Dc(),4))}B.g!=2&&(e.u&&(H=t.resumeOffset,H==null&&(H=t.timelineRange&&t.endTime&&t.endTime!=1/0?t.endTime-(e.l||0):(Date.now()-r)/1e3),gt(e,"ad-content-resume-requested",new Map().set("offset",H))),gt(e,"ad-stopped"),e.j.Qa(),e.J=!1,e.u?El(e):(e.h.style.display="none",u(),e.g.ended||e.g.play())),Rf(e),G&&(gt(e,"ad-stopped"),e.j.Qa(),Il(e,G,n,++i,r,a)),X(B)})},c=function(j){return R(function(G){return s?G.return():(s=!0,gt(e,"ad-error",new Map().set("originalEvent",j)),T(G,l(!1),0))})},d=function(){return R(function(j){if(j.g==1)return s?j.return():(s=!0,T(j,l(!1),2));gt(e,"ad-complete"),X(j)})},e.aa=function(){return R(function(j){return s?j.return():(s=!0,gt(e,"ad-skipped"),T(j,l(!0),0))})},h=new le(e.h,t,e.aa,n,i,!e.u),e.u||(h.setMuted(e.g.muted),h.setVolume(e.g.volume)),gt(e,"ad-started",new Map().set("ad",h)),(p=h.canSkipNow())&&gt(e,"ad-skip-state-changed"),e.j.ya(e.i,"error",c),e.j.D(e.h,"timeupdate",function(){if(e.h.duration){var j=h.canSkipNow();p!=j&&h.getRemainingTime()>0&&h.getDuration()>0&&gt(e,"ad-skip-state-changed"),p=j,!e.u&&!t.overlay&&t.resumeOffset==null&&t.timelineRange&&t.endTime&&t.endTime!=1/0&&e.g.currentTime!=t.endTime&&e.C.Ra().end>=t.endTime&&(e.g.currentTime=t.endTime)}}),e.j.ya(e.i,"firstquartile",function(){u(),gt(e,"ad-first-quartile")}),e.j.ya(e.i,"midpoint",function(){u(),gt(e,"ad-midpoint")}),e.j.ya(e.i,"thirdquartile",function(){u(),gt(e,"ad-third-quartile")}),e.j.ya(e.i,"complete",d),e.j.D(e.h,"play",function(){gt(e,"ad-resumed")}),e.j.D(e.h,"pause",function(){var j=e.i.getConfiguration();e.h.currentTime>=j.playRangeEnd?d():gt(e,"ad-paused")}),e.j.D(e.h,"volumechange",function(){e.h.muted?gt(e,"ad-muted"):gt(e,"ad-volume-changed")}),t.clickThroughUrl&&(g=e.m||e.h,e.j.D(g,"click",function(){t.clickThroughUrl&&(h.isPaused()||h.pause(),P.open(t.clickThroughUrl,"_blank"))})),!e.u||i!=1){_.A(2);break}return gt(e,"ad-content-pause-requested",new Map().set("saveLivePosition",!0)),y=new qe,b=function(j){return R(function(G){if(G.g==1)return j.state!="detach"?G.A(0):xy()?T(G,new Promise(function(H){return new Ae(H).ka(.1)}),3):G.A(3);y.resolve(),e.j.Ma(e.C,"onstatechange",b),X(G)})},e.j.D(e.C,"onstatechange",b),T(_,y,2);case 2:return Sy(e,t),e.u||(e.h.style.display="",t.overlay?(e.h.loop=t.loop,A=t.overlay.viewport,x=t.overlay.topLeft,k=t.overlay.size,e.h.style.height=k.y/A.y*100+"%",e.h.style.left=x.x/A.x*100+"%",e.h.style.top=x.y/A.y*100+"%",e.h.style.width=k.x/A.x*100+"%"):(e.g.pause(),t.resumeOffset!=null&&t.resumeOffset!=0&&(e.g.currentTime+=t.resumeOffset),e.h.loop=!1,e.h.style.height="100%",e.h.style.left="0",e.h.style.top="0",e.h.style.width="100%")),he(_,4),Lf(e),t.startTime&&t.endTime&&t.endTime!=1/0&&t.startTime!=t.endTime&&(M=t.endTime-t.startTime,M>0&&e.i.configure("playRangeEnd",M)),t.playoutLimit&&!e.o&&(e.o=new Ae(function(){e.aa()}).ka(t.playoutLimit),e.i.configure("playRangeEnd",t.playoutLimit)),T(_,e.i.Vb(e.h),6);case 6:return N=null,t.pre||t.post||!e.M.allowStartInMiddleOfInterstitial||e.l==null||(I=e.l-t.startTime,Math.abs(I)>.25&&(N=I)),e.F.has(t)?T(_,e.F.get(t),10):T(_,e.i.load(t.uri,N,t.mimeType||void 0),8);case 10:return C=_.h,e.F.delete(t),C?T(_,e.i.load(C),8):T(_,e.i.load(t.uri,N,t.mimeType||void 0),8);case 8:t.overlay&&e.g.paused?e.h.pause():e.h.play(),E=(Date.now()-o)/1e3,gt(e,"ads-loaded",new Map().set("loadTime",E)),e.u&&e.g.play(),t.overlay&&(t.pre||t.post||e.C.W()&&!(t.startTime>0)||(O=function(){var j=e.g.currentTime-t.startTime;Math.abs(j-e.h.currentTime)>.1&&(e.h.currentTime=j)},e.j.ya(e.h,"playing",O),e.j.D(e.g,"seeking",O)),e.j.D(e.g,"seeked",function(){var j=e.g.currentTime;(j<t.startTime||t.endTime&&j>t.endTime)&&e.aa()})),ye(_,0);break;case 4:if(L=oe(_),!e.J)return _.return();c(L),X(_)}})}function Sy(e,t){if(t.displayOnBackground&&(e.g.style.zIndex="1"),t.currentVideo!=null){var n=t.currentVideo;e.g.style.transformOrigin="top left";var i=!0,r=[],a=n.topLeft.x/n.viewport.x*100;a>0&&a<=100&&(r.push("translateX("+a+"%)"),i=!1),a=n.topLeft.y/n.viewport.y*100,a>0&&a<=100&&(r.push("translateY("+a+"%)"),i=!1),a=n.size.x/n.viewport.x,a<1&&r.push("scaleX("+a+")"),n=n.size.y/n.viewport.y,a<1&&r.push("scaleY("+n+")"),r.length&&(e.g.style.transform=r.join(" ")),i&&(e.g.style.transition="transform 250ms")}e.m&&(t.clickThroughUrl?(e.m.setAttribute("ad-active","true"),e.m.style.pointerEvents=""):e.m.style.pointerEvents="none",t.background&&(e.m.style.background=t.background)),e.G&&(e.G.style.background=t.overlay?"":"rgb(0, 0, 0)")}function Df(e,t){(!t||t.displayOnBackground)&&(e.g.style.zIndex=""),t&&t.currentVideo==null||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.m&&(e.m.removeAttribute("ad-active"),e.m.style.pointerEvents="",!t||t.background)&&(e.m.style.background=""),e.G&&(e.G.style.background="")}function ZA(e,t){var n,i,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M,N,I,C,E,O,L,_,j,G,H,B,F,K,W,me,ne,He,ve,et,Ne,we,Pe,kt;return R(function(Ye){switch(Ye.g){case 1:if(n=[],!t||(i=t.values.find(function(De){return De.key=="X-ASSET-URI"}),r=t.values.find(function(De){return De.key=="X-ASSET-LIST"}),!i&&!r))return Ye.return(n);if(a=null,(o=t.values.find(function(De){return De.key=="ID"}))&&(a=o.data),s=a==null?Math.floor(t.startTime*10)/10:t.startTime,(u=t.endTime)&&t.endTime!=1/0&&typeof t.endTime=="number"&&(u=a==null?Math.floor(t.endTime*10)/10:t.endTime),l=t.values.find(function(De){return De.key=="X-RESTRICT"}),d=c=!0,l&&l.data&&(h=l.data,c=!h.includes("SKIP"),d=!h.includes("JUMP")),p=c?0:null,(g=t.values.find(function(De){return De.key=="X-ENABLE-SKIP-AFTER"}))&&(y=g.data,p=parseFloat(y),isNaN(p)&&(p=c?0:null)),b=null,(A=t.values.find(function(De){return De.key=="X-ENABLE-SKIP-FOR"}))&&(x=A.data,b=parseFloat(x),isNaN(p)&&(b=null)),k=null,(M=t.values.find(function(De){return De.key=="X-RESUME-OFFSET"}))&&(N=M.data,k=parseFloat(N),isNaN(k)&&(k=null)),I=null,(C=t.values.find(function(De){return De.key=="X-PLAYOUT-LIMIT"}))&&(E=C.data,I=parseFloat(E),isNaN(I)&&(I=null)),_=L=O=!1,(j=t.values.find(function(De){return De.key=="CUE"}))&&(G=j.data,O=G.includes("ONCE"),L=G.includes("PRE"),_=G.includes("POST")),H=!1,(B=t.values.find(function(De){return De.key=="X-TIMELINE-OCCUPIES"}))?(F=B.data,H=F.includes("RANGE")):!M&&e.C.W()&&(H=!L&&!_),i){if(K=i.data,!K)return Ye.return(n);n.push({id:a,groupId:null,startTime:s,endTime:u,uri:K,mimeType:null,isSkippable:c,skipOffset:p,skipFor:b,canJump:d,resumeOffset:k,playoutLimit:I,once:O,pre:L,post:_,timelineRange:H,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}),Ye.A(2);break}if(!r){Ye.A(2);break}return W=r.data,W?(he(Ye,4),me={type:11},T(Ye,Nf(e,W,me),6)):Ye.return(n);case 6:for(ne=Ye.h,He=ot(ne),ve=JSON.parse(He),(et=ve["SKIP-CONTROL"])&&(Ne=et["ENABLE-SKIP-AFTER"],typeof Ne=="number"&&(p=parseFloat(Ne),isNaN(Ne)&&(p=c?0:null)),we=et["ENABLE-SKIP-FOR"],typeof we=="number"&&(b=parseFloat(we),isNaN(we)&&(b=null))),Pe=0;Pe<ve.ASSETS.length;Pe++)kt=ve.ASSETS[Pe],kt.URI&&n.push({id:a+"_shaka_asset_"+Pe,groupId:a,startTime:s,endTime:u,uri:kt.URI,mimeType:null,isSkippable:c,skipOffset:p,skipFor:b,canJump:d,resumeOffset:k,playoutLimit:I,once:O,pre:L,post:_,timelineRange:H,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null});ye(Ye,2);break;case 4:oe(Ye);case 2:return Ye.return(n)}})}function ek(e){var t=[];if(!e)return t;var n=e.values.find(function(b){return b.key=="X-ASSET-URI"});if(!n||(n=n.data,!n))return t;var i=null,r=e.values.find(function(b){return b.key=="X-OVERLAY-ID"});r&&(i=r.data),r=i==null?Math.floor(e.startTime*10)/10:e.startTime;var a=e.endTime;e.endTime&&e.endTime!=1/0&&typeof e.endTime=="number"&&(a=i==null?Math.floor(e.endTime*10)/10:e.endTime);var o=!1,s=!1,u=!1,l=e.values.find(function(b){return b.key=="CUE"});l&&(u=l.data,o=u.includes("ONCE"),s=u.includes("PRE"),u=u.includes("POST")),l=null;var c=e.values.find(function(b){return b.key=="X-ASSET-MIMETYPE"});c&&(l=c.data),c=!1;var d=e.values.find(function(b){return b.key=="X-LOOP"});d&&(c=d.data=="YES"),d=1;var h=e.values.find(function(b){return b.key=="X-DEPTH"});h&&(d=parseFloat(h.data),isNaN(d)&&(d=1)),h=null;var p=e.values.find(function(b){return b.key=="X-BACKGROUND"});p&&(h=p.data),p=1920;var g=1080,y=e.values.find(function(b){return b.key=="X-VIEWPORT"});if(y){if(g=y.data.split("x"),g.length!=2)return t;p=parseFloat(g[0]),g=parseFloat(g[1])}if(p={viewport:{x:p,y:g},topLeft:{x:0,y:0},size:{x:p,y:g}},g=e.values.find(function(b){return b.key=="X-OVERLAY-POSITION"})){if(g=g.data.split("x"),g.length!=2)return t;p.topLeft.x=parseFloat(g[0]),p.topLeft.y=parseFloat(g[1])}if(g=e.values.find(function(b){return b.key=="X-OVERLAY-SIZE"})){if(g=g.data.split("x"),g.length!=2)return t;p.size.x=parseFloat(g[0]),p.size.y=parseFloat(g[1])}if(g=null,(y=e.values.find(function(b){return b.key=="X-SQUEEZECURRENT"}))&&(g=parseFloat(y.data),isNaN(g)&&(g=1),g={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920*g,y:1080*g}},e=e.values.find(function(b){return b.key=="X-SQUEEZECURRENT-POSITION"}))){if(e=e.data.split("x"),e.length!=2)return t;g.topLeft.x=parseFloat(e[0]),g.topLeft.y=parseFloat(e[1])}return t.push({id:i,groupId:null,startTime:r,endTime:a,uri:n,mimeType:l,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:o,pre:s,post:u,timelineRange:!0,loop:c,overlay:p,displayOnBackground:d==-1,currentVideo:g,background:h,clickThroughUrl:null}),t}function El(e){for(var t=[],n=m(e.H),i=n.next(),r={};!i.done;r={Cc:void 0},i=n.next())i=i.value,i.overlay||(r.Cc={start:i.startTime,end:null},i.pre?(r.Cc.start=0,r.Cc.end=null):i.post?(r.Cc.start=-1,r.Cc.end=null):i.timelineRange&&(r.Cc.end=i.endTime),t.find(function(a){return function(o){return a.Cc.start==o.start&&a.Cc.end==o.end}}(r))||t.push(r.Cc));gt(e,"ad-cue-points-changed",new Map().set("cuepoints",t))}function Lf(e){e.i.configure(e.C.li()),e.i.configure("ads.disableHLSInterstitial",!0),e.i.configure("ads.disableDASHInterstitial",!0),e.i.configure("playRangeEnd",1/0),Ig(e.C.Yb(),e.i.Yb())}function Nf(e,t,n){var i,r,a;return R(function(o){return o.g==1?(i=yt([t],ni()),r=e.C.Yb().request(7,i,n),T(o,r.promise,2)):(a=o.h,o.return(a.data))})}function Ty(e){return(e=e.mimeType)?!e.startsWith("image/")&&e!=="text/html":!0}function xy(){var e=Te().Oa();return e=="TV"||e=="CONSOLE"||e=="CAST"}function Ay(e,t){if(!(e.K.has(t)||e.M&&!e.M.allowPreloadOnDomElements)){var n=function(a){var o=document.createElement("link");return o.rel="preload",o.href=a,o.as="image",document.head.appendChild(o),o},i=[];if(t.background){var r=t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);r&&i.push(n(r[2]))}t.mimeType&&t.mimeType.startsWith("image/")&&i.push(n(t.uri)),e.K.set(t,i)}}function ky(e,t){if(e.K.has(t)){var n=e.K.get(t);n=m(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.parentNode.removeChild(i);e.K.delete(t)}}function gt(e,t,n){e.wa(new Z(t,n))}function ae(e,t,n,i,r){this.h=e,this.j=va(this.h.skipOffset),this.g=r,this.i=t,this.l=n,this.o=i,this.m=!1}f=ae.prototype,f.needsSkipUI=function(){return!0},f.isClientRendering=function(){return!1},f.hasCustomClick=function(){return!1},f.isUsingAnotherMediaElement=function(){return!1},f.getDuration=function(){return this.h.durationInSeconds},f.getMinSuggestedDuration=function(){return this.getDuration()},f.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},f.isPaused=function(){return this.g.paused},f.isSkippable=function(){return typeof this.j=="number"},f.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},f.canSkipNow=function(){return this.getTimeUntilSkippable()==0},f.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},f.pause=function(){return this.g.pause()},f.play=function(){return this.g.play()},f.getVolume=function(){return this.g.volume},f.setVolume=function(e){this.g.volume=e},f.isMuted=function(){return this.g.muted},f.isLinear=function(){return this.o},f.resize=function(){},f.setMuted=function(e){this.g.muted=e},f.getSequenceLength=function(){return this.l?this.l:1},f.getPositionInSequence=function(){return this.i?this.i:1},f.getTitle=function(){return this.h.adTitle},f.getDescription=function(){return""},f.getVastMediaBitrate=function(){return 0},f.getVastMediaHeight=function(){return 0},f.getVastMediaWidth=function(){return 0},f.getVastAdId=function(){return this.h.vastAdId||""},f.getAdId=function(){return this.h.adId},f.getCreativeAdId=function(){return this.h.creativeId},f.getAdvertiserName=function(){return""},f.getMediaUrl=function(){return null},f.getTimeOffset=function(){return 0},f.getPodIndex=function(){return 0},f.release=function(){this.l=this.i=this.g=this.h=null},Y("shaka.ads.MediaTailorAd",ae),ae.prototype.release=ae.prototype.release,ae.prototype.getPodIndex=ae.prototype.getPodIndex,ae.prototype.getTimeOffset=ae.prototype.getTimeOffset,ae.prototype.getMediaUrl=ae.prototype.getMediaUrl,ae.prototype.getAdvertiserName=ae.prototype.getAdvertiserName,ae.prototype.getCreativeAdId=ae.prototype.getCreativeAdId,ae.prototype.getAdId=ae.prototype.getAdId,ae.prototype.getVastAdId=ae.prototype.getVastAdId,ae.prototype.getVastMediaWidth=ae.prototype.getVastMediaWidth,ae.prototype.getVastMediaHeight=ae.prototype.getVastMediaHeight,ae.prototype.getVastMediaBitrate=ae.prototype.getVastMediaBitrate,ae.prototype.getDescription=ae.prototype.getDescription,ae.prototype.getTitle=ae.prototype.getTitle,ae.prototype.getPositionInSequence=ae.prototype.getPositionInSequence,ae.prototype.getSequenceLength=ae.prototype.getSequenceLength,ae.prototype.setMuted=ae.prototype.setMuted,ae.prototype.resize=ae.prototype.resize,ae.prototype.isLinear=ae.prototype.isLinear,ae.prototype.isMuted=ae.prototype.isMuted,ae.prototype.setVolume=ae.prototype.setVolume,ae.prototype.getVolume=ae.prototype.getVolume,ae.prototype.play=ae.prototype.play,ae.prototype.pause=ae.prototype.pause,ae.prototype.skip=ae.prototype.skip,ae.prototype.canSkipNow=ae.prototype.canSkipNow,ae.prototype.getTimeUntilSkippable=ae.prototype.getTimeUntilSkippable,ae.prototype.isSkippable=ae.prototype.isSkippable,ae.prototype.isPaused=ae.prototype.isPaused,ae.prototype.getRemainingTime=ae.prototype.getRemainingTime,ae.prototype.getMinSuggestedDuration=ae.prototype.getMinSuggestedDuration,ae.prototype.getDuration=ae.prototype.getDuration,ae.prototype.isUsingAnotherMediaElement=ae.prototype.isUsingAnotherMediaElement,ae.prototype.hasCustomClick=ae.prototype.hasCustomClick,ae.prototype.isClientRendering=ae.prototype.isClientRendering,ae.prototype.needsSkipUI=ae.prototype.needsSkipUI;function hs(e,t,n,i){this.C=e,this.K=t,this.h=n,this.l=null,this.R=NaN,this.i=i,this.J=!1,this.B=null,this.j=[],this.N=[],this.M=this.F=this.g=null,this.G=new Map,this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.o=new _e}hs.prototype.stop=function(){for(var e=m(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Ma(t.target,t.type,t.listener);Wa(this),this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.B=null,this.j=[],this.N=[],this.G.clear()},hs.prototype.release=function(){this.stop(),this.o&&this.o.release()},hs.prototype.onManifestUpdated=function(e){this.J=e,this.H!=""&&(nk(this,this.H,this.O),this.O=!1)},hs.prototype.getCuePoints=function(){for(var e=[],t=m(this.j),n=t.next();!n.done;n=t.next()){n=m(n.value.ads);for(var i=n.next();!i.done;i=n.next())i=i.value,e.push({start:i.startTimeInSeconds,end:i.startTimeInSeconds+i.durationInSeconds})}return e};function tk(e,t,n){var i,r,a,o,s,u,l,c,d,h,p,g;R(function(y){if(y.g==1)return i={type:7},r=yt([t],ni()),r.method="POST",n&&(a=JSON.stringify(n),r.body=Zn(a)),o=e.K.request(7,r,i),he(y,2),T(y,o.promise,4);if(y.g!=2){if(s=y.h,u=ot(s.data),l=JSON.parse(u),l.manifestUrl&&l.trackingUrl)c=new ht(t),d=new ht(l.trackingUrl),e.H=c.resolve(d).toString(),h=Date.now()/1e3,p=h-e.R,e.i(new Z("ads-loaded",new Map().set("loadTime",p))),g=new ht(l.manifestUrl),e.l.resolve(c.resolve(g).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return ye(y,0)}if(oe(y),!e.I.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,y.return();e.l.resolve(e.I),e.l=null,X(y)})}function nk(e,t,n){var i,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x;R(function(k){if(k.g==1)return i={type:8},r=yt([t],ni()),a=e.K.request(7,r,i),he(k,2),T(k,a.promise,4);if(k.g!=2){if(o=k.h,s=[],u=ot(o.data),l=JSON.parse(u),l.avails.length>0){if(JSON.stringify(e.j)!=JSON.stringify(l.avails)){for(e.j=l.avails,c=m(e.j),d=c.next();!d.done;d=c.next())for(h=d.value,p=m(h.nonLinearAdsList),g=p.next();!g.done;g=p.next())for(y=g.value,b=m(y.nonLinearAdList),A=b.next();!A.done;A=b.next())x=A.value,ik(e,x);s=e.getCuePoints(),e.i(new Z("ad-cue-points-changed",new Map().set("cuepoints",s)))}}else e.j.length&&e.i(new Z("ad-cue-points-changed",new Map().set("cuepoints",s))),Wa(e),e.j=[];return n&&(e.J||s.length>0)&&rk(e),ye(k,0)}oe(k),X(k)})}function ik(e,t){var n,i,r,a,o,s,u,l;R(function(c){if(c.g==1)return!t.staticResource||(n=Iy(t),e.G.get(n))?c.return():(i={type:9},r=yt([t.staticResource],ni()),a=e.K.request(7,r,i),he(c,2),e.G.set(n,[]),T(c,a.promise,4));if(c.g!=2)return o=c.h,s=ot(o.data),u=JSON.parse(s),l=u.apps,e.G.set(n,l),ye(c,0);oe(c),e.G.delete(n),X(c)})}function Iy(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function rk(e){My(e),e.J||(Ey(e),e.o.D(e.h,"seeked",function(){Ey(e)}),e.o.D(e.h,"ended",function(){Wa(e)})),e.o.D(e.h,"timeupdate",function(){My(e)})}function Ey(e){var t=e.h.currentTime;if(t!=0&&e.B==null){for(var n,i,r=m(e.j),a=r.next();!a.done;a=r.next()){a=a.value;for(var o=m(a.ads),s=o.next();!s.done;s=o.next())if(s=s.value,!i)s.startTimeInSeconds<t&&(i=s,n=a);else if(s.startTimeInSeconds<t&&s.startTimeInSeconds>i.startTimeInSeconds+i.durationInSeconds){i=s,n=a;break}}n&&i&&!e.N.includes(i.adId)&&(e.B=t,e.h.currentTime=n.startTimeInSeconds)}}function My(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var i=e.F,r=i.startTimeInSeconds+.5*i.durationInSeconds,a=i.startTimeInSeconds+.75*i.durationInSeconds;t>=i.startTimeInSeconds+.25*i.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),on(e,"firstQuartile")):t>=r&&!e.u.includes("midpoint")?(e.u.push("midpoint"),on(e,"midpoint")):t>=a&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),on(e,"thirdQuartile")),i=e.g.getRemainingTime(),r=e.g.getDuration(),e.g.canSkipNow()&&i>0&&r>0&&on(e,"skipStateChanged"),r>0&&(i<=0||i>r)&&Wa(e)}if(!e.g||!e.g.isLinear()){e:for(i=m(e.j),r=i.next();!r.done&&(r=r.value,!(e.g&&e.g.isLinear()));r=i.next())for(a=0;a<r.ads.length;a++){var o=r.ads[a],s=o.startTimeInSeconds+o.durationInSeconds;if(o.startTimeInSeconds<=t&&s>t){if(e.N.includes(o.adId)){if(e.h.ended)continue;e.h.currentTime=s;break e}Wa(e),e.M=r,e.g=new ae(o,a+1,r.ads.length,!0,e.h),e.F=o,a===0&&on(e,"breakStart"),Cy(e);break}}if(!e.g){for(i=m(e.j),r=i.next();!r.done&&(r=r.value,!e.g);r=i.next())for(a=0;a<r.nonLinearAdsList.length;a++)if(o=r.nonLinearAdsList[a],o.nonLinearAdList.length){s=r.startTimeInSeconds;var u=e.G.get(Iy(o.nonLinearAdList[0]));if(s<=t&&u&&u.length){Wa(e),s=e,u=m(u);for(var l=u.next();!l.done;l=u.next())if(l=l.value,l.data.source.length){var c=document.createElement("img");c.src=l.data.source[0].url,c.style.top=(l.placeholder.top||0)+"%",c.style.height=100-(l.placeholder.top||0)+"%",c.style.left=(l.placeholder.left||0)+"%",c.style.maxWidth=100-(l.placeholder.left||0)+"%",c.style.objectFit="contain",c.style.position="absolute",s.C.appendChild(c)}e.M=r,e.g=new ae(o,a+1,r.ads.length,!1,e.h),e.F=o,a===0&&on(e,"breakStart"),Cy(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.B&&e.B>t&&(e.h.currentTime=e.B),e.B=null)}}}function Wa(e){if(e.g){for(;e.C.lastChild;)e.C.removeChild(e.C.firstChild);e.J||e.N.push(e.F.adId);var t=e.g.m;t!==void 0&&t?on(e,"skip"):on(e,"complete"),t=m(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.Ma(n.target,n.type,n.listener);e.m=[],e.u=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&on(e,"breakEnd"),e.g=null,e.F=null,e.M=null}}function Cy(e){var t=!1;e.h.paused?t=!0:(on(e,"impression"),on(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&on(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||on(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(on(e,"impression"),on(e,"start"),t=!1):on(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){on(e,"pause")}});for(var n=m(e.m),i=n.next();!i.done;i=n.next())i=i.value,e.o.D(i.target,i.type,i.listener)}function on(e,t){var n=e.F.trackingEvents.find(function(a){return a.eventType==t});if(n||(n=e.M.adBreakTrackingEvents.find(function(a){return a.eventType==t})),n){var i={type:10};n=m(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&r!=""&&(r=yt([r],ni()),r.method="POST",e.K.request(7,r,i))}switch(t){case"impression":e.i(new Z("ad-impression"));break;case"start":e.i(new Z("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new Z("ad-muted"));break;case"unmute":e.i(new Z("ad-volume-changed"));break;case"resume":e.i(new Z("ad-resumed"));break;case"pause":e.i(new Z("ad-paused"));break;case"firstQuartile":e.i(new Z("ad-first-quartile"));break;case"midpoint":e.i(new Z("ad-midpoint"));break;case"thirdQuartile":e.i(new Z("ad-third-quartile"));break;case"complete":e.i(new Z("ad-complete")),e.i(new Z("ad-stopped"));break;case"skip":e.i(new Z("ad-skipped")),e.i(new Z("ad-stopped"));break;case"breakStart":e.C.setAttribute("ad-active","true");break;case"breakEnd":e.C.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new Z("ad-skip-state-changed"))}}function de(e,t){this.g=e,this.i=null,this.h=t}f=de.prototype,f.needsSkipUI=function(){return!0},f.isClientRendering=function(){return!1},f.hasCustomClick=function(){return!0},f.isUsingAnotherMediaElement=function(){return!1},f.getDuration=function(){return this.i?this.i.duration:-1},f.getMinSuggestedDuration=function(){return this.getDuration()},f.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},f.isPaused=function(){return this.h.paused},f.isSkippable=function(){return this.g.isSkippable()},f.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},f.canSkipNow=function(){return this.getTimeUntilSkippable()==0},f.skip=function(){this.h.currentTime+=this.getRemainingTime()},f.pause=function(){return this.h.pause()},f.play=function(){return this.h.play()},f.getVolume=function(){return this.h.volume},f.setVolume=function(e){this.h.volume=e},f.isMuted=function(){return this.h.muted},f.isLinear=function(){return!0},f.resize=function(){},f.setMuted=function(e){this.h.muted=e},f.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},f.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},f.getTitle=function(){return this.g.getTitle()},f.getDescription=function(){return this.g.getDescription()},f.getVastMediaBitrate=function(){return 0},f.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},f.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},f.getVastAdId=function(){return""},f.getAdId=function(){return this.g.getAdId()},f.getCreativeAdId=function(){return this.g.getCreativeAdId()},f.getAdvertiserName=function(){return this.g.getAdvertiserName()},f.getMediaUrl=function(){return null},f.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},f.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},f.release=function(){this.h=this.i=this.g=null},Y("shaka.ads.ServerSideAd",de),de.prototype.release=de.prototype.release,de.prototype.getPodIndex=de.prototype.getPodIndex,de.prototype.getTimeOffset=de.prototype.getTimeOffset,de.prototype.getMediaUrl=de.prototype.getMediaUrl,de.prototype.getAdvertiserName=de.prototype.getAdvertiserName,de.prototype.getCreativeAdId=de.prototype.getCreativeAdId,de.prototype.getAdId=de.prototype.getAdId,de.prototype.getVastAdId=de.prototype.getVastAdId,de.prototype.getVastMediaWidth=de.prototype.getVastMediaWidth,de.prototype.getVastMediaHeight=de.prototype.getVastMediaHeight,de.prototype.getVastMediaBitrate=de.prototype.getVastMediaBitrate,de.prototype.getDescription=de.prototype.getDescription,de.prototype.getTitle=de.prototype.getTitle,de.prototype.getPositionInSequence=de.prototype.getPositionInSequence,de.prototype.getSequenceLength=de.prototype.getSequenceLength,de.prototype.setMuted=de.prototype.setMuted,de.prototype.resize=de.prototype.resize,de.prototype.isLinear=de.prototype.isLinear,de.prototype.isMuted=de.prototype.isMuted,de.prototype.setVolume=de.prototype.setVolume,de.prototype.getVolume=de.prototype.getVolume,de.prototype.play=de.prototype.play,de.prototype.pause=de.prototype.pause,de.prototype.skip=de.prototype.skip,de.prototype.canSkipNow=de.prototype.canSkipNow,de.prototype.getTimeUntilSkippable=de.prototype.getTimeUntilSkippable,de.prototype.isSkippable=de.prototype.isSkippable,de.prototype.isPaused=de.prototype.isPaused,de.prototype.getRemainingTime=de.prototype.getRemainingTime,de.prototype.getMinSuggestedDuration=de.prototype.getMinSuggestedDuration,de.prototype.getDuration=de.prototype.getDuration,de.prototype.isUsingAnotherMediaElement=de.prototype.isUsingAnotherMediaElement,de.prototype.hasCustomClick=de.prototype.hasCustomClick,de.prototype.isClientRendering=de.prototype.isClientRendering,de.prototype.needsSkipUI=de.prototype.needsSkipUI;function Py(e,t,n,i){var r=this;this.u=e,this.l=t,this.j=null,this.G=NaN,this.i=i,this.H=!1,this.B=this.m=this.o=null,this.C="",this.F=[],this.h=new _e,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new Z("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(a){ak(r,a)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){r.C.length?r.j.resolve(r.C):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(a){a=a.getAd(),r.m=new de(a,r.l),r.B&&(r.m.i=r.B),r.i(new Z("ad-started",new Map().set("ad",r.m))),r.u.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){r.u.removeAttribute("ad-active");var a=r.l.currentTime;r.o&&r.o>a&&(r.l.currentTime=r.o,r.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(a){r.B=a.getStreamData().adProgressData,r.m&&(r.m.i=r.B)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){r.i(new Z("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){r.i(new Z("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){r.i(new Z("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){r.i(new Z("ad-complete")),r.i(new Z("ad-stopped")),r.u.removeAttribute("ad-active"),r.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){r.i(new Z("ad-skipped")),r.i(new Z("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(a){var o=a.getStreamData();a=[],o=m(o.cuepoints);for(var s=o.next();!s.done;s=o.next())s=s.value,a.push({start:s.start,end:s.end});r.F=a,r.i(new Z("ad-cue-points-changed",new Map().set("cuepoints",a)))})}f=Py.prototype,f.configure=function(){},f.stop=function(){this.C="",this.o=null,this.F=[]},f.release=function(){this.stop(),this.h&&this.h.release()},f.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},f.getCuePoints=function(){return this.F};function ak(e,t){e.i(new Z("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.H||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var i=e.g.previousCuePointForStreamTime(n);i&&!i.played&&(e.o=n,e.l.currentTime=i.start)}})}function J(){Ge.call(this),this.h=this.i=this.j=this.g=null,this.m=new my,this.o=navigator.language,this.l=null}rt(J,Ge),f=J.prototype,f.setLocale=function(e){this.o=e},f.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},f.initInterstitial=function(e,t,n){var i=this;this.g&&this.g.release(),this.g=new wy(e,t,n,function(r){return Ml(i,r)}),this.g.configure(this.l)},f.initClientSide=function(e,t,n){var i=this;if(!P.google||!google.ima||!google.ima.AdsLoader)throw new D(2,10,1e4);this.j&&this.j.release(),this.j=new Al(e,t,this.o,n,function(r){return Ml(i,r)}),this.j.configure(this.l)},f.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),Ge.prototype.release.call(this)},f.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new Z("ad-stopped")),this.dispatchEvent(new Z("ad-content-attach-requested")),this.m=new my},f.requestClientSideAds=function(e){if(!this.j)throw new D(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.H=Date.now()/1e3,t.m.requestAds(e)},f.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new D(1,10,10001);var t=this.j;t.C=e,t.g&&t.g.updateAdsRenderingSettings(t.C)},f.initMediaTailor=function(e,t,n){var i=this;this.i&&this.i.release(),this.i=new hs(e,t,n,function(r){return Ml(i,r)})},f.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new D(1,10,10005);var i=this.i;return n=n===void 0?"":n,i.l?e=Promise.reject(new D(1,10,10004)):(i.l=new qe,tk(i,e,t),i.I=n||"",i.R=Date.now()/1e3,e=i.l),e},f.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new D(1,10,10005);var t=this.i;t.H=e,t.i(new Z("ads-loaded",new Map().set("loadTime",0)))},f.initServerSide=function(e,t){var n=this;if(!P.google||!google.ima||!google.ima.dai)throw new D(2,10,10002);this.h&&this.h.release(),this.h=new Py(e,t,this.o,function(i){return Ml(n,i)}),this.h.configure(this.l)},f.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.h)throw new D(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&Ee('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.16.14",n=this.h,n.j?e=Promise.reject(new D(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.H=!0),n.j=new qe,n.g.requestStream(e),n.C=t||"",n.G=Date.now()/1e3,e=n.j),e},f.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new D(1,10,10003);(e.mpt||e.mpv)&&Ee('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.16.14",this.h.g.replaceAdTagParameters(e)},f.getServerSideCuePoints=function(){return Ce("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},f.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},f.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:GA(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},f.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},f.onDashTimedMetadata=function(e){this.h&&e.schemeIdUri=="urn:google:dai:2018"&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},f.onHlsTimedMetadata=function(e,t){this.h&&this.h.g.processMetadata("ID3",e.data,t)},f.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},f.onHLSInterstitialMetadata=function(e,t,n){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,t),this.g&&YA(this.g,n))},f.onDASHInterstitialMetadata=function(e,t,n){if(!this.l||!this.l.disableDASHInterstitial){var i=n.schemeIdUri;if(i=="urn:mpeg:dash:event:alternativeMPD:insert:2025"||i=="urn:mpeg:dash:event:alternativeMPD:replace:2025"){if(this.g||this.initInterstitial(null,e,t),this.g&&(e=this.g,t=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:replace:2025",i=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:insert:2025",t||i)){for(var r=n.startTime,a=n.endTime,o=null,s=0,u,l=m(n.eventNode.children),c=l.next();!c.done;c=l.next())if(c=c.value,c.tagName=="AlternativeMPD"){if(c=c.attributes.uri){u=c;break}}else if(c.tagName=="InsertPresentation"||c.tagName=="ReplacePresentation"){var d=c.attributes.url;if(d){u=nn(d),(l=ge(c,"maxDuration",Lt))&&(o=l/n.timescale),(l=ge(c,"returnOffset",Lt))&&(s=l/n.timescale),t&&s&&(a=r+s);break}}u&&fs(e,[{id:n.id,groupId:null,startTime:r,endTime:a,uri:u,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:i?s:null,playoutLimit:o,once:!1,pre:!1,post:!1,timelineRange:t&&!i,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}])}}else(i=="urn:mpeg:dash:event:2012"||i=="urn:scte:dash:scte214-events")&&n.eventNode&&tt(n.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,t),this.g&&JA(this.g,n))}},f.addCustomInterstitial=function(e){if(!this.g)throw new D(1,10,10006);fs(this.g,[e])},f.addAdUrlInterstitial=function(e){if(!this.g)throw new D(1,10,10006);return this.g.addAdUrlInterstitial(e)},f.getInterstitialPlayer=function(){if(!this.g)throw new D(1,10,10006);return this.g.td()};function Ml(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;var n=t.ad;n&&!n.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}Y("shaka.ads.AdManager",J),J.prototype.getInterstitialPlayer=J.prototype.getInterstitialPlayer,J.prototype.addAdUrlInterstitial=J.prototype.addAdUrlInterstitial,J.prototype.addCustomInterstitial=J.prototype.addCustomInterstitial,J.prototype.onDASHInterstitialMetadata=J.prototype.onDASHInterstitialMetadata,J.prototype.onHLSInterstitialMetadata=J.prototype.onHLSInterstitialMetadata,J.prototype.onCueMetadataChange=J.prototype.onCueMetadataChange,J.prototype.onHlsTimedMetadata=J.prototype.onHlsTimedMetadata,J.prototype.onDashTimedMetadata=J.prototype.onDashTimedMetadata,J.prototype.onManifestUpdated=J.prototype.onManifestUpdated,J.prototype.getStats=J.prototype.getStats,J.prototype.getCuePoints=J.prototype.getCuePoints,J.prototype.getServerSideCuePoints=J.prototype.getServerSideCuePoints,J.prototype.replaceServerSideAdTagParameters=J.prototype.replaceServerSideAdTagParameters,J.prototype.requestServerSideStream=J.prototype.requestServerSideStream,J.prototype.initServerSide=J.prototype.initServerSide,J.prototype.addMediaTailorTrackingUrl=J.prototype.addMediaTailorTrackingUrl,J.prototype.requestMediaTailorStream=J.prototype.requestMediaTailorStream,J.prototype.initMediaTailor=J.prototype.initMediaTailor,J.prototype.updateClientSideAdsRenderingSettings=J.prototype.updateClientSideAdsRenderingSettings,J.prototype.requestClientSideAds=J.prototype.requestClientSideAds,J.prototype.onAssetUnload=J.prototype.onAssetUnload,J.prototype.release=J.prototype.release,J.prototype.initClientSide=J.prototype.initClientSide,J.prototype.initInterstitial=J.prototype.initInterstitial,J.prototype.configure=J.prototype.configure,J.prototype.setLocale=J.prototype.setLocale,J.ADS_LOADED="ads-loaded",J.AD_STARTED="ad-started",J.AD_FIRST_QUARTILE="ad-first-quartile",J.AD_MIDPOINT="ad-midpoint",J.AD_THIRD_QUARTILE="ad-third-quartile",J.AD_COMPLETE="ad-complete",J.AD_STOPPED="ad-stopped",J.AD_SKIPPED="ad-skipped",J.AD_VOLUME_CHANGED="ad-volume-changed",J.AD_MUTED="ad-muted",J.AD_PAUSED="ad-paused",J.AD_RESUMED="ad-resumed",J.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",J.CUEPOINTS_CHANGED="ad-cue-points-changed",J.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",J.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",J.AD_CLICKED="ad-clicked",J.AD_PROGRESS="ad-progress",J.AD_BUFFERING="ad-buffering",J.AD_IMPRESSION="ad-impression",J.AD_DURATION_CHANGED="ad-duration-changed",J.AD_CLOSED="ad-closed",J.AD_LOADED="ad-loaded",J.ALL_ADS_COMPLETED="all-ads-completed",J.AD_LINEAR_CHANGED="ad-linear-changed",J.AD_METADATA="ad-metadata",J.AD_RECOVERABLE_ERROR="ad-recoverable-error",J.AD_ERROR="ad-error",J.AD_BREAK_READY="ad-break-ready",J.AD_INTERACTION="ad-interaction",J.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",J.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",J.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",Tl=function(){return new J};function Of(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(t=n instanceof Z,n instanceof Event||t){var i={};for(a in n){var r=n[a];r&&typeof r=="object"?a=="detail"?i[a]=r:r instanceof Event||r instanceof Z?i[a]={__type__:"Event",event:Of(r)}:t&&Array.isArray(r)&&(i[a]=r):a in Event||(i[a]=r)}return i}if(n instanceof Error){var a=new Set(["name","message","stack"]);for(i in n)a.add(i);for(t=m(Object.getOwnPropertyNames(n)),i=t.next();!i.done;i=t.next())a.add(i.value);for(t={},a=m(a),i=a.next();!i.done;i=a.next())i=i.value,t[i]=n[i];n={__type__:"Error",contents:t}}else if(n instanceof TimeRanges){for(a={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=m(Gi(n)),t=n.next();!t.done;t=n.next())t=t.value,i=t.end,a.start.push(t.start),a.end.push(i);n=a}else n=ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT===1?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:n<0?"-Infinity":"Infinity":n;return n}})}function Cl(e){return JSON.parse(e,function(t,n){if(n=="NaN")var i=NaN;else if(n=="-Infinity")i=-1/0;else if(n=="Infinity")i=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")i=ok(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")i=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(i in t)n[i]=t[i];i=n}else i=n&&typeof n=="object"&&n.__type__=="Event"?Cl(n.event):n;return i})}function ok(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var Ry="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),sk="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),_f=["loop","playbackRate"],uk=["pause","play"],jf=new Map().set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("isVideoOnly",10).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1).set("getBandwidthEstimate",1).set("isRemotePlayback",1),Uf=new Map().set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getChaptersTracks",2).set("getImageTracks",2).set("getVideoTracks",2).set("getTextTracks",2).set("getVariantTracks",2),Dy=new Map().set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),Ly=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],Ny=[["isTextTrackVisible","setTextTrackVisibility"]],lk="cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(" "),ck="addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(" ");function Bf(e,t,n,i,r,a,o){var s=this;this.H=e,this.K=o,this.l=new Ae(t),this.M=n,this.u=!1,this.B=i,this.G=r,this.N=a,this.i=this.m=!1,this.J="",this.o=null,this.C=function(){return Ff(s)},this.F=function(u,l){switch(u=Cl(l),u.type){case"event":var c=u.targetName,d=kg(u.event);s.B(c,d);break;case"update":c=u.update;for(d in c){u=s.g[d]||{};for(var h in c[d])u[h]=c[d][h]}s.u&&(s.M(),s.u=!1);break;case"asyncComplete":if(h=u.id,d=u.error,l=u.res,u=s.h.get(h),s.h.delete(h),u)if(d){h=new D(d.severity,d.category,d.code);for(c in d)h[c]=d[c];u.reject(h)}else u.resolve(l)}},this.g={video:{},player:{}},this.I=0,this.h=new Map,this.j=null,gs.add(this)}f=Bf.prototype,f.destroy=function(){return gs.delete(this),Vf(this),ri&&_y(this),this.l&&(this.l.stop(),this.l=null),this.G=this.B=null,this.i=this.m=!1,this.F=this.C=this.j=this.h=this.g=this.o=null,Promise.resolve()},f.ub=function(){return this.i},f.fh=function(){return this.J},f.init=function(){if(this.H.length)if(P.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.Jb();var e=new chrome.cast.SessionRequest(this.H,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=m(gs),i=n.next();!i.done;i=n.next()){i=i.value;var r=t;i.j=new qe,i.u=!0,Pl(i,r)}},function(t){for(var n=m(gs),i=n.next();!i.done;i=n.next())i=i.value,Rl=t=="available",i.l.Jb()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Rl&&this.l.ka(fk),(e=ri)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new qe,this.u=!0,Pl(this,e)):ri=null}else P.__onGCastApiAvailable!==jy&&(Dl=P.__onGCastApiAvailable||null,P.__onGCastApiAvailable=jy)},f.rh=function(e){this.o=e,this.i&&ps(this,{type:"appData",appData:this.o})},f.cast=function(){var e=this;return R(function(t){if(!e.m)throw new D(1,8,8e3);if(!Rl)throw new D(1,8,8001);if(e.i)throw new D(1,8,8002);return e.j=new qe,chrome.cast.requestSession(function(n){return Pl(e,n)},function(n){return Oy(e,n)}),T(t,e.j,0)})};function dk(e){e.i&&chrome.cast.requestSession(function(t){return Pl(e,t)},function(t){return Oy(e,t)})}f.qd=function(){if(this.i){if(Vf(this),ri){_y(this);try{ri.stop(function(){},function(){})}catch{}ri=null}Ff(this)}},f.get=function(e,t){var n=this;if(e=="video"){if(uk.includes(t))return function(){return n.Ni.apply(n,[e,t].concat(z(Et.apply(0,arguments))))}}else if(e=="player"){if(Dy.has(t)&&!this.get("player","isLive")())return function(){};if(lk.includes(t))return function(){return n.Ni.apply(n,[e,t].concat(z(Et.apply(0,arguments))))};if(ck.includes(t))return function(){return n.Qk.apply(n,[e,t].concat(z(Et.apply(0,arguments))))};if(jf.has(t)||Uf.has(t))return function(){return n.g[e][t]}}return this.g[e][t]},f.set=function(e,t,n){this.g[e][t]=n,ps(this,{type:"set",targetName:e,property:t,value:n})};function Pl(e,t){var n=e.N();ri=t,t.addUpdateListener(e.C),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.F),Ff(e),ps(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function Oy(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new D(2,8,n,t))}f.Ni=function(e,t){ps(this,{type:"call",targetName:e,methodName:t,args:Et.apply(2,arguments)})},f.Qk=function(e,t){var n=Et.apply(2,arguments),i=new qe,r=this.I.toString();this.I++,this.h.set(r,i);try{ps(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(a){i.reject(a)}return i};function _y(e){var t=ri;t.removeUpdateListener(e.C),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.F)}function Ff(e){var t=ri?ri.status=="connected":!1;if(e.i&&!t){e.G();for(var n in e.g)e.g[n]={};Vf(e)}e.i=t,e.J=t?ri.receiver.friendlyName:"",e.l.Jb()}function Vf(e){if(e.h)for(var t=m(e.h.keys()),n=t.next();!n.done;n=t.next()){n=n.value;var i=e.h.get(n);e.h.delete(n),i.reject(new D(1,7,7e3))}}function ps(e,t){t=Of(t);var n=ri;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},Yw)}catch(i){throw t=new D(2,8,8005,i),n=new Z("error",new Map().set("detail",t)),e.B("player",n),e.qd(),t}}var fk=.02,Rl=!1,ri=null,Dl=null,gs=new Set;function jy(e){if(Dl?P.__onGCastApiAvailable=Dl:delete P.__onGCastApiAvailable,Dl=null,e)for(var t=m(gs),n=t.next();!n.done;n=t.next())n.value.init();typeof P.__onGCastApiAvailable=="function"&&P.__onGCastApiAvailable(e)}function bt(e,t,n,i){i=i===void 0?!1:i,Ge.call(this);var r=this;this.i=e,this.h=t,this.l=this.o=this.m=this.u=this.j=null,this.I=n,this.H=i,this.F=[],this.C=[],this.B=[],this.G=new Map,this.g=null,P.chrome&&Te().Oa()!="CAST"?(this.g=new Bf(n,function(){return Fy(r)},function(){return Vy(r)},function(a,o){return Gy(r,a,o)},function(){return Hy(r)},function(){return By(r)},i),hk(this)):(this.j=this.i,this.u=this.h)}rt(bt,Ge),f=bt.prototype,f.destroy=function(e){return this.g&&e!==void 0&&e&&this.g.qd(),this.l&&(this.l.release(),this.l=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.j=this.i=null,Ge.prototype.release.call(this),Promise.all(e)},f.hk=function(){return this.j},f.td=function(){return this.u},f.tj=function(){return this.g?this.g.m&&Rl:!1},f.ub=function(){return this.g?this.g.ub():!1},f.fh=function(){return this.g?this.g.fh():""},f.cast=function(){var e=this;return R(function(t){return t.g==1?e.g?T(t,e.g.cast(),2):t.return():e.h?T(t,e.h.Dc(),0):t.return()})},f.rh=function(e){this.g&&this.g.rh(e)},f.jl=function(){this.g&&dk(this.g)},f.qd=function(){this.g&&this.g.qd()},f.uj=function(e,t){t=t===void 0?!1:t;var n=this;return R(function(i){if(i.g==1)return e==n.I&&t==n.H||(n.I=e,n.H=t,!n.g)?i.return():(n.g.qd(),T(i,n.g.destroy(),2));n.g=null,n.g=new Bf(e,function(){return Fy(n)},function(){return Vy(n)},function(r,a){return Gy(n,r,a)},function(){return Hy(n)},function(){return By(n)},t),n.g.init(),X(i)})};function hk(e){e.g.init(),e.l=new _e;for(var t=m(Ry),n=t.next();!n.done;n=t.next())e.l.D(e.i,n.value,function(a){e.g.ub()||(a=kg(a),e.m.dispatchEvent(a))});for(var i in Su)e.l.D(e.h,Su[i],function(a){e.g.ub()||e.o.dispatchEvent(a)});e.j={},t={};for(var r in e.i)t={ie:t.ie},t.ie=r,Object.defineProperty(e.j,t.ie,{configurable:!1,enumerable:!0,get:function(a){return function(){return gk(e,a.ie)}}(t),set:function(a){return function(o){var s=a.ie;e.g.ub()?e.g.set("video",s,o):e.i[s]=o}}(t)});e.u={},Uy(e,function(a){Object.defineProperty(e.u,a,{configurable:!1,enumerable:!0,get:function(){return Ll(e,a)}})}),pk(e),e.m=new Ge,e.m.Je=e.j,e.o=new Ge,e.o.Je=e.u,e.l.D(e.h,"unloading",function(){e.g&&e.g.ub()||Hf(e)})}function pk(e){var t=new Map;Uy(e,function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.G.set(n,i):e.G.set(i,n)):t.set(i,n)})}function Uy(e,t){function n(u){return u=="constructor"||typeof i[u]!="function"?!1:!r.has(u)}var i=e.h,r=new Set,a;for(a in i)n(a)&&(r.add(a),t(a,i[a]));for(e=Object.getPrototypeOf(i),a=Object.getPrototypeOf({});e&&e!=a;){for(var o=m(Object.getOwnPropertyNames(e)),s=o.next();!s.done;s=o.next())s=s.value,n(s)&&(r.add(s),t(s,i[s]));e=Object.getPrototypeOf(e)}}function By(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.rd(),startTime:null,addThumbnailsTrackCalls:e.F,addTextTrackAsyncCalls:e.C,addChaptersTrackCalls:e.B};e.i.pause();for(var n=m(_f),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),n=m(Ly),i=n.next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.h[r[0]](),t.player[i]=r}for(n=m(Ny),i=n.next();!i.done;i=n.next())r=i.value,i=r[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function Fy(e){var t=new Z("caststatuschanged");e.dispatchEvent(t)}function Vy(e){var t=new Z(e.j.paused?"pause":"play");e.m.dispatchEvent(t)}function Hy(e){for(var t=m(Ly),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var r=e.F,a=e.C,o=e.B;Hf(e);var s=e.g.get("player","getAssetUri")();i=e.g.get("video","ended"),t=Promise.resolve();var u=e.i.autoplay;n=null,i||(n=e.g.get("video","currentTime"));var l;(i=e.g.get("player","getTextTracks")())&&i.length&&(l=i.find(function(h){return h.active}));var c=e.g.get("player","isTextTrackVisible")();s&&(e.i.autoplay=!1,t=e.h.load(s,n));var d={};for(n=m(_f),i=n.next();!i.done;i=n.next())i=i.value,d[i]=e.g.get("video",i);t.then(function(){if(e.i){for(var h=m(r),p=h.next();!p.done;p=h.next()){p=p.value;var g;(g=e.td()).Pe.apply(g,z(p))}for(h=m(a),g=h.next();!g.done;g=h.next()){g=g.value;var y;(y=e.td()).Sd.apply(y,z(g))}for(y=m(o),h=y.next();!h.done;h=y.next()){h=h.value;var b;(b=e.td()).Oe.apply(b,z(h))}for(b=m(_f),y=b.next();!y.done;y=b.next())y=y.value,e.i[y]=d[y];for(b=m(Ny),y=b.next();!y.done;y=b.next())h=y.value,y=h[1],h=e.g.get("player",h[0])(),e.h[y](h);e.h.xh(c),l&&e.h.ph(l.language,l.roles,l.forced),e.i.autoplay=u,s&&e.i.play()}},function(h){h=new Map().set("detail",h),h=new Z("error",h),e.h.dispatchEvent(h)})}function gk(e,t){if(t=="addEventListener")return function(i,r,a){return e.m.addEventListener(i,r,a)};if(t=="removeEventListener")return function(i,r,a){return e.m.removeEventListener(i,r,a)};if(e.g.ub()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.ub()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function Ll(e,t,n){if(n=n===void 0?!1:n,e.G.has(t)&&(t=e.G.get(t)),t=="addEventListener")return function(i,r,a){return e.o.addEventListener(i,r,a)};if(t=="removeEventListener")return function(i,r,a){return e.o.removeEventListener(i,r,a)};if(t=="getMediaElement")return function(){return e.j};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Yb()};if(t=="getDrmEngine")return function(){return e.h.F};if(t=="getAdManager")return function(){return e.h.ei()};if(t=="getQueueManager")return function(){return e.h.ni()};if(t=="setVideoContainer")return function(i){return e.h.$i(i)};if(!n){if(t=="addThumbnailsTrack")return function(){var i=Et.apply(0,arguments);return e.F.push(i),Ll(e,t,!0).apply(null,z(i))};if(t=="addTextTrackAsync")return function(){var i=Et.apply(0,arguments);return e.C.push(i),Ll(e,t,!0).apply(null,z(i))};if(t=="addChaptersTrack")return function(){var i=Et.apply(0,arguments);return e.B.push(i),Ll(e,t,!0).apply(null,z(i))}}if(e.g.ub()){if(t=="getManifest"||t=="drmInfo")return function(){return Ee(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return Ee(t+"() does not work while casting!"),Promise.resolve()};if(t=="getChapters")return function(){return Ee(t+"() does not work while casting!"),[]}}return e.g.ub()&&Object.keys(e.g.g.video).length==0&&(jf.has(t)||Uf.has(t))||!e.g.ub()?e.h[t].bind(e.h):e.g.get("player",t)}function Gy(e,t,n){e.g.ub()&&(t=="video"?e.m.dispatchEvent(n):t=="player"&&(n.type=="unloading"&&Hf(e),e.o.dispatchEvent(n)))}function Hf(e){e.F=[],e.C=[],e.B=[]}Y("shaka.cast.CastProxy",bt),bt.prototype.changeReceiverId=bt.prototype.uj,bt.prototype.forceDisconnect=bt.prototype.qd,bt.prototype.suggestDisconnect=bt.prototype.jl,bt.prototype.setAppData=bt.prototype.rh,bt.prototype.cast=bt.prototype.cast,bt.prototype.receiverName=bt.prototype.fh,bt.prototype.isCasting=bt.prototype.ub,bt.prototype.canCast=bt.prototype.tj,bt.prototype.getPlayer=bt.prototype.td,bt.prototype.getVideo=bt.prototype.hk,bt.prototype.destroy=bt.prototype.destroy;function Xt(e,t,n,i){Ge.call(this);var r=this;this.h=e,this.g=t,this.j=new _e,this.I={video:e,player:t},this.G=n||function(){},this.J=i||function(a){return a},this.i=null,this.H=!1,this.o=!0,this.m=0,this.C=!1,this.B=!0,this.u=this.l=null,this.F=new Ae(function(){Gf(r)}),mk(this)}rt(Xt,Ge),f=Xt.prototype,f.isConnected=function(){return this.H},f.qk=function(){return this.o},f.cl=function(e){this.i=e},f.yj=function(){this.i=null},f.fl=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},f.al=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},f.$k=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},f.destroy=function(){var e=this,t,n;return R(function(i){if(i.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.g&&(t.push(e.g.destroy()),e.g=null),e.F&&(e.F.stop(),e.F=null),e.h=null,e.I=null,e.G=null,e.H=!1,e.o=!0,e.l=null,e.u=null,Ge.prototype.release.call(e),T(i,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),X(i)})};function mk(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return qy(e)},t.onSenderDisconnected=function(){return qy(e)},t.onSystemVolumeChanged=function(){var r=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();r&&Xi(e,{type:"update",update:{video:{volume:r.level,muted:r.muted}}},e.l),Xi(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(r){return bk(e,r)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(r){return yk(e,r)},t.start(),t=m(Ry);for(var n=t.next();!n.done;n=t.next())e.j.D(e.h,n.value,function(r){return Ky(e,"video",r)});for(var i in Su)e.j.D(e.g,Su[i],function(r){return Ky(e,"player",r)});e.j.D(e.h,"loadeddata",function(){e.C=!0}),e.j.D(e.g,"loading",function(){e.o=!1,Xa(e)}),e.j.D(e.h,"playing",function(){e.o=!1,Xa(e)}),e.j.D(e.h,"pause",function(){Xa(e)}),e.j.D(e.g,"unloading",function(){e.o=!0,Xa(e)}),e.j.D(e.h,"ended",function(){new Ae(function(){e.h&&e.h.ended&&(e.o=!0,Xa(e))}).ka(Sk)})}function qy(e){e.m=0,e.B=!0,e.H=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,Xa(e)}function Xa(e){var t;R(function(n){if(n.g==1)return T(n,Promise.resolve(),2);if(!e.g)return n.return();t=new Z("caststatuschanged"),e.dispatchEvent(t),zy(e)||Yi(e),X(n)})}function vk(e,t,n){var i,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M,N;R(function(I){switch(I.g){case 1:for(i in t.player)r=t.player[i],e.g[i](r);return e.G(n),a=e.h.autoplay,t.manifest?(e.h.autoplay=!1,he(I,5),T(I,e.g.load(t.manifest,t.startTime),7)):T(I,Promise.resolve(),3);case 7:if(t.addThumbnailsTrackCalls)for(o=m(t.addThumbnailsTrackCalls),s=o.next();!s.done;s=o.next())u=s.value,e.g.Pe.apply(e.g,z(u));if(t.addTextTrackAsyncCalls)for(l=m(t.addTextTrackAsyncCalls),c=l.next();!c.done;c=l.next())d=c.value,e.g.Sd.apply(e.g,z(d));if(t.addChaptersTrackCalls)for(h=m(t.addChaptersTrackCalls),p=h.next();!p.done;p=h.next())g=p.value,e.g.Oe.apply(e.g,z(g));ye(I,3);break;case 5:return y=oe(I),b=new Map().set("detail",y),A=new Z("error",b),e.g&&e.g.dispatchEvent(A),I.return();case 3:if(!e.g)return I.return();for(x in t.video)k=t.video[x],e.h[x]=k;for(M in t.playerAfterLoad)N=t.playerAfterLoad[M],e.g[M](N);e.h.autoplay=a,t.manifest&&(e.h.play(),Yi(e)),X(I)}})}function Ky(e,t,n){e.g&&(Gf(e),Xi(e,{type:"event",targetName:t,event:n},e.l))}function Gf(e){e.F.ka(wk);for(var t={video:{},player:{}},n=m(sk),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.h[i];e.g.W()&&Dy.forEach(function(r,a){e.m%r==0&&(t.player[a]=e.g[a]())}),jf.forEach(function(r,a){e.m%r==0&&(t.player[a]=e.g[a]())}),(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Xi(e,{type:"update",update:t},e.l),Uf.forEach(function(r,a){e.m%r==0&&(r={player:{}},r.player[a]=e.g[a](),Xi(e,{type:"update",update:r},e.l))}),e.C&&(e.m+=1),zy(e)}function zy(e){return e.B&&(e.h.duration||e.g.W())?(qf(e),e.B=!1,!0):!1}function qf(e,t){var n={contentId:e.g.rd(),streamType:e.g.W()?"LIVE":"BUFFERED",contentType:""};e.g.W()||(n.duration=e.h.duration),e.i&&(n.metadata=e.i),Yi(e,t===void 0?0:t,n)}function yk(e,t){var n=Cl(t.data);switch(n.type){case"init":e.m=0,e.C=!1,e.B=!0,vk(e,n.initState,n.appData),Gf(e);break;case"appData":e.G(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,i=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),r=="volume"){t.setSystemVolumeLevel(n);break}else if(r=="muted"){t.setSystemVolumeMuted(n);break}}e.I[i][r]=n;break;case"call":i=e.I[n.targetName],i[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,i=="player"&&r=="load"&&(e.m=0,e.C=!1);var a=n.id,o=t.senderId;t=e.I[i],n=t[r].apply(t,n.args),i=="player"&&r=="load"&&(n=n.then(function(){e.B=!0})),n.then(function(s){return Wy(e,o,a,null,s)},function(s){return Wy(e,o,a,s,null)})}}function bk(e,t){var n=Cl(t.data);switch(n.type){case"PLAY":e.h.play(),Yi(e);break;case"PAUSE":e.h.pause(),Yi(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;t!=null&&(e.h.currentTime=Number(t)),i&&i=="PLAYBACK_START"?(e.h.play(),Yi(e)):i&&i=="PLAYBACK_PAUSE"&&(e.h.pause(),Yi(e));break;case"STOP":e.g.Dc().then(function(){e.g&&Yi(e)});break;case"GET_STATUS":qf(e,Number(n.requestId));break;case"VOLUME":i=n.volume,t=i.level,i=i.muted;var r=e.h.volume,a=e.h.muted;t!=null&&(e.h.volume=Number(t)),i!=null&&(e.h.muted=i),r==e.h.volume&&a==e.h.muted||Yi(e);break;case"LOAD":e.m=0,e.C=!1,e.B=!1,t=n.media,i=n.currentTime,r=e.J(t.contentId),a=n.autoplay||!0,e.G(t.customData),a&&(e.h.autoplay=!0),e.g.load(r,i).then(function(){e.g&&qf(e)}).catch(function(o){var s="LOAD_FAILED";o.category==7&&o.code==7e3&&(s="LOAD_CANCELLED"),Xi(e,{requestId:Number(n.requestId),type:s},e.u)});break;default:Xi(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}function Wy(e,t,n,i,r){e.g&&Xi(e,{type:"asyncComplete",id:n,error:i,res:r},e.l,t)}function Xi(e,t,n,i){e.H&&(e=Of(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Yi(e,t,n){n=n===void 0?null:n;var i={mediaSessionId:0,playbackRate:e.h.playbackRate,playerState:e.o?Tk:e.g.Rg()?Ak:e.h.paused?kk:xk,currentTime:e.h.currentTime,supportedMediaCommands:63,volume:{level:e.h.volume,muted:e.h.muted}};n&&(i.media=n),Xi(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[i]},e.u)}Y("shaka.cast.CastReceiver",Xt),Xt.prototype.destroy=Xt.prototype.destroy,Xt.prototype.setContentArtist=Xt.prototype.$k,Xt.prototype.setContentImage=Xt.prototype.al,Xt.prototype.setContentTitle=Xt.prototype.fl,Xt.prototype.clearContentMetadata=Xt.prototype.yj,Xt.prototype.setContentMetadata=Xt.prototype.cl,Xt.prototype.isIdle=Xt.prototype.qk,Xt.prototype.isConnected=Xt.prototype.isConnected;var wk=.5,Sk=5,Tk="IDLE",xk="PLAYING",Ak="BUFFERING",kk="PAUSED";function Xy(e,t,n,i,r){if(i>=r)return null;for(var a=-1,o=-1,s=0;s<n.length;s++)if(n[s].some(function(M){return M!=null&&M.g.trim()!=""})){a=s;break}for(s=n.length-1;s>=0;s--)if(n[s].some(function(M){return M!=null&&M.g.trim()!=""})){o=s;break}if(a===-1||o===-1)return null;for(var u=s=!1,l="white",c="black",d=Kf(i,r,s,u,l,c);a<=o;a++){for(var h=n[a],p=-1,g=-1,y=0;y<h.length;y++)if(h[y]!=null&&h[y].g.trim()!==""){p=y;break}for(y=h.length-1;y>=0;y--)if(h[y]!=null&&h[y].g.trim()!==""){g=y;break}if(p===-1||g===-1)h=Yy(i,r),e.nestedCues.push(h);else{for(;p<=g;p++)if(y=h[p]){var b=y.l,A=y.i,x=y.j,k=y.h;(b!=s||A!=u||x!=l||k!=c)&&(d.payload&&e.nestedCues.push(d),d=Kf(i,r,b,A,x,k),s=b,u=A,l=x,c=k),d.payload+=y.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d),a!==o&&(d=Yy(i,r),e.nestedCues.push(d)),d=Kf(i,r,s,u,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Kf(e,t,n,i,r,a){return e=new Qe(e,t,""),n&&e.textDecoration.push(Oi),i&&(e.fontStyle=ba),e.color=r,e.backgroundColor=a,e}function Yy(e,t){return e=new Qe(e,t,""),e.lineBreak=!0,e}function Jy(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function zf(e,t){this.i=[],this.g=1,this.h=0,this.F=e,this.C=t,this.j=this.m=!1,this.l="white",this.o="black",this.u=this.B=null,ms(this)}function Nl(e,t,n){var i="CC"+((e.F<<1|e.C)+1),r=new Qe(t,n,"");r.lineInterpretation=1;var a=Zy.get(e.g);return a&&(r.line=a),e.u!=null&&e.B!=null&&(r.position=10+Math.min(70,e.u*10)+e.B*2.5),(t=Xy(r,i,e.i,t,n))&&e.g+t.cue.nestedCues.length-3>15&&(a=Zy.get(e.g+3-t.cue.nestedCues.length))&&(r.line=a),t}function ms(e){Ji(e,0,15),e.g=1}function Ya(e,t,n){if(!(n<32||n>127)){var i="";switch(t){case 0:i=Qy.has(n)?Qy.get(n):String.fromCharCode(n);break;case 1:i=Ik.get(n);break;case 2:e.i[e.g].pop(),i=Ek.get(n);break;case 3:e.i[e.g].pop(),i=Mk.get(n)}i&&e.i[e.g].push(new Jy(i,e.m,e.j,e.o,e.l))}}function $y(e,t,n,i){if(!(n<0||t<0))if(t>=n)for(--i;i>=0;i--)e.i[t+i]=e.i[n+i].map(function(a){return a});else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map(function(a){return a})}function Ji(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var Qy=new Map([[39,"â€™"],[42,"Ã¡"],[92,"Ã©"],[92,"Ã©"],[94,"Ã­"],[95,"Ã³"],[96,"Ãº"],[123,"Ã§"],[124,"Ã·"],[125,"Ã‘"],[126,"Ã±"],[127,"â–ˆ"]]),Ik=new Map([[48,"Â®"],[49,"Â°"],[50,"Â½"],[51,"Â¿"],[52,"â„¢"],[53,"Â¢"],[54,"Â£"],[55,"â™ª"],[56,"Ã "],[57," "],[58,"Ã¨"],[59,"Ã¢"],[60,"Ãª"],[61,"Ã®"],[62,"Ã´"],[63,"Ã»"]]),Ek=new Map([[32,"Ã"],[33,"Ã‰"],[34,"Ã“"],[35,"Ãš"],[36,"Ãœ"],[37,"Ã¼"],[38,"â€˜"],[39,"Â¡"],[40,"*"],[41,"'"],[42,"â”€"],[43,"Â©"],[44,"â„ "],[45,"Â·"],[46,"â€œ"],[47,"â€"],[48,"Ã€"],[49,"Ã‚"],[50,"Ã‡"],[51,"Ãˆ"],[52,"ÃŠ"],[53,"Ã‹"],[54,"Ã«"],[55,"ÃŽ"],[56,"Ã"],[57,"Ã¯"],[58,"Ã”"],[59,"Ã™"],[60,"Ã¹"],[61,"Ã›"],[62,"Â«"],[63,"Â»"]]),Mk=new Map([[32,"Ãƒ"],[33,"Ã£"],[34,"Ã"],[35,"ÃŒ"],[36,"Ã¬"],[37,"Ã’"],[38,"Ã²"],[39,"Ã•"],[40,"Ãµ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ã„"],[49,"Ã¤"],[50,"Ã–"],[51,"Ã¶"],[52,"ÃŸ"],[53,"Â¥"],[54,"Â¤"],[55,"â”‚"],[56,"Ã…"],[57,"Ã¥"],[58,"Ã˜"],[59,"Ã¸"],[60,"â”Œ"],[61,"â”"],[62,"â””"],[63,"â”˜"]]),Zy=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Ol(e,t){this.h=0,this.o=new zf(e,t),this.i=new zf(e,t),this.g=this.j=new zf(e,t),this.l=0,this.m=null}function Wf(e,t,n){e.g=e.i;var i=e.g,r=null;return e.h!==3&&e.h!==4&&(r=Nl(i,e.l,n),n=e.i,n.g=n.h>0?n.h:0,Ji(n,0,15),n=e.j,n.g=n.h>0?n.h:0,Ji(n,0,15),i.g=15),e.h=3,i.h=t,r}function e0(e){e.h=1,e.g=e.j,e.g.h=0}function t0(e){nr("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var Ck="black green blue cyan red yellow magenta black".split(" "),n0="white green blue cyan red yellow magenta white_italics".split(" ");function Xf(e,t){this.J=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.H=this.M=this.I=0,this.G=2,this.i=[],this.g=this.h=this.j=0,this.F=this.B=!1,this.C="white",this.u="black",Yf(this)}function Yf(e){e.i=[];for(var t=0;t<16;t++)e.i.push(Jf())}function Jf(){for(var e=[],t=0;t<42;t++)e.push(null);return e}function Tr(e,t){i0(e)&&(e.i[e.h][e.g]=new Jy(t,e.F,e.B,e.u,e.C),e.g++)}function i0(e){var t=e.g<e.m&&e.g>=0;return e.h<e.o&&e.h>=0&&t}Xf.prototype.isVisible=function(){return this.l};function Pk(e){for(var t=0,n=1;n<16;n++,t++)e.i[t]=e.i[n];for(n=0;n<1;n++,t++)e.i[t]=Jf()}function na(e,t,n){var i=new Qe(e.j,t,"");i.textAlign=e.G===0?"left":e.G===1?"right":Si;var r=i.region;switch(e.J&&(r.id+="svc"+e.J),r.id+="win"+e.N,r.height=e.o,r.width=e.m,r.heightUnits=2,r.widthUnits=2,r.viewportAnchorX=e.I,r.viewportAnchorY=e.M,r.viewportAnchorUnits=e.K?vn:2,e.H){case 0:r.regionAnchorX=0,r.regionAnchorY=0;break;case 1:r.regionAnchorX=50,r.regionAnchorY=0;break;case 2:r.regionAnchorX=100,r.regionAnchorY=0;break;case 3:r.regionAnchorX=0,r.regionAnchorY=50;break;case 4:r.regionAnchorX=50,r.regionAnchorY=50;break;case 5:r.regionAnchorX=100,r.regionAnchorY=50;break;case 6:r.regionAnchorX=0,r.regionAnchorY=100;break;case 7:r.regionAnchorX=50,r.regionAnchorY=100;break;case 8:r.regionAnchorX=100,r.regionAnchorY=100}return(n=Xy(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}Xf.prototype.display=function(){this.l=!0};function Rk(){this.i=[],this.h=null,this.g=0}function Dk(e,t){t.type===3?(e.g=(t.value&63)*2-1,e.h=[]):e.h&&(e.g>0&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new vs(e.h)),e.h=null,e.g=0))}function vs(e){this.g=0,this.h=e}vs.prototype.Ka=function(){return this.g<this.h.length},vs.prototype.Pa=function(){return this.g};function xt(e){if(!e.Ka())throw new D(2,2,3e3);return e.h[e.g++]}vs.prototype.skip=function(e){if(this.g+e>this.h.length)throw new D(2,2,3e3);this.g+=e},vs.prototype.Ri=function(e){if(this.g-e<0)throw new D(2,2,3e3);this.g-=e};function Lk(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Nk(e,t){var n=xt(t),i=n.value;if(n=n.pts,i===16){var r=xt(t);i=i<<16|r.value}return i>=0&&i<=31?Ok(e,t,i,n):i>=128&&i<=159?_k(e,t,i,n):(i>=4096&&i<=4127?(e=i&255,e>=8&&e<=15?t.skip(1):e>=16&&e<=23?t.skip(2):e>=24&&e<=31&&t.skip(3)):i>=4224&&i<=4255?(e=i&255,e>=128&&e<=135?t.skip(4):e>=136&&e<=143&&t.skip(5)):i>=32&&i<=127?(t=i,e.g&&(t===127?Tr(e.g,"â™ª"):Tr(e.g,String.fromCharCode(t)))):i>=160&&i<=255?e.g&&Tr(e.g,String.fromCharCode(i)):i>=4128&&i<=4223?(t=i&255,e.g&&(s0.has(t)?(t=s0.get(t),Tr(e.g,t)):Tr(e.g,"_"))):i>=4256&&i<=4351&&e.g&&((i&255)!=160?Tr(e.g,"_"):Tr(e.g,"[CC]")),[])}function Ok(e,t,n,i){if(!e.g)return[];if(n==24)return n=xt(t).value,i=xt(t).value,n=function(a){return a.map(function(o){return("0"+(o&255).toString(16)).slice(-2)}).join("")}([n,i]),Tr(e.g,String.fromCharCode(parseInt(n,16))),[];t=e.g;var r=null;switch(n){case 8:!i0(t)||t.g<=0&&t.h<=0||(t.g<=0?(t.g=t.m-1,t.h--):t.g--,t.i[t.h][t.g]=null);break;case 13:t.isVisible()&&(r=na(t,i,e.i)),t.h+1>=t.o?Pk(t):t.h++,t.g=0;break;case 14:t.isVisible()&&(r=na(t,i,e.i)),t.i[t.h]=Jf(),t.g=0;break;case 12:t.isVisible()&&(r=na(t,i,e.i)),Yf(t),t.h=0,t.g=0}return r?[r]:[]}function _k(e,t,n,i){if(n>=128&&n<=135)i=n&7,e.h[i]&&(e.g=e.h[i]);else{if(n===136){n=xt(t).value,t=[],n=m(ys(e,n));for(var r=n.next();!r.done;r=n.next()){if(r=e.h[r.value],r.isVisible()){var a=na(r,i,e.i);a&&t.push(a)}Yf(r)}return t}if(n===137)for(t=xt(t).value,t=m(ys(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=i),n.display();else{if(n===138){for(n=xt(t).value,t=null,n=m(ys(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=na(r,i,e.i)),r.l=!1;return t?[t]:[]}if(n===139){for(n=xt(t).value,t=null,n=m(ys(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()?t=na(r,i,e.i):r.j=i,r.l=!r.l;return t?[t]:[]}if(n===140)return t=xt(t).value,r0(e,t,i);if(n===143)return i=r0(e,255,i),a0(e),i;if(n===144)t.skip(1),i=xt(t).value,e.g&&(e.g.B=(i&128)>0,e.g.F=(i&64)>0);else if(n===145)i=xt(t).value,n=xt(t).value,t.skip(1),e.g&&(t=o0((n&48)>>4,(n&12)>>2,n&3),e.g.C=o0((i&48)>>4,(i&12)>>2,i&3),e.g.u=t);else if(n===146)i=xt(t).value,t=xt(t).value,e.g&&(e=e.g,e.h=i&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),i=xt(t).value,t.skip(1),e.g&&(e.g.G=i&3);else if(n>=152&&n<=159){n=(n&15)-8,r=e.h[n]!==null,r||(a=new Xf(n,e.i),a.j=i,e.h[n]=a),i=xt(t).value,a=xt(t).value;var o=xt(t).value,s=xt(t).value,u=xt(t).value;t=xt(t).value,r&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.F=!1,t.B=!1,t.C="white",t.u="black"),t=e.h[n],t.l=(i&32)>0,t.M=a&127,t.I=o,t.H=(s&240)>>4,t.K=(a&128)>0,t.o=(s&15)+1,t.m=(u&63)+1,e.g=e.h[n]}}}return[]}function ys(e,t){for(var n=[],i=0;i<8;i++)(t&1)===1&&e.h[i]&&n.push(i),t>>=1;return n}function r0(e,t,n){var i=[];t=m(ys(e,t));for(var r=t.next();!r.done;r=t.next()){r=r.value;var a=e.h[r];a.isVisible()&&(a=na(a,n,e.i))&&i.push(a),e.h[r]=null}return i}function a0(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function o0(e,t,n){var i={0:0,1:0,2:1,3:1};return e=i[e],t=i[t],n=i[n],jk[e<<2|t<<1|n]}var s0=new Map([[32," "],[33,"Â "],[37,"â€¦"],[42,"Å "],[44,"Å’"],[48,"â–ˆ"],[49,"â€˜"],[50,"â€™"],[51,"â€œ"],[52,"â€"],[53,"â€¢"],[57,"â„¢"],[58,"Å¡"],[60,"Å“"],[61,"â„ "],[63,"Å¸"],[118,"â…›"],[119,"â…œ"],[120,"â…"],[121,"â…ž"],[122,"â”‚"],[123,"â”"],[124,"â””"],[125,"â”€"],[126,"â”˜"],[127,"â”Œ"]]),jk="black blue green cyan red magenta yellow white".split(" ");function Ja(){this.h=[],this.g=[],this.i=new Rk,this.j=0,this.l=new Map([["CC1",new Ol(0,0)],["CC2",new Ol(0,1)],["CC3",new Ol(1,0)],["CC4",new Ol(1,1)]]),this.o=this.m=0,this.C=new Map,this.B=!0,this.u=new Set,$f(this)}Ja.prototype.clear=function(){this.j=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,$f(this),e=m(this.C.values());for(var t=e.next();!t.done;t=e.next())a0(t.value)};function $f(e){e.m=0,e.o=0;for(var t=m(e.l.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,ms(n.i),ms(n.j),ms(n.o);e.B=!0}Ja.prototype.extract=function(e,t){if(this.B){for(var n=m(this.l.values()),i=n.next();!i.done;i=n.next())i.value.l=t;this.B=!1}if(e=new Ze(e,0),!(e.getLength()<8)&&e.Z()===181&&e.Ca()===49&&e.U()===1195456820&&e.Z()===3&&(n=e.Z(),(n&64)!==0))for(n&=31,e.skip(1),i=0;i<n;i++){var r=e.Z(),a=(r&4)>>2,o=e.Z(),s=e.Z();a&&(r&=3,r===0||r===1?this.h.push({pts:t,type:r,Cb:o,mc:s,order:this.h.length}):(this.g.push({pts:t,type:r,value:o,order:this.g.length}),this.g.push({pts:t,type:2,value:s,order:this.g.length})))}},Ja.prototype.decode=function(){function e(r,a){return r.pts-a.pts||r.order-a.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=m(this.h),i=n.next();!i.done;i=n.next())(i=Uk(this,i.value))&&t.push(i);for(n=m(this.g),i=n.next();!i.done;i=n.next())Dk(this.i,i.value);for(n=m(this.i.i),i=n.next();!i.done;i=n.next())i=Bk(this,i.value),t.push.apply(t,z(i));return this.i.i=[],this.h=[],this.g=[],t};function Uk(e,t){var n=t.type;if((t.Cb&112)===16){var i=t.Cb>>3&1;n===0?e.m=i:e.o=i}if(i="CC"+((n<<1|(n?e.o:e.m))+1),n=e.l.get(i),t.Cb===255&&t.mc===255||!t.Cb&&!t.mc||!u0(t.Cb)||!u0(t.mc))return++e.j>=45&&$f(e),null;e.j=0,t.Cb&=127,t.mc&=127;var r=t.Cb;if(r>=1&&r<=15||!t.Cb&&!t.mc)return null;if(r=null,(t.Cb&112)===16)e:{if(e.u.add(i),i=t.Cb,e=t.mc,n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,(i&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(i&7)<<1|e>>5&1],i="white",r=!1;var a=null,o=e>95?e-96:e-64;o<=13?i=n0[Math.floor(o/2)]:o<=15?r=!0:a=Math.floor((o-16)/2),e=(e&1)===1,n.h!==4&&(o=n.g,n.h===3&&t!==o.g&&(n=1+t-o.h,$y(o,n,1+o.g-o.h,o.h),Ji(o,0,n-1),Ji(o,t+1,15-t)),o.g=t,o.m=e,o.j=r,o.l=i,o.u=a,o.o="black")}else if((i&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",Ya(n.g,0,32),i=!1,t=n0[(e&14)>>1],t==="white_italics"&&(t="white",i=!0),n.g.m=(e&1)===1,n.g.j=i,n.g.l=t;else if((i&247)===16&&(e&240)===32||(i&247)===23&&(e&255)===45)t="black",!(i&7)&&(t=Ck[(e&14)>>1]),n.g.o=t;else if((i&247)===17&&(e&240)===48)Ya(n.g,1,e);else if((i&246)===18&&(e&224)===32)Ya(n.g,i&1?3:2,e);else{if((i&246)===20&&(e&240)===32){switch(e=t.pts,i=null,t.mc){case 32:e0(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:i=Wf(n,2,e);break;case 38:i=Wf(n,3,e);break;case 39:i=Wf(n,4,e);break;case 40:Ya(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:ms(n.o),t0(n);break;case 43:t0(n);break;case 44:t=n.i,i=null,n.h!==4&&(i=Nl(t,n.l,e)),Ji(t,0,15);break;case 45:t=n.g,n.h!==3?i=null:(i=Nl(t,n.l,e),r=t.g-t.h+1,$y(t,r-1,r,t.h),Ji(t,0,r-1),Ji(t,t.g,15-t.g),n.l=e);break;case 46:Ji(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=Nl(n.i,n.l,e)),i=n.j,n.j=n.i,n.i=i,e0(n),n.l=e,i=t}r=i;break e}(i==23||i==31)&&e>=33&&e<=35&&(n.g.B=e-32)}r=null}else e=t.mc,Ya(n.g,0,t.Cb),Ya(n.g,0,e);return r}function Bk(e,t){var n=[];try{for(;t.Ka();){var i=xt(t).value,r=(i&224)>>5,a=i&31;if(r===7&&a!=0&&(r=xt(t).value&63),r!=0){e.u.add("svc"+r);for(var o=e.C.getOrInsertComputed(r,function(l){return new Lk(l)}),s=t.Pa();t.Pa()-s<a;){var u=Nk(o,t);n.push.apply(n,z(u))}}}}catch(l){if(l instanceof D&&l.code===3e3)nr("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw l}return n}function u0(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}Ja.prototype.getStreams=function(){return Array.from(this.u)},Y("shaka.cea.CeaDecoder",Ja),jr=function(){return new Ja};function l0(e){for(var t=[],n=e,i=e=0;i<n.length;)e==2&&n[i]==3?(e=0,n=[].concat(z(n)),n.splice(i,1),n=new Uint8Array(n)):n[i]==0?e++:e=0,i++;for(e=n,i=0;i<e.length;){for(n=0;e[i]==255;)n+=255,i++;n+=e[i++];for(var r=0;e[i]==255;)r+=255,i++;r+=e[i++],n==4&&t.push(e.subarray(i,i+r)),i+=r}return t}function _l(){this.j=new Map,this.i=this.h=0,this.g=Qf}_l.prototype.init=function(e){function t(a){a=a.name,jl.has(a)&&(n.g=jl.get(a))}var n=this,i=[],r=[];if(new Ke().box("moov",be).box("mvex",be).S("trex",function(a){var o=a.reader;o.skip(4),o.skip(4),a=o.U(),o=o.U(),n.h=a,n.i=o}).box("trak",be).S("tkhd",function(a){var o=a.reader;a=a.version,a==1?(o.skip(8),o.skip(8)):(o.skip(4),o.skip(4));var s=o.U();a==1?o.skip(8):o.skip(4),o.skip(4),o.skip(8),o.skip(2),o.skip(2),o.skip(2),o.skip(2),o.skip(36),o.Ca(),o.Ca(),o.Ca(),o.Ca(),i.push(s)}).box("mdia",be).S("mdhd",function(a){a=Pu(a.reader,a.version),r.push(a.timescale)}).box("minf",be).box("stbl",be).S("stsd",Vi).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",bn).box("sinf",be).box("frma",function(a){a=md(a.reader).codec,jl.has(a)&&(n.g=jl.get(a))}).parse(e,!0,!0),!i.length||!r.length||i.length!=r.length)throw new D(2,2,2010);this.g==Qf&&Ee("Unable to determine bitstream format for CEA parsing!"),i.forEach(function(a,o){n.j.set(a,r[o])})},_l.prototype.parse=function(e){var t=this;if(this.g==Qf)return[];var n=[],i=0,r=[];return new Ke().box("moof",function(a){i=a.start,r=[],be(a)}).box("traf",function(a){r.push({baseMediaDecodeTime:null,Xd:t.h,Yd:t.i,Ji:[],timescale:9e4}),be(a)}).S("trun",function(a){var o=r[r.length-1];a=Ru(a.reader,a.version,a.flags),o.Ji.push(a)}).S("tfhd",function(a){var o=r[r.length-1];a=Mu(a.reader,a.flags),o.Xd=a.Xd||t.h,o.Yd=a.Yd||t.i,a=a.trackId,t.j.has(a)&&(o.timescale=t.j.get(a))}).S("tfdt",function(a){var o=r[r.length-1];a=Cu(a.reader,a.version),o.baseMediaDecodeTime=a.baseMediaDecodeTime}).box("mdat",function(a){for(var o=i-a.start-8,s=a.reader.Pa(),u=m(r),l=u.next();!l.done;l=u.next())l=l.value,l.baseMediaDecodeTime===null?Ee("Unable to find base media decode time for CEA captions!"):(a.reader.seek(s),Fk(t,a.reader,l.baseMediaDecodeTime,l.timescale,l.Xd,l.Yd,o,l.Ji,n))}).parse(e,!1,!0),n};function Fk(e,t,n,i,r,a,o,s,u){var l=0,c=a,d=s.map(function(g){return g.nh});for(d=[].concat.apply([],z(d)),d.length&&(c=d[0].sampleSize||a),t.skip(o+s[0].qg);t.Ka();){o=t.U();var h=t.Z(),p=null;switch(p=!1,s=1,e.g){case bs:p=h&31,p=p==6;break;case ws:s=2,t.skip(1),p=h>>1&63,p=p==39||p==40;break;case Ss:s=2,t.skip(1),p=h>>1&63,p=p==23||p==24;break;default:return}if(p)for(h=0,l<d.length&&(h=d[l].Gf||0),h=(n+h)/i,s=t.Tb(o-s,!1),s=m(l0(s)),p=s.next();!p.done;p=s.next())u.push({packet:p.value,pts:h});else try{t.skip(o-s)}catch{break}c-=o+4,c==0&&(n=l<d.length?n+(d[l].oh||r):n+r,l++,l<d.length?c=d[l].sampleSize||a:c=a)}}Y("shaka.cea.Mp4CeaParser",_l);var Qf=0,bs=1,ws=2,Ss=3,jl=new Map().set("avc1",bs).set("avc3",bs).set("dvav",bs).set("dva1",bs).set("hev1",ws).set("hvc1",ws).set("dvh1",ws).set("dvhe",ws).set("vvc1",Ss).set("vvi1",Ss).set("dvc1",Ss).set("dvi1",Ss);Hc("video/mp4",function(){return new _l});function Ul(){this.g=null}Ul.prototype.init=function(){},Ul.prototype.parse=function(e){this.g?this.g.clearData():this.g=new $e;var t=[];if(e=pe(e),!Da(e))return t;e=this.g.parse(e);var n=e.Zd(),i=e.ef();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=m(i),i=n.next();!i.done;i=n.next())if(i=i.value,e.includes(i.type)&&i.time!=null)for(var r=m(l0(i.data)),a=r.next();!a.done;a=r.next())t.push({packet:a.value,pts:i.time});return t},Y("shaka.cea.TsCeaParser",Ul),Hc("video/mp2t",function(){return new Ul});function Vk(e){var t=0,n=ln(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+4+2,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,(r&1)!=0||r+e>n.byteLength){n=[];break e}var a=pe(n,e,r);t.push({type:i,value:a}),e+=r}n=t}return n}function c0(e){return e=jn(pt(e)),e=Vk(e).filter(function(t){return t.type===Hk})[0],e?(e=rr(e.value,!0),(e=Fr(e,"WRMHEADER"))?e:null):null}function Bl(e){try{var t=c0(e);if(t)e:{for(var n=m(fi(t,"DATA")),i=n.next();!i.done;i=n.next()){var r=i.value;if(r.children)for(var a=m(r.children),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.tagName=="LA_URL"){var u=pt(s);break e}}}u=""}else u="";return u}catch{return""}}var Hk=1;function d0(){this.g=new Map}d0.prototype.release=function(){this.g.clear()};function f0(e,t,n,i){var r=Kk(e,t),a=null;e=[];var o=[];t=null;var s=new Set(r.map(function(l){return l.keyId}));s.delete(null);var u="cenc";if(s.size>1)throw new D(2,4,4010);if(!n){if(o=r.filter(function(l){return l.Id=="urn:mpeg:dash:sea:2012"}),o.length>1)throw new D(2,4,4050);o.length&&(t=Wk(o[0])),(o=r.find(function(l){return l.Id=="urn:mpeg:dash:mp4protection:2011"}))&&o.encryptionScheme&&(u=o.encryptionScheme),o=r.filter(function(l){return l.Id=="urn:mpeg:dash:mp4protection:2011"?(a=l.init||a,!1):l.Id!="urn:mpeg:dash:sea:2012"}),o.length&&(e=qk(a,u,o,i,s),e.length==0&&(e=[Di("",u,a)]))}if(r.length&&!t&&(n||!o.length))for(e=[],n=m(Object.values(i)),i=n.next();!i.done;i=n.next())i=i.value,i!="org.w3.clearkey"&&(i=Di(i,u,a),e.push(i));if(s=Array.from(s)[0]||null)for(u=m(e),n=u.next();!n.done;n=u.next())for(n=m(n.value.initData),i=n.next();!i.done;i=n.next())i.value.keyId=s;return{Zh:s,Fm:a,drmInfos:e,hg:t,di:!0}}function Gk(e,t,n,i,r){var a=f0(e,t,i,r);if(n.di)e=n.drmInfos.length==1&&!n.drmInfos[0].keySystem,t=a.drmInfos.length==0,(n.drmInfos.length==0||e&&!t)&&(n.drmInfos=a.drmInfos),n.di=!1;else if(a.drmInfos.length>0&&(n.drmInfos=n.drmInfos.filter(function(o){return a.drmInfos.some(function(s){return s.keySystem==o.keySystem})}),n.drmInfos.length==0))throw new D(2,4,4008);return a.Zh||n.Zh}function Fl(e){var t=Un(e.node,"https://dashif.org/CPS","Laurl");if(t&&(t=pt(t)))return t;if((t=Un(e.node,"urn:microsoft:playready","pro"))&&pt(t))return Bl(t);if((e=Un(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=pt(e))){t=jn(e),e=8,t=ln(t);var n=t.getUint8(e);return e+=20,n>0&&(e+=4+16*t.getUint32(e)),e=pe(t,e+4),e=Qs(e),e=Fr("<pro>"+e+"</pro>"),Bl(e)}return""}function qk(e,t,n,i,r){var a=[];n=m(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;var s=i[o.Id];if(s){var u;if((u=Un(o.node,"urn:microsoft:playready","pro"))&&pt(u)){u=pt(u),u=jn(u);var l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);u=[{initData:Iu(u,l,new Set,0),initDataType:"cenc",keyId:o.keyId}]}else u=null;if(l=null,o.Id==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){l=o;var c=r;if(c.size==0)l=null;else{var d=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),h=new Uint8Array([]);l=[{initData:Iu(h,d,c,1),initDataType:"cenc",keyId:l.keyId}]}}u=Di(s,t,o.init||e||u||l),(s=Xk.get(s))&&(u.licenseServerUri=s(o));e:{if((o=Un(o.node,"https://dashif.org/CPS","Certurl"))&&(o=pt(o)))break e;o=""}u.serverCertificateUri=o,a.push(u)}}return a}function Kk(e,t){var n=[];t=m(t);for(var i=t.next();!i.done;i=t.next())(i=zk(e,i.value))&&n.push(i);return n}function zk(e,t){var n=t.attributes.schemeIdUri,i=Li(t,"urn:mpeg:cenc:2013","default_KID"),r=Gp(t,"urn:mpeg:cenc:2013","pssh").map(rn),a=t.attributes.value;if(!n)return null;if(n=n.toLowerCase(),i&&(i=i.replace(/-/g,"").toLowerCase(),i.includes(" ")))throw new D(2,4,4009);var o=[];try{o=r.map(function(s){return{initDataType:"cenc",initData:e.g.getOrInsertComputed(s,function(){return jn(s)}),keyId:null}})}catch{throw new D(2,4,4007)}return{node:t,Id:n,keyId:i,init:o.length>0?o:null,encryptionScheme:a}}function Wk(e){if(!P.crypto||!P.crypto.subtle)throw Ee("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new D(2,4,4042);var t=Un(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new D(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new D(2,4,4051);if(t=Un(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new D(2,4,4051);if(e=t.attributes.IV,t=nn(t.attributes.keyUriTemplate),!e||!t)throw new D(2,4,4051);if(e=Or(e.substr(2)),e.byteLength!=16)throw new D(2,4,4048);return{xk:t,iv:e}}var Xk=new Map().set("com.apple.fps",function(e){if(P.shakaMediaKeysPolyfill==="apple")throw new D(2,4,4054);return(e=Un(e.node,"https://dashif.org/CPS","Laurl"))&&(e=pt(e))?e:""}).set("com.widevine.alpha",function(e){var t=Un(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=pt(t))?t:(e=Un(e.node,"urn:microsoft","laurl"))&&nn(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Fl).set("com.microsoft.playready.recommendation",Fl).set("com.microsoft.playready.software",Fl).set("com.microsoft.playready.hardware",Fl).set("org.w3.clearkey",function(e){var t=Un(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=pt(t))?t:(e=Un(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=pt(e))?e:""});function Ts(e,t,n,i,r,a){var o=new Map().set("RepresentationID",t).set("Number",n).set("SubNumber",i).set("Bandwidth",r).set("Time",a);return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(s,u,l,c){if(s=="$$")return"$";var d=o.get(u);if(d==null)return s;switch(u=="RepresentationID"&&l&&(l=void 0),u=="Time"&&typeof d!="bigint"&&(Math.abs(d-Math.round(d))>=.2&&Ee("Calculated $Time$ values must be close to integers"),d=Math.round(d)),c){case void 0:case"d":case"i":case"u":s=d.toString();break;case"o":s=d.toString(8);break;case"x":s=d.toString(16);break;case"X":s=d.toString(16).toUpperCase();break;default:s=d.toString()}return l=P.parseInt(l,10)||1,Array(Math.max(0,l-s.length)+1).join("0")+s})}function h0(e,t){var n=ai(e,t,"timescale"),i=1;n&&(i=wi(n)||1),n=ai(e,t,"duration");var r=(n=wi(n||""))?n/i:null,a=ai(e,t,"startNumber"),o=Number(ai(e,t,"presentationTimeOffset"))||0,s=Nt(a||"");if((a==null||s==null)&&(s=1),a=null,t=$a(e,t,"SegmentTimeline")){t=Ve(t,"S"),a=i,e=e.na.duration||1/0;for(var u=s,l=[],c=-o,d=0;d<t.length;++d){var h=t[d],p=t[d+1],g=ge(h,"t",Nt),y=ge(h,"d",Nt),b=ge(h,"r",Lt);if(h=ge(h,"k",Lt)||0,g!=null&&(g-=o),y){if(g=g??c,b=b||0,b<0)if(p){if(p=ge(p,"t",Nt),p==null||g>=p)break;b=Math.ceil((p-g)/y)-1}else{if(e==1/0||g/a>=e)break;b=Math.ceil((e*a-g)/y)-1}for(l.length>0&&g!=c&&(l[l.length-1].end=g/a),p=0;p<=b;++p)c=g+y,l.push({start:g/a,Md:g,end:c/a,Kh:c,xc:h,Wk:l.length+u}),g=c}}a=l}return{timescale:i,Qf:n,fb:r,ve:s,hc:o/i||0,gd:o,timeline:a}}function p0(e,t){return[t(e.L),t(e.qa),t(e.ua)].filter(cr)}function ai(e,t,n){t=p0(e,t),e=null,t=m(t);for(var i=t.next();!i.done&&!(e=i.value.attributes[n]);i=t.next());return e}function $a(e,t,n){t=p0(e,t),e=null,t=m(t);for(var i=t.next();!i.done&&!(e=tt(i.value,n));i=t.next());return e}function Yk(e,t,n,i,r,a){for(var o=Li(e,"http://www.w3.org/1999/xlink","href"),s=Li(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=m(Object.keys(e.attributes)),l=u.next();!l.done;l=u.next()){l=l.value;var c=l.split(":"),d=qc("http://www.w3.org/1999/xlink");c[0]==d&&delete e.attributes[l]}if(a>=5)return dr(new D(2,4,4028));if(s!="onLoad")return dr(new D(2,4,4027));var h=Mt([i],[o]);return r.request(0,yt(h,t)).Xa(function(p){if(p=xo(p.data,e.tagName),!p)return dr(new D(2,4,4001,o));for(e.children=[];p.children.length;){var g=p.children.shift();e.children.push(g)}g=m(Object.keys(p.attributes));for(var y=g.next();!y.done;y=g.next())y=y.value,e.attributes[y]=p.attributes[y];return Vl(e,t,n,h[0],r,a+1)})}function Vl(e,t,n,i,r,a){if(a=a===void 0?0:a,Li(e,"http://www.w3.org/1999/xlink","href")){var o=Yk(e,t,n,i,r,a);return n&&(o=o.Xa(void 0,function(){return Vl(e,t,n,i,r,a)})),o}o=[];for(var s=m(Hp(e)),u=s.next(),l={};!u.done;l={Ud:void 0},u=s.next())l.Ud=u.value,Li(l.Ud,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(c){return function(d){return d!==c.Ud}}(l)):l.Ud.tagName!="SegmentTimeline"&&o.push(Vl(l.Ud,t,n,i,r,a));return Ag(o).Xa(function(){return e})}function Jk(e,t,n,i,r,a,o,s){var u,l=new Ke().S("sidx",function(c){u=$k(t,i,r,a,o,n,c,s)});if(e&&l.parse(e),u)return u;throw new D(2,3,3004)}function $k(e,t,n,i,r,a,o,s){s=s===void 0?!1:s;var u=[];o.reader.skip(4);var l=o.reader.U();if(l==0)throw new D(2,3,3005);if(o.version==0)var c=o.reader.U(),d=o.reader.U();else c=o.reader.Fd(),d=o.reader.Fd();o.reader.skip(2);var h=o.reader.Ca();for(e=(s?-o.size:e)+o.size+d,s=0;s<h;s++){var p=o.reader.U();d=(p&2147483648)>>>31,p&=2147483647;var g=o.reader.U();if(o.reader.skip(4),d==1)throw new D(2,3,3006);u.push(new se(c/l+n,(c+g)/l+n,function(){return a},e,e+p-1,t,n,i,r)),c+=g,e+=p}return o.parser.stop(),u}function xr(e){this.h=ln(e),this.g=new Ze(this.h,0)}xr.prototype.Ka=function(){return this.g.Ka()};function $i(e){var t=g0(e);if(t.length>7)throw new D(2,3,3002);var n=0;t=m(t);for(var i=t.next();!i.done;i=t.next())n=256*n+i.value;t=g0(e);e:{i=m(Qk);for(var r=i.next();!r.done;r=i.next())if(Ci(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.Pa();else{if(t.length==8&&t[1]&224)throw new D(2,3,3001);for(r=i=0;r<t.length;r++){var a=t[r];i=r==0?a&(1<<8-t.length)-1:256*i+a}t=i}return t=e.g.Pa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Pa(),i=ln(e.h,e.g.Pa(),t),e.g.skip(t),new Zk(n,i)}function g0(e){var t=e.g.Pa(),n=e.g.Z();if(n==0)throw new D(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),pe(e.h,t,n)}var Qk=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function Zk(e,t){this.id=e,this.g=t}function Zf(e){if(e.g.byteLength>8)throw new D(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new D(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var i=e.g.getUint8(n);t=256*t+i}return t}function eI(e,t,n,i,r,a,o){if(t=new xr(t),$i(t).id!=440786851)throw new D(2,3,3008);var s=$i(t);if(s.id!=408125543)throw new D(2,3,3009);t=s.g.byteOffset,s=new xr(s.g);for(var u=null;s.Ka();){var l=$i(s);if(l.id==357149030){u=l;break}}if(!u)throw new D(2,3,3010);for(u=new xr(u.g),l=1e6,s=null;u.Ka();){var c=$i(u);if(c.id==2807729)l=Zf(c);else if(c.id==17545)if(c.g.byteLength==4)s=c.g.getFloat32(0);else if(c.g.byteLength==8)s=c.g.getFloat64(0);else throw new D(2,3,3003)}if(s==null)throw new D(2,3,3011);if(u=l/1e9,s*=u,e=$i(new xr(e)),e.id!=475249515)throw new D(2,3,3007);return tI(e,t,u,s,n,i,r,a,o)}function tI(e,t,n,i,r,a,o,s,u){function l(){return r}var c=[];e=new xr(e.g);for(var d=null,h=null;e.Ka();){var p=$i(e);if(p.id==187){var g=nI(p);g&&(p=n*g.ql,g=t+g.Ok,d!=null&&c.push(new se(d+o,p+o,l,h,g-1,a,o,s,u)),d=p,h=g)}}return d!=null&&c.push(new se(d+o,i+o,l,h,null,a,o,s,u)),c}function nI(e){var t=new xr(e.g);if(e=$i(t),e.id!=179)throw new D(2,3,3013);if(e=Zf(e),t=$i(t),t.id!=183)throw new D(2,3,3012);t=new xr(t.g);for(var n=0;t.Ka();){var i=$i(t);if(i.id==241){n=Zf(i);break}}return{ql:e,Ok:n}}function m0(e,t,n){if(t=$a(e,t,"Initialization"),!t)return null;var i=e.L.bb(),r=t.attributes.sourceURL;r&&(i=Mt(i,[nn(r)],e.Lb())),r=0;var a=null;return(t=ge(t,"range",iu))&&(r=t.start,a=t.end),n=new fn(function(){return i},r,a,w0(e),null,null,n,e.qa.encrypted),n.codecs=e.L.codecs,n.mimeType=e.L.mimeType,e.na&&!e.na.kf&&(n.g=e.na.start+e.na.duration),n}function iI(e,t,n){var i=Number(ai(e,Qa,"presentationTimeOffset"))||0,r=ai(e,Qa,"timescale"),a=1;r&&(a=wi(r)||1);var o=i/a||0,s=m0(e,Qa,n);rI(e,s);var u=or(e);return{endTime:-1,timeline:-1,Sc:function(){var l=$a(u,Qa,"RepresentationIndex"),c=u.L.bb();return l&&(l=nn(l.attributes.sourceURL))&&(c=Mt(c,[l],u.Lb())),l=y0(u),v0(u,t,s,c,l.start,l.end,o)},timescale:a}}function v0(e,t,n,i,r,a,o){var s,u,l,c,d,h,p,g,y,b,A,x,k,M,N,I,C,E,O,L;return R(function(_){if(_.g==1)return s=e.presentationTimeline,u=!e.Eb||!e.na.kf,l=e.na.start,c=e.na.duration,d=e.L.mimeType.split("/")[1],h=t,p=null,g=[h(i,r,a,!1),d=="webm"?h(n.P(),n.startByte,n.endByte,!0):null],h=null,T(_,Promise.all(g),2);for(y=_.h,b=y[0],A=y[1]||null,x=null,k=l-o,M=l,N=c?l+c:1/0,I=e.L.bb(),C=I.length!=i.length||I.some(function(j,G){return j!=i[G]}),x=d=="mp4"?Jk(b,r,I,n,k,M,N,C):eI(b,A,I,n,k,M,N),E=m(x),O=E.next();!O.done;O=E.next())L=O.value,L.codecs=e.L.codecs,L.mimeType=e.L.mimeType,L.bandwidth=e.bandwidth;return s.me(x),p=new Re(x),u&&p.pd(M,N,!0),_.return(p)})}function Qa(e){return e.Jd}function y0(e){var t=$a(e,Qa,"RepresentationIndex");return e=ai(e,Qa,"indexRange"),e=iu(e||""),t&&(e=ge(t,"range",iu,e)),e}function rI(e,t){if(b0(e,t),!y0(e))throw new D(2,4,4002)}function b0(e,t){var n=e.L.mimeType.split("/")[1];if(e.L.contentType!=xe&&n!="mp4"&&n!="webm")throw new D(2,4,4006);if(n=="webm"&&!t)throw new D(2,4,4005)}function w0(e){var t=e.L;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.yf,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.qa.label||null,roles:e.roles||null,language:e.qa.language||null}}function aI(e,t,n){var i=m0(e,S0,n),r=oI(e);if(!r.fb&&!r.timeline&&r.zd.length>1)throw new D(2,4,4002);if(!r.fb&&!e.na.duration&&!r.timeline&&r.zd.length==1)throw new D(2,4,4002);if(r.timeline&&r.timeline.length==0)throw new D(2,4,4002);var a=null,o=null;e.ua.id&&e.L.id&&(o=t.get(e.ua.id+","+e.L.id))&&(a=o.segmentIndex);var s=sI(e.na.start,e.na.duration,e.L.bb,r,i,n,e.L.mimeType,e.L.codecs,e.bandwidth,e.Lb);return t=!a,a?a.ke(s,e.presentationTimeline.Hb()):a=new Re(s),e.presentationTimeline.me(s),e.Eb&&e.na.kf||a.pd(e.na.start,e.na.duration?e.na.start+e.na.duration:1/0,t),o&&(o.segmentIndex=a),{endTime:-1,timeline:-1,Sc:function(){return a&&a.getNumReferences()!=0||a.tf(s),Promise.resolve(a)},timescale:r.timescale}}function S0(e){return e.Bc}function oI(e){var t=uI(e);e=h0(e,S0);var n=e.ve;n==0&&(n=1);var i=0;return e.fb?i=e.fb*(n-1):e.timeline&&e.timeline.length>0&&(i=e.timeline[0].start),{fb:e.fb,startTime:i,ve:n,hc:e.hc,timescale:e.timescale,timeline:e.timeline,zd:t}}function sI(e,t,n,i,r,a,o,s,u,l){var c=i.zd.length;i.timeline&&i.timeline.length!=i.zd.length&&(c=Math.min(i.timeline.length,i.zd.length));for(var d=e-i.hc,h=t?e+t:1/0,p=[],g=i.startTime,y={},b=0;b<c;y={Sf:void 0,Hf:void 0},b++){y.Hf=i.zd[b];var A=g;g=void 0,g=i.fb!=null?A+i.fb:i.timeline?i.timeline[b].end:A+t,y.Sf=null,y=new se(e+A,e+g,function(x){return function(){return x.Sf==null&&(x.Sf=Mt(n(),[x.Hf.Dk],l())),x.Sf}}(y),y.Hf.start,y.Hf.end,r,d,e,h,[],"",null,null,Hi,a),y.codecs=s,y.mimeType=o,y.bandwidth=u,p.push(y)}return p}function uI(e){return[e.L.Bc,e.qa.Bc,e.ua.Bc].filter(cr).map(function(t){return Ve(t,"SegmentURL")}).reduce(function(t,n){return t.length>0?t:n}).map(function(t){t.attributes.indexRange&&!e.Og&&(e.Og=!0);var n=nn(t.attributes.media);return t=ge(t,"mediaRange",iu,{start:0,end:null}),{Dk:n,start:t.start,end:t.end}})}function T0(e,t,n,i,r,a,o,s,u,l){u||e.L.hf||(e.L.hf=ai(e,Ar,"initialization"));var c=e.L.hf?fI(e,o):null,d=lI(e);cI(d);var h=or(e);if(d.fe)return b0(e,c),{endTime:-1,timeline:-1,Sc:function(){var A=Ts(d.fe,h.L.originalId,null,null,h.bandwidth||null,null);return A=Mt(h.L.bb(),[A]),v0(h,t,c,A,0,null,d.hc)},timescale:d.timescale};if(d.fb)return i||e.qa.contentType==="image"||e.qa.contentType==="text"||(i=e.na.start,l=e.ua.id,n=e.na.duration,l=(l=l!=null&&a.get(l)||n)?i+l:1/0,e.presentationTimeline.Xg(d.fb),e.presentationTimeline.Hi(i,l)),{endTime:-1,timeline:-1,Sc:function(){return dI(h,d,r,c,a,o,s,e.L.If)},timescale:d.timescale};var p=null;i=i=null,e.ua.id&&e.L.id&&(i=e.ua.id+","+e.L.id,i=n.get(i))&&(p=i.segmentIndex);var g=e.na.start,y=e.na.duration?g+e.na.duration:1/0;if(p)l=p,x0(l,d,g,y,c,e.Eb),l.Ya(e.presentationTimeline.Hb());else{if(n=0,u=-1,e.ua.id!=null&&e.L.id!=null){var b=l.get(e.ua.id);if(b)u=b.timeline;else for(l=m(l.values()),b=l.next();!b.done;b=l.next())if(b=b.value,Math.abs(d.hc-b.endTime)<=Np&&b.hh.includes(e.L.id)){u=b.timeline;break}else b.timeline>=n&&(n=b.timeline+1)}u==-1&&(u=n),p=new xs(e.Eb,d,e.L.originalId,e.bandwidth,e.L.bb,e.Lb,g,y,c,o,e.L.If,u)}return d.timeline&&e.qa.contentType!=="image"&&e.qa.contentType!=="text"&&e.presentationTimeline.Ii(p.h?p.h.timeline:[],g),i&&e.Eb&&(i.segmentIndex=p),i=(i=(i=d.timeline)&&i[i.length-1])?i.end+d.hc:-1,l=-1,p instanceof xs&&(l=p.We()),{endTime:i,timeline:l,Sc:function(){return p instanceof xs&&p.getNumReferences()==0&&x0(p,d,g,y,c,e.Eb),Promise.resolve(p)},timescale:d.timescale}}function Ar(e){return e.Oc}function lI(e){var t=h0(e,Ar),n=ai(e,Ar,"media"),i=ai(e,Ar,"index"),r=ai(e,Ar,"k"),a=0;return r&&(a=parseInt(r,10)),{Qf:t.Qf,fb:t.fb,timescale:t.timescale,ve:t.ve,hc:t.hc,gd:t.gd,timeline:t.timeline,dc:n&&nn(n),fe:i,mimeType:e.L.mimeType,codecs:e.L.codecs,bandwidth:e.bandwidth,Ek:a}}function cI(e){var t=e.fe?1:0;if(t+=e.timeline?1:0,t+=e.fb?1:0,t==0)throw new D(2,4,4002);if(t!=1&&(e.fe&&(e.timeline=null),e.Qf=null,e.fb=null),!e.fe&&!e.dc)throw new D(2,4,4002)}function dI(e,t,n,i,r,a,o,s){function u(j){var G=j-b,H=G*y,B=t.Qf,F=G*B;"BigInt"in P&&F>Number.MAX_SAFE_INTEGER&&(F=BigInt(G)*BigInt(B)),H+=h,G=H+y,B=Math.min(G,c());var K=[],W=t.Ek;if(W)for(var me=(B-H)/W,ne={},He=0;He<W;ne={cj:void 0},He++){var ve=H+me*He,et=ve+me;ne.cj=He,ne=new se(ve,et,function(Ne){return function(){var we=Ts(A,k,j,Ne.cj,x,F);return Mt(M(),[we],N())}}(ne),0,null,i,I,h,c(),[],"",null,null,Hi,a),ne.codecs=e.L.codecs,ne.mimeType=e.L.mimeType,s==0?He>0&&ne.xd():He%s!=0&&ne.xd(),K.push(ne)}return H=new se(H,B,function(){if(W)return[];var Ne=Ts(A,k,j,null,x,F);return Mt(M(),[Ne],N())},0,null,i,I,h,c(),K,"",null,null,Hi,a,K.length>0),H.codecs=e.L.codecs,H.mimeType=e.L.mimeType,H.bandwidth=e.bandwidth,H.j=G,H}function l(){var j=[Math.max(d.Hb(),h),Math.min(d.Jc(),c())].map(function(G){return G-h});return j=[Math.ceil(j[0]/y),Math.ceil(j[1]/y)-1],e.L.pb&&j[1]++,j.map(function(G){return G+b})}function c(){var j=p!=null&&r.get(p)||g;return j?h+j:1/0}var d=e.presentationTimeline,h=e.na.start,p=e.ua.id,g=e.na.duration,y=t.fb,b=t.ve,A=t.dc,x=e.bandwidth||null,k=e.L.originalId,M=e.L.bb,N=e.Lb,I=h-t.hc,C=l();n=e.Eb?Math.max(C[0],C[1]-n+1):C[0],o=o||C[1],C=[];for(var E=n;E<=o;++E){var O=u(E);C.push(O)}var L=new Re(C);if(C=d.Jc()<c(),E=d.W(),C||E){var _=Math.max(n,o+1);n=y,e.L.pb&&(n=.1),L.Rf(n,function(){var j=d.Hb();L.Ya(j);var G=m(l());G.next(),G=G.next().value;for(var H=[];_<=G;){var B=u(_);H.push(B),_++}return j>c()&&!H.length?null:H})}return Promise.resolve(L)}function fI(e,t){var n=e.L.hf;if(n||(n=ai(e,Ar,"initialization")),!n)return null;n=nn(n);var i=e.L.originalId,r=e.bandwidth||null,a=e.L.bb,o=e.Lb;return t=new fn(function(){var s=Ts(n,i,null,null,r,null);return Mt(a(),[s],o())},0,null,w0(e),null,null,t,e.qa.encrypted),t.codecs=e.L.codecs,t.mimeType=e.L.mimeType,e.na&&!e.na.kf&&(t.g=e.na.start+e.na.duration),t}function xs(e,t,n,i,r,a,o,s,u,l,c,d){Re.call(this,[]),this.F=e,this.h=t,this.H=n,this.C=i,this.G=r,this.J=a,this.j=o,this.l=s,this.u=u,this.B=l,this.I=c,this.K=d,eh(this)}rt(xs,Re),f=xs.prototype,f.getNumReferences=function(){return this.h?this.h.timeline.length:0},f.release=function(){Re.prototype.release.call(this),this.h=null},f.Ya=function(e){if(this.h){for(var t=0,n=this.h.timeline,i=0;i<n.length&&n[i].end+this.j<=e;i+=1)t+=1;t>0&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function x0(e,t,n,i,r,a){if(hI(e,r),e.F=a,e.h){if(e.h.gd!==t.gd)for(n=t.gd-e.h.gd,r=0;r<t.timeline.length;r++)a=t.timeline[r],a.Md+=n,a.Kh+=n,a.start=(a.Md+n)/t.timescale,a.end=(a.Kh+n)/t.timescale;if(e.h.dc!==t.dc&&(e.h.dc=t.dc),n=e.h.timeline,n.length){var o=n[n.length-1];t=t.timeline.filter(function(s){return s.end>o.end})}else t=t.timeline.slice();t.length>0&&e.h.timeline.push.apply(e.h.timeline,z(t)),e.l!==i&&(e.l=i)}else e.h=t,e.j=n,e.l=i;eh(e)}function hI(e,t){if(e.u!==t){e.u=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&om(n,t)}}function eh(e){if(e.h&&!e.o){for(var t=[],n=m(e.h.timeline),i=n.next();!i.done;i=n.next())i=i.value,i.start>=e.l||i.end<=0||t.push(i);e.h.timeline=t,e.Ya(e.j)}}f.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,i=0;i<t.length;i++){var r=t[i],a=r.start+this.j;if(r=i<n?t[i+1].start+this.j:this.l===1/0?r.end+this.j:this.l,e>=a&&e<r)return i+this.i}return null},f.get=function(e){var t=this;if(e-=this.i,e<0||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){n=this.h.timeline[e];var i=n.Wk,r=n.Md+this.h.gd,a=this.j-this.h.hc,o=this.j+n.end,s=o;e===this.getNumReferences()-1&&this.l!==1/0&&(s=this.F&&Math.abs(s-this.l)>.1?Math.min(s,this.l):this.l);var u=this.h.codecs,l=this.h.mimeType,c=this.h.bandwidth,d=[],h=!1;if(n.xc&&this.h&&this.h.dc&&(h=this.h.dc.includes("$SubNumber$")),h){h=(n.end-n.start)/n.xc;for(var p={},g=0;g<n.xc;p={Tf:void 0,dj:void 0},g++){var y=n.start+h*g,b=y+h;p.dj=g,p.Tf=null,p=new se(this.j+y,this.j+b,function(A){return function(){return t.h?(A.Tf==null&&(A.Tf=A0(t.h.dc,t.H,i,t.C,r,A.dj,t.G,t.J)),A.Tf):[]}}(p),0,null,this.u,a,this.j,this.l,[],"",null,null,Hi,this.B),p.codecs=u,p.mimeType=l,p.bandwidth=c,this.I==0?g>0&&p.xd():g%this.I!=0&&p.xd(),d.push(p)}}n=new se(this.j+n.start,s,function(){return d.length>0||!t.h?[]:A0(t.h.dc,t.H,i,t.C,r,null,t.G,t.J)},0,null,this.u,a,this.j,this.l,d,"",null,null,Hi,this.B,d.length>0),n.codecs=u,n.mimeType=l,n.j=o,n.bandwidth=c,this.g[e]=n}return n},f.Fb=function(e){eh(this);for(var t=0;t<this.getNumReferences();t++){var n=this.get(t+this.i);n&&e(n)}};function A0(e,t,n,i,r,a,o,s){return e=Ts(e,t,n,a,i||null,r),Mt(o(),[e],s()).map(function(u){return u.toString()})}f.We=function(){return this.K};function Za(e){this.o=null,this.B=e,this.H=new Aa,this.i=[],this.h=null,this.m=[],this.C=null,this.G=[],this.F=300,this.l=new Map,this.j=new Map,this.g=null,this.u="UNKNOWN"}Za.prototype.configure=function(e){this.o=e},Za.prototype.destroy=function(){return this.B=this.o=null,this.i=[],this.h=null,this.m=[],this.G=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.H.destroy()},Za.prototype.setManifestType=function(e){this.u=e};function As(e,t){var n,i,r,a,o,s,u;return R(function(l){if(l.g==1)return n=Mt(e.i,[pI(e,t)]),i=yt(n,e.o.retryParameters),r=e.B.networkingEngine.request(8,i),zr(e.H,r),he(l,2),T(l,r.promise,4);if(l.g!=2)return a=l.h,o=ot(a.data),s=JSON.parse(o),s.VERSION==1&&gI(e,s,a.uri),ye(l,0);if((u=oe(l))&&u.code==7001)return l.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new Ae(function(){As(e,t)}),e.g.ka(e.F),X(l)})}function pI(e,t){if(!e.m.length)return t;t=new ht(t);var n=e.C||e.m[0],i=Math.round(e.B.getBandwidthEstimate()),r=t.g;return e.u=="DASH"?(r.add("_DASH_pathway",n),r.add("_DASH_throughput",String(i))):e.u=="HLS"&&(r.add("_HLS_pathway",n),r.add("_HLS_throughput",String(i))),Cp(r)&&Lr(t,r),t.toString()}function gI(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var i=t["RELOAD-URI"]||n;e.g=new Ae(function(){As(e,i)}),(n=t.TTL)&&(e.F=n),e.g.ka(e.F),e.m=t["PATHWAY-PRIORITY"]||[],e.G=t["PATHWAY-CLONES"]||[]}function eo(e,t,n,i){var r=e.l.get(t);r||(r=new Map),r.set(n,i),e.l.set(t,r)}Za.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function ks(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var i=[],r=m(e.m),a=r.next(),o={};!a.done;o={Dd:void 0},a=r.next())if(o.Dd=a.value,a=t.get(o.Dd))i.push({bh:o.Dd,location:a});else if(a=e.G.find(function(u){return function(l){return l.Pl==u.Dd}}(o))){var s=t.get(a["BASE-ID"]);s&&(a["URI-REPLACEMENT"].pj?(s=new ht(s),Ws(s,a["URI-REPLACEMENT"].pj),i.push({bh:o.Dd,location:s.toString()})):i.push({bh:o.Dd,location:s}))}for(r=Date.now(),o=m(e.j.keys()),a=o.next();!a.done;a=o.next())a=a.value,s=e.j.get(a),r>s&&e.j.delete(a);if(i=i.filter(function(u){for(var l=m(e.j.keys()),c=l.next();!c.done;c=l.next())if(c.value.includes(new ht(u.location).Db))return!1;return!0}),i.length&&(e.C=i[0].bh),i=i.map(function(u){return u.location}),!i.length&&e.h)for(r=m(e.h.split(",")),o=r.next();!o.done;o=r.next())(o=t.get(o.value))&&(e.C=e.h,i.push(o));if(!i.length)for(t=m(t.values()),r=t.next();!r.done;r=t.next())i.push(r.value);return n?i:Mt(e.i,i)}function pn(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.o=!1,this.m=new Set}f=pn.prototype,f.release=function(){for(var e=m(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.o=!1,this.m.clear()},f.gk=function(){return this.l},f.Mg=function(){return this.j.slice()},f.Nj=function(){return this.i},f.$h=function(e,t){if(e){if(e.type=="audio")for(var n=m(this.h),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});else if(e.type=="video")for(n=m(this.g),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e}),i.trickModeVideo&&(i.trickModeVideo.matchedStreams=i.trickModeVideo.matchedStreams.filter(function(r){return r!==e})),i.dependencyStream&&(i.dependencyStream.matchedStreams=i.dependencyStream.matchedStreams.filter(function(r){return r!==e}));else if(e.type==xe)for(n=m(this.j),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});else if(e.type=="image")for(n=m(this.i),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}};function k0(e,t){var n=[],i=[],r=[],a=[];e=m(e);for(var o=e.next();!o.done;o=e.next()){var s=o.value;o=new Map(s.audioStreams.map(function(d){return[rh(d),d]}));var u=new Map(s.videoStreams.map(function(d){return[ih(d),d]})),l=new Map(s.textStreams.map(function(d){return[Es(d),d]}));if(s=new Map(s.imageStreams.map(function(d){return[Ms(d),d]})),t){var c=D0(xe);l.set(Es(c),c),c=D0("image"),s.set(Ms(c),c)}n.push(o),i.push(u),r.push(l),a.push(s)}return{Th:n,nj:i,ij:r,ri:a}}f.lg=function(e,t,n){n=n===void 0?!1:n;var i=this,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M,N,I,C,E,O,L,_,j,G,H,B,F,K,W,me;return R(function(ne){if(ne.g==1){if(r=vt,!t&&e.length==1)return a=k0(e,!1),o=a.Th,s=a.nj,u=a.ij,l=a.ri,i.h=Array.from(o[0].values()),i.g=Array.from(s[0].values()),i.j=Array.from(u[0].values()),i.i=Array.from(l[0].values()),ne.A(2);for(c=n?i.m.size:0,d=-1,h=0;h<e.length;h++)p=e[h],i.m.has(p.id)||(i.m.add(p.id),d==-1&&(d=h));return d==-1?ne.return():(g=k0(e,!0),y=g.Th,b=g.nj,A=g.ij,x=g.ri,T(ne,Promise.all([kr(i,i.h,y,d,to,Ir,c),kr(i,i.g,b,d,to,Ir,c),kr(i,i.j,A,d,to,Ir,c),kr(i,i.i,x,d,to,Ir,c)]),2))}if(k=0,M=[],i.g.length&&i.h.length)for(_=m(i.h),j=_.next();!j.done;j=_.next())for(G=j.value,H=m(i.g),B=H.next();!B.done;B=H.next())F=B.value,K=Dp(G.drmInfos,F.drmInfos),G.drmInfos.length&&F.drmInfos.length&&!K.length||(W=(G.bandwidth||0)+(F.bandwidth||0),G.dependencyStream&&(W+=G.dependencyStream.bandwidth||0),F.dependencyStream&&(W+=F.dependencyStream.bandwidth||0),me=k++,M.push({id:me,language:G.language,disabledUntilTime:0,primary:G.primary,audio:G,video:F,bandwidth:W,drmInfos:K,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(N=i.g.length?i.g:i.h,I=m(N),C=I.next();!C.done;C=I.next())E=C.value,O=k++,L=E.bandwidth||0,E.dependencyStream&&(L+=E.dependencyStream.bandwidth||0),M.push({id:O,language:E.language,disabledUntilTime:0,primary:E.primary,audio:E.type==r.$?E:null,video:E.type==r.va?E:null,bandwidth:L,drmInfos:E.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});i.l=M,X(ne)})};function I0(e){var t,n,i,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M,N,I,C,E,O,L,_,j,G,H;return R(function(B){switch(B.g){case 1:if(t=vt,e.length==1)return B.return(e[0]);for(n=e.map(function(F){return new Map(F.filter(function(K){return K.type===t.$}).map(function(K){return[rh(K),K]}))}),i=e.map(function(F){return new Map(F.filter(function(K){return K.type===t.va}).map(function(K){return[ih(K),K]}))}),r=e.map(function(F){return new Map(F.filter(function(K){return K.type===t.Na}).map(function(K){return[Es(K),K]}))}),a=e.map(function(F){return new Map(F.filter(function(K){return K.type===t.Yf}).map(function(K){return[Ms(K),K]}))}),o=m(r),s=o.next();!s.done;s=o.next())u=s.value,l=R0(t.Na),u.set(Es(l),l);for(c=m(a),d=c.next();!d.done;d=c.next())h=d.value,p=R0(t.Yf),h.set(Ms(p),p);return g=new pn,T(B,kr(g,[],n,0,Hl,Gl,0),2);case 2:return y=B.h,T(B,kr(g,[],i,0,Hl,Gl,0),3);case 3:return b=B.h,T(B,kr(g,[],r,0,Hl,Gl,0),4);case 4:return A=B.h,T(B,kr(g,[],a,0,Hl,Gl,0),5);case 5:if(x=B.h,k=0,b.length&&y.length)for(E=m(y),O=E.next();!O.done;O=E.next())for(L=O.value,_=m(b),j=_.next();!j.done;j=_.next())G=j.value,H=k++,G.variantIds.push(H),L.variantIds.push(H);else for(M=b.concat(y),N=m(M),I=N.next();!I.done;I=N.next())C=I.value,C.variantIds=[k++];return B.return(b.concat(y).concat(A).concat(x))}})}function kr(e,t,n,i,r,a,o){var s,u,l,c,d,h,p,g,y,b,A,x,k,M,N,I,C,E,O;return R(function(L){switch(L.g){case 1:for(s=[],u=0;u<n.length;u++)u>=i?s.push(new Set(n[u].values())):s.push(new Set);l=m(t),c=l.next();case 2:if(c.done){L.A(4);break}return d=c.value,T(L,mI(e,d,n,i,a,s,o),5);case 5:if(h=L.h,!h)throw new D(2,4,4037);c=l.next(),L.A(2);break;case 4:for(p=m(s),g=p.next();!g.done;g=p.next())for(y=g.value,b=m(y),A=b.next();!A.done;A=b.next())x=A.value,(k=vI(e,t,x,n,r,a,s))&&t.push(k);for(M=m(s),N=M.next();!N.done;N=M.next())for(I=N.value,C=m(I),E=C.next(),O={};!E.done;O={Ah:void 0},E=C.next())if(O.Ah=E.value,!nh(O.Ah)&&t.some(function(_){return function(j){return th(_.Ah,j)}}(O)))throw new D(2,4,4037);return L.return(t)}})}function mI(e,t,n,i,r,a,o){return R(function(s){return s.g==1?(C0(e,n,t,o>0),t.matchedStreams?t.segmentIndex?T(s,E0(t,i+o),2):s.A(2):s.return(!1)):(M0(t,i,r,a,o),s.return(!0))})}function E0(e,t){var n,i,r,a,o,s;return R(function(u){if(u.g==1){for(n=[],i=e.matchedStreams,r=t;r<i.length;r++)a=i[r],n.push(a.createSegmentIndex()),a.trickModeVideo&&!a.trickModeVideo.segmentIndex&&n.push(a.trickModeVideo.createSegmentIndex()),a.dependencyStream&&!a.dependencyStream.segmentIndex&&n.push(a.dependencyStream.createSegmentIndex());return T(u,Promise.all(n),2)}if(e.segmentIndex instanceof lt)for(o=t;o<i.length;o++)s=i[o],s.segmentIndex&&e.segmentIndex.h.push(s.segmentIndex);X(u)})}function vI(e,t,n,i,r,a,o){if(nh(n))return null;var s=r(n);return C0(e,i,s),s.createSegmentIndex&&(s.createSegmentIndex=function(){return R(function(u){return s.segmentIndex?u.A(0):(s.segmentIndex=new lt,T(u,E0(s,0),0))})},s.closeSegmentIndex=function(){if(s.segmentIndex&&(s.segmentIndex.release(),s.segmentIndex=null),s.matchedStreams)for(var u=m(s.matchedStreams),l=u.next();!l.done;l=u.next()){l=l.value;var c;if(c=l.segmentIndex){e:{c=m(t);for(var d=c.next();!d.done;d=c.next())if(d=d.value,d!==s&&d.segmentIndex&&d.matchedStreams&&d.matchedStreams.includes(l)){c=!0;break e}c=!1}c=!c}c&&(l.segmentIndex.release(),l.segmentIndex=null)}}),!s.matchedStreams||!s.matchedStreams.length?null:(M0(s,0,a,o,0),s)}function M0(e,t,n,i,r){var a=e.matchedStreams;for(t+=r;t<a.length;t++){var o=a[t];n(e,o);var s=!0;if(e.type=="audio"&&Gr(e.language,o.language)==0&&(s=!1),s&&((s=i[t-r])&&s.delete(o),o.fullMimeTypes))for(o=m(o.fullMimeTypes.values()),s=o.next();!s.done;s=o.next())e.fullMimeTypes.add(s.value)}}function to(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set(e.keyIds),t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t.dependencyStream=null,t}function Hl(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set(e.keyIds),t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function Ir(e,t){function n(o,s){o||(o=[]),s=m(s);for(var u=s.next();!u.done;u=s.next())u=u.value,o.includes(u)||o.push(u);return o}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var i=m(t.keyIds),r=i.next();!r.done;r=i.next())e.keyIds.add(r.value);if(e.originalId==null?e.originalId=t.originalId:(i=t.originalId||"")&&!e.originalId.endsWith(i)&&(e.originalId+=","+i),i=Dp(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!i.length)throw new D(2,4,4038);if(e.drmInfos=i,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),i=m(t.closedCaptions),r=i.next();!r.done;r=i.next()){var a=m(r.value);r=a.next().value,a=a.next().value,e.closedCaptions.set(r,a)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=to(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var o=new lt,s=m(e.trickModeVideo.matchedStreams),u=s.next();!u.done;u=s.next())o.h.push(u.value.segmentIndex);return e.trickModeVideo.segmentIndex=o,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),Ir(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),Ir(e.trickModeVideo,t)),t.dependencyStream?(e.dependencyStream||(e.dependencyStream=to(t.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var o=new lt,s=m(e.dependencyStream.matchedStreams),u=s.next();!u.done;u=s.next())o.h.push(u.value.segmentIndex);return e.dependencyStream.segmentIndex=o,Promise.resolve()}),e.dependencyStream.matchedStreams.push(t.dependencyStream),Ir(e.dependencyStream,t.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(t),Ir(e.dependencyStream,t))}function Gl(e,t){var n=e.roles;n||(n=[]);for(var i=m(t.roles),r=i.next();!r.done;r=i.next())r=r.value,n.includes(r)||n.push(r);for(e.roles=n,n=m(t.keyIds),i=n.next();!i.done;i=n.next())e.keyIds.add(i.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,z(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=m(t.closedCaptions),n=t.next();!n.done;n=t.next())i=m(n.value),n=i.next().value,i=i.next().value,e.closedCaptions.set(n,i)}function C0(e,t,n,i){i=i!==void 0&&i?n.matchedStreams:[],t=m(t);for(var r=t.next();!r.done;r=t.next()){if(r=yI(e,r.value,n),!r)return;i.push(r)}n.matchedStreams=i}function yI(e,t,n){var i={audio:rh,video:ih,text:Es,image:Ms}[n.type],r=null,a=i(n);if(t.has(a))r=t.get(a);else{a={audio:function(l,c){return th(l,c)},video:function(l,c){return th(l,c)},text:bI,image:wI}[n.type];for(var o={audio:SI,video:TI,text:xI,image:AI}[n.type],s=m(t.values()),u=s.next();!u.done;u=s.next())u=u.value,!a(n,u)||n.fastSwitching!=u.fastSwitching||r&&!o(n,r,u)||(r=u)}return e.o&&!nh(r)&&t.delete(i(r)),r}function P0(e,t){return e.mimeType!=t.mimeType?!1:O0(e.codecs)===O0(t.codecs)}f.Yi=function(e){this.o=e};function th(e,t){return!(e.drmInfos&&!Rp(e.drmInfos,t.drmInfos))}function bI(e,t){return t.language?!(e.forced!==t.forced||Gr(e.language,t.language)==0||t.kind!=e.kind):!0}function wI(){return!0}function SI(e,t,n){var i=L0(e,t,n);if(i===xn)return!0;if(i===Gn)return!1;i=Gr(e.language,t.language);var r=Gr(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(a){return e.roles.includes(a)}),r=n.roles.filter(function(a){return e.roles.includes(a)}),r.length>i.length)return!0;if(r.length<i.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(i=Is(e.channelsCount,t.channelsCount,n.channelsCount),i==xn?!0:i==Gn?!1:(i=Is(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),i==xn?!0:i==Gn?!1:!!(e.bandwidth&&N0(e.bandwidth,t.bandwidth,n.bandwidth)==xn)))}function TI(e,t,n){var i=L0(e,t,n);if(i===xn)return!0;if(i===Gn)return!1;if(i=Is(e.width*e.height,t.width*t.height,n.width*n.height),i==xn)return!0;if(i==Gn)return!1;if(e.frameRate){if(i=Is(e.frameRate,t.frameRate,n.frameRate),i==xn)return!0;if(i==Gn)return!1}return!!(e.bandwidth&&N0(e.bandwidth,t.bandwidth,n.bandwidth)==xn)}function xI(e,t,n){var i=Gr(e.language,t.language),r=Gr(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(a){return e.roles.includes(a)}),r=n.roles.filter(function(a){return e.roles.includes(a)}),r.length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function AI(e,t,n){return Is(e.width*e.height,t.width*t.height,n.width*n.height)==xn}function R0(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function D0(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Re([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function Is(e,t,n){if(t==e&&e!=n)return Gn;if(n==e&&e!=t)return xn;if(t>e){if(n<=e||n-e<t-e)return xn;if(n-e>t-e)return Gn}else{if(n>e)return Gn;if(e-n<e-t)return xn;if(e-n>e-t)return Gn}return ah}function L0(e,t,n){var i=e.mimeType===t.mimeType&&e.codecs===t.codecs,r=e.mimeType===n.mimeType&&e.codecs===n.codecs;return i&&!r?Gn:!i&&r?xn:(t=P0(e,t),e=P0(e,n),t&&!e?Gn:!t&&e?xn:ah)}function N0(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?xn:t<e?Gn:ah}function nh(e){switch(e.type){case xe:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function ih(e){return ql([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function rh(e){return ql([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function Es(e){return ql([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Ms(e){return ql([e.width,e.codecs,e.mimeType])}function ql(e){return JSON.stringify(e)}function O0(e){return kI.getOrInsertComputed(e,function(){return Ht(e)})}Y("shaka.util.PeriodCombiner",pn),pn.prototype.setUseStreamOnce=pn.prototype.Yi,pn.prototype.combinePeriods=pn.prototype.lg,pn.prototype.deleteStream=pn.prototype.$h,pn.prototype.getImageStreams=pn.prototype.Nj,pn.prototype.getTextStreams=pn.prototype.Mg,pn.prototype.getVariants=pn.prototype.gk;var xn=1,ah=0,Gn=-1,kI=new Map;function II(e,t){var n=new DOMParser,i=EI.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function _0(e,t){try{var n=vi(e);return II(n,t)}catch{return null}}var EI=new at(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Cs(){var e=this;this.j=this.g=null,this.B=[],this.h=null,this.Ja=1,this.G=[],this.l={vf:"",type:"",profiles:[],vc:null,pb:0,bb:null,qe:0},this.u=new Map,this.C=new Map,this.o=new Map,this.N=new Map,this.Aa=new Map,this.m=new pn,this.J=0,this.Ea=new ua(5),this.K=new Ae(function(){if(e.I&&!e.g.continueLoadingWhenPaused&&(e.H.Ma(e.I,"timeupdate"),e.I.paused)){e.H.ya(e.I,"timeupdate",function(){return G0(e)});return}G0(e)}),this.R=new Aa,this.O=null,this.F=[],this.ha=1/0,this.wa=!1,this.i=null,this.M=0,this.T=!1,this.H=new _e,this.I=null,this.V=!1,this.aa="",this.oa=function(){return!1},this.X=[],this.ma=new Set,this.za=new d0}f=Cs.prototype,f.configure=function(e,t){var n=this.j&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.oa=t),n&&this.h&&this.h.presentationTimeline.W()&&this.K.Jb(),this.i&&this.i.configure(this.g),this.m&&this.m.Yi(this.g.dash.useStreamOnceInPeriodFlattening)},f.start=function(e,t){var n=this,i;return R(function(r){if(r.g==1)return n.wa=t.isLowLatencyMode(),n.B=[e],n.j=t,T(r,oh(n),2);if(i=r.h,n.j&&sh(n,i),!n.j)throw new D(2,7,7001);return r.return(n.h)})},f.stop=function(){for(var e=m(this.o.values()),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.B=[],this.h=null,this.o.clear(),this.N.clear(),this.u.clear(),this.C.clear(),this.l={vf:"",type:"",profiles:[],vc:null,pb:0,bb:null,qe:0},this.m=null,this.K!=null&&(this.K.stop(),this.K=null),this.i&&this.i.destroy(),this.H&&(this.H.release(),this.H=null),this.ma.clear(),this.za.release(),this.R.destroy()},f.update=function(){var e=this,t;return R(function(n){if(n.g==1)return he(n,2),T(n,oh(e),4);if(n.g!=2)return ye(n,0);if(t=oe(n),!e.j||!t)return n.return();e.j.onError(t),X(n)})},f.onExpirationUpdated=function(){},f.onInitialVariantChosen=function(e){if(this.h&&this.h.presentationTimeline.W()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.h.presentationTimeline.Jc();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.J=t.endTime-e,sh(this,0))}}},f.banLocation=function(e){this.i&&this.i.banLocation(e)},f.setMediaElement=function(e){this.I=e};function oh(e){var t,n,i,r,a,o,s,u,l,c,d;return R(function(h){return h.g==1?(t=4,n="MPD",i=HI(e),r=e.B,i.length?(r=i,n="Patch",t=6):e.B.length>1&&e.i&&(a=ks(e.i,"Location",!0),a.length&&(r=a)),o=yt(r,e.g.retryParameters),s=Date.now(),T(h,lh(e,o,0,{type:t}),2)):h.g!=3?(u=h.h,e.j?(u.uri&&u.uri!=u.originalUri&&!e.B.includes(u.uri)&&e.B.unshift(u.uri),l=new ht(u.uri),e.aa=l.g.toString(),T(h,MI(e,u.data,u.uri,n),3)):h.return(0)):(c=Date.now(),d=(c-s)/1e3,e.Ea.sample(1,d),e.ma.clear(),h.return(d))})}function MI(e,t,n,i){var r,a,o,s,u,l,c,d,h,p;return R(function(g){if(g.g==1){if(r=t,a=e.g.dash.manifestPreprocessor,o=il,a!=o){if(Ce("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),s=_0(r,i),!s)throw new D(2,4,4001,n);a(s),r=Zn(s.outerHTML)}if(u=xo(r,i),!u)throw new D(2,4,4001,n);return l=e.g.dash.manifestPreprocessorTXml,c=rl,l!=c&&l(u),i==="Patch"?g.return(CI(e,u)):e.g.dash.disableXlinkProcessing?g.return(j0(e,u,n)):(d=e.g.dash.xlinkFailGracefully,h=Vl(u,e.g.retryParameters,d,n,e.j.networkingEngine),zr(e.R,h),T(g,h.promise,2))}return p=g.h,g.return(j0(e,p,n))})}function j0(e,t,n){var i,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M,N,I,C,E,O,L,_,j,G,H,B,F,K,W,me,ne,He,ve,et,Ne,we,Pe,kt,Ye,De,je,Ut,Bt,Zi,gp,mp,Ic,ww,so,Sw,Tw,xw;return R(function(er){switch(er.g){case 1:for(e.i&&e.i.l.clear(),i=[n],r=[],a=new Map,o=Ve(t,"Location"),s=m(o),u=s.next();!u.done;u=s.next())l=u.value,c=l.attributes.serviceLocation,(d=rn(l))&&(h=Mt(i,[d])[0],c&&(e.i?eo(e.i,"Location",c,h):a.set(c,h)),r.push(h));if(e.i?(p=ks(e.i,"Location",!0),p.length>0&&(i=e.B=p)):r.length&&(i=e.B=r),e.l.vf=t.attributes.id||"",e.l.qe=ge(t,"publishTime",Ni)||0,e.G=Ve(t,"PatchLocation"),g=Promise.resolve(),(y=tt(t,"ContentSteering"))&&e.j)for(b=y.attributes.defaultServiceLocation,e.i?(e.i.i=i,e.i.h=b):(e.i=new Za(e.j),e.i.configure(e.g),e.i.setManifestType("DASH"),e.i.i=i,e.i.h=b,(A=rn(y))&&(ge(y,"queryBeforeStart",au,!1)?g=As(e.i,A):As(e.i,A))),x=m(a.keys()),k=x.next();!k.done;k=x.next())M=k.value,N=a.get(M),eo(e.i,"Location",M,N);if(I=Ve(t,"BaseURL"),C=!1,e.i)for(E=m(I),O=E.next();!O.done;O=E.next())L=O.value,_=L.attributes.serviceLocation,j=rn(L),_&&j&&(eo(e.i,"BaseURL",_,j),C=!0);if(e.X.splice(0),C&&e.i||(G=I.map(rn),e.X.push.apply(e.X,z(Mt(i,G)))),H=e.i,B=e.X,F=GI,K=F.call(Cs,H,C,B),e.l.bb=K,W=0,I&&I.length&&(W=ge(I[0],"availabilityTimeOffset",ru)||0),e.l.pb=W,e.J=ge(t,"minimumUpdatePeriod",bi,-1),me=ge(t,"availabilityStartTime",Ni),ne=ge(t,"timeShiftBufferDepth",bi),He=e.g.dash.ignoreSuggestedPresentationDelay,ve=null,He||(ve=ge(t,"suggestedPresentationDelay",bi)),et=e.g.dash.ignoreMaxSegmentDuration,Ne=null,et||(Ne=ge(t,"maxSegmentDuration",bi)),we=t.attributes.type||"static",e.h&&e.h.presentationTimeline&&(e.V=e.h.presentationTimeline.W()&&we=="static"),e.l.type=we,e.h)for(Pe=e.h.presentationTimeline,kt=Pe.Hb(),Ye=m(e.o.values()),De=Ye.next();!De.done;De=Ye.next())je=De.value,je.segmentIndex&&je.segmentIndex.Ya(kt);else Ut=e.g.dash.ignoreMinBufferTime,Bt=0,Ut||(Bt=ge(t,"minBufferTime",bi)||0),Zi=0,Zi=ve!=null?Math.min(ve,ne||1/0):e.g.defaultPresentationDelay>0?e.g.defaultPresentationDelay:Math.min(Bt*1.5,ne||1/0),Pe=new fe(me,Zi,e.g.dash.autoCorrectDrift);return Pe.cd(we=="static"),Pe.W()&&!isNaN(e.g.availabilityWindowOverride)&&(ne=e.g.availabilityWindowOverride),ne==null&&(ne=1/0),Pe.Lf(ne),gp=t.attributes.profiles||"",e.l.profiles=gp.split(","),mp={Eb:we!="static",presentationTimeline:Pe,ua:null,na:null,qa:null,L:null,bandwidth:0,Og:!1,pb:W,vc:null,profiles:gp.split(","),roles:null,Lb:W0},T(er,g,2);case 2:return e.M=0,Ic=V0(e,mp,K,t,!1),ww=Ic.duration,so=Ic.periods,(we!="static"||e.V)&&Ic.bi||Pe.Ab(ww||1/0),e.T&&e.wa&&Pe.Vi(e.ha),Pe.Xg(Ne||1),e.T&&e.wa&&(Sw=ve??e.g.defaultPresentationDelay,Pe.sh(Sw)),e.h?(e.h.periodCount=so.length,e.h.gapCount=e.M,T(er,U0(e,so,!1),4)):T(er,e.m.lg(so,mp.Eb),6);case 6:var JM=Pe,$M=e.m.l,QM=e.m.Mg(),ZM=e.m.i,eC=e.g.dash.sequenceMode,Jt=tt(t,"ServiceDescription");if(Jt){var oi=tt(Jt,"Latency");if(Jt=tt(Jt,"PlaybackRate"),oi||Jt){var Jn={};oi&&("target"in oi.attributes&&(Jn.targetLatency=parseInt(oi.attributes.target,10)/1e3),"max"in oi.attributes&&(Jn.maxLatency=parseInt(oi.attributes.max,10)/1e3),"min"in oi.attributes&&(Jn.minLatency=parseInt(oi.attributes.min,10)/1e3)),Jt&&("max"in Jt.attributes&&(Jn.maxPlaybackRate=parseFloat(Jt.attributes.max)),"min"in Jt.attributes&&(Jn.minPlaybackRate=parseFloat(Jt.attributes.min))),oi=Jn}else oi=null}else oi=null;e:{if(Jt=Ve(t,"SupplementalProperty"),Jt.length){for(Jt=m(Jt),Jn=Jt.next();!Jn.done;Jn=Jt.next())if(Jn=Jn.value,Jn.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016"){Jt=Jn.attributes.value;break e}}Jt=null}if(e.h={presentationTimeline:JM,variants:$M,textStreams:QM,imageStreams:ZM,offlineSessionIds:[],sequenceMode:eC,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:oi,nextUrl:Jt,periodCount:so.length,gapCount:e.M,isLowLatency:e.T,startTime:null},!Pe.lj()){er.A(7);break}return Tw=Ve(t,"UTCTiming"),T(er,FI(e,K,Tw),8);case 8:if(xw=er.h,!e.j)return er.return();Pe.Wi(xw);case 7:Pe.qf(),e.m&&!e.h.presentationTimeline.W()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.h),RI(e),DI(e,so),X(er)}})}function U0(e,t,n){var i;return R(function(r){if(r.g==1)return T(r,e.m.lg(t,!0,n),2);e.h.variants=e.m.l,i=e.m.Mg(),i.length>0&&(e.h.textStreams=i),e.h.imageStreams=e.m.i,e.j.filter(e.h),X(r)})}function CI(e,t){var n,i,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M,N,I,C,E,O,L,_,j;return R(function(G){if(G.g==1){if(n=t.attributes.mpdId,i=ge(t,"originalPublishTime",Ni),!n||n!==e.l.vf||i!==e.l.qe)throw e.G=[],new D(1,4,4052);for(r=[],a=[],o=new Set,s=m(Hp(t)),u=s.next();!u.done;u=s.next())if(l=u.value,c=ou(l.attributes.sel||""),d=c[c.length-1],h=rn(l)||"",d.name==="MPD")if(d.Ec==="mediaPresentationDuration"){p=rn(l)||"";var H=bi(p);if(H!=null){e.l.vc=H;for(var B=m(e.u.values()),F=B.next();!F.done;F=B.next())F.value.vc=H}}else if(d.Ec==="type"){for(e.h.presentationTimeline.cd(h=="static"),e.l.type=h,H=m(e.u.values()),B=H.next();!B.done;B=H.next())B.value.Eb=h=="dynamic";h=="static"&&(e.J=-1)}else d.Ec==="publishTime"?e.l.qe=Ni(h)||0:d.Ec===null&&l.tagName==="add"&&a.push(l);else if(d.name==="PatchLocation")qp(e.G,l);else if(d.name==="Period")l.tagName==="add"?a.push(l):l.tagName==="remove"&&d.id&&PI(e,d.id);else if(d.name==="SegmentTemplate"){if(B=ou(l.attributes.sel||""),H=B[B.length-1],H.Ec){B=B0(e,B),F=rn(l)||"";for(var K=m(B),W=K.next();!W.done;W=K.next())W=e.u.get(W.value),zp(W.L.Oc,l.tagName,H.Ec,F);H=B}else H=[];for(g=H,y=m(g),b=y.next();!b.done;b=y.next())A=b.value,o.add(A)}else if(d.name==="SegmentTimeline"||d.name==="S"){for(H=ou(l.attributes.sel||""),H=B0(e,H),B=m(H),F=B.next();!F.done;F=B.next())F=e.u.get(F.value),F=$a(F,Ar,"SegmentTimeline"),K=Ve(F,"S"),qp(K,l),F.children=K;for(x=H,k=m(x),M=k.next();!M.done;M=k.next())N=M.value,o.add(N)}for(I=m(o),C=I.next();!C.done;C=I.next())E=C.value,F0(e,E);for(O=m(a),L=O.next();!L.done;L=O.next())_=L.value,r.push.apply(r,z(V0(e,{Eb:e.l.type=="dynamic",presentationTimeline:e.h.presentationTimeline,ua:null,na:null,qa:null,L:null,bandwidth:0,Og:!1,pb:e.l.pb,profiles:e.l.profiles,vc:e.l.vc,roles:null,Lb:W0},e.l.bb,_,!0).periods));return r.length?(e.h.periodCount+=r.length,e.h.gapCount=e.M,T(G,U0(e,r,!0),2)):G.A(2)}e.l.type=="static"&&(j=e.l.vc,e.h.presentationTimeline.Ab(j||1/0)),X(G)})}function PI(e,t){e.h.periodCount--;for(var n=m(e.u.keys()),i=n.next();!i.done;i=n.next())if(i=i.value,i.startsWith(t)){var r=e.u.get(i);$a(r,Ar,"SegmentTimeline").children=[],F0(e,i),e.u.delete(i)}e.F=e.F.filter(function(a){return a!==t})}function B0(e,t){var n="",i="",r=-1,a="";t=m(t);for(var o=t.next();!o.done;o=t.next())o=o.value,o.name==="Period"?n=o.id:o.name==="AdaptationSet"?(i=o.id,o.position!==null&&(r=o.position)):o.name==="Representation"&&(a=o.id);if(t=[],a)t.push(n+","+a);else if(i)for(r=m(e.u.values()),e=r.next();!e.done;e=r.next())e=e.value,e.ua.id===n&&e.qa.id===i&&e.L.id&&t.push(n+","+e.L.id);else if(r>-1)for(i=m(e.u.values()),e=i.next();!e.done;e=i.next())e=e.value,e.ua.id===n&&e.qa.position===r&&e.L.id&&t.push(n+","+e.L.id);return t}function F0(e,t){var n=e.u.get(t),i=e.o.get(t);i.segmentIndex&&i.segmentIndex.Ya(e.h.presentationTimeline.Hb());try{var r=T0(n,function(a,o,s,u){return K0(e,a,o,s,u)},e.o,!0,e.g.dash.initialSegmentLimit,e.Aa,n.L.aesKey,null,!0,e.C);i.createSegmentIndex=function(){return R(function(a){if(a.g==1)return i.segmentIndex?a.A(0):T(a,r.Sc(),3);i.segmentIndex=a.h,X(a)})}}catch(a){if(t=n.L.contentType,t!=xe&&t!="application"&&t!="image"||a.code!=4002)throw a}}function V0(e,t,n,i,r){var a=t.vc;a||(a=ge(i,"mediaPresentationDuration",bi),e.l.vc=a);var o=0;e.h&&e.h.presentationTimeline&&e.V&&(o=e.h.presentationTimeline.$b());var s=[],u=o;i=Ve(i,"Period");for(var l=0;l<i.length;l++){var c=i[l],d=i[l+1],h=ge(c,"start",bi,u),p=c.attributes.id,g=ge(c,"duration",bi);h=l==0&&h==0&&e.V?o:h;var y=null;if(d){var b=ge(d,"start",bi);b!=null&&(y=b-h+o)}else a!=null&&(y=a-h+o);if(b=Np,y&&g&&Math.abs(y-g)>b&&y>g&&e.M++,y==null&&(y=g),!(e.O!==null&&p!==null&&h!==null&&h<e.O)||e.F.includes(p)||l+1==i.length){if(h!==null&&(e.O===null||h>e.O)&&(e.O=h),u=LI(e,t,n,{start:h,duration:y,node:c,kf:y==null||!d}),s.push(u),t.ua.id&&y&&e.Aa.set(t.ua.id,y),y==null){u=null;break}u=h+y}}if(r)for(t=m(s),n=t.next();!n.done;n=t.next())n=n.value.id,e.F.includes(n)||e.F.push(n);else e.F=s.map(function(A){return A.id});return a!=null?{periods:s,duration:a+o,bi:!1}:{periods:s,duration:u,bi:!0}}function RI(e){var t=Array.from(e.N.keys()).filter(function(s){return!e.F.includes(s)});t=m(t);for(var n=t.next();!n.done;n=t.next()){n=n.value;for(var i=!0,r=m(e.N.get(n)),a=r.next();!a.done;a=r.next()){a=a.value;var o=e.o.get(a);o&&(o.segmentIndex&&o.segmentIndex.getNumReferences()!=0?i=!1:(e.m&&e.m.$h(o,n),e.o.delete(a)))}i&&e.N.delete(n)}}function DI(e,t){t=new Set(t.map(function(r){return r.id}));for(var n=m(e.C.keys()),i=n.next();!i.done;i=n.next())i=i.value,t.has(i)||e.C.delete(i)}function LI(e,t,n,i){t.ua=uh(e,i.node,null,n),t.na=i,t.ua.pb=t.pb,t.ua.id||(t.ua.id="__shaka_period_"+i.start);var r=Ve(i.node,"EventStream");n=t.presentationTimeline.Hb(),r=m(r);for(var a=r.next();!a.done;a=r.next())VI(e,i.start,i.duration,a.value,n);for(n=Ve(i.node,"SupplementalProperty"),n=m(n),r=n.next();!r.done;r=n.next())r=r.value,r.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"&&(r=zl(e,r))&&(t.Lb=r);if(n=Ve(i.node,"AdaptationSet").map(function(p,g){return H0(e,t,g,p)}).filter(cr),t.Eb){r=[],a=m(n);for(var o=a.next();!o.done;o=a.next()){o=m(o.value.Sk);for(var s=o.next();!s.done;s=o.next())r.push(s.value)}if(r.length!=new Set(r).size)throw new D(2,4,4018)}for(r=new Map,a=m(n),o=a.next();!o.done;o=a.next())for(o=m(o.value.Bj),s=o.next();!s.done;s=o.next()){var u=m(s.value);s=u.next().value,u=u.next().value,r.set(s,u)}if(r.size)for(a=null,o=m(n),s=o.next();!s.done;s=o.next()){s=s.value,u=[];for(var l=m(s.streams),c=l.next(),d={};!c.done;d={Bh:void 0},c=l.next())if(d.Bh=c.value,r.has(d.Bh.originalId)){a||(a=Ve(i.node,"AdaptationSet").map(function(p,g){return H0(e,t,g,p)}).filter(cr)),c=m(a);for(var h=c.next();!h.done;h=c.next())(h=h.value.streams.find(function(p){return function(g){return g.originalId==p.Bh.originalId}}(d)))&&(h.dependencyStream=r.get(h.originalId),h.originalId+=h.dependencyStream.originalId,u.push(h))}u.length&&s.streams.push.apply(s.streams,z(u))}if(i=n.filter(function(p){return!p.Ih}),n=n.filter(function(p){return p.Ih}),!e.g.disableIFrames){for(n=m(n),r=n.next();!r.done;r=n.next())for(r=r.value,a=r.Ih.split(" "),o=m(i),s=o.next();!s.done;s=o.next())if(s=s.value,a.includes(s.id))for(s=m(s.streams),u=s.next();!u.done;u=s.next())mg(u.value,r.streams)}if(n=Kl(e.g.disableAudio,i,"audio"),r=Kl(e.g.disableVideo,i,"video"),a=Kl(e.g.disableText,i,xe),i=Kl(e.g.disableThumbnails,i,"image"),r.length===0&&n.length===0)throw new D(2,4,4004);return{id:t.ua.id,audioStreams:n,videoStreams:r,textStreams:a,imageStreams:i}}function Kl(e,t,n){return e||!t.length?[]:t.reduce(function(i,r){return r.contentType!=n||i.push.apply(i,z(r.streams)),i},[])}function H0(e,t,n,i){function r(j){var G=j.attributes["dvb:fontFamily"];j=j.attributes["dvb:url"],G&&j&&(j=Mt(t.qa.bb(),[j],t.Lb()),e.j.addFont(G,j[0]))}function a(j){switch(j){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function o(j){switch(j){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.qa=uh(e,i,t.ua,null),t.qa.position=n;var s=!1;n=Ve(i,"Role");var u=n.map(function(j){return j.attributes.value}).filter(cr),l=void 0,c=t.qa.contentType==xe;c&&(l="subtitle"),n=m(n);for(var d=n.next();!d.done;d=n.next()){d=d.value;var h=d.attributes.schemeIdUri;if(h==null||h=="urn:mpeg:dash:role:2011")switch(d=d.attributes.value,d){case"main":s=!0;break;case"caption":case"subtitle":l=d}}var p=Ve(i,"EssentialProperty");n=null;var g=!1;d=null,h=!1,p=m(p);for(var y=p.next();!y.done;y=p.next()){y=y.value;var b=y.attributes.schemeIdUri;if(b=="http://dashif.org/guidelines/trickmode")n=y.attributes.value;else if(b=="urn:mpeg:mpegB:cicp:TransferCharacteristics")var A=o(parseInt(y.attributes.value,10));else if(b=="urn:mpeg:mpegB:cicp:ColourPrimaries")var x=a(parseInt(y.attributes.value,10));else b!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(b=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?g=!0:b=="urn:dvb:dash:fontdownload:2014"?r(y):b=="urn:mpeg:dash:urlparam:2014"&&(d=zl(e,y))||(h=!0))}if(h)return null;var k=null;for(h=Ve(i,"SupplementalProperty"),h=m(h),p=h.next();!p.done;p=h.next())p=p.value,y=p.attributes.schemeIdUri,y=="http://dashif.org/guidelines/last-segment-number"?k=parseInt(p.attributes.value,10)-1:y=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?A=o(parseInt(p.attributes.value,10)):y=="urn:mpeg:mpegB:cicp:ColourPrimaries"?x=a(parseInt(p.attributes.value,10)):y=="urn:dvb:dash:fontdownload:2014"?r(p):y=="urn:mpeg:dash:urlparam:2014"&&(d=zl(e,p));d&&(t.Lb=d),d=Ve(i,"Accessibility");var M=new Map,N;for(d=m(d),h=d.next();!h.done;h=d.next())if(p=h.value,h=p.attributes.schemeIdUri,p=p.attributes.value,h!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(h!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)h=="urn:mpeg:dash:role:2011"?p!=null&&(u.push(p),p=="captions"&&(l="caption")):h=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(p=="1"?N="visually impaired":p=="2"?N="hard of hearing":p=="9"&&(N="spoken subtitles"));else if(h=1,p!=null)for(p=m(p.split(";")),y=p.next();!y.done;y=p.next()){b=y.value;var I=y=void 0;b.includes("=")?(b=b.split("="),y="svc"+b[0],I=b[1].split(",")[0].split(":").pop()):(y="svc"+h,h++,I=b),M.set(y,Ue(I))}else M.set("svc1","und");else if(h=1,p!=null)for(p=p.split(";"),y=m(p),b=y.next();!b.done;b=y.next()){I=b.value;var C=b=void 0;I.includes("=")?(I=I.split("="),b=I[0].startsWith("CC")?I[0]:"CC"+I[0],C=I[1]||"und"):(b="CC"+h,p.length==2?h+=2:h++,C=I),M.set(b,Ue(C))}else M.set("CC1","und");d=Ve(i,"ContentProtection");var E=f0(e.za,d,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI);t.qa.encrypted=d.length>0;var O=Ue(t.qa.language||"und"),L=t.qa.label,_=new Map;if(i=Ve(i,"Representation"),!e.g.ignoreSupplementalCodecs){for(d=[],h=m(i),p=h.next();!p.done;p=h.next())y=p.value,(p=Li(y,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&(y=ei(y),y.attributes.codecs=p.split(" ").join(","),y.attributes.id&&(y.attributes.supplementalId=y.attributes.id+"_supplementalCodecs"),d.push(y));i.push.apply(i,z(d))}if(d=i.map(function(j){var G=NI(e,t,E,l,O,L,s,u,M,j,N,k);return G&&(G.hdr=G.hdr||A,G.colorGamut=G.colorGamut||x,G.fastSwitching=g,j=j.attributes.dependencyId)?(G.baseOriginalId=j,_.set(j,G),null):G}).filter(function(j){return!!j}),d.length==0&&_.size==0){if(n=t.qa.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||c||n)return null;throw new D(2,4,4003)}if(!t.qa.contentType||t.qa.contentType=="application")for(t.qa.contentType=z0(d[0].mimeType,d[0].codecs),c=m(d),h=c.next();!h.done;h=c.next())h.value.type=t.qa.contentType;for(c=t.qa.id||"__fake__"+e.Ja++,h=m(d),p=h.next();!p.done;p=h.next()){for(p=p.value,y=m(E.drmInfos),b=y.next();!b.done;b=y.next())b=b.value,b.keyIds=b.keyIds&&p.keyIds?new Set([].concat(z(b.keyIds),z(p.keyIds))):b.keyIds||p.keyIds;e.g.enableAudioGroups&&(p.groupId=c)}return i=i.map(function(j){return j.attributes.supplementalId||j.attributes.id}).filter(cr),{id:c,contentType:t.qa.contentType,language:O,Gm:s,streams:d,drmInfos:E.drmInfos,Ih:n,Sk:i,Bj:_}}function zl(e,t){if((t=Un(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&ge(t,"useMPDUrlQuery",au,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return n=="$querypart$"?e.aa:n.split("&").map(function(i){if(i=="$querypart$")return e.aa;var r=/\$query:(.*?)\$/g.exec(i);if(r&&r.length==2){r=r[1];var a=new ca(e.aa).get(r);if(a.length)return r+"="+a[0]}return i}).join("&")}}return null}function NI(e,t,n,i,r,a,o,s,u,l,c,d){t.L=uh(e,l,t.qa,null);var h=t.L.id;if(e.ha=Math.min(e.ha,t.L.pb),e.T=e.ha>0,!BI(t.L))return null;var p=t.na.start;t.bandwidth=ge(l,"bandwidth",wi)||0,t.roles=s;var g=Ve(l,"SupplementalProperty"),y=Ve(l,"EssentialProperty"),b=Ve(l,"ContentProtection");l=null;var A=y.find(function(B){return B.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"});(A||(A=g.find(function(B){return B.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"})))&&(l=zl(e,A)),l&&(t.Lb=l),A=t.L.contentType,l=A==xe||A=="application",A=A=="image",b.length&&(t.qa.encrypted=!0);try{var x=void 0;if(n.hg){var k=t.L.bb,M=t.Lb,N=Mt(k(),[n.hg.xk],M()),I=yt(N,e.g.retryParameters);x={bitsKey:128,blockCipherMode:"CBC",iv:n.hg.iv,firstMediaSequenceNumber:0,fetchKey:function(){var B,F,K;return R(function(W){if(W.g==1)return T(W,lh(e,I,6),2);if(W.g!=3){if(B=W.h,!B.data||B.data.byteLength!=16)throw new D(2,4,4049);return F={name:"AES-CBC"},K=x,T(W,P.crypto.subtle.importKey("raw",B.data,F,!0,["decrypt"]),3)}K.cryptoKey=W.h,x.fetchKey=void 0,X(W)})}}}if(t.L.aesKey=x,k=function(B,F,K,W){return K0(e,B,F,K,W)},t.L.Jd)var C=iI(t,k,x);else if(t.L.Bc)C=aI(t,e.o,x);else if(t.L.Oc)C=T0(t,k,e.o,!!e.h,e.g.dash.initialSegmentLimit,e.Aa,x,d,!1,e.C);else{var E=t.na.duration||0,O=t.L.bb,L=t.L.mimeType,_=t.L.codecs;C={endTime:-1,timeline:-1,Sc:function(){var B=Fu(p,E,O());return B.Fb(function(F){F.mimeType=L,F.codecs=_}),Promise.resolve(B)},timescale:1}}}catch(B){if((l||A)&&B.code==4002)return null;throw B}d=Gk(e.za,b,n,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI),d=new Set(d?[d]:[]),b=!1,g.some(function(B){return B.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&B.attributes.value=="JOC"})&&(b=!0),g=!1,l&&(g=s.includes("forced_subtitle")||s.includes("forced-subtitle"));var j;if(A&&((y=y.find(function(B){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(B.attributes.schemeIdUri)}))&&(j=y.attributes.value),!j))return null;var G;l=t.L.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(G="PQ"),y=t.L.id?t.ua.id+","+t.L.id:"",e.G.length&&h&&e.u.set(t.ua.id+","+h,_I(t)),t.L.Cf&&OI(e,t.L.Cf,C,t.presentationTimeline),C.endTime!=-1&&t.ua.id!=null&&t.L.id!=null&&((h=e.C.get(t.ua.id))?(h.endTime=C.endTime,h.hh.includes(t.L.id)||h.hh.push(t.L.id),e.C.set(t.ua.id,h)):e.C.set(t.ua.id,{endTime:C.endTime,timeline:C.timeline,hh:[t.L.id]}));var H=y&&e.o.has(y)?e.o.get(y):{id:e.Ja++,originalId:t.L.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){H.segmentIndex&&(H.segmentIndex.release(),H.segmentIndex=null)},segmentIndex:null,mimeType:t.L.mimeType,codecs:l,frameRate:t.L.frameRate,pixelAspectRatio:t.L.pixelAspectRatio,bandwidth:t.bandwidth,width:t.L.width,height:t.L.height,kind:i,encrypted:n.drmInfos.length>0,drmInfos:n.drmInfos,keyIds:d,language:r,originalLanguage:t.qa.language,label:a,type:t.qa.contentType,primary:o,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:t.L.emsgSchemeIdUris,roles:s,forced:g,channelsCount:t.L.yf,audioSamplingRate:t.L.audioSamplingRate,spatialAudio:b,closedCaptions:u,hdr:G,colorGamut:void 0,videoLayout:void 0,tilesLayout:j,accessibilityPurpose:c,external:!1,fastSwitching:!1,fullMimeTypes:new Set([dt(t.L.mimeType,t.L.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return H.createSegmentIndex=function(){var B;return R(function(F){if(F.g==1)return H.segmentIndex?F.A(0):(B=H,T(F,C.Sc(),3));B.segmentIndex=F.h,X(F)})},y&&t.Eb&&!e.o.has(y)&&(t=t.ua.id||"",e.o.set(y,H),e.N.getOrInsertComputed(t,function(){return[]}).push(y)),H}function OI(e,t,n,i){if(!e.ma.has(t)){e.ma.add(t);var r=ge(t,"presentationTime",Nt)||0,a=tt(t,"UTCTiming"),o;(o=a&&a.attributes.schemeIdUri)&&(a=a.attributes.schemeIdUri,o=!(a==="urn:mpeg:dash:utc:http-ntp:2014"||a==="urn:mpeg:dash:utc:ntp:2014"||a==="urn:mpeg:dash:utc:sntp:2014")),o?t=(ge(t,"wallClockTime",Ni)||0)*1e3:(t=ge(t,"wallClockTime",Nt)||0,t=hm(t)),n=new Date(t-r/n.timescale*1e3),r=n.getTime()/1e3,isNaN(r)||(i.o||i.uh(r),i=new Map().set("detail",{wallClockTime:t,programStartDate:n}),i=new Z("prft",i),e.j.onEvent(i))}}function _I(e){function t(n){return n?(n=or(n),n.Jd=null,n.Bc=null,n.Oc=Kc(n.Oc),n.Cf=null,n):null}return e=or(e),e.ua=t(e.ua),e.qa=t(e.qa),e.L=t(e.L),e.na&&(e.na=or(e.na),e.na.node=null),e}function G0(e){var t,n;return R(function(i){switch(i.g){case 1:return t=0,he(i,2),T(i,oh(e),4);case 4:t=i.h,ye(i,3);break;case 2:if(n=oe(i),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),i.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return i.return();e.j.onManifestUpdated(),sh(e,t),X(i)}})}function sh(e,t){if(!(e.J<0)){var n=e.J;e.g.updatePeriod>=0&&(n=e.g.updatePeriod),e.K.ka(Math.max(n-t,qs(e.Ea)))}}function uh(e,t,n,i){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,yf:null,audioSamplingRate:null,pb:0,If:1,encrypted:!1},i=i||n.bb;var r=t.attributes.id,a=t.attributes.supplementalId,o=Ve(t,"BaseURL"),s,u=!1;if(e.i)for(var l=m(o),c=l.next();!c.done;c=l.next()){var d=c.value;c=d.attributes.serviceLocation,d=rn(d),c&&d&&(eo(e.i,r,c,d),u=!0)}u&&e.i||(s=o.map(rn));var h=e.i;e=t.attributes.contentType||n.contentType,l=t.attributes.mimeType||n.mimeType,c=Hd([t.attributes.codecs||n.codecs]).join(","),d=ge(t,"frameRate",cS)||n.frameRate;var p=t.attributes.sar||n.pixelAspectRatio,g=jI(Ve(t,"InbandEventStream"),n.emsgSchemeIdUris),y=Ve(t,"AudioChannelConfiguration");y=UI(y)||n.yf;var b=ge(t,"audioSamplingRate",Nt)||n.audioSamplingRate;e||(e=z0(l,c));var A=tt(t,"SegmentBase"),x=tt(t,"SegmentTemplate"),k=A&&ge(A,"availabilityTimeOffset",ru)||0,M=x&&ge(x,"availabilityTimeOffset",ru)||0,N=o&&o.length&&ge(o[0],"availabilityTimeOffset",ru)||0;k=n.pb+N+k+M,M=null,(N=tt(t,"SegmentSequenceProperties"))&&(N=ge(N,"cadence",wi))&&(M=N),N=t.attributes.label;var I=Ve(t,"Label");return I&&I.length&&(I=I[0],pt(I)&&(N=pt(I))),{bb:function(){return Mt(i(),o.length?h&&u?ks(h,r):s||[]:[])},Jd:A||n.Jd,Bc:tt(t,"SegmentList")||n.Bc,Oc:x||n.Oc,Cf:tt(t,"ProducerReferenceTime")||n.Cf,width:ge(t,"width",Nt)||n.width,height:ge(t,"height",Nt)||n.height,contentType:e,mimeType:l,codecs:c,frameRate:d,pixelAspectRatio:p,emsgSchemeIdUris:g,id:a||r,originalId:r,language:t.attributes.lang,yf:y,audioSamplingRate:b,pb:k,hf:null,If:M||n.If,label:N||null,encrypted:!1}}function jI(e,t){t=t.slice(),e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function UI(e){e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=t.attributes.schemeIdUri;if(n&&(t=t.attributes.value))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return t.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(t,10),!t)continue;return t;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(n=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],t=parseInt(t,16),!t)continue;for(var i=0,r=0;r<n.length;r++)t&1<<r&&(i+=n[r]);if(i)return i;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),t=parseInt(t,16),!t)continue;for(r=i=0;r<n.length;r++)t&1<<r&&(i+=n[r]);if(i)return i;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(t=parseInt(t,10))&&t>0&&t<n.length)return n[t]}}return null}function BI(e){var t=e.Jd?1:0;return t+=e.Bc?1:0,t+=e.Oc?1:0,t==0?e.contentType==xe||e.contentType=="application":(t!=1&&(e.Jd&&(e.Bc=null),e.Oc=null),!0)}function q0(e,t,n,i){var r,a,o,s,u,l,c;return R(function(d){if(d.g==1)return r=[nn(n)],a=Mt(t(),r),o=yt(a,e.g.retryParameters),o.method=i,s=e.j.networkingEngine.request(4,o,{isPreload:e.oa()}),zr(e.R,s),T(d,s.promise,2);if(u=d.h,i=="HEAD"){if(!u.headers||!u.headers.date)return d.return(0);l=u.headers.date}else l=ot(u.data);return c=Date.parse(l),isNaN(c)?d.return(0):d.return(c-Date.now())})}function FI(e,t,n){var i,r,a,o,s,u,l,c;return R(function(d){switch(d.g){case 1:i=n.map(function(h){return{scheme:h.attributes.schemeIdUri,value:h.attributes.value}}),r=e.g.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),a=m(i),o=a.next();case 2:if(o.done){d.A(4);break}switch(s=o.value,he(d,5),u=s.scheme,l=s.value,u){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return d.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return d.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(l),d.return(isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Ee("NTP UTCTiming scheme is not supported");break;default:Ee("Unrecognized scheme in UTCTiming element",u)}d.A(9);break;case 7:return T(d,q0(e,t,l,"HEAD"),10);case 10:return d.return(d.h);case 8:return T(d,q0(e,t,l,"GET"),11);case 11:return d.return(d.h);case 9:ye(d,3);break;case 5:oe(d);case 3:o=a.next(),d.A(2);break;case 4:return Ee("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),d.return(0)}})}function VI(e,t,n,i,r){var a=i.attributes.schemeIdUri||"",o=i.attributes.value||"",s=ge(i,"timescale",Nt)||1,u=ge(i,"presentationTimeOffset",Nt)||0;i=m(Ve(i,"Event"));for(var l=i.next();!l.done;l=i.next()){l=l.value;var c=ge(l,"presentationTime",Nt)||0,d=ge(l,"duration",Nt)||0;c=Math.max((c-u)/s+t,t),d=c+d/s,n!=null&&(c=Math.min(c,t+n),d=Math.min(d,t+n)),d<r||(l={schemeIdUri:a,value:o,startTime:c,endTime:d,id:l.attributes.id||"",timescale:s,eventElement:Wp(l),eventNode:Kc(l)},e.j.onTimelineRegionAdded(l))}}function K0(e,t,n,i,r){var a,o,s,u;return R(function(l){return l.g==1?(a=Bn,o=r?0:1,s=Qo(t,n,i,e.g.retryParameters),T(l,lh(e,s,a,{type:o}),2)):(u=l.h,l.return(u.data))})}function z0(e,t){return t=dt(e,t),Po(t)?xe:e.split("/")[0]}function lh(e,t,n,i){return i||(i={}),i.isPreload=e.oa(),t=e.j.networkingEngine.request(n,t,i),zr(e.R,t),t.promise}function HI(e){var t=e.l.qe;if(!e.l.vf||!t||!e.G.length)return[];var n=Date.now()/1e3,i=e.G.filter(function(r){return r=Nt(r.attributes.ttl),!r||t+r>n}).map(rn).filter(cr);return i.length?Mt(e.B,i):[]}function W0(){return""}function GI(e,t,n){return function(){return e&&t?ks(e,"BaseURL"):n.slice()}}Y("shaka.dash.DashParser",Cs),_r("application/dash+xml",function(){return new Cs}),_r("video/vnd.mpeg.dash.mpd",function(){return new Cs});function Wl(){}Y("shaka.dependencies",Wl),Wl.has=function(e){return ch.has(e)},Wl.add=function(e,t){if(!Y0[e])throw Error(e+" is not supported");e==X0?Ce("mux.js","mux.js is no longer used in Shaka Player."):ch.set(e,function(){return t})};var X0="muxjs",Y0={Hm:X0,ISOBoxer:"ISOBoxer"};Wl.Allowed=Y0;var ch=new Map([["ISOBoxer",function(){return P.ISOBoxer}]]);function Fe(){this.j=new at(function(){return["Oculus","Quest"].some(function(e){return navigator.userAgent.includes(e.toLowerCase())})?"VR":navigator.userAgent.match(/Smart( ?|_)TV/i)||navigator.userAgent.match(/Android ?TV/i)?"TV":navigator.userAgentData?navigator.userAgentData.mobile?"MOBILE":"DESKTOP":/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?"MOBILE":navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android"?"MOBILE":"DESKTOP":navigator.userAgent.includes("Android")?"MOBILE":"DESKTOP"}),this.l=new at(function(){return navigator.vendor.includes("Apple")&&(navigator.userAgent.includes("Version/")||navigator.userAgent.includes("OS/"))?"WEBKIT":navigator.userAgent.includes("Edge/")?"EDGE":navigator.userAgent.includes("Chrome/")?"CHROMIUM":navigator.userAgent.includes("Firefox/")?"GECKO":"UNKNOWN"})}function Ai(){var e=P.ManagedMediaSource||P.MediaSource;return!!(e&&e.isTypeSupported)}f=Fe.prototype,f.kc=function(){return!!navigator.mediaCapabilities},f.Oa=function(){return this.j.value()},f.Ga=function(){return this.l.value()},f.Gd=function(){return!1},f.jh=function(){return!1},f.jf=function(){return!1},f.Oi=function(){return!1},f.se=function(){return!1},f.fd=function(){return!0},f.Ib=function(){var e=P.ManagedSourceBuffer||P.SourceBuffer;return!!e&&!!e.prototype&&!!e.prototype.changeType},f.we=function(){return!0},f.Ti=function(){return 0},f.nc=function(){return Promise.resolve({width:1/0,height:1/0})},f.aj=function(){return!1},f.yh=function(){return!1},f.Wa=function(e){var t=this.Oa();return(t==="TV"||t==="CONSOLE"||t==="CAST")&&(e.ads.customPlayheadTracker=!0,e.ads.skipPlayDetection=!0,e.ads.supportsMultipleMediaElements=!1),e},f.Dh=function(){return!!P.indexedDB},f.Mi=function(){return[]},f.sd=function(e){return P.matchMedia!==void 0&&P.matchMedia("(color-gamut: p3)").matches?e?"HLG":"PQ":"SDR"},f.hj=function(){return!1},f.Ci=function(){return!1},f.Ff=function(){return!1},f.Of=function(){return!0},f.Di=function(){return!1},f.gj=function(){return!0},f.ed=function(){return!1},f.Wg=function(e){return e==="com.apple.fps"},f.Nf=function(){return!0},f.toString=function(){return"Device: "+this.Nb()+" v"+this.Ba()+"; Type: "+this.Oa()};function dh(){Fe.call(this),this.g=new at(function(){var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}),this.h=new at(function(){return/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1?"xr"in navigator?"APPLE_VR":"MOBILE":"xr"in navigator?"APPLE_VR":"DESKTOP"})}rt(dh,Fe),f=dh.prototype,f.Ba=function(){return this.g.value()},f.Nb=function(){return"Apple Browser"},f.Oa=function(){return this.h.value()},f.Ga=function(){return"WEBKIT"},f.kc=function(){return!1},f.Gd=function(e,t){return t==="audio"},f.jf=function(){return!0},f.Oi=function(e){return e==="audio"},f.Wa=function(e){return Fe.prototype.Wa.call(this,e),e.abr.minTimeToSwitch=.5,e},f.hj=function(){return!0},f.Nf=function(){return!1},(navigator.vendor||"").includes("Apple")&&(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&navigator.userAgentData.platform.toLowerCase()=="macos"||navigator.platform&&navigator.platform.toLowerCase().includes("mac"))&&(ci=function(){return new dh});function fh(){if(!J0())throw Error("Not a Chromecast device!");Fe.call(this),this.h=new at(function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}),this.g=new at(function(){var e=navigator.userAgentData&&navigator.userAgentData.platform||navigator.userAgent;return e=e.toLowerCase(),e.includes("android")?$0:e.includes("fuchsia")?Q0:hh})}rt(fh,Fe),f=fh.prototype,f.Ba=function(){return this.h.value()},f.Nb=function(){return"Chromecast with "+this.g.value()},f.Oa=function(){return"CAST"},f.Ga=function(){return"CHROMIUM"},f.kc=function(){return Fe.prototype.kc.call(this)&&this.g.value()!==hh},f.Ib=function(){return Fe.prototype.Ib.call(this)&&this.g.value()!==hh},f.Ti=function(){switch(this.g.value()){case $0:return 0;case Q0:return 3;default:return 1}},f.nc=function(){var e,t,n,i,r;return R(function(a){switch(a.g){case 1:if(e=P.cast&&cast.__platform__&&cast.__platform__.canDisplayType,t={width:1280,height:720},he(a,2),!(n=e)){a.A(4);break}return T(a,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),5);case 5:n=a.h;case 4:if(n){t.width=3840,t.height=2160,a.A(6);break}if(!(i=e)){a.A(7);break}return T(a,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),8);case 8:i=a.h;case 7:i&&(t.width=1920,t.height=1080);case 6:ye(a,3);break;case 2:r=oe(a),mi("Failed to check canDisplayType:",r);case 3:return a.return(t)}})},f.Wa=function(e){return Fe.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},f.Dh=function(){return!1},f.ed=function(){return!0};function J0(){return navigator.userAgent.includes("CrKey")&&!navigator.userAgent.includes("VIZIO SmartCast")}var $0="Android",Q0="Fuchsia",hh="Linux";J0()&&(ci=function(){return new fh});function ph(){Fe.call(this);var e=this;this.i=new at(function(){var t=navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);return t?parseInt(t[2],10):null}),this.g=new at(function(){return navigator.userAgent.match(/Edge?\//)?"Edge":navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":"Unknown"}),this.h=new at(function(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("win32"):!1}),this.u=new at(function(){return Fe.prototype.Ib.call(e)?navigator.userAgent.match(/Edge?\//)?!e.h.value():!0:!1}),this.o=new at(function(){return navigator.userAgent.includes("sony.hbbtv.tv")}),this.m=new at(function(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android":!!navigator.userAgent.includes("Android")})}rt(ph,Fe),f=ph.prototype,f.Ba=function(){return this.i.value()},f.Nb=function(){return this.g.value()},f.Gd=function(e){return jc(e)?this.g.value()==="Edge"&&this.h.value():!1},f.jh=function(){return this.g.value()==="Edge"&&this.h.value()},f.jf=function(){return this.g.value()==="Edge"&&this.h.value()},f.Ib=function(){return this.u.value()},f.Wa=function(e){if(Fe.prototype.Wa.call(this,e),this.h.value())switch(this.g.value()){case"Firefox":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation"};break;case"Chrome":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation.3000","com.microsoft.playready.recommendation":"com.microsoft.playready.recommendation.3000"}}return this.m.value()&&(e.drm.defaultAudioRobustnessForWidevine="",e.drm.defaultVideoRobustnessForWidevine=""),e},f.Ff=function(){return this.g.value()==="Edge"||this.o.value()},f.ed=function(){if(this.Ga()==="GECKO"){var e=this.Ba();return e!==null?e>=100:Fe.prototype.ed.call(this)}return Fe.prototype.ed.call(this)},f.Wg=function(e){return this.Ga()==="GECKO"?e.startsWith("com.microsoft.playready.recommendation"):Fe.prototype.Wg.call(this,e)},Lc=function(){return new ph};function gh(){Fe.apply(this,arguments)}rt(gh,Fe),f=gh.prototype,f.Ba=function(){return null},f.Nb=function(){return"Hisense"},f.Oa=function(){return"TV"},f.kc=function(){return!1},f.nc=function(){var e={width:1920,height:1080},t=null;if(P.Hisense_Get4KSupportState)try{t=P.Hisense_Get4KSupportState()}catch{}return t==null&&(t=navigator.userAgent.includes("UHD")),t&&(e.width=3840,e.height=2160),Promise.resolve(e)},f.Wa=function(e){return Fe.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},(navigator.userAgent.includes("Hisense")||navigator.userAgent.includes("VIDAA"))&&(ci=function(){return new gh});function mh(){Fe.call(this),this.g=new at(function(){var e=navigator.userAgent.match(/PlayStation (\d+)/);return e?parseInt(e[1],10):null})}rt(mh,Fe),f=mh.prototype,f.Nb=function(){return"PlayStation"},f.Oa=function(){return"CONSOLE"},f.Ga=function(){return"WEBKIT"},f.Ba=function(){return this.g.value()},f.kc=function(){return!1},f.fd=function(){return!1},f.Ib=function(){return!1},f.yh=function(){return this.Ba()===4},f.nc=function(){var e,t,n,i,r;return R(function(a){switch(a.g){case 1:return e={width:1920,height:1080},t=!1,he(a,2),T(a,P.msdk.device.getDisplayInfo(),4);case 4:n=a.h,t=n.resolution==="4K",ye(a,3);break;case 2:return oe(a),he(a,5),T(a,P.msdk.device.getDisplayInfoImmediate(),7);case 7:i=a.h,t=i.resolution==="4K",ye(a,3);break;case 5:r=oe(a),Ee("PlayStation: Failed to get the display info:",r);case 3:return t&&(e.width=3840,e.height=2160),a.return(e)}})},f.Wa=function(e){return Fe.prototype.Wa.call(this,e),this.Ba()===4&&e.drm.preferredKeySystems.push("com.microsoft.playready"),e.streaming.clearDecodingCache=!0,e},f.Ff=function(){return this.Ba()===4},f.Of=function(){return this.Ba()!==4},navigator.userAgent.includes("PlayStation")&&(ci=function(){return new mh});function vh(){Fe.call(this);var e=navigator.userAgent.match(/Tizen (\d+).(\d+)/);this.g=e?parseInt(e[1],10):null,this.h=e?parseInt(e[2],10):null}rt(vh,Fe),f=vh.prototype,f.Ba=function(){return this.g},f.Nb=function(){return"Tizen"},f.Ga=function(){return"CHROMIUM"},f.Oa=function(){return"TV"},f.Gd=function(){return!0},f.se=function(){return this.Ba()===3},f.kc=function(){return!1},f.fd=function(){var e=this.Ba();return e!==null?e>=4:Fe.prototype.fd.call(this)},f.Ib=function(){return!1},f.we=function(){return this.g&&this.h?this.g===5?this.h>=5:this.g>5:Fe.prototype.we.call(this)},f.nc=function(){var e=P.devicePixelRatio;e={width:P.screen.width*e>1920?3840:1920,height:P.screen.height*e>1080?2160:1080};try{if(webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution){var t=webapis.systeminfo.getMaxVideoResolution();e.width=t.width,e.height=t.height}else webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{Ee("Tizen: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},f.Wa=function(e){return Fe.prototype.Wa.call(this,e),e.drm.ignoreDuplicateInitData=this.Ba()!==2,this.Ba()===3&&(e.streaming.crossBoundaryStrategy="reset_to_encrypted"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e.streaming.gapPadding=2,e},f.Mi=function(){var e=[];return this.g!==null&&this.g<5&&e.push("opus"),e},f.sd=function(e){try{if(webapis.avinfo.isHdrTvSupport())return e?"HLG":"PQ"}catch{return Fe.prototype.sd.call(this,e)}return"SDR"},f.Ci=function(){return!0},f.Di=function(){return this.Ba()===3},navigator.userAgent.includes("Tizen")&&(ci=function(){return new vh});function no(){Fe.apply(this,arguments)}rt(no,Fe),no.prototype.Ba=function(){return null},no.prototype.Nb=function(){return"Vizio"},no.prototype.Oa=function(){return"TV"},no.prototype.kc=function(){return!1},navigator.userAgent.includes("VIZIO SmartCast")&&(ci=function(){return new no});function yh(){Fe.call(this),this.i=new at(function(){return navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")}),this.h=new at(function(){return navigator.userAgent.includes("SOPOpenBrowser")}),this.g=new at(function(){if(navigator.userAgent.includes("DT_STB_BCM"))return 11;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null})}rt(yh,Fe),f=yh.prototype,f.Ba=function(){return this.g.value()},f.Nb=function(){return"WebKit STB"},f.Oa=function(){return"TV"},f.Ga=function(){return"WEBKIT"},f.kc=function(){return!1},f.fd=function(){var e=this.g.value();return e!==null?e>=15:!0},f.Gd=function(){return this.h.value()},f.nc=function(){return Promise.resolve({width:P.screen.width*P.devicePixelRatio,height:P.screen.height*P.devicePixelRatio})},f.Of=function(){return!this.i.value()},f.Nf=function(){return!1},(navigator.userAgent.includes("SOPOpenBrowser")||navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")||!(!(navigator.vendor||"").includes("Apple")||/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&navigator.userAgentData.platform.toLowerCase()=="macos"||navigator.platform&&navigator.platform.toLowerCase().includes("mac")))&&(ci=function(){return new yh});function bh(){Fe.call(this);var e=this;this.h=qI(),this.g=null;try{var t=new PalmServiceBridge;t.onservicecallback=function(n){n=JSON.parse(n),e.g=n.configs["tv.model.supportHDR"]||n.configs["tv.config.supportDolbyHDRContents"]||!1},t.call("luna://com.webos.service.config/getConfigs",JSON.stringify({configNames:["tv.model.supportHDR","tv.config.supportDolbyHDRContents"]}))}catch(n){Ee("WebOS: getConfigs call failed",n)}}rt(bh,Fe),f=bh.prototype,f.Ba=function(){return this.h},f.Nb=function(){return"WebOS"},f.Oa=function(){return"TV"},f.Ga=function(){return"CHROMIUM"},f.kc=function(){return!1},f.fd=function(){var e=this.Ba();return e!==null?e>3:Fe.prototype.fd.call(this)},f.Ib=function(){return!1},f.we=function(){var e=this.Ba();return e!==null?e>3:Fe.prototype.we.call(this)},f.nc=function(){var e={width:1920,height:1080};try{var t=JSON.parse(P.PalmSystem.deviceInfo);e.width=Math.max(1920,t.screenWidth),e.height=Math.max(1080,t.screenHeight)}catch{Ee("WebOS: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},f.Wa=function(e){return Fe.prototype.Wa.call(this,e),this.Ba()===3&&(e.streaming.crossBoundaryStrategy="reset"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e},f.sd=function(e){return this.g==null?(Ee("WebOS: getConfigs call haven't finished"),Fe.prototype.sd.call(this,e)):this.g?e?"HLG":"PQ":"SDR"};function qI(){var e=null,t=navigator.userAgent.match(/Chrome\/(\d+)/);switch(t&&(e=parseInt(t[1],10)),e){case 38:return 3;case 53:return 4;case 68:return 5;case 79:return 6;case 87:return 22;case 94:return 23;case 108:return 24;case 120:return 25;default:return null}}if(f.gj=function(){return!1},f.ed=function(){var e=this.Ba();return e!==null?e>=6:Fe.prototype.ed.call(this)},navigator.userAgent.includes("Web0S")){var KI=new bh;ci=function(){return KI}}function wh(){Fe.call(this),this.g=navigator.userAgent.includes("Edge/");var e=navigator.userAgent.match(/Edge?\/(\d+)/);this.h=e?parseInt(e[1],10):null}rt(wh,Fe),f=wh.prototype,f.Ba=function(){return this.h},f.Nb=function(){return"Xbox"},f.Oa=function(){return"CONSOLE"},f.Ga=function(){return this.g?"EDGE":"CHROMIUM"},f.Gd=function(){return!0},f.jh=function(){return!0},f.jf=function(){return!0},f.aj=function(){return this.g},f.nc=function(){var e={width:1920,height:1080},t=Z0();if(t)try{var n=new t.Media.Protection.ProtectionCapabilities,i=t.Media.Protection.ProtectionCapabilityResult;t=null;do t=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(t===i.maybe);t===i.probably&&(e.width=3840,e.height=2160)}catch{Ee("Xbox: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},f.Wa=function(e){return Fe.prototype.Wa.call(this,e),e.drm.parseInbandPsshEnabled=this.g,e.drm.preferredKeySystems.push("com.microsoft.playready"),this.g&&(e.streaming.gapPadding=.01),e},f.Ff=function(){return!0},f.Dh=function(){return!1};function Z0(){var e=null;try{e=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows}catch{}return e}(navigator.userAgent.includes("Xbox One")||Z0()!==null)&&(ci=function(){return new wh});function eb(e,t,n){this.type=e,this.ea=t,this.segments=n||null}function Xl(e,t,n,i){this.id=e,this.name=t,this.attributes=n,this.value=i===void 0?null:i}Xl.prototype.toString=function(e){function t(r){return r.name+"="+(isNaN(Number(r.value))?'"'+r.value+'"':r.value)}var n="#"+this.name,i=this.attributes?this.attributes.filter(function(r){return e?!e.has(r.name):!0}).map(t):[];return this.value&&i.unshift(this.value),i.length>0&&(n+=":"+i.join(",")),n};function Sh(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function io(e,t){return e.attributes.find(function(n){return n.name===t})||null}function ee(e,t,n){return(e=io(e,t))?e.value:n||null}function ze(e,t){if(e=io(e,t),!e)throw new D(2,4,4023,t);return e.value}function tb(e,t,n){n=n===void 0?[]:n,this.ea=t,this.g=e,this.xc=n}function Yl(e,t){this.name=e,this.value=t}function qn(e,t){return e.filter(function(n){return n.name==t})}function nb(e,t){return e.filter(function(n){return ze(n,"TYPE")==t})}function Ct(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function ro(e,t,n){return n=n===void 0?0:n,(e=Ct(e,t))?Number(e.value):n}function Er(e,t,n){return t?ib(e,[t],n):[]}function ib(e,t,n){if(!t.length)return[];var i=t;return n&&n.size&&(i=t.map(function(r){return rb(r,n)})),Mt(e,i)}function rb(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=m(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.slice(2,i.length-1),a=t.get(r);if(a)e=e.replace(i,a);else throw new D(2,4,4039,r)}}return e}function zI(){this.g=0}function Th(e,t){t=ot(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!XI.test(n[0]))throw new D(2,4,4015);t=0;for(var i=!1,r=[],a=!0,o=0;o<n.length;o++){var s=n[o],u=n[o+1];if(s.startsWith("#")&&!s.startsWith("#EXT")||a)a=!1;else{if(s=ab(e,s),i||(sb.has(s.name)?(t=1,i=!0):s.name=="EXT-X-STREAM-INF"||s.name=="EXT-X-MEDIA"?i=!0:ub.has(s.name)&&(t=1,i=!0)),ub.has(s.name)){if(t!=1)throw new D(2,4,4017);a=e,e=Array(Math.max(100,Math.floor((n.length-o)/2))),i=0,s=[];var l=[];for(u=null;o<n.length;o++){var c=n[o];c.startsWith("#EXT")?(c=ab(a,c),sb.has(c.name)?r.push(c):c.name=="EXT-X-MAP"?u=c:c.name=="EXT-X-PART"?l.push(c):c.name=="EXT-X-PRELOAD-HINT"?ee(c,"TYPE")=="PART"?l.push(c):ee(c,"TYPE")=="MAP"&&(c.name="EXT-X-MAP",u=c):s.push(c)):(!c.startsWith("#")||c.startsWith("#EXT"))&&(c=c.trim(),u&&s.push(u),s=new tb(c,s,l),i<e.length?e[i++]=s:(e.push(s),i++),s=[],l=[])}return l.length&&(u&&s.push(u),n=new tb("",s,l),i<e.length?e[i++]=n:(e.push(n),i++)),new eb(t,r,i<e.length?e.slice(0,i):e)}r.push(s),s.name=="EXT-X-STREAM-INF"&&(s.attributes.push(new Yl("URI",u)),a=!0)}}return new eb(t,r)}function ab(e,t){e=e.g++;var n=t.match(WI);if(!n)throw new D(2,4,4016,t);t=n[1];var i=n[2];n=[];var r;if(i){i=new ga(i);var a;for(ob.lastIndex=0,(a=ar(i,ob))&&(r=a[1]),xh.lastIndex=0,a=ar(i,xh);a;)n.push(new Yl(a[1],a[2]||a[3])),ma(i),a=ar(i,xh)}return new Xl(e,t,n,r)}var WI=/^#(EXT[^:]*)(?::(.*))?$/,XI=/^#EXTM3U($|[ \t\n])/m,ob=/^([^,=]+)(?:,|$)/g,xh=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g,sb=new Set("EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" ")),ub=new Set("EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" "));function lb(){}function cb(e,t){try{var n=Jl(e);return xa({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType},originalRequest:t})}catch(i){return dr(i)}}function Jl(e){var t=e.split(":");if(t.length<2||t[0]!="data")throw new D(2,1,1004,e);if(t=t.slice(1).join(":").split(","),t.length<2)throw new D(2,1,1004,e);var n=t[0];e=P.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var i=!1;t.length>1&&t[t.length-1]=="base64"&&(i=!0,t.pop());var r;return i?r=jn(e):r=Zn(e),{data:r,contentType:n,Jh:t}}Y("shaka.net.DataUriPlugin",lb),lb.parse=cb,Bi("data",cb);function $l(){var e=this;this.g=this.h=null,this.F=1,this.G=new Map,this.K=new Map,this.B=new Map,this.B.set("video",new Map),this.B.set("audio",new Map),this.B.set(xe,new Map),this.B.set("image",new Map),this.ec=new Map().set("com.apple.streamingkeydelivery",function(t,n,i){return TE(e,t,n,i)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(t){return xE(e,t)}).set("com.microsoft.playready",function(t){var n=ze(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var i="cenc";n=="SAMPLE-AES"&&(i="cbcs"),t=ze(t,"URI"),n=Jl(t.split("?")[0]),t=pe(n.data);var r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);r=Iu(t,r,new Set,0),i=Di("com.microsoft.playready",i,[{initDataType:"cenc",initData:r}],void 0,n.Jh),(t=Fr(["<PLAYREADY>",Pi(t),"</PLAYREADY>"].join(`
`)))&&(i.licenseServerUri=Bl(t)),i=Promise.resolve(i)}else i=Promise.resolve(null);return i}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(t){return AE(e,t)}),this.ab=new Set,this.i=new Map,this.m=null,this.H="",this.Ja=new zI,this.M=-1,this.aa=1/0,this.X=this.Ac=this.Ua=!1,this.C=new Ae(function(){if(e.T&&!e.g.continueLoadingWhenPaused&&(e.R.Ma(e.T,"timeupdate"),e.T.paused)){e.R.ya(e.T,"timeupdate",function(){return Rb(e)});return}Rb(e)}),this.oa=rc,this.l=null,this.Ta=0,this.u=1/0,this.Ea=this.wa=this.O=0,this.V=new Aa,this.I=new Map,this.J=new Map,this.zc=new Map,this.yb=new Map,this.Aa=new Map,this.cc=new Map,this.ma=new Map,this.fc=this.ha=!1,this.ib=new ua(5),this.j=null,this.N=!0,this.R=new _e,this.o=this.T=null,this.sb=function(){return!1},this.za=new Map}f=$l.prototype,f.configure=function(e,t){var n=this.h&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.sb=t),this.j&&this.j.configure(this.g),n&&this.l&&this.l.presentationTimeline.W()&&this.C.Jb()},f.start=function(e,t){var n=this,i;return R(function(r){return r.g==1?(n.h=t,n.ha=t.isLowLatencyMode(),T(r,Ph(n,[e]).promise,2)):r.g!=3?(i=r.h,n.H=i.uri,T(r,$I(n,i.data),3)):r.return(n.l)})},f.stop=function(){this.C&&(this.C.stop(),this.C=null);var e=[];return this.V&&(e.push(this.V.destroy()),this.V=null),this.g=this.h=null,this.ab.clear(),this.l=null,this.i.clear(),this.K.clear(),this.J.clear(),this.G.clear(),this.zc.clear(),this.yb.clear(),this.Aa.clear(),this.cc.clear(),this.ma.clear(),this.za.clear(),this.j&&this.j.destroy(),this.R&&(this.R.release(),this.R=null),Promise.all(e)},f.update=function(){var e=this,t,n,i,r,a,o,s,u,l,c;return R(function(d){if(d.g==1){if(!en(e))return d.return();for(t=[],n=Array.from(e.i.values()),e.u=1/0,e.l.gapCount=0,i=n.filter(function(h){return!h.stream.isAudioMuxedInVideo&&h.stream.segmentIndex}),r=m(i),a=r.next();!a.done;a=r.next())o=a.value,t.push(YI(e,o));return T(d,Promise.all(t),2)}for(yb(e,i.map(function(h){return h.stream})),s=i.some(function(h){return h.ce==0}),i.length&&!s&&(tc(e,rc),Ql(e)),s&&Ql(e),u=m(i),l=u.next();!l.done;l=u.next())c=l.value,c.stream.isAudioMuxedInVideo||!c.stream.segmentIndex||hi(c.stream.segmentIndex)||e.h.disableStream(c.stream);X(d)})};function Ah(e,t){return en(e)?e.B.get(t.type):t.rf}function YI(e,t){var n,i,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M,N,I,C,E,O,L,_,j,G,H,B,F,K,W,me,ne,He;return R(function(ve){switch(ve.g){case 1:if(t.stream.isAudioMuxedInVideo)return ve.return();for(n=[],i=m(t.P()),r=i.next();!r.done;r=i.next())a=r.value,o=new ht(a),s=o.g,t.Ue&&(t.Qb>=0&&s.add("_HLS_msn",String(t.Qb)),t.Rb>=0&&s.add("_HLS_part",String(t.Rb))),t.Ve&&s.add("_HLS_skip","YES"),Cp(s)&&Lr(o,la(s.toString())),n.push(o.toString());return he(ve,2),T(ve,Ph(e,n,!0).promise,4);case 4:u=ve.h,ye(ve,3);break;case 2:throw l=oe(ve),e.h&&e.h.disableStream(t.stream),l;case 3:if(!t.stream.segmentIndex)return ve.return();if(c=Th(e.Ja,u.data),c.type!=1)throw new D(2,4,4017);return d=u.uri,d==u.originalUri||t.P().includes(d)||t.Df.push(d),h=qn(c.ea,"EXT-X-DEFINE"),p=kh(e,h,d),g=t.stream,y=Ah(e,t),T(ve,Tb(e,c,g.mimeType,t.P,p),5);case 5:for(b=ve.h,A=b.keyIds,x=b.drmInfos,k=b.encrypted,M=b.Rh,g.encrypted||!k||M||(g.encrypted=!0),N=function(et,Ne){return et.size===Ne.size&&[].concat(z(et)).every(function(we){return Ne.has(we)})},N(g.keyIds,A)||(g.keyIds=A,g.drmInfos=x,e.h.newDrmInfo(g)),I=Mb(e,c,y,p,t.P,t.type),C=I.segments,(E=I.bandwidth)&&(g.bandwidth=E),O=Hu(g),L=m(C),_=L.next();!_.done;_=L.next())j=_.value,j.ba&&(j.ba.yd=O);g.segmentIndex.ke(C,e.m.Hb()),C.length&&(G=ro(c.ea,"EXT-X-MEDIA-SEQUENCE",0),B=(H=Ct(c.ea,"EXT-X-SKIP"))?Number(ee(H,"SKIPPED-SEGMENTS")):0,F=wb(G,C),K=F.Qb,W=F.Rb,t.Qb=K+B,t.Rb=W,me=y.get(G),g.segmentIndex.Ya(me)),(ne=hi(g.segmentIndex))&&(t.Wc=ne.startTime,He=C[C.length-1],t.Mc=He.endTime),Ct(c.ea,"EXT-X-ENDLIST")&&(t.ce=!0),Eh(e,c),Mh(e,c.ea,g.type,p,t.P),X(ve)}})}f.onExpirationUpdated=function(){},f.onInitialVariantChosen=function(){},f.banLocation=function(e){this.j&&this.j.banLocation(e)},f.setMediaElement=function(e){this.T=e};function db(e,t,n){n=n===void 0?!1:n;for(var i=e.M==-1,r=m(t),a=r.next();!a.done;a=r.next()){a=a.value;var o=a.stream.segmentIndex,s=Ah(e,a);if(o=hi(o)){s=m(s);for(var u=s.next();!u.done;u=s.next()){u=m(u.value);var l=u.next().value;if(u.next().value==o.startTime){i&&(e.M=Math.max(e.M,l)),a.sg=l;break}}}}if(!(e.M<0))for(t=m(t),i=t.next();!i.done;i=t.next())i=i.value,(Ps(e,i.type)||n)&&(r=i.stream.segmentIndex)&&(a=e.M-i.sg,a>0&&(r.g.splice(0,a),r=hi(r))&&(r=-r.startTime,i.stream.segmentIndex.offset(r),fb(e,i,r)))}function JI(e,t){if(e.aa==1/0){t=m(t);for(var n=t.next();!n.done;n=t.next())n=hi(n.value.stream.segmentIndex),n!=null&&n.h!=null&&(e.aa=Math.min(e.aa,n.h))}if(t=e.aa,t!=1/0){n=m(e.i.values());for(var i=n.next();!i.done;i=n.next())if(i=i.value,!Ps(e,i.type)){var r=i.stream.segmentIndex;if(r!=null){var a=hi(r);if(a)if(a.h==null)mi("Missing EXT-X-PROGRAM-DATE-TIME for stream",i.P(),"Expect AV sync issues!");else for(fb(e,i,a.h-t-a.startTime),i=m(r),r=i.next();!r.done;r=i.next())r.value.Eh(t)}}}}function fb(e,t,n){if(!(Math.abs(n)<.001)){t.Wc+=n,t.Mc+=n,e=Ah(e,t);for(var i=m(e),r=i.next();!r.done;r=i.next()){var a=m(r.value);r=a.next().value,a=a.next().value,e.set(r,a+n)}t.P()}}function $I(e,t){var n,i,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M,N,I,C,E,O,L,_,j,G,H,B,F,K,W,me,ne,He,ve,et,Ne,we,Pe,kt,Ye;return R(function(De){switch(De.g){case 1:return n=vt,i=Th(e.Ja,t),r=qn(i.ea,"EXT-X-DEFINE"),a=[],o=[],s=[],e.m=new fe(null,0),e.m.cd(!0),u=function(){return[e.H]},l=null,c=new Map,e.l={presentationTimeline:e.m,variants:a,textStreams:o,imageStreams:s,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.o},i.type==1?(e.N=!1,K=qn(i.ea,"EXT-X-DEFINE"),c=kh(e,K,e.H),l=n.va,W="",me=new Map,T(De,bb(e,e.F++,c,i,u,"",l,W,!0,"Media Playlist",null,me,null,!1,null,!1),7)):(ZI(e,r),d=qn(i.ea,"EXT-X-MEDIA"),h=qn(i.ea,"EXT-X-STREAM-INF"),p=qn(i.ea,"EXT-X-IMAGE-STREAM-INF"),g=qn(i.ea,"EXT-X-I-FRAME-STREAM-INF"),y=qn(i.ea,"EXT-X-SESSION-KEY"),b=qn(i.ea,"EXT-X-SESSION-DATA"),A=qn(i.ea,"EXT-X-CONTENT-STEERING"),tE(e,b),T(De,nE(e,A),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(x=[],k=m(h),M=k.next(),N={};!M.done;N={ej:void 0},M=k.next())I=M.value,(C=ee(I,"SUPPLEMENTAL-CODECS"))&&(N.ej=C.split(/\s*,\s*/).map(function(je){return je.split("/")[0]}),E=I.attributes.map(function(je){return function(Ut){var Bt=Ut.name,Zi=Ut.value;return Bt=="CODECS"&&(Zi=je.ej.join(","),Ut=Ut.value.split(","),Ut.length>1&&(Ut=cn("audio",Ut))&&(Zi+=","+Ut)),new Yl(Bt,Zi)}}(N)),x.push(new Xl(I.id,I.name,E,null)));for(h.push.apply(h,z(x)),O=[],L=m(g),_=L.next(),j={};!_.done;j={fj:void 0},_=L.next())G=_.value,(H=ee(G,"SUPPLEMENTAL-CODECS"))&&(j.fj=H.split(/\s*,\s*/).map(function(je){return je.split("/")[0]}),B=G.attributes.map(function(je){return function(Ut){var Bt=Ut.name;return Ut=Ut.value,Bt=="CODECS"&&(Ut=je.fj.join(",")),new Yl(Bt,Ut)}}(j)),O.push(new Xl(G.id,G.name,B,null)));g.push.apply(g,z(O))}return eE(e,h),pE(e,d),F=oE(e,g),T(De,sE(e,h,y,d,u,e.G,F),5);case 5:return a=De.h,o=iE(e,d),T(De,rE(e,p,g),6);case 6:s=De.h,De.A(3);break;case 7:ne=De.h,e.i.set(e.H,ne),ne.stream&&(He=Hu(ne.stream),ne.stream.segmentIndex.Fb(function(je){je.ba&&(je.ba.yd=He)})),l=ne.stream.type,ve=!0,(e.g.disableAudio&&ne.type=="audio"||e.g.disableVideo&&ne.type=="video"&&!ne.stream.codecs.includes(","))&&(ve=!1),ve&&a.push({id:0,language:Ue(W||"und"),disabledUntilTime:0,primary:!0,audio:ne.type=="audio"?ne.stream:null,video:ne.type=="video"?ne.stream:null,bandwidth:ne.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new D(2,7,7001);if(Ab(e,i),i.type==1&&(en(e)&&(kb(e,i),et=e.u,e.C.ka(et)),Ne=Array.from(e.i.values()),Ih(e,Ne),Ql(e),Mh(e,i.ea,l,c,u)),e.l.variants=a,e.l.textStreams=o,e.l.imageStreams=s,e.l.startTime=e.o,e.X||!e.g.hls.disableCodecGuessing){De.A(8);break}for(we=[],Pe=m(e.l.variants),kt=Pe.next();!kt.done;kt=Pe.next())Ye=kt.value,Ye.audio&&Ye.audio.codecs===""&&we.push(Ye.audio.createSegmentIndex()),Ye.video&&Ye.video.codecs===""&&we.push(Ye.video.createSegmentIndex());return T(De,Promise.all(we),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.l),X(De)}})}function QI(e,t){var n,i,r,a,o,s,u,l,c,d,h,p,g,y,b,A;return R(function(x){if(x.g==1)return n=Vd(e.g.hls.mediaPlaylistFullMimeType),t.length?(i=Cb(e,t),r=i.segment,a=i.segmentIndex,o=r.P(),(s=Ua(o[0]))&&(u=Rh.get(s))?x.return(Vd(u)):T(x,Promise.all([hb(e,r.ba,0),hb(e,r,a)]),2)):x.return(n);if(l=x.h,c=l[1].mimeType,d=l[0].data,h=l[1].data,p="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),g=["audio/mp4","video/mp4","video/iso.segment"],y=r.ba||g.includes(c),!y&&Da(pe(h))){var k=h,M=e.g.disableAudio,N=e.g.disableVideo,I=e.g.disableText,C=pe(k),E=new $e().parse(C),O=E.Zd();C=E.Ng();var L=[],_=!1,j=!1;if(!M)switch(O.audio){case"aac":case"aac-loas":E.rb().length&&(L.push("mp4a.40.2"),_=!0);break;case"mp3":E.rb().length&&(L.push("mp4a.40.34"),_=!0);break;case"ac3":E.rb().length&&(L.push("ac-3"),_=!0);break;case"ec3":E.rb().length&&(L.push("ec-3"),_=!0);break;case"opus":E.rb().length&&(L.push("opus"),_=!0)}if(!N)switch(O.video){case"avc":C.codec?L.push(C.codec):L.push("avc1.42E01E"),j=!0;break;case"hvc":C.codec?L.push(C.codec):L.push("hvc1.1.6.L93.90"),j=!0;break;case"av1":L.push("av01.0.01M.08"),j=!0}if(L.length){if(M=_&&!j,N=new Map,j&&!I){for(I=new di("video/mp2t"),I.Af(k),k=m(I.Zf()),j=k.next();!j.done;j=k.next())j=j.value,N.set(j,j);I.Qd()}C={type:M?"audio":"video",mimeType:"video/mp2t",codecs:L.join(", "),language:null,height:C.height,width:C.width,channelCount:null,sampleRate:null,closedCaptions:N,ze:null,colorGamut:null,frameRate:C.frameRate,timescale:null}}else C=null;if(b=C)return x.return(b)}else if((y||p.includes(s))&&(A=ix(d,h,e.g.disableText)))return x.return(A);return c?x.return(Vd(c)):x.return(n)})}function hb(e,t,n){var i,r,a,o,s,u;return R(function(l){switch(l.g){case 1:return t?(i=Bn,r=Qo(t.P(),t.Kc(),t.Ic(),e.g.retryParameters),a=t instanceof se?1:0,T(l,Qi(e,r,i,{type:a}).promise,2)):l.return({mimeType:null,data:null});case 2:if(o=l.h,s=o.data,!t.aesKey){l.A(3);break}return T(l,Gd(s,t.aesKey,n),4);case 4:s=l.h;case 3:return t instanceof se?t.ue(s,!0):t.ue(s),(u=o.headers["content-type"])&&(u=u.split(";")[0].toLowerCase()),l.return({mimeType:u,data:s})}})}function Ql(e){if(en(e)){if(e.oa==Dh){for(var t=1/0,n=1/0,i=m(e.i.values()),r=i.next();!r.done;r=i.next())r=r.value,r.stream.segmentIndex&&r.stream.type!="text"&&!r.stream.isAudioMuxedInVideo&&(t=Math.min(t,r.Mc),n=Math.min(n,r.Wc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.m.Lf(t)}}else e.m.Ab(vb(e));if(!e.m.o)for(t=m(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=hi(n.stream.segmentIndex))&&n.h&&e.m.uh(n.h);e.m.qf()}function ZI(e,t){var n=new ht(e.H).g;t=m(t);for(var i=t.next();!i.done;i=t.next()){var r=i.value;i=ee(r,"NAME");var a=ee(r,"VALUE");r=ee(r,"QUERYPARAM"),i&&a&&e.G.getOrInsert(i,a),r&&(i=n.get(r)[0])&&!e.G.has(i)&&e.G.set(r,i)}}function kh(e,t,n){n=new ht(n).g;var i=new Map;t=m(t);for(var r=t.next();!r.done;r=t.next()){var a=r.value,o=ee(a,"NAME"),s=ee(a,"VALUE");r=ee(a,"QUERYPARAM"),a=ee(a,"IMPORT"),o&&s&&i.getOrInsert(o,s),r&&(o=n.get(r)[0])&&!i.has(o)&&i.set(r,o),a&&(r=e.G.get(a))&&i.set(a,r)}return i}function eE(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=ee(i,"AUDIO");n=ee(i,"VIDEO");var a=ee(i,"SUBTITLES");if(i=pb(e,i),a){var o=cn(xe,i);e.J.set(a,o),Qn(i,o)}r&&(a=cn("audio",i),a||(a=e.g.hls.defaultAudioCodec),e.J.set(r,a)),n&&(r=cn("video",i),r||(r=e.g.hls.defaultVideoCodec),e.J.set(n,r))}}function tE(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=ee(i,"DATA-ID");n=ee(i,"URI");var a=ee(i,"LANGUAGE");i=ee(i,"VALUE"),r=new Map().set("id",r),n&&r.set("uri",Er([e.H],n,e.G)[0]),a&&r.set("language",a),i&&r.set("value",i),n=new Z("sessiondata",r),e.h&&e.h.onEvent(n)}}function nE(e,t){var n,i,r,a,o,s;return R(function(u){if(!e.h||!e.g)return u.return();for(i=m(t),r=i.next();!r.done;r=i.next())if(a=r.value,o=ee(a,"PATHWAY-ID"),s=ee(a,"SERVER-URI"),o&&s){e.j=new Za(e.h),e.j.configure(e.g),e.j.i=[e.H],e.j.setManifestType("HLS"),e.j.h=o,n=As(e.j,s);break}return T(u,n,0)})}function iE(e,t){var n=nb(t,"SUBTITLES"),i={};t=m(n);for(var r=t.next();!r.done;r=t.next()){r=r.value;var a=Sh(r,!e.j);i[a]?i[a].push(r):i[a]=[r]}if(t=[],!e.g.disableText)for(var o in i)try{t.push(gb(e,i[o],new Map).stream)}catch(s){if(!e.g.hls.ignoreTextStreamFailures)throw s}for(o=m(n),n=o.next();!n.done;n=o.next())if(i=ze(n.value,"GROUP-ID"),(n=e.J.get(i))&&(i=e.K.get(i)))for(i=m(i),r=i.next();!r.done;r=i.next())r=r.value,r.stream.codecs=n,r.stream.mimeType=Ch(xe,n)||ec(xe),ao(r.stream);return t.filter(function(s){return s})}function ao(e){var t=new Set([dt(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Fb(function(n){n.mimeType&&t.add(dt(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function rE(e,t,n){var i,r;return R(function(a){return a.g==1?(i=t.map(function(o){var s,u;return R(function(l){if(l.g==1)return e.g.disableThumbnails?l.return(null):(he(l,2),T(l,gE(e,o),4));if(l.g!=2)return s=l.h,l.return(s.stream);if(u=oe(l),e.g.hls.ignoreImageStreamFailures)return l.return(null);throw u})}).concat(n.map(function(o){if(e.g.disableThumbnails)return null;try{var s=mb(e,o);return s.stream.type!=="image"?null:s.stream}catch(u){if(e.g.hls.ignoreImageStreamFailures)return null;throw u}})),T(a,Promise.all(i),2)):(r=a.h,a.return(r.filter(function(o){return o})))})}function aE(e,t,n){t=t.filter(function(s){var u=ee(s,"URI")||"";return s=ee(s,"TYPE"),s!="SUBTITLES"&&(u!=""||s=="AUDIO")});var i={};t=m(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;var a=Sh(r,!e.j);i[a]?i[a].push(r):i[a]=[r]}for(var o in i)gb(e,i[o],n,!1)}function oE(e,t){return t.map(function(n){return n=mb(e,n),n.stream.type!=="video"?null:n.stream}).filter(function(n){return n})}function sE(e,t,n,i,r,a,o){var s,u,l,c,d,h,p,g,y,b,A,x,k,M,N,I,C,E,O,L,_,j,G,H,B,F,K,W,me,ne,He,ve,et,Ne;return R(function(we){switch(we.g){case 1:if(s=[],u=new Set,e.g.ignoreDrmInfo||!(n.length>0)){we.A(2);break}l=m(n),c=l.next(),d={};case 3:if(c.done){we.A(2);break}if(h=c.value,p=ze(h,"METHOD"),g=ee(h,"KEYFORMAT")||"identity",y=null,p=="NONE"){we.A(4);break}if(nc(p)){d.Ug=Er(r(),ze(h,"URI"),a),b=d.Ug.sort().join(""),e.Aa.getOrInsertComputed(b,function(Pe){return function(){return Qi(e,yt(Pe.Ug,e.g.retryParameters),6).promise}}(d)),we.A(4);break}if(g=="identity")return T(we,Db(e,h,"",r,null,a),12);if(A=e.ec.get(g),!A){x=null,we.A(10);break}return T(we,A(h,"",null),11);case 11:x=we.h;case 10:y=x,we.A(6);break;case 12:y=we.h;case 6:if(y){if(y.keyIds)for(k=m(y.keyIds),M=k.next();!M.done;M=k.next())N=M.value,u.add(N);s.push(y)}case 4:d={Ug:void 0},c=l.next(),we.A(3);break;case 2:for(I={},C=m(t),E=C.next();!E.done;E=C.next())O=E.value,L=Sh(O,!e.j),I[L]?I[L].push(O):I[L]=[O];_=[];for(j in I)G=I[j],H=G[0],B=ee(H,"FRAME-RATE"),F=Number(ze(H,"BANDWIDTH"))||Number(ee(H,"AVERAGE-BANDWIDTH")),K=ee(H,"RESOLUTION"),W=m(K?K.split("x"):[null,null]),me=W.next().value,ne=W.next().value,He=ee(H,"VIDEO-RANGE"),(ve=ee(H,"REQ-VIDEO-LAYOUT"))&&ve.includes(",")&&(et=ve.split(",").filter(function(Pe){return Pe=="CH-STEREO"||Pe=="CH-MONO"}),ve=et[0]),ve=ve||"CH-MONO",Ne=uE(e,G,i),_.push.apply(_,z(hE(e,Ne.audio,Ne.video,F,me,ne,B,He,ve,s,u,o)));return we.return(_.filter(function(Pe){return Pe!=null}))}})}function uE(e,t,n){for(var i={audio:[],video:[]},r=new Map,a=[],o=!1,s=!1,u=m(t),l=u.next();!l.done;l=u.next()){var c=l.value;l=ee(c,"AUDIO");var d=ee(c,"VIDEO"),h=l||d;h&&(a.includes(h)||a.push(h),(c=ee(c,"PATHWAY-ID"))&&r.set(h,c),l?o=!0:d&&(s=!0))}a.length&&n.length&&(n=n.filter(function(g){return a.includes(ze(g,"GROUP-ID"))}),aE(e,n,r)),n=(r=a.sort().join(","))&&e.K.has(r)?e.K.get(r):[],o?i.audio.push.apply(i.audio,z(n)):s&&i.video.push.apply(i.video,z(n)),s=!1;var p=t.map(function(g){return ze(g,"URI")});return o=i.audio.find(function(g){return g&&g.P().find(function(y){return p.includes(y)})}),n=pb(e,t[0]),u=cn("video",n),(l=cn("audio",n))&&!u?(o="audio",s=i.audio.length>0&&!i.audio.some(function(g){return g.stream.isAudioMuxedInVideo})):!i.audio.length&&!i.video.length&&l&&u?(o="video",n=[[u,l].join()]):i.audio.length&&o?(o="audio",s=!0):o=i.video.length&&!i.audio.length?"audio":"video",s||(t=mE(e,t,n,o),r&&e.g.enableAudioGroups&&(t.stream.groupId=r),t.stream.type=="audio"&&o==="audio"&&i.audio.some(function(g){return g.stream.isAudioMuxedInVideo})&&(e=i.audio[0].stream,t.stream.language=e.language,t.stream.channelsCount=e.channelsCount,t.stream.label=e.label,t.stream.audioSamplingRate=e.audioSamplingRate,t.stream.originalId=e.originalId,t.stream.originalLanguage=e.originalLanguage),i[t.stream.type]=[t]),i}function pb(e,t){return t=ee(t,"CODECS")||"",e.X=t.length>0,e.X||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),t=t.join(",")),Hd(t.split(/\s*,\s*/))}function lE(e){return(e=ee(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function cE(e){return(e=ee(e,"SAMPLE-RATE"))?parseInt(e,10):null}function dE(e){return e=ee(e,"CHANNELS"),e?(e=e.split("/"),e.length!=2?!1:e[1]==="JOC"||e[1].includes("ATMOS")):!1}function fE(e){return e=ze(e,"TYPE").toLowerCase(),e=="subtitles"&&(e=xe),e}function hE(e,t,n,i,r,a,o,s,u,l,c,d){for(var h=m(n),p=h.next();!p.done;p=h.next())Pb(p.value.stream,r,a,o,s,u,null);for(r=e.g.disableVideo,(!n.length||r)&&(n=[null]),r&&(t=t.filter(function(A){return!A.stream.isAudioMuxedInVideo})),r=e.g.disableAudio,(!t.length||r)&&(t=[null]),r=[],t=m(t),a=t.next();!a.done;a=t.next())for(a=a.value,o=m(n),s=o.next();!s.done;s=o.next()){var g=s.value;(s=a?a.stream:null)&&(s.drmInfos=l,s.keyIds=c),(u=g?g.stream:null)&&(u.drmInfos=l,u.keyIds=c,e.g.disableIFrames||mg(u,d)),u&&!s&&(u.bandwidth=i),!u&&s&&(s.bandwidth=i),h=a?a.stream.drmInfos:null,p=g?g.stream.drmInfos:null,g=g?g.P().sort().join(","):"";var y=a?a.P().sort().join(","):"",b=[];s&&s.codecs&&b.push(s.codecs),u&&u.codecs&&b.push(u.codecs),g=[g,y,b.sort()].join("-"),s&&u&&!Rp(h,p)||e.ab.has(g)||(s={id:e.F++,language:s?s.language:"und",disabledUntilTime:0,primary:!!s&&s.primary||!!u&&u.primary,audio:s,video:u,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},r.push(s),e.ab.add(g))}return r}function pE(e,t){t=nb(t,"CLOSED-CAPTIONS"),e.N=t.length==0,t=m(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=ee(i,"LANGUAGE");n=Ue(r||"und"),r||(r=ee(i,"NAME"))&&(n=r),r=ze(i,"GROUP-ID"),i=ze(i,"INSTREAM-ID").replace("SERVICE","svc"),e.I.get(r)||e.I.set(r,new Map),e.I.get(r).set(i,n)}}function gb(e,t,n,i){i=i===void 0?!0:i;for(var r=[],a=[],o=new Map,s=m(t),u=s.next(),l={};!u.done;l={pi:void 0},u=s.next()){u=u.value,l.pi=++e.F,l=function(y){return function(){return"shaka://hls-muxed"+y.pi}}(l);var c=i?ze(u,"URI"):ee(u,"URI")||l();l=ze(u,"GROUP-ID"),r.push(c),a.push(l),o.set(l,c),(u=ee(u,"PATHWAY-ID"))&&n.set(l,u)}if(i=a.sort().join(","),u=t[0],t="",s=fE(u),s==xe)t=ee(u,"CODECS")||"";else for(a=m(a),l=a.next();!l.done;l=a.next())if(l=l.value,e.J.has(l)){t=e.J.get(l);break}if(a=r.sort().join(","),s=="audio"&&i&&(a+=i),e.i.has(a))return e.i.get(a);if(l=e.F++,e.j)for(o=m(o),c=o.next();!c.done;c=o.next()){var d=m(c.value);c=d.next().value,d=d.next().value,(c=n.get(c))&&eo(e.j,l,c,d)}n=ee(u,"LANGUAGE"),o=ee(u,"NAME"),c=ee(u,"DEFAULT")=="YES",d=s=="audio"?lE(u):null;var h=s=="audio"?dE(u):!1,p=ee(u,"CHARACTERISTICS"),g=ee(u,"FORCED")=="YES";return u=s=="audio"?cE(u):null,r=Zl(e,l,r,t,s,n,c,o,d,null,p,g,u,h),r.stream&&e.g.enableAudioGroups&&(r.stream.groupId=i),e.K.has(i)?e.K.get(i).push(r):e.K.set(i,[r]),e.i.set(a,r),r}function gE(e,t){var n,i,r,a,o,s,u,l,c,d;return R(function(h){return h.g==1?(n=ze(t,"URI"),i=ee(t,"CODECS","jpeg")||"",e.i.has(n)?h.return(e.i.get(n)):(r=ee(t,"LANGUAGE"),a=ee(t,"NAME"),o=ee(t,"CHARACTERISTICS"),s=Zl(e,e.F++,[n],i,"image",r,!1,a,null,null,o,!1,null,!1),(u=ee(t,"RESOLUTION"))?T(h,s.stream.createSegmentIndex(),3):h.A(2))):(h.g!=2&&(l=hi(s.stream.segmentIndex),(c=l.tilesLayout)&&(s.stream.width=Number(u.split("x")[0])*Number(c.split("x")[0]),s.stream.height=Number(u.split("x")[1])*Number(c.split("x")[1])),s.stream.closeSegmentIndex()),(d=ee(t,"BANDWIDTH"))&&(s.stream.bandwidth=Number(d)),e.i.set(n,s),h.return(s))})}function mb(e,t){var n="video",i=ze(t,"URI"),r=ee(t,"CODECS")||"";if(r=="mjpg"&&(n="image"),e.i.has(i))return e.i.get(i);var a=ee(t,"LANGUAGE"),o=ee(t,"NAME"),s=ee(t,"CHARACTERISTICS");return n=Zl(e,e.F++,[i],r,n,a,!1,o,null,null,s,!1,null,!1),r=ee(t,"RESOLUTION"),a=m(r?r.split("x"):[null,null]),r=a.next().value,a=a.next().value,n.stream.width=Number(r)||void 0,n.stream.height=Number(a)||void 0,(t=ee(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(i,n),n}function mE(e,t,n,i){for(var r=e.F++,a=[],o=m(t),s=o.next();!s.done;s=o.next()){var u=s.value;s=ze(u,"URI"),u=ee(u,"PATHWAY-ID"),e.j&&u&&eo(e.j,r,u,s),a.push(s)}if(o=a.sort().join(",")+n.sort().join(","),e.i.has(o))return e.i.get(o);s=a.join(",");e:{if(t=ee(t[0],"CLOSED-CAPTIONS"),i=="video"){if(e.g.disableText){e.N=!1,t=null;break e}if(t){if(t!="NONE"){t=e.I.get(t);break e}e.N=!1}else if(!t&&e.I.size)for(t=m(e.I.keys()),t=t.next();!t.done;t=t.next()){t=e.I.get(t.value);break e}}t=null}return n=ha(i,n),i=Zl(e,r,a,n,i,null,!1,s,null,t,null,!1,null,!1),e.i.set(o,i),i}function Zl(e,t,n,i,r,a,o,s,u,l,c,d,h,p){function g(M){var N,I,C,E,O,L,_,j,G,H,B,F,K,W,me,ne,He,ve,et,Ne;return R(function(we){switch(we.g){case 1:return N=vt,he(we,2),T(we,M.promise,4);case 4:if(I=we.h,M.aborted)return we.return();if(C=I.uri,C!=I.originalUri&&(E=A.P(),E.includes(C)||A.Df.push(C)),O=Th(e.Ja,I.data),O.type!=1)throw new D(2,4,4017);return L=qn(O.ea,"EXT-X-DEFINE"),_=kh(e,L,C),j=!1,(!e.X&&e.g.hls.disableCodecGuessing||e.N&&r==N.va&&!e.g.hls.disableClosedCaptionsDetection)&&O.segments.length>0&&(e.N=!1,j=!0),G=!e.X&&e.g.hls.disableCodecGuessing,H=en(e),T(we,bb(e,0,_,O,y,i,r,a,o,s,u,l,c,d,h,p,void 0,j,G),5);case 5:if(B=we.h,M.aborted)return we.return();F=B.stream,Ab(e,O),en(e)&&!H&&kb(e,O),A.Wc=B.Wc,A.Mc=B.Mc,A.Ve=B.Ve,A.Ue=B.Ue,A.ce=B.ce,A.rf=B.rf,A.Qb=B.Qb,A.Rb=B.Rb,b.segmentIndex=F.segmentIndex,b.encrypted=F.encrypted,b.drmInfos=F.drmInfos,b.keyIds=F.keyIds,b.mimeType=F.mimeType,b.bandwidth=b.bandwidth||F.bandwidth,b.codecs=b.codecs||F.codecs,b.closedCaptions=b.closedCaptions||F.closedCaptions,b.width=b.width||F.width,b.height=b.height||F.height,b.hdr=b.hdr||F.hdr,b.colorGamut=b.colorGamut||F.colorGamut,b.frameRate=b.frameRate||F.frameRate,b.language=="und"&&F.language!="und"&&(b.language=F.language),b.language=b.language||F.language,b.channelsCount=b.channelsCount||F.channelsCount,b.audioSamplingRate=b.audioSamplingRate||F.audioSamplingRate,ao(b),b.drmInfos.length&&e.h.newDrmInfo(b),K=!1,(!l&&b.closedCaptions||l&&b.closedCaptions&&l.size!=b.closedCaptions.size)&&(K=!0),e.l&&K&&e.h.makeTextStreamsForClosedCaptions(e.l),r==N.Na&&(W=hi(F.segmentIndex))&&W.ba&&(b.mimeType="application/mp4",ao(b)),me=Hu(b),b.segmentIndex.Fb(function(Pe){Pe.ba&&(Pe.ba.yd=me)}),vE(e)&&(e.Ac?Ih(e,[A]):(e.Ac=!0,ne=Array.from(e.i.values()),He=ne.filter(function(Pe){return Pe.stream.segmentIndex}),Ih(e,He),Ql(e),ve=e.u,ve>0&&e.C.ka(ve))),Mh(e,O.ea,b.type,_,y),e.l&&(e.l.startTime=e.o),ye(we,0);break;case 2:if(et=oe(we),b.closeSegmentIndex(),et.code===7001)return we.return();if(Ne=e.h.disableStream(b),!Ne)throw et;X(we)}})}function y(){return e.j&&n.length>1?ks(e.j,t):A.Df.concat(ib([e.H],n,e.G))}var b=Sb(e,i,r,a,o,s,u,l,c,d,h,p);n.some(function(M){return M.startsWith("shaka://hls-muxed")})&&(b.isAudioMuxedInVideo=!0,b.mimeType="video/mp2t",ao(b));var A={stream:b,type:r,Df:[],Wc:0,Mc:0,rf:new Map,Ve:!1,Ue:!1,ce:!1,sg:-1,Qb:-1,Rb:-1,P:y},x=null,k;return b.createSegmentIndex=function(){return x||(b.isAudioMuxedInVideo?(b.segmentIndex=new Re([]),Promise.resolve()):(k=Ph(e,A.P(),!0),x=new Promise(function(M){M(g(k))})))},b.closeSegmentIndex=function(){x&&!b.segmentIndex&&k.abort(),b.segmentIndex&&(b.segmentIndex.release(),b.segmentIndex=null),x=null},A}function vb(e){var t=1/0;e=m(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&!n.stream.isAudioMuxedInVideo&&(t=Math.min(t,n.Mc));return t}function yb(e,t){var n=[];t=m(t);for(var i=t.next();!i.done;i=t.next())i=i.value,i.segmentIndex&&i.segmentIndex.Fb(function(r){n.push(r)});e.m.me(n)}function Ih(e,t){if(!en(e))for(var n=vb(e),i=m(t),r=i.next();!r.done;r=i.next())r.value.stream.segmentIndex.pd(0,n);yb(e,t.map(function(a){return a.stream})),i=Array.from(e.i.values()).filter(function(a){return a.stream.segmentIndex}),n=i.some(function(a){return a.stream.type=="audio"}),r=i.some(function(a){return a.stream.type=="video"}),i=en(e)&&!e.Ua,n=!en(e)&&e.Ua&&!(n&&r),e.g.hls.ignoreManifestProgramDateTime||i||n?db(e,t,i):(JI(e,t),e.g.hls.ignoreManifestProgramDateTimeForTypes.length>0&&db(e,t))}function Ps(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function vE(e){if(!e.l)return!1;var t=[],n=[];e=m(e.l.variants);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&t.push(i.video),i.audio&&n.push(i.audio);return!(t.length>0&&!t.some(function(r){return r.segmentIndex})||n.length>0&&!n.some(function(r){return r.segmentIndex}))}function bb(e,t,n,i,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x){A=A===void 0?!0:A,x=x===void 0?!0:x;var k,M,N,I,C,E,O,L,_,j,G,H,B,F,K,W,me,ne,He,ve,et,Ne,we,Pe,kt,Ye,De,je,Ut;return R(function(Bt){switch(Bt.g){case 1:if(k=i.segments||[],M=k.every(function(Zi){return!!Ct(Zi.ea,"EXT-X-GAP")}),!k.length||M)throw new D(2,4,4053);if(yE(e,i),en(e)&&Eh(e,i),N=en(e)?e.B.get(o):new Map,I=Mb(e,i,N,n,r,o),C=I.segments,E=I.bandwidth,G=j=_=L=O=null,!(C.length>0&&A)){Bt.A(2);break}return T(Bt,QI(e,C),3);case 3:H=Bt.h,o!=H.type&&en(e)&&(e.B.set(H.type,e.B.get(o)),e.B.set(o,new Map)),o=H.type,s=H.language,c=H.channelCount,g=H.sampleRate,e.g.disableText||(d=H.closedCaptions),L=H.height,O=H.width,_=H.ze,j=H.colorGamut,G=H.frameRate,x&&(b=H.mimeType,a=H.codecs);case 2:if(b){Bt.A(4);break}return T(Bt,SE(e,o,a,C),5);case 5:b=Bt.h,o!=xe||a||b!="application/mp4"||!C[0]||C[0].ba||(b="text/vtt");case 4:return T(Bt,Tb(e,i,b,r,n),6);case 6:if(B=Bt.h,F=B.drmInfos,K=B.keyIds,W=B.encrypted,me=B.Rh,W&&!F.length&&!me)throw new D(2,4,4026);return ne=Sb(e,a,o,s,u,l,c,d,h,p,g,y),ne.encrypted=W&&!me,ne.drmInfos=F,ne.keyIds=K,ne.mimeType=b,E&&(ne.bandwidth=E),ao(ne),o=="video"&&(O||L||_||j)&&Pb(ne,O,L,G,_,null,j),en(e)&&Eh(e,i),He=C[0].startTime,ve=C[C.length-1],et=ve.endTime,Ne=new Re(C),ne.segmentIndex=Ne,Pe=(we=Ct(i.ea,"EXT-X-SERVER-CONTROL"))?io(we,"CAN-SKIP-UNTIL")!=null:!1,kt=we?io(we,"CAN-BLOCK-RELOAD")!=null:!1,Ye=ro(i.ea,"EXT-X-MEDIA-SEQUENCE",0),De=wb(Ye,C),je=De.Qb,Ut=De.Rb,Bt.return({stream:ne,type:o,Df:[],P:r,Wc:He,Mc:et,Ve:Pe,Ue:kt,ce:!1,sg:-1,Qb:je,Rb:Ut,rf:N})}})}function wb(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{Qb:e,Rb:n};t=t[t.length-1];var i=t.g;return t.g.length?(n=i.length-1,i[i.length-1].isPreload()||(e++,n=0),{Qb:e,Rb:n}):(e++,t.o&&(n=0),{Qb:e,Rb:n})}function Sb(e,t,n,i,r,a,o,s,u,l,c,d){var h=Ch(n,t)||ec(n),p=[];if(u){u=m(u.split(","));for(var g=u.next();!g.done;g=u.next())p.push(g.value)}return g=void 0,u=null,n==xe?g=p.includes("public.accessibility.transcribes-spoken-dialog")&&p.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":p.includes("public.accessibility.describes-video")&&(u="visually impaired"),p.length||g!=="subtitle"||p.push("subtitle"),g=null,n!="video"&&(g=a),e={id:e.F++,originalId:a,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:h,codecs:t,kind:n==xe?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Ue(i||"und"),originalLanguage:i,label:g,type:n,primary:r,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:p,forced:l,channelsCount:o,audioSamplingRate:c,spatialAudio:d,closedCaptions:s,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:u,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},ao(e),e}function Tb(e,t,n,i,r){var a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M,N,I,C,E,O,L,_,j,G,H,B,F,K;return R(function(W){switch(W.g){case 1:if(a=new Map,!e.g.ignoreDrmInfo&&t.segments){for(o=m(t.segments),s=o.next();!s.done;s=o.next())if(u=s.value,l=qn(u.ea,"EXT-X-KEY"),c=null,l.length)for(c=Ib(e,t,u.ea,i,r),d=m(l),h=d.next();!h.done;h=d.next())p=h.value,a.set(p,c)}y=g=!1,b=[],A=new Set,x=m(a),k=x.next();case 2:if(k.done){W.A(4);break}if(M=k.value,N=m(M),I=N.next().value,C=N.next().value,E=I,O=C,L=ze(E,"METHOD"),L=="NONE"){W.A(3);break}if(g=!0,_=ee(E,"KEYFORMAT")||"identity",j=null,nc(L)){y=!0,W.A(3);break}if(_=="identity")return T(W,Db(e,E,n,i,O,r),11);if(G=e.ec.get(_),!G){H=null,W.A(9);break}return T(W,G(E,n,O),10);case 10:H=W.h;case 9:j=H,W.A(6);break;case 11:j=W.h;case 6:if(j){if(j.keyIds)for(B=m(j.keyIds),F=B.next();!F.done;F=B.next())K=F.value,A.add(K);b.push(j)}case 3:k=x.next(),W.A(2);break;case 4:return W.return({drmInfos:b,keyIds:A,encrypted:g,Rh:y})}})}function xb(e,t,n,i,r){if(!P.crypto||!P.crypto.subtle)throw Ee("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new D(2,4,4042);var a=0,o=ee(t,"IV","");if(o){var s=Or(o.substr(2));if(s.byteLength!=16)throw new D(2,4,4048)}else a=ro(n.ea,"EXT-X-MEDIA-SEQUENCE",0);var u=Er(i(),ze(t,"URI"),r),l=u.sort().join("");return e.yb.getOrInsertComputed(t.toString()+"-"+a+"-"+l,function(){var c={bitsKey:128,blockCipherMode:"CBC",iv:s,firstMediaSequenceNumber:a};switch(ze(t,"METHOD")){case"AES-256":c.bitsKey=256;break;case"AES-256-CTR":c.bitsKey=256,c.blockCipherMode="CTR"}return c.fetchKey=function(){var d,h;return R(function(p){if(p.g==1)return T(p,e.Aa.getOrInsertComputed(l,function(){return Qi(e,yt(u,e.g.retryParameters),6).promise}),2);if(p.g!=3){if(d=p.h,!d.data||d.data.byteLength!=c.bitsKey/8)throw new D(2,4,4049);return h={name:c.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:c.bitsKey},T(p,P.crypto.subtle.importKey("raw",d.data,h,!0,["decrypt"]),3)}c.cryptoKey=p.h,c.fetchKey=void 0,X(p)})},c})}function Ab(e,t){e.o==null&&(t=Ct(t.ea,"EXT-X-START"))&&(e.o=Number(ze(t,"TIME-OFFSET")))}function yE(e,t){var n=Ct(t.ea,"EXT-X-PLAYLIST-TYPE");t=Ct(t.ea,"EXT-X-ENDLIST"),t=n&&n.value=="VOD"||t,n=n&&n.value=="EVENT"&&!t,n=!t&&!n,t?tc(e,rc):n?tc(e,Dh):tc(e,CE)}function Eh(e,t){var n=1/0,i=t.segments;if(i.length)for(var r=i.length-1;r>=0;){var a=Ct(i[r].ea,"EXTINF");if(a){n=Number(a.value.split(",")[0]);break}r--}if(i=Ct(t.ea,"EXT-X-TARGETDURATION"),!i)throw new D(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),(r=Ct(t.ea,"EXT-X-PART-INF"))&&(e.O=Number(ze(r,"PART-TARGET"))),t=Ct(t.ea,"EXT-X-SERVER-CONTROL"),e.ha&&e.O?(e.u=e.fc?e.O*5<=n?Math.min(e.O,e.u):Math.min(n,e.u):Math.min(e.O,e.u),e.Ea=t?Number(ze(t,"PART-HOLD-BACK")):0):(e.u=Math.min(n,e.u),n=t?io(t,"HOLD-BACK"):null,e.wa=n?Number(n.value):0),e.Ta=Math.max(i,e.Ta)}function kb(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.Ea)n=e.Ea;else if(e.wa)n=e.wa;else for(var i=t.segments.length,r=i-Math.min(i,e.g.hls.liveSegmentsDelay);r<i;r++){var a=Ct(t.segments[r].ea,"EXTINF");n=a?n+Number(a.value.split(",")[0]):n+e.Ta}e.o&&e.o<0&&(n=Math.min(-e.o,n),e.o+=n),e.m.Xi(0),e.m.sh(n),e.m.cd(!1)}function Ib(e,t,n,i,r){var a=Ct(n,"EXT-X-MAP");if(!a)return null;var o=ze(a,"URI"),s=Er(i(),o,r);return o=[s.toString(),ee(a,"BYTERANGE","")].join("-"),e.zc.getOrInsertComputed(o,function(){for(var u=void 0,l=void 0,c=!1,d=m(n),h=d.next();!h.done;h=d.next())h=h.value,h.name=="EXT-X-KEY"?(c=ze(h,"METHOD"),nc(c)&&h.id<a.id?(c=!1,u=xb(e,h,t,i,r)):c=c!="NONE"):h.name=="EXT-X-BYTERANGE"&&h.id<a.id&&(l=h);return bE(s,a,l,u,c)})}function bE(e,t,n,i,r){var a=0,o=null;return t=ee(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(a=t.split("@"),o=Number(a[0]),a=Number(a[1]),o=a+o-1,i&&(n=o+1-a,n%16&&(o+=16-n%16))),new fn(function(){return e},a,o,null,null,null,i,r)}function wE(e,t,n,i,r,a,o,s,u,l){var c=i.ea,d=Ct(c,"EXTINF"),h=0,p=0,g=null;i.xc.length&&(e.l.isLowLatency=!0);var y=null;if(!e.g.hls.ignoreManifestProgramDateTime){var b=Ct(c,"EXT-X-PROGRAM-DATE-TIME");b&&b.value&&(y=Ni(b.value),e.Ua=!0)}var A=Hi;if(Ct(c,"EXT-X-GAP")&&(e.l.gapCount++,A=2),!d){if(i.xc.length==0)throw new D(2,4,4024,"EXTINF");if(!e.ha)return null}var x=[];b=!1;var k=null,M=!1,N=!1;if(e.ha&&i.xc.length){h=t&&P.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var I=y,C={},E=0;E<i.xc.length;C={Uf:void 0,pe:void 0},E++){var O=i.xc[E],L=E==0?n:x[x.length-1],_=E==0?r:L.endTime,j=Number(ee(O,"DURATION"))||e.O;if(j){var G=_+j,H=0,B=null;if(O.name=="EXT-X-PRELOAD-HINT"?(H=(H=ee(O,"BYTERANGE-START"))?Number(H):0,(L=ee(O,"BYTERANGE-LENGTH"))?B=H+Number(L)-1:H&&(B=Number.MAX_SAFE_INTEGER)):(H=ee(O,"BYTERANGE"),B=m(Eb(L,H)),H=B.next().value,B=B.next().value),C.pe=ee(O,"URI"),C.pe){L=Hi,ee(O,"GAP")=="YES"&&(e.l.gapCount++,L=2,M=!0),C.Uf=null;var F=function(W){return function(){return W.Uf==null&&(W.Uf=Er(s(),W.pe,a)),W.Uf}}(C);h&&H>=0&&B!=null&&(k=F,b=!0),_=new se(_,G,F,H,B,t,0,0,1/0,[],"",null,I,L,l),O.name=="EXT-X-PRELOAD-HINT"&&(_.Vg(),N=!0),ee(O,"INDEPENDENT")!="YES"&&E>0&&_.xd(),O=u,O||(x.length&&x[0].mimeType?O=x[0].mimeType:C.pe&&(C=Ua(C.pe),O=ic.get(o).get(C)||null)),O&&(_.mimeType=O,Nb.has(O)&&(_.ba=null)),x.push(_),I&&(I+=j)}}}}if(d){if(d=Number(d.value.split(",")[0]),d==0)return null;h=r+d}else if(x.length)h=x[x.length-1].endTime;else return null;b&&(M||x[0].startByte!=0?(b=!1,k=null):x=[]),(d=Ct(c,"EXT-X-BYTERANGE"))?(g=m(Eb(n,d.value)),p=g.next().value,g=g.next().value):x.length&&(p=x[0].startByte,g=x[x.length-1].endByte),n="",d=null,o=="image"&&(n="1x1",o=Ct(c,"EXT-X-TILES"))&&(n=ze(o,"LAYOUT"),(o=ee(o,"DURATION"))&&(d=Number(o)));var K=null;return t=new se(r,h,function(){return k?k():(K==null&&(K=Er(s(),i.g,a)),K||[])},p,g,t,0,0,1/0,x,n,d,y,A,l,x.length>0&&!!i.g),u&&(t.mimeType=u,Nb.has(u)&&(t.ba=null)),b&&(e.fc=!0,t.zi(),N&&t.Vg()),t}function Eb(e,t){var n=0,i=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.endByte+1,i=n+t-1),[n,i]}function Mh(e,t,n,i,r){if(n=="video"||n=="audio"){var a=e.m.m;if(a&&!Ps(e,n))for(t=qn(t,"EXT-X-DATERANGE"),t=t.filter(function(L){return io(L,"START-DATE")!=null}).sort(function(L,_){return L=ze(L,"START-DATE"),_=ze(_,"START-DATE"),L<_?-1:L>_?1:0}),n=0;n<t.length;n++){var o=t[n];try{var s=ze(o,"START-DATE"),u=Ni(s);if(!isNaN(u)){var l=Math.max(0,u-a),c=null,d=ee(o,"END-DATE");if(d){var h=Ni(d);if(!isNaN(h)&&(c=h-a,c<0))continue}if(c==null){var p=ee(o,"DURATION")||ee(o,"PLANNED-DURATION");if(p){var g=parseFloat(p);if(isNaN(g)||(c=l+g),u-a+g<0)continue}}var y=ee(o,"CLASS")||"com.apple.quicktime.HLS",b=ee(o,"END-ON-NEXT")=="YES";if(c==null&&b){for(var A=n+1;A<t.length;A++){var x=ee(t[A],"CLASS")||"com.apple.quicktime.HLS";if(y==x){var k=ze(t[A],"START-DATE"),M=Ni(k);if(!isNaN(M)&&M&&M>u){c=Math.max(0,M-a);break}}}if(c==null)continue}A=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var N=[],I=m(o.attributes),C=I.next();!C.done;C=I.next()){var E=C.value;if(!A.includes(E.name)){var O=rb(E.value,i);(E.name=="X-ASSET-URI"||E.name=="X-ASSET-LIST")&&(O=Er(r(),E.value,i)[0]),N.push({key:E.name,description:"",data:O,mimeType:null,pictureType:null})}}N.length>1&&e.h.onMetadata(y,l,c,N)}}catch{}}}}function Mb(e,t,n,i,r,a){function o(L){if(L=Ua(L),!L)return null;var _=ic.get(a).get(L);return _||(_=Rh.get(L)),_}var s=t.segments,u=null,l=null,c=null,d=null,h=void 0,p=ro(t.ea,"EXT-X-DISCONTINUITY-SEQUENCE",-1),g=ro(t.ea,"EXT-X-MEDIA-SEQUENCE",0),y=Ct(t.ea,"EXT-X-SKIP"),b=y?Number(ee(y,"SKIPPED-SEGMENTS")):0,A=g+b,x=0;en(e)&&n.has(A)&&(x=n.get(A)),x===0&&e.oa==Dh&&n.size>0&&!n.has(A)&&e.m.i!=null&&(x=e.m.Hb());var k=[],M=null;y=[];for(var N=0;N<s.length;N++){var I=s[N];(A=Ct(I.ea,"EXT-X-MAP"))&&A.id!==l&&(u=Ib(e,t,I.ea,r,i),l=A.id),A=I.g;var C="";A&&(C=Ua(A)),C!==d&&(c=o(A),d=C),C=N==0?x:M.endTime,A=g+b+N,Ct(I.ea,"EXT-X-DISCONTINUITY")&&(p++,M&&M.ba&&(M.ba.g=C));for(var E=m(I.ea),O=E.next();!O.done;O=E.next())O=O.value,O.name=="EXT-X-KEY"&&(nc(ze(O,"METHOD"))?h=xb(e,O,t,r,i):h=void 0);if(n.set(A,C),C=wE(e,u,M,I,C,i,a,r,c,h)){if((M=ro(I.ea,"EXT-X-BITRATE"))?(y.push({bitrate:M,duration:C.endTime-C.startTime}),C.bandwidth=M):C.endByte?(I=vd(C))&&(M=C.endTime-C.startTime,I=I*8/M/1e3,y.push({bitrate:I,duration:M}),C.bandwidth=I):y.length&&(M=y.pop(),M.duration+=C.endTime-C.startTime,y.push(M),C.bandwidth=M.bitrate),C.bandwidth)for(M=m(C.g),I=M.next();!I.done;I=M.next())I.value.bandwidth=C.bandwidth;M=C,C.i=p,Ps(e,a)&&e.M!=null&&A<e.M||k.push(C)}}if(t=void 0,y.length&&(t=y.reduce(function(L,_){return L+_.duration},0),t=Math.round(y.reduce(function(L,_){return L+_.bitrate*_.duration},0)/t*1e3)),y=k.some(function(L){return L.h!=null})){for(n={},i=0;i<k.length;n={Ze:void 0,Ye:void 0,Re:void 0,Zc:void 0,Qe:void 0},i++)if(n.Zc=k[i],n.Zc.h==null)for(n.Ye=0,n.Ze=i,r=function(L){return function(){var _=k[L.Ze];if(_){if(_.h!=null)return _.h+L.Ye;L.Ye-=_.endTime-_.startTime,L.Ze+=1}return null}}(n),n.Qe=0,n.Re=i,s=function(L){return function(){var _=k[L.Re];if(_){if(_!=L.Zc&&(L.Qe+=_.endTime-_.startTime),_.h!=null)return _.h+L.Qe;--L.Re}return null}}(n);n.Zc.h==null;)n.Zc.h=s(),n.Zc.h==null&&(n.Zc.h=r())}if(y)for(n=m(k),i=n.next();!i.done;i=n.next())for(r=i.value,i=r.h,r=m(r.g),s=r.next();!s.done;s=r.next())s=s.value,s.h=i,i+=s.endTime-s.startTime;if(n=e.aa,y&&n!=1/0&&!Ps(e,a))for(e=m(k),y=e.next();!y.done;y=e.next())y.value.Eh(n);return{segments:k,bandwidth:t}}function Ch(e,t){if(e==xe){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function ec(e){return e==xe?"text/vtt":ic.get(e).get("mp4")}function Cb(e,t){e=en(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.bc()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function SE(e,t,n,i){var r,a,o,s,u,l,c,d,h,p,g,y,b;return R(function(A){switch(A.g){case 1:return r=Bn,a=Cb(e,i),o=a.segment,o.status==2?A.return(ec(t)):(u=o.P(),(l=Ua(u[0]))&&(c=ic.get(t),(d=c.get(l))||(d=Rh.get(l)))?A.return(d):(s=Ch(t,n))?A.return(s):(p=1,g=yt(u,e.g.retryParameters),he(A,2),g.method="HEAD",T(A,Qi(e,g,r,{type:p}).promise,4)));case 4:y=A.h,h=y.headers["content-type"],ye(A,3);break;case 2:if(b=oe(A),!b||b.code!=1002&&b.code!=1001){A.A(3);break}return g.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(g.headers.Range="bytes=0-0"),T(A,Qi(e,g,r,{type:p}).promise,6);case 6:y=A.h,h=y.headers["content-type"];case 3:if(!h){A.A(7);break}if(s=h.toLowerCase().split(";")[0],s!="application/octet-stream"){A.A(8);break}if(y.data.byteLength){A.A(9);break}return g.method="GET",T(A,Qi(e,g,r,{type:p}).promise,10);case 10:y=A.h;case 9:Da(pe(y.data))&&(s="video/mp2t");case 8:if(s!="application/octet-stream")return A.return(s);case 7:return A.return(ec(t))}})}function Pb(e,t,n,i,r,a,o){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(i)||void 0,e.hdr=r||void 0,e.videoLayout=a||void 0,e.colorGamut=o||void 0)}function Ph(e,t,n){return Qi(e,yt(t,e.g.retryParameters),0,{type:n?2:3})}function Rb(e){var t,n,i,r,a,o;return R(function(s){switch(s.g){case 1:return e.h?(he(s,2),t=Date.now(),T(s,e.update(),4)):s.return();case 4:n=Date.now(),en(e)&&(i=(n-t)/1e3,e.ib.sample(1,i),r=e.g.updatePeriod>0?e.g.updatePeriod:e.u,a=Math.max(0,r-qs(e.ib)),e.C.ka(a)),ye(s,3);break;case 2:if(o=oe(s),!e.h)return s.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(o),s.return();o.severity=1,e.h.onError(o),e.C.ka(.1);case 3:if(!e.h)return s.return();e.h.onManifestUpdated(),X(s)}})}function en(e){return e.oa!=rc}function tc(e,t){e.oa=t,e.m&&e.m.cd(!en(e)),en(e)||e.C.stop()}function Qi(e,t,n,i){if(!e.V)throw new D(2,7,7001);return i||(i={}),i.isPreload=e.sb(),t=e.h.networkingEngine.request(n,t,i),zr(e.V,t),t}function nc(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function TE(e,t,n,i){var r,a,o,s,u,l;return R(function(c){if(c.g==1){if(n=="video/mp2t")throw new D(2,4,4040);if(P.shakaMediaKeysPolyfill==="apple")throw new D(2,4,4041);if(r=ze(t,"METHOD"),a=["SAMPLE-AES","SAMPLE-AES-CTR"],!a.includes(r))return c.return(null);o="cenc",r=="SAMPLE-AES"&&(o="cbcs"),s=ze(t,"URI"),u=Di("com.apple.fps",o,null,s);var d=new ht(s).Db.replace(/-/g,"").toLowerCase();return(l=d.length===32&&/^[0-9a-f]+$/.test(d)?d:null)||!i?c.A(2):T(c,Lb(e,i),3)}return c.g!=2&&(l=c.h),l&&u.keyIds.add(l),c.return(u)})}function xE(e,t){var n=ze(t,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n))return Promise.resolve(null);var i="cenc";n=="SAMPLE-AES"&&(i="cbcs"),n=ze(t,"URI");var r=Jl(n.split("?")[0]);return e=e.za.getOrInsertComputed(n.split("?")[0],function(){return pe(r.data)}),i=Di("com.widevine.alpha",i,[{initDataType:"cenc",initData:e}],void 0,r.Jh),(t=ee(t,"KEYID"))&&i.keyIds.add(t.toLowerCase().substr(2)),Promise.resolve(i)}function AE(e,t){var n=ze(t,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n))return Promise.resolve(null);var i="cenc";n=="SAMPLE-AES"&&(i="cbcs"),n=ze(t,"URI");var r=Jl(n.split("?")[0]);return e=e.za.getOrInsertComputed(n.split("?")[0],function(){return pe(r.data)}),i=Di("com.huawei.wiseplay",i,[{initDataType:"cenc",initData:e}],void 0,r.Jh),(t=ee(t,"KEYID"))&&i.keyIds.add(t.toLowerCase().substr(2)),Promise.resolve(i)}function Db(e,t,n,i,r,a){var o,s,u,l,c,d,h,p,g,y;return R(function(b){switch(b.g){case 1:if(n=="video/mp2t")throw new D(2,4,4040);if(P.shakaMediaKeysPolyfill==="apple")throw new D(2,4,4041);if(o=ze(t,"METHOD"),s=["SAMPLE-AES","SAMPLE-AES-CTR"],!s.includes(o))return b.return(null);if(u=Er(i(),ze(t,"URI"),a),u[0].startsWith("data:text/plain;base64,")){l=Ri(jn(u[0].split("data:text/plain;base64,").pop())),b.A(2);break}return c=u.sort().join(""),T(b,e.cc.getOrInsertComputed(c,function(){return Qi(e,yt(u,e.g.retryParameters),6).promise}),3);case 3:d=b.h,l=Ri(d.data);case 2:if(h="00000000000000000000000000000000",!r){b.A(4);break}return T(b,Lb(e,r),5);case 5:(p=b.h)&&(h=p);case 4:return g=new Map,g.set(h,l),y="cenc",o=="SAMPLE-AES"&&(y="cbcs"),b.return(Lp(g,y))}})}function Lb(e,t){var n,i,r,a;return R(function(o){return o.g==1?(n=null,e.ma.has(t)?(n=e.ma.get(t),o.A(2)):(i=Qo(t.P(),t.Kc(),t.Ic(),e.g.retryParameters),r=Bn,T(o,Qi(e,i,r,{type:0}).promise,3))):(o.g!=2&&(a=o.h,t.ue(a.data),n=ax(a.data),e.ma.set(t,n)),o.return(n))})}Y("shaka.hls.HlsParser",$l);var Rh=new Map().set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),kE=new Map().set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),IE=new Map().set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),EE=new Map().set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),ME=new Map().set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),ic=new Map().set("audio",kE).set("video",IE).set("text",EE).set("image",ME),Nb=new Set(["video/mp2t"].concat(z(ji))),rc="VOD",CE="EVENT",Dh="LIVE";_r("application/x-mpegurl",function(){return new $l}),_r("application/vnd.apple.mpegurl",function(){return new $l});function ac(e){return Bl(e)}var PE=new Map().set("com.microsoft.playready",ac).set("com.microsoft.playready.recommendation",ac).set("com.microsoft.playready.software",ac).set("com.microsoft.playready.hardware",ac);function Lh(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.F=new ua(5),this.o=new Ae(function(){RE(e)}),this.C=new Aa,this.m=new Map,this.B=function(){return!1}}f=Lh.prototype,f.configure=function(e,t){this.g=e,t&&(this.B=t)},f.start=function(e,t){var n=this;return R(function(i){if(i.g==1)return n.l=[e],n.h=t,T(i,Nh(n),2);if(!n.h)throw new D(2,7,7001);return i.return(n.j)})};function RE(e){var t;R(function(n){switch(n.g){case 1:return he(n,2),T(n,Nh(e),4);case 4:ye(n,3);break;case 2:t=oe(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();X(n)}})}f.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.C.destroy()},f.update=function(){var e=this,t;return R(function(n){if(n.g==1)return he(n,2),T(n,Nh(e),4);if(n.g!=2)return ye(n,0);if(t=oe(n),!e.h||!t)return n.return();e.h.onError(t),X(n)})},f.onExpirationUpdated=function(){},f.onInitialVariantChosen=function(){},f.banLocation=function(){},f.setMediaElement=function(){};function Nh(e){var t,n,i,r,a,o,s;return R(function(u){if(u.g==1)return t=yt(e.l,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),r=n.request(0,t,{type:5,isPreload:e.B()}),zr(e.C,r),T(u,r.promise,2);if(a=u.h,!e.h)return u.return();a.uri&&!e.l.includes(a.uri)&&e.l.unshift(a.uri);var l=a.uri,c=a.data,d=e.g.mss.manifestPreprocessor;if(d!=il){if(Ce("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),c=_0(c,"SmoothStreamingMedia"),!c)throw new D(2,4,4046,l);d(c),c=Zn(c.outerHTML)}var h=xo(c,"SmoothStreamingMedia");if(!h)throw new D(2,4,4046,l);if(l=e.g.mss.manifestPreprocessorTXml,l!=rl&&l(h),e.i||(e.i=new fe(null,0)),l=ge(h,"IsLive",au,!1))throw new D(2,4,4047);e.i.cd(!l),d=ge(h,"TimeScale",Nt,1e7),c=ge(h,"DVRWindowLength",Nt),l&&(c===0||isNaN(c))&&(c=1/0);var p=ge(h,"CanSeek",au,!1);c===0&&p&&(c=1/0),p=null,c&&c>0&&(p=c/d),l&&!isNaN(e.g.availabilityWindowOverride)&&(p=e.g.availabilityWindowOverride),p==null&&(p=1/0),e.i.Lf(p),c=ge(h,"Duration",Nt,1/0),l||e.i.Ab(c/d),l={variants:[],textStreams:[],timescale:d,duration:c/d};var g;for(p=Ve(h,"Protection"),d=e.g.mss.keySystemsBySystemId,c=[],p=m(p),g=p.next();!g.done;g=p.next())c=c.concat(Ve(g.value,"ProtectionHeader"));if(c.length){for(p=[],g=0;g<c.length;g++){var y=c[g],b=y.attributes.SystemID.toLowerCase(),A=d[b];if(A){var x;e:{if(x=c0(y)){x=m(fi(x,"DATA"));for(var k=x.next();!k.done;k=x.next())if(k=tt(k.value,"KID")){x=jn(pt(k)),x=new Uint8Array([x[3],x[2],x[1],x[0],x[5],x[4],x[7],x[6]].concat(z(x.slice(8)))),x=Ri(x);break e}}x=null}k=jn(pt(y)),b=Or(b.replace(/-/g,"")),b=[{initData:Iu(k,b,new Set,0),initDataType:"cenc",keyId:x}],b=Di(A,"cenc",b),x&&b.keyIds.add(x),(A=PE.get(A))&&(b.licenseServerUri=A(y)),p.push(b)}}d=p}else d=[];for(g=d,p=[],d=[],c=[],h=Ve(h,"StreamIndex"),h=m(h),y=h.next();!y.done;y=h.next()){y=y.value,A=Ve(y,"QualityLevel"),b=l.timescale,x=l.duration,k=Ve(y,"c");for(var M=[],N=0,I=0;I<k.length;++I){var C=k[I],E=k[I+1],O=ge(C,"t",Nt),L=ge(C,"d",Nt);if(C=ge(C,"r",Lt),!L)break;if(O=O??N,(C=C||0)&&C--,C<0)if(E){if(E=ge(E,"t",Nt),E==null||O>=E)break;C=Math.ceil((E-O)/L)-1}else{if(x==1/0||O/b>=x)break;C=Math.ceil((x*b-O)/L)-1}for(E=0;E<=C;++E)N=O+L,M.push({start:O/b,end:N/b,Md:O}),O=N}for(b=M,A=m(A),x=A.next();!x.done;x=A.next())(x=DE(e,y,x.value,b,g,l))&&(x.type!="audio"||e.g.disableAudio?x.type!="video"||e.g.disableVideo?x.type!=xe||e.g.disableText||c.push(x):d.push(x):p.push(x))}for(h=[],p=m(p.length>0?p:[null]),g=p.next();!g.done;g=p.next())for(g=g.value,y=m(d.length>0?d:[null]),M=y.next();!M.done;M=y.next())A=h,b=A.push,x=e,k=g,M=M.value,I=0,k&&k.bandwidth&&k.bandwidth>0&&(I+=k.bandwidth),M&&M.bandwidth&&M.bandwidth>0&&(I+=M.bandwidth),x={id:x.u++,language:k?k.language:"und",disabledUntilTime:0,primary:!!k&&k.primary||!!M&&M.primary,audio:k,video:M,bandwidth:I,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},b.call(A,x);l.variants=h,l.textStreams=c,e.j?(e.j.variants=l.variants,e.j.textStreams=l.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:l.variants,textStreams:l.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.qf()),Promise.resolve(),o=Date.now(),s=(o-i)/1e3,e.F.sample(1,s),X(u)})}function DE(e,t,n,i,r,a){var o=t.attributes.Type;if(o!=="audio"&&o!=="video"&&o!=="text")return Ee("Ignoring unrecognized type:",o),null;var s=t.attributes.Language,u=e.u++,l=ge(n,"Bitrate",wi),c=ge(n,"MaxWidth",wi),d=ge(n,"MaxHeight",wi),h=ge(n,"Channels",wi),p=ge(n,"SamplingRate",wi),g=a.duration;i.length&&(g=i[i.length-1].end-i[0].start);var y=e.i.getDuration();e.i.Ab(Math.min(g,y)),(y=t.attributes.Name)&&(y+=n.attributes.Index),y||(y=String(u));var b={id:u,originalId:y,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:l||0,width:c||void 0,height:d||void 0,kind:"",encrypted:r.length>0,drmInfos:r,keyIds:new Set,language:Ue(s||"und"),originalLanguage:s,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:h,audioSamplingRate:p,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:g,timescale:a.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((r=t.attributes.Subtype)&&((r=UE.get(r))&&b.roles.push(r),r==="main"&&(b.primary=!0)),r=n.attributes.FourCC,(r===null||r==="")&&(r=t.attributes.FourCC),!r){if(o==="audio")r="AAC";else if(o==="video")return Ee('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!jE.includes(r.toUpperCase()))return Ee("Codec not supported:",r),null;switch(n=LE(n,o,r,b),b.mssPrivateData.codecPrivateData=n,o){case"audio":if(!n)return Ee("Quality unsupported without CodecPrivateData",o),null;b.type="audio",b.mimeType="mss/audio/mp4",b.codecs=NE(r,n);break;case"video":if(!n)return Ee("Quality unsupported without CodecPrivateData",o),null;b.type="video",b.mimeType="mss/video/mp4",b.codecs=OE(n);break;case"text":b.type=xe,b.mimeType="application/mp4",(r==="TTML"||r==="DFXP")&&(b.codecs="stpp")}return b.fullMimeTypes.add(dt(b.mimeType,b.codecs)),b.createSegmentIndex=function(){if(b.segmentIndex)return Promise.resolve();if(e.m.has(b.id))var A=e.m.get(b.id);else A=[],b.type=="video"&&(A=b.mssPrivateData.codecPrivateData.split("00000001").slice(1)),A={id:b.id,type:b.type,codecs:b.codecs,encrypted:b.encrypted,timescale:b.mssPrivateData.timescale,duration:b.mssPrivateData.duration,Bb:A,Fa:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:null,stream:b},A=Ca(new Ma([A])),e.m.set(b.id,A);return A=_E(e,new fn(function(){return[]},0,null,Hu(b),b.mssPrivateData.timescale,A,null,b.encrypted),b,t,i),b.segmentIndex=new Re(A),Promise.resolve()},b.closeSegmentIndex=function(){b.segmentIndex&&(b.segmentIndex.release(),b.segmentIndex=null)},b}function LE(e,t,n,i){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=i.channelsCount||2,e=i.audioSamplingRate||44100;var r={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return i=r[e],n==="AACH"?(n=new Uint8Array(4),e=r[e*2],n[0]=40|i>>1,n[1]=i<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|i>>1,n[1]=i<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function NE(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function OE(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function _E(e,t,n,i,r){var a=i.attributes.Url.replace("{bitrate}",String(n.bandwidth));i=[],r=m(r);for(var o=r.next(),s={};!o.done;s={Pf:void 0},o=r.next())s.Pf=o.value,i.push(new se(s.Pf.start,s.Pf.end,function(u){return function(){return Mt(e.l,[a.replace("{start time}",String(u.Pf.Md))])}}(s),0,null,t,0,0,n.mssPrivateData.duration));return i}Y("shaka.mss.MssParser",Lh);var jE="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),UE=new Map().set("CAPT","main").set("SUBT","alternate").set("DESC","main");_r("application/vnd.ms-sstr+xml",function(){return new Lh});function Ob(e,t,n,i,r,a,o){if(n>=200&&n<=299&&n!=202||n==304)return{uri:r||i,originalUri:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:a};a=null;try{a=vi(t)}catch{}throw new D(n==401||n==403?2:1,1,1001,i,n,a,e,o,r||i)}function Oh(){}function oc(e,t,n,i,r,a){var o=new qE;try{Ia(t.headers).forEach(function(c,d){o.append(d,c)})}catch(c){return dr(new D(1,1,1002,e,c,n))}var s=new HE,u={Wh:!1,jj:!1};if(e=BE(e,t,n,{body:t.body||void 0,headers:o,method:t.method,signal:s.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},u,i,r,t.streamDataCallback,a.minBytesForProgressEvents||0),e=new ft(e,function(){return u.Wh=!0,s.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var l=new Ae(function(){u.jj=!0,s.abort()});l.ka(t/1e3),e.finally(function(){l.stop()})}return e}function BE(e,t,n,i,r,a,o,s,u){var l,c,d,h,p,g,y,b,A,x,k,M,N,I,C;return R(function(E){switch(E.g){case 1:return l=VE,c=GE,h=new ArrayBuffer(0),g=p=0,y={},b=Date.now(),he(E,2),T(E,l(e,i),4);case 4:if(d=E.h,y=FE(d.headers),o(y),i.method=="HEAD"){E.A(5);break}return x=(A=d.headers.get("Content-Length"))?parseInt(A,10):0,d.body?(k=d.clone().body.getReader(),M=function(O){function L(){var _,j,G,H;return R(function(B){switch(B.g){case 1:return he(B,2),T(B,k.read(),4);case 4:_=B.h,ye(B,3);break;case 2:return oe(B),B.return();case 3:if(_.done){B.A(5);break}if(p+=_.value.byteLength,!s){B.A(5);break}return T(B,s(_.value),5);case 5:j=Date.now(),G=p-g,(j-b>100&&G>=u||_.done)&&(H=_.done?0:x-p,a(j-b,G,H),g=p,b=j),_.done?O.close():(O.enqueue(_.value),L()),X(B)}})}L()},new c({start:M}),T(E,d.arrayBuffer(),8)):T(E,d.arrayBuffer(),9);case 8:h=E.h,E.A(5);break;case 9:h=E.h,N=Date.now(),a(N-b,h.byteLength,0);case 5:t.headers.Range&&(I=t.headers.Range.replace("bytes=","").split("-").filter(function(O){return O}).map(function(O){return parseInt(O,10)}),I.length==2&&h.byteLength!=I[1]-I[0]+1&&Ee("Payload length does not match range requested bytes",t,d)),ye(E,3);break;case 2:throw C=oe(E),r.Wh?new D(1,1,7001,e,n):r.jj?new D(1,1,1003,e,n):new D(1,1,1002,e,C,n);case 3:return E.return(Ob(y,h,d.status,e,d.url,t,n))}})}function FE(e){var t={};return e.forEach(function(n,i){t[i.trim()]=n}),t}function _b(){if(P.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(P.Response){if(!new Response("").body)return!1}else return!1;return!(!P.fetch||"polyfill"in P.fetch||!P.AbortController)}Y("shaka.net.HttpFetchPlugin",Oh),Oh.isSupported=_b,Oh.parse=oc;var VE=P.fetch,HE=P.AbortController,GE=P.ReadableStream,qE=P.Headers;_b()&&(Bi("http",oc,2,!0),Bi("https",oc,2,!0),Bi("blob",oc,2,!0));function jb(){}function sc(e,t,n,i,r,a){var o=new KE,s=Date.now(),u=0,l=new Promise(function(c,d){o.open(t.method,e,!0),o.responseType="arraybuffer",o.timeout=t.retryParameters.timeout,o.withCredentials=t.allowCrossSiteCredentials;var h={};o.onabort=function(){d(new D(1,1,7001,e,n))},o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.HEADERS_RECEIVED){var g=o.getAllResponseHeaders().trim().split(`\r
`),y={};g=m(g);for(var b=g.next();!b.done;b=g.next())b=b.value.split(": "),y[b[0].toLowerCase()]=b.slice(1).join(": ");h=y,r(h)}},o.onload=function(g){var y=o.response;try{i(Date.now()-s,g.loaded-u,0);var b=Ob(h,y,o.status,e,o.responseURL,t,n);c(b)}catch(A){d(A)}},o.onerror=function(g){d(new D(1,1,1002,e,g,n))},o.ontimeout=function(){d(new D(1,1,1003,e,n))},o.onprogress=function(g){var y=Date.now(),b=a.minBytesForProgressEvents||0,A=g.loaded-u;(y-s>100&&A>=b||g.lengthComputable&&g.loaded==g.total)&&(i(y-s,A,o.readyState==4?0:g.total-g.loaded),u=g.loaded,s=y)};for(var p in t.headers)try{o.setRequestHeader(p.toLowerCase(),t.headers[p])}catch(g){throw new D(1,1,1002,e,g,n)}o.send(t.body)});return new ft(l,function(){return o.abort(),Promise.resolve()})}Y("shaka.net.HttpXHRPlugin",jb),jb.parse=sc;var KE=P.XMLHttpRequest;Bi("http",sc,1,!0),Bi("https",sc,1,!0),Bi("blob",sc,1,!0);function Ub(e,t,n,i,r){this.g=e,this.i=t,this.groupId=n,this.h=i,this.j=r}function _h(e){var t=e.ac(!1);return t?Pi(t):e.P().map(function(n){return"{"+encodeURI(n.split("#xywh=")[0])+"}"}).join("")+":"+e.startByte+":"+e.endByte}function zE(e,t){return Qo(e.g.P(),e.g.startByte,e.g.endByte,t.streaming.retryParameters)}function Bb(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function Fb(e,t){e.i+=t;var n=e.l;return e.l++,e.h.set(n,t),n}Bb.prototype.close=function(e,t){if(this.h.has(e)){var n=this.h.get(e);this.h.delete(e),this.j+=n,this.g+=t}};function Vb(e){return e.i==0?0:e.j/e.i}function jh(e){var t=this;this.u=e,this.i=new Map,this.h=new ka(function(){return Uh(t).catch(function(){})}),this.j=[],this.o=function(){},this.m=function(){},this.g=new Bb,this.l=!1}jh.prototype.destroy=function(){return this.h.destroy()};function WE(e,t,n){e.o=t,e.m=n}function Uh(e){e.l=!0;var t=e.j.map(function(n){return n()});return e.j=[],Promise.all(t)}jh.prototype.queue=function(e,t,n,i,r){var a=this;Je(this.h);var o=(this.i.get(e)||Promise.resolve()).then(function(){var s,u,l,c,d,h,p;return R(function(g){if(g.g==1)return T(g,JE(a,t),2);if(s=g.h,a.h.g)throw new D(2,9,7001);if(i)for(c in u=pe(s),l=new cd(u),l.data)d=Number(c),h=l.data[d],p=l.g[d],a.m(h,p);return a.g.close(n,s.byteLength),a.o(Vb(a.g),a.g.g),g.return(r(s))})});return this.i.set(e,o),o};function XE(e,t,n,i,r,a){Je(e.h);var o=(e.i.get(t)||Promise.resolve()).then(function(){if(e.h.g)throw new D(2,9,7001);if(r){var s=pe(n);s=new cd(s);for(var u in s.data){var l=Number(u);e.m(s.data[l],s.g[l])}}return e.g.close(i,n.byteLength),e.o(Vb(e.g),e.g.g),a(n)});e.i.set(t,o)}function YE(e){return R(function(t){return t.g==1?T(t,Promise.all(e.i.values()),2):t.return(e.g.g)})}function JE(e,t){var n,i,r,a;return R(function(o){return o.g==1?(n=Bn,i=e.u.request(n,t),r=function(){return i.abort()},e.j.push(r),T(o,i.promise,2)):(a=o.h,Qn(e.j,r),o.return(a.data))})}function uc(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new qe,e.onabort=function(i){i.preventDefault(),n.g.reject()},e.onerror=function(i){i.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}uc.prototype.abort=function(){var e=this;return R(function(t){if(t.g==1){try{e.i.abort()}catch{}return he(t,2),T(t,e.g,4)}if(t.g!=2)return ye(t,0);oe(t),X(t)})};function Bh(e,t){return new Promise(function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var a;return R(function(o){if(o.g==1)return r.result==null?(n(),o.return()):(a=r.result,T(o,t(a.key,a.value,a),2));a.continue(),X(o)})}})}uc.prototype.store=function(){return this.h},uc.prototype.promise=function(){return this.g};function Fh(e){this.h=e,this.g=[]}Fh.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function ia(e,t){return lc(e,t,"readwrite")}function lc(e,t,n){n=e.h.transaction([t],n);var i=new uc(n,t);return e.g.push(i),i.promise().then(function(){Qn(e.g,i)},function(){Qn(e.g,i)}),i}function ra(e,t,n){this.h=new Fh(e),this.i=t,this.g=n}f=ra.prototype,f.destroy=function(){return this.h.destroy()},f.hasFixedKeySpace=function(){return!0},f.addSegments=function(){return Hb(this.i)},f.removeSegments=function(e,t){return Gb(this,this.i,e,t)},f.getSegments=function(e){var t=this,n;return R(function(i){return i.g==1?T(i,qb(t,t.i,e),2):(n=i.h,i.return(n.map(function(r){return t.Yh(r)})))})},f.addManifests=function(){return Hb(this.g)},f.updateManifest=function(){return Promise.reject(new D(2,9,9016,"Cannot modify values in "+this.g))};function $E(e,t,n){e=ia(e.h,e.g);var i=e.store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}f.updateManifestExpiration=function(e,t){var n=ia(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(r){(r=r.target.result)&&(r.expiration=t,i.put(r,e))},n.promise()},f.removeManifests=function(e,t){return Gb(this,this.g,e,t)},f.getManifests=function(e){var t=this,n;return R(function(i){return i.g==1?T(i,qb(t,t.g,e),2):(n=i.h,i.return(Promise.all(n.map(function(r){return t.Vd(r)}))))})},f.getAllManifests=function(){var e=this,t,n;return R(function(i){return i.g==1?(t=lc(e.h,e.g,"readonly"),n=new Map,T(i,Bh(t,function(r,a){var o;return R(function(s){if(s.g==1)return T(s,e.Vd(a),2);o=s.h,n.set(r,o),X(s)})}),2)):i.g!=3?T(i,t.promise(),3):i.return(n)})},f.Yh=function(e){return e},f.Vd=function(e){return Promise.resolve(e)};function Hb(e){return Promise.reject(new D(2,9,9011,"Cannot add new value to "+e))}f.add=function(e,t){var n=this,i,r,a,o,s,u,l;return R(function(c){if(c.g==1){for(i=ia(n.h,e),r=i.store(),a=[],o=m(t),s=o.next(),u={};!s.done;u={ih:void 0},s=o.next())l=s.value,u.ih=r.add(l),u.ih.onsuccess=function(d){return function(){a.push(d.ih.result)}}(u);return T(c,i.promise(),2)}return c.return(a)})};function Gb(e,t,n,i){e=ia(e.h,t),t=e.store(),n=m(n);for(var r=n.next(),a={};!r.done;a={Tg:void 0},r=n.next())a.Tg=r.value,t.delete(a.Tg).onsuccess=function(o){return function(){return i(o.Tg)}}(a);return e.promise()}function qb(e,t,n){var i,r,a,o,s,u,l;return R(function(c){if(c.g==1){for(i=lc(e.h,t,"readonly"),r=i.store(),a={},o=[],s=m(n),u=s.next(),l={};!u.done;l={Ef:void 0,lf:void 0},u=s.next())l.lf=u.value,l.Ef=r.get(l.lf),l.Ef.onsuccess=function(d){return function(){d.Ef.result==null&&o.push(d.lf),a[d.lf]=d.Ef.result}}(l);return T(c,i.promise(),2)}if(o.length)throw new D(2,9,9012,"Could not find values for "+o);return c.return(n.map(function(d){return a[d]}))})}function Rs(e){this.g=new Fh(e)}Rs.prototype.destroy=function(){return this.g.destroy()},Rs.prototype.getAll=function(){var e=this,t,n;return R(function(i){return i.g==1?(t=lc(e.g,"session-ids","readonly"),n=[],T(i,Bh(t,function(r,a){n.push(a)}),2)):i.g!=3?T(i,t.promise(),3):i.return(n)})},Rs.prototype.add=function(e){var t=ia(this.g,"session-ids"),n=t.store();e=m(e);for(var i=e.next();!i.done;i=e.next())n.add(i.value);return t.promise()},Rs.prototype.remove=function(e){var t=this,n;return R(function(i){return i.g==1?(n=ia(t.g,"session-ids"),T(i,Bh(n,function(r,a,o){e.includes(a.sessionId)&&o.delete()}),2)):T(i,n.promise(),0)})};function gn(){this.g=new Map}gn.prototype.destroy=function(){for(var e=[],t=m(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},gn.prototype.init=function(){var e=this;Ds.forEach(function(r,a){(r=r())&&e.g.set(a,r)});for(var t=[],n=m(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)};function Kb(e){var t=null;if(e.g.forEach(function(n,i){n.getCells().forEach(function(r,a){r.hasFixedKeySpace()||t||(t={path:{Pb:i,cb:a},cb:r})})}),t)return t;throw new D(2,9,9013,"Could not find a cell that supports add-operations")}function QE(e,t){e.g.forEach(function(n,i){n.getCells().forEach(function(r,a){t({Pb:i,cb:a},r)})})}function cc(e,t,n){if(e=e.g.get(t),!e)throw new D(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new D(2,9,9013,"Could not find cell with name "+n);return t}function ZE(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function e2(e){var t=Array.from(e.g.keys());if(!t.length)throw new D(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function t2(e){var t,n,i;return R(function(r){return r.g==1?(t=Array.from(e.g.values()),n=t.length>0,n||(i=Ds,i.forEach(function(a){(a=a())&&t.push(a)})),T(r,Promise.all(t.map(function(a){return a.erase()})),2)):n?r.A(0):T(r,Promise.all(t.map(function(a){return a.destroy()})),0)})}function zb(e,t){Ds.set(e,t)}Y("shaka.offline.StorageMuxer",gn),gn.unregister=function(e){Ds.delete(e)},gn.register=zb,gn.prototype.destroy=gn.prototype.destroy;var Ds=new Map;function Ls(){ra.apply(this,arguments)}rt(Ls,ra),Ls.prototype.updateManifestExpiration=function(e,t){var n=this,i,r,a;return R(function(o){return i=ia(n.h,n.g),r=i.store(),a=new qe,r.get(e).onsuccess=function(s){(s=s.target.result)?(s.expiration=t,r.put(s),a.resolve()):a.reject(new D(2,9,9012,"Could not find values for "+e))},T(o,Promise.all([i.promise(),a]),0)})},Ls.prototype.Vd=function(e){var t,n,i,r,a,o;return R(function(s){if(s.g==1){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,a=n2(e.periods[n],r),t.push(a);return T(s,I0(t),2)}return o=s.h,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:o,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function n2(e,t){r2(e);for(var n=m(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map(function(r){return i2(r,e.startTime,t)})}function i2(e,t,n){var i=e.initSegmentUri?Wb(e.initSegmentUri):null,r=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(o){var s=Wb(o.uri);return{startTime:t+o.startTime,endTime:t+o.endTime,dataKey:s,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:a,timestampOffset:r,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}Ls.prototype.Yh=function(e){return{data:e.data}};function Wb(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new D(2,9,9004,"Could not parse uri "+e)}function r2(e){var t=e.streams.filter(function(s){return s.contentType=="audio"});if(e=e.streams.filter(function(s){return s.contentType=="video"}),!t.every(function(s){return s.variantIds})||!e.every(function(s){return s.variantIds})){for(var n=m(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(n=m(e),i=n.next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){i=n++;for(var r=m(e),a=r.next();!a.done;a=r.next())a.value.variantIds.push(i)}if(!e.length&&t.length)for(i=n++,r=m(t),a=r.next();!a.done;a=r.next())a.value.variantIds.push(i);if(e.length&&t.length)for(t=m(t),i=t.next();!i.done;i=t.next())for(i=i.value,r=m(e),a=r.next();!a.done;a=r.next()){a=a.value;var o=n++;i.variantIds.push(o),a.variantIds.push(o)}}}function dc(){ra.apply(this,arguments)}rt(dc,ra),dc.prototype.Vd=function(e){var t,n,i,r,a,o;return R(function(s){if(s.g==1){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var u=e.periods[n],l=[],c=m(u.streams),d=c.next();!d.done;d=c.next())d=d.value,d.variantIds.length!=0&&l.push(a2(d,u.startTime,u.startTime+r));a=l,t.push(a)}return T(s,I0(t),2)}return o=s.h,s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:o,sequenceMode:!1})})};function a2(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function Vh(){ra.apply(this,arguments)}rt(Vh,ra),f=Vh.prototype,f.hasFixedKeySpace=function(){return!1},f.addSegments=function(e){return this.add(this.i,e)},f.addManifests=function(e){return this.add(this.g,e)},f.updateManifest=function(e,t){return $E(this,e,t)},f.Vd=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function Xb(){this.m=this.j=this.i=this.h=this.g=this.l=null}f=Xb.prototype,f.init=function(){var e=this,t=new qe,n=!1,i=new Ae(function(){n=!0,t.reject(new D(2,9,9017))});typeof fc=="number"&&fc>0&&i.ka(fc);var r=P.indexedDB.open("shaka_offline_db",5);return r.onsuccess=function(){if(!n){i.stop();var a=r.result;e.l=a;var o=a.objectStoreNames;o=o.contains("manifest")&&o.contains("segment")?new Ls(a,"segment","manifest"):null,e.g=o,o=a.objectStoreNames,o=o.contains("manifest-v2")&&o.contains("segment-v2")?new dc(a,"segment-v2","manifest-v2"):null,e.h=o,o=a.objectStoreNames,o=o.contains("manifest-v3")&&o.contains("segment-v3")?new dc(a,"segment-v3","manifest-v3"):null,e.i=o,o=a.objectStoreNames,o=o.contains("manifest-v5")&&o.contains("segment-v5")?new Vh(a,"segment-v5","manifest-v5"):null,e.j=o,a=a.objectStoreNames.contains("session-ids")?new Rs(a):null,e.m=a,t.resolve()}},r.onupgradeneeded=function(){for(var a=r.result,o=m(["segment-v5","manifest-v5","session-ids"]),s=o.next();!s.done;s=o.next())s=s.value,a.objectStoreNames.contains(s)||a.createObjectStore(s,{autoIncrement:!0})},r.onerror=function(a){n||(i.stop(),t.reject(new D(2,9,9001,r.error)),a.preventDefault())},t},f.destroy=function(){var e=this;return R(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return T(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return T(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return T(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return T(t,e.j.destroy(),8);case 8:if(!e.m){t.A(10);break}return T(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),X(t)}})},f.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},f.getEmeSessionCell=function(){return this.m},f.erase=function(){var e=this;return R(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return T(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return T(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return T(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return T(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),T(t,o2(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,T(t,e.init(),0)}})};function o2(){var e=new qe,t=P.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new D(2,9,9001,t.error)),n.preventDefault()},e}var fc=5;Y("shaka.offline.indexeddb.StorageMechanismOpenTimeout",fc),zb("idb",function(){return Te().Dh()?new Xb:null});function ki(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}ki.prototype.Pb=function(){return this.i},ki.prototype.cb=function(){return this.h},ki.prototype.key=function(){return this.l},ki.prototype.toString=function(){return this.j};function Hh(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var i=e[3];return i&&t!=null?new ki(t,n,i,Number(e[4])):null}function Yb(e,t){this.h=e,this.g=t}function Jb(e,t){var n=new fe(null,0);n.Ab(t.duration);var i=t.streams.filter(function(l){return l.type=="audio"}),r=t.streams.filter(function(l){return l.type=="video"});i=s2(e,i,r,n),r=t.streams.filter(function(l){return l.type==xe}).map(function(l){return hc(e,l,n)});var a=t.streams.filter(function(l){return l.type=="image"}).map(function(l){return hc(e,l,n)}),o=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var s=m(i.values()),u=s.next();!u.done;u=s.next())u=u.value,u.audio&&u.audio.encrypted&&(u.audio.drmInfos=o),u.video&&u.video.encrypted&&(u.video.drmInfos=o);return{presentationTimeline:n,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:a,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function s2(e,t,n,i){for(var r=new Set,a=m(t),o=a.next();!o.done;o=a.next()){o=m(o.value.variantIds);for(var s=o.next();!s.done;s=o.next())r.add(s.value)}for(a=m(n),o=a.next();!o.done;o=a.next())for(o=m(o.value.variantIds),s=o.next();!s.done;s=o.next())r.add(s.value);for(a=new Map,r=m(r),o=r.next();!o.done;o=r.next())o=o.value,a.set(o,{id:o,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=m(t),r=t.next();!r.done;r=t.next())for(o=r.value,r=hc(e,o,i),o=m(o.variantIds),s=o.next();!s.done;s=o.next())s=a.get(s.value),s.language=r.language,s.primary=s.primary||r.primary,s.audio=r;for(n=m(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=hc(e,r,i),r=m(r.variantIds),o=r.next();!o.done;o=r.next())o=a.get(o.value),o.primary=o.primary||t.primary,o.video=t;return a}function hc(e,t,n){var i=t.segments.map(function(r){return u2(e,r,t)});return n.me(i),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Re(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,mssPrivateData:t.mssPrivateData,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([dt(t.mimeType,t.codecs)]),isAudioMuxedInVideo:t.isAudioMuxedInVideo||!1,baseOriginalId:null}}function u2(e,t,n){var i=new ki("segment",e.h,e.g,t.dataKey);return e=new se(t.startTime,t.endTime,function(){return[i.toString()]},0,null,t.initSegmentKey!=null?l2(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",t.thumbnailSprite&&e.Mf(t.thumbnailSprite),e}function l2(e,t){var n=new ki("segment",e.h,e.g,t);return new fn(function(){return[n.toString()]},0,null)}function $b(){this.g=null}f=$b.prototype,f.configure=function(){},f.start=function(e,t){var n=this,i,r,a,o,s,u,l;return R(function(c){switch(c.g){case 1:if(i=Hh(e),n.g=i,i==null||i.g!="manifest")throw new D(2,1,9004,e);return r=new gn,$t(c,2),T(c,r.init(),4);case 4:return T(c,cc(r,i.Pb(),i.cb()),5);case 5:return a=c.h,T(c,a.getManifests([i.key()]),6);case 6:return o=c.h,s=o[0],u=new Yb(i.Pb(),i.cb()),l=Jb(u,s),t.makeTextStreamsForClosedCaptions(l),c.return(l);case 2:return Ft(c),T(c,r.destroy(),7);case 7:wt(c,0)}})},f.stop=function(){return Promise.resolve()},f.update=function(){},f.onExpirationUpdated=function(e,t){var n=this,i,r,a,o,s,u,l;return R(function(c){switch(c.g){case 1:return i=n.g,r=new gn,he(c,2,3),T(c,r.init(),5);case 5:return T(c,cc(r,i.Pb(),i.cb()),6);case 6:return a=c.h,T(c,a.getManifests([i.key()]),7);case 7:if(o=c.h,s=o[0],u=s.sessionIds.includes(e),l=s.expiration==null||s.expiration>t,!u||!l){c.A(3);break}return T(c,a.updateManifestExpiration(i.key(),t),3);case 3:return Ft(c),T(c,r.destroy(),10);case 10:wt(c,0);break;case 2:oe(c),c.A(3)}})},f.onInitialVariantChosen=function(){},f.banLocation=function(){},f.setMediaElement=function(){},_r("application/x-offline-manifest",function(){return new $b});function Qb(){}function Zb(e,t){var n=Hh(e);return n&&n.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:t},e=xa(e)):e=n&&n.g=="segment"?c2(n.key(),n,t):dr(new D(2,1,9004,e)),e}function c2(e,t,n){var i=new gn;return xa(void 0).Xa(function(){return i.init()}).Xa(function(){return cc(i,t.Pb(),t.cb())}).Xa(function(r){return r.getSegments([t.key()])}).Xa(function(r){return{uri:t,data:r[0].data,headers:{},originalRequest:n}}).finally(function(){return i.destroy()})}Y("shaka.offline.OfflineScheme",Qb),Qb.plugin=Zb,Bi("offline",Zb);function e1(e,t,n){var i,r,a,o,s,u;return R(function(l){switch(l.g){case 1:i=[];for(var c=[],d=m(n),h=d.next();!h.done;h=d.next()){h=h.value;for(var p=!1,g=m(c),y=g.next();!y.done;y=g.next())if(y=y.value,f2(y.info,h)){y.sessionIds.push(h.sessionId),p=!0;break}p||c.push({info:h,sessionIds:[h.sessionId]})}r=m(c),a=r.next();case 2:if(a.done){l.A(4);break}return o=a.value,s=d2(e,t,o),T(l,s,5);case 5:u=l.h,i=i.concat(u),a=r.next(),l.A(2);break;case 4:return l.return(i)}})}function d2(e,t,n){var i,r;return R(function(a){switch(a.g){case 1:return i=new Eu({wc:t,onError:function(){},zf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),he(a,2),i.configure(e),T(a,FS(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:ye(a,3);break;case 2:return oe(a),T(a,i.destroy(),5);case 5:return a.return([]);case 3:return r=[],T(a,Promise.all(n.sessionIds.map(function(o){return R(function(s){if(s.g==1)return he(s,2),T(s,GS(i,o),4);if(s.g!=2)return r.push(o),ye(s,0);oe(s),X(s)})})),6);case 6:return T(a,i.destroy(),7);case 7:return a.return(r)}})}function f2(e,t){function n(i,r){return i.robustness==r.robustness&&i.contentType==r.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Dr(e.audioCapabilities,t.audioCapabilities,n)&&Dr(e.videoCapabilities,t.videoCapabilities,n)}function h2(e,t,n){var i=t.presentationTimeline.getDuration();return t=t1(t),{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function Gh(e,t){var n=Jb(new Yb(e.Pb(),e.cb()),t),i=t.appMetadata||{};return n=t1(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function t1(e){var t=[],n=yu(e.variants);n=m(n);for(var i=n.next();!i.done;i=n.next())t.push(qr(i.value));for(e=m(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Kr(n.value));return t}function p2(){this.g=new Map}function g2(e,t){var n=t.audio,i=t.video;if(n&&!i&&e.g.set(n.id,n.bandwidth||t.bandwidth),!n&&i&&e.g.set(i.id,i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,a=i.bandwidth||t.bandwidth-r;a<=0&&(a=t.bandwidth),e.g.set(n.id,r),e.g.set(i.id,a)}}function m2(e,t){e.g.set(t.id,t.bandwidth||2048)}function n1(e,t){return e=e.g.get(t),e==null&&(e=0),e}function Rt(e){var t=this;if(e&&e.constructor!=V)throw new D(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Yb()):(this.h=Va(),this.g=new nt,this.g.configure(this.h.networking)),this.i=[],this.l=[];var n=!e;this.j=new ka(function(){var i,r,a,o,s;return R(function(u){switch(u.g){case 1:return T(u,Promise.all(t.l.map(function(l){return Uh(l)})),2);case 2:for(i=function(){},r=[],a=m(t.i),o=a.next();!o.done;o=a.next())s=o.value,r.push(s.then(i,i));return T(u,Promise.all(r),3);case 3:if(!n){u.A(4);break}return T(u,t.g.destroy(),4);case 4:t.h=null,t.g=null,X(u)}})}),this.m=1e9}function qh(){if(Ai(Te()))e:{for(var e=m(Ds.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}f=Rt.prototype,f.destroy=function(){return this.j.destroy()},f.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Zu(e,t)),Ki(this.h,e)},f.getConfiguration=function(){var e=Va();return Ki(e,this.h,Va()),e},f.Yb=function(){return this.g},f.store=function(e,t,n,i,r){var a=this,o=this.getConfiguration(),s=new jh(this.g);return this.l.push(s),t=v2(this,e,t||{},i||[],r||[],function(){var u;return R(function(l){return l.g==1?n?l.A(2):T(l,ja(e,a.g,o.manifest.retryParameters),3):(l.g!=2&&(n=l.h),u=Up(e,n||null),l.return(u()))})},o,s),t=new ft(t,function(){return Uh(s)}),t.finally(function(){Qn(a.l,s)}),L2(this,t)};function v2(e,t,n,i,r,a,o,s){var u,l,c,d,h,p,g,y,b,A,x,k,M,N,I,C,E,O,L,_,j,G,H,B;return R(function(F){switch(F.g){case 1:return pc(),l=u=null,c=new gn,p=h=d=null,he(F,2,3),T(F,a(),5);case 5:return u=F.h,T(F,I2(e,t,u,o),6);case 6:if(g=F.h,Mn(e),y=!g.presentationTimeline.W()&&!g.presentationTimeline.Vc(),!y)throw new D(2,9,9005,t);b=m(i),A=b.next();case 7:if(A.done){F.A(9);break}return x=A.value,T(F,E2(e,x,g),10);case 10:k=F.h,g.imageStreams.push(k),Mn(e),A=b.next(),F.A(7);break;case 9:M=m(r),N=M.next();case 11:return N.done?(Kg(o.drm.clearKeys,g.variants),E=g.variants.some(function(K){if(K.audio){for(var W=m(K.audio.drmInfos),me=W.next();!me.done;me=W.next())if(me.value.licenseServerUri.startsWith("data:"))return!0}if(K.video){for(K=m(K.video.drmInfos),W=K.next();!W.done;W=K.next())if(W.value.licenseServerUri.startsWith("data:"))return!0}return!1}),O=o.offline.usePersistentLicense,E&&(O=!1),T(F,e.md(g,function(K){p=p||K},o,O),15)):(I=N.value,T(F,M2(e,g,I.uri,I.language,I.kind,I.mime,I.codecs),14));case 14:C=F.h,g.textStreams.push(C),Mn(e),N=M.next(),F.A(11);break;case 15:if(l=F.h,Mn(e),p)throw p;return T(F,b2(g,l,o,O),16);case 16:return T(F,c.init(),17);case 17:return Mn(e),T(F,Kb(c),18);case 18:return d=F.h,Mn(e),L=w2(l,g,t,n,o,s,O),_=L.yk,j=L.Hh,T(F,d.cb.addManifests([_]),19);case 19:if(G=F.h,Mn(e),h=G[0],Mn(e),p)throw p;return T(F,y2(e,j,h,_,s,o,d.cb,g,l,O),20);case 20:return Mn(e),o1(g,_,l,O),T(F,d.cb.updateManifest(h,_),21);case 21:return Mn(e),H=new ki("manifest",d.path.Pb,d.path.cb,h),F.return(Gh(H,_));case 3:return Ft(F),T(F,c.destroy(),22);case 22:if(!u){F.A(23);break}return T(F,u.stop(),23);case 23:if(!l){F.A(25);break}return T(F,l.destroy(),25);case 25:wt(F,0);break;case 2:if(B=oe(F),h==null){F.A(27);break}return T(F,i1(h),27);case 27:throw p||B}})}function y2(e,t,n,i,r,a,o,s,u,l){var c,d,h,p,g,y,b,A,x,k,M;return R(function(N){switch(N.g){case 1:if(c={},d=0,h=function(){if(e.j.g||r.l)throw new D(2,9,7001)},p=function(I,C){var E,O,L,_,j,G,H,B,F;return R(function(K){if(K.g==1){for(E=m(I),O=E.next(),L={};!O.done;L={qc:void 0},O=E.next())L.qc=O.value,h(),_=zE(L.qc,a),j=L.qc.i,G=L.qc.h,H=function(W){return function(me){var ne,He,ve,et;return R(function(Ne){switch(Ne.g){case 1:if(ne=W.qc.g,He=ne.ac(!1),!ne.aesKey||He){Ne.A(2);break}return T(Ne,Gd(me,ne.aesKey,W.qc.j),3);case 3:me=Ne.h;case 2:return ve=_h(ne),T(Ne,o.addSegments([{data:me}]),4);case 4:et=Ne.h,h(),c[ve]=et[0],d+=me.byteLength,X(Ne)}})}}(L),B=L.qc.g,(F=B.ac(!1))?XE(r,L.qc.groupId,F,j,G,H):r.queue(L.qc.groupId,_,j,G,H);return T(K,YE(r),2)}return h(),!C||r.l?K.A(0):(o1(s,i,u,l),T(K,o.updateManifest(n,i),0))})},g=!1,he(N,2),!Kh(s)||!g||a1(s)){N.A(4);break}return T(N,p(t.filter(function(I){return I.h}),!0),5);case 5:return h(),t=t.filter(function(I){return!I.h}),y=c,b=d,c={},d=0,T(N,r1(o,n,i,y,b,function(){return Mn(e)}),6);case 6:h();case 4:if(g){N.A(7);break}return T(N,p(t,!1),8);case 8:return h(),A=c,x=d,c={},d=0,T(N,r1(o,n,i,A,x,function(){return h()}),9);case 9:h();case 7:ye(N,0);break;case 2:return k=oe(N),M=Object.values(c),T(N,o.removeSegments(M,function(){}),10);case 10:throw k}})}function i1(e){var t,n,i,r;return R(function(a){switch(a.g){case 1:return t=new gn,T(a,t.init(),2);case 2:return T(a,Kb(t),3);case 3:return n=a.h,i=new ki("manifest",n.path.Pb,n.path.cb,e),T(a,t.destroy(),4);case 4:return r=new Rt,T(a,r.remove(i.toString()),0)}})}function r1(e,t,n,i,r,a){var o,s,u,l,c,d,h,p,g,y,b;return R(function(A){switch(A.g){case 1:for(o=!1,he(A,2),s=!0,u=m(n.streams),l=u.next();!l.done;l=u.next())for(c=l.value,d=m(c.segments),h=d.next();!h.done;h=d.next())p=h.value,g=p.pendingSegmentRefId?i[p.pendingSegmentRefId]:null,g!=null&&(p.dataKey=g,p.pendingSegmentRefId=void 0),g=p.pendingInitSegmentRefId?i[p.pendingInitSegmentRefId]:null,g!=null&&(p.initSegmentKey=g,p.pendingInitSegmentRefId=void 0),p.pendingSegmentRefId&&(s=!1),p.pendingInitSegmentRefId&&(s=!1);return n.size+=r,s&&(n.isIncomplete=!1),T(A,e.updateManifest(t,n),4);case 4:o=!0,a(),ye(A,0);break;case 2:return y=oe(A),T(A,i1(t),5);case 5:if(o){A.A(6);break}return b=Object.values(i),T(A,e.removeSegments(b,function(){}),6);case 6:throw y}})}function b2(e,t,n,i){var r,a,o,s,u,l,c,d,h,p,g,y,b,A,x,k,M,N,I,C,E,O,L,_,j,G,H,B,F,K;return R(function(W){switch(W.g){case 1:return r={width:1/0,height:1/0},wS(e,n.restrictions,r),T(W,cg(t,e,i,n.drm.preferredKeySystems,n.drm.keySystemsMapping),2);case 2:for(a=[],o=n.preferredDecodingAttributes,s=n.preferredVideoCodecs,u=n.preferredAudioCodecs,l=n.preferredTextFormats,lg(e,s,u,o,l),c=m(e.variants),d=c.next();!d.done;d=c.next())h=d.value,a.push(qr(h));for(p=m(e.textStreams),g=p.next();!g.done;g=p.next())y=g.value,a.push(Kr(y));for(b=m(e.imageStreams),A=b.next();!A.done;A=b.next())x=A.value,a.push(ad(x));return T(W,n.offline.trackSelectionCallback(a),3);case 3:for(k=W.h,M=e.presentationTimeline.getDuration(),N=0,I=m(k),C=I.next();!C.done;C=I.next())E=C.value,O=E.bandwidth*M/8,N+=O;return he(W,4),T(W,n.offline.downloadSizeCallback(N),6);case 6:if(L=W.h,!L)throw new D(2,9,9014);ye(W,5);break;case 4:throw _=oe(W),_ instanceof D?_:new D(2,9,9015);case 5:for(j=new Set,G=new Set,H=new Set,B=m(k),F=B.next();!F.done;F=B.next())K=F.value,K.type=="variant"&&j.add(K.id),K.type=="text"&&G.add(K.id),K.type=="image"&&H.add(K.id);e.variants=e.variants.filter(function(me){return j.has(me.id)}),e.textStreams=e.textStreams.filter(function(me){return G.has(me.id)}),e.imageStreams=e.imageStreams.filter(function(me){return H.has(me.id)}),_2(e),X(W)}})}function w2(e,t,n,i,r,a,o){var s=h2(n,t,i),u=r.offline.progressCallback;WE(a,function(g,y){s.size=y,u(s,g)},function(g,y){l&&o&&c==y&&_o(e,"cenc",g)});var l=Kh(t)&&!a1(t),c=null;l&&(c=j2.get(e.g.keySystem));for(var d=new p2,h=m(t.textStreams),p=h.next();!p.done;p=h.next())d.g.set(p.value.id,52);for(h=m(t.imageStreams),p=h.next();!p.done;p=h.next())m2(d,p.value);for(h=m(t.variants),p=h.next();!p.done;p=h.next())g2(d,p.value);return a=P2(a,d,t,r),r=a.streams,a=a.Hh,(d=e.g)&&o&&(d.initData=[]),{yk:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.$d(),streams:r,sessionIds:o?Ug(e):[],drmInfo:d,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Hh:a}}function Kh(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function a1(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function o1(e,t,n,i){if(t.expiration=n.$d(),n=Ug(n),t.sessionIds=i?n:[],Kh(e)&&i&&!n.length)throw new D(2,9,9007)}f.remove=function(e){return zh(this,S2(this,e))};function S2(e,t){var n,i,r,a,o,s;return R(function(u){switch(u.g){case 1:if(pc(),n=Hh(t),n==null||n.g!="manifest")throw new D(2,9,9004,t);return i=n,r=new gn,$t(u,2),T(u,r.init(),4);case 4:return T(u,cc(r,i.Pb(),i.cb()),5);case 5:return a=u.h,T(u,a.getManifests([i.key()]),6);case 6:return o=u.h,s=o[0],T(u,Promise.all([T2(e,s,r),x2(a,i,s)]),2);case 2:return Ft(u),T(u,r.destroy(),8);case 8:wt(u,0)}})}function s1(e,t){for(var n=[],i=m(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&r.type=="video"?n.push({contentType:dt(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||r.type!="audio"||n.push({contentType:dt(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function T2(e,t,n){return R(function(i){return T(i,O2(e.g,e.h.drm,n,t),0)})}function x2(e,t,n){function i(){}var r=N2(n);return Gh(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}f.Rk=function(){return zh(this,A2(this))};function A2(e){var t,n,i,r,a,o,s,u,l,c;return R(function(d){switch(d.g){case 1:return pc(),t=e.g,n=e.h.drm,i=new gn,r=!1,$t(d,2),T(d,i.init(),4);case 4:a=[],ZE(i,function(h){return a.push(h)}),o=m(a),s=o.next();case 5:if(s.done){d.A(2);break}return u=s.value,T(d,u.getAll(),8);case 8:return l=d.h,T(d,e1(n,t,l),9);case 9:return c=d.h,T(d,u.remove(c),10);case 10:c.length!=l.length&&(r=!0),s=o.next(),d.A(5);break;case 2:return Ft(d),T(d,i.destroy(),11);case 11:wt(d,3);break;case 3:return d.return(!r)}})}f.list=function(){return zh(this,k2())};function k2(){var e,t,n;return R(function(i){switch(i.g){case 1:return pc(),e=[],t=new gn,$t(i,2),T(i,t.init(),4);case 4:return n=Promise.resolve(),QE(t,function(r,a){n=n.then(function(){var o;return R(function(s){if(s.g==1)return T(s,a.getAllManifests(),2);o=s.h,o.forEach(function(u,l){u=Gh(new ki("manifest",r.Pb,r.cb,l),u),e.push(u)}),X(s)})})}),T(i,n,2);case 2:return Ft(i),T(i,t.destroy(),6);case 6:wt(i,3);break;case 3:return i.return(e)}})}function I2(e,t,n,i){var r,a,o,s,u;return R(function(l){if(l.g==1)return r=null,a=e.g,o={networkingEngine:a,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(c){r=c},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return i.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(i.manifest),Mn(e),T(l,n.start(t,o),2);if(l.g!=3)return s=l.h,Mn(e),u=l1(s),T(l,Promise.all(ud(u,function(c){return c.createSegmentIndex()})),3);if(Mn(e),r)throw r;return l.return(s)})}function E2(e,t,n){var i,r,a,o,s,u,l,c,d,h,p,g,y,b,A;return R(function(x){switch(x.g){case 1:return T(x,u1(e,t),2);case 2:if(i=x.h,i!="text/vtt")throw new D(1,2,2017,t);return T(x,C2(t,e.g,e.h.streaming.retryParameters),3);case 3:if(r=x.h,a=Co(i),!a)throw new D(2,2,2014,i);for(o=a(),s={periodStart:0,segmentStart:0,segmentEnd:n.presentationTimeline.getDuration(),vttOffset:0},u=pe(r),l=o.parseMedia(u,s,t,[]),c=[],d=m(l),h=d.next(),p={};!h.done;p={Vf:void 0,od:void 0},h=d.next())p.od=h.value,p.Vf=null,g=function(k){return function(){return k.Vf==null&&(k.Vf=Mt([t],[k.od.payload])),k.Vf||[]}}(p),y=new se(p.od.startTime,p.od.endTime,g,0,null,null,0,0,1/0),p.od.payload.includes("#xywh")&&(b=p.od.payload.split("#xywh=")[1].split(","),b.length===4&&y.Mf({height:parseInt(b[3],10),positionX:parseInt(b[0],10),positionY:parseInt(b[1],10),width:parseInt(b[2],10)})),c.push(y);if(A=i,!c.length){x.A(4);break}return T(x,ja(c[0].P()[0],e.g,e.h.manifest.retryParameters),5);case 5:A=x.h;case 4:return x.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Re(c),mimeType:A||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([dt(A||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}function M2(e,t,n,i,r,a,o){var s,u,l;return R(function(c){if(c.g==1)return a?c.A(2):T(c,u1(e,n),3);if(c.g!=2&&(a=c.h),s={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Fu(0,t.presentationTimeline.getDuration(),[n]),mimeType:a||"",codecs:o||"",kind:r,encrypted:!1,drmInfos:[],keyIds:new Set,language:i,originalLanguage:i,label:null,type:xe,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([dt(a||"",o||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},u=dt(s.mimeType,s.codecs),l=Po(u),!l)throw new D(2,2,2014,a);return c.return(s)})}function u1(e,t){var n;return R(function(i){switch(i.g){case 1:return he(i,2),T(i,ja(t,e.g,e.h.streaming.retryParameters),4);case 4:n=i.h,ye(i,3);break;case 2:oe(i);case 3:if(n)return i.return(n);throw new D(1,2,2011,t)}})}function C2(e,t,n){var i,r,a;return R(function(o){return o.g==1?(i=Bn,r=yt([e],n),r.method="GET",T(o,t.request(i,r).promise,2)):(a=o.h,o.return(a.data))})}f.md=function(e,t,n,i){var r=this,a;return R(function(o){return o.g==1?(a=new Eu({wc:r.g,onError:t,zf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a.configure(n.drm),T(o,BS(a,e.variants,i),2)):o.g!=3?T(o,jg(a),3):o.return(a)})};function P2(e,t,n,i){var r=new Map,a=l1(n),o=new Map;a=m(a);for(var s=a.next();!s.done;s=a.next()){s=s.value;var u=R2(e,t,n,s,i,r);o.set(s.id,u)}for(e=m(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&o.get(t.audio.id).variantIds.push(t.id),t.video&&o.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(o.values()),Hh:Array.from(r.values())}}function R2(e,t,n,i,r,a){var o={id:i.id,originalId:i.originalId,groupId:i.groupId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,colorGamut:i.colorGamut,videoLayout:i.videoLayout,kind:i.kind,language:i.language,originalLanguage:i.originalLanguage,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,mssPrivateData:i.mssPrivateData,external:i.external,fastSwitching:i.fastSwitching,isAudioMuxedInVideo:i.isAudioMuxedInVideo},s=r.offline.numberOfParallelDownloads,u=s===0?i.id:0;return D2(i,n.presentationTimeline.Hb(),function(l,c){var d=_h(l),h=void 0;if(!a.has(d)){var p=l.endTime-l.startTime;p=n1(t,i.id)*p,p=Fb(e.g,p),a.set(d,new Ub(l,p,u,!1,c))}l.ba&&(h=_h(l.ba),a.has(h)||(p=n1(t,i.id)*.5,p=Fb(e.g,p),a.set(h,new Ub(l.ba,p,u,!0,c)))),o.segments.push({pendingInitSegmentRefId:h,initSegmentKey:h?0:null,startTime:l.startTime,endTime:l.endTime,appendWindowStart:l.appendWindowStart,appendWindowEnd:l.appendWindowEnd,timestampOffset:l.timestampOffset,tilesLayout:l.tilesLayout,pendingSegmentRefId:d,dataKey:0,mimeType:l.mimeType,codecs:l.codecs,thumbnailSprite:l.thumbnailSprite}),s!==0&&(u=(u+1)%s)}),o}function D2(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var i=e.segmentIndex.get(t);i;)n(i,t),i=e.segmentIndex.get(++t)}function Mn(e){if(e.j.g)throw new D(2,9,7001)}function pc(){if(!qh())throw new D(2,9,9e3)}function zh(e,t){return R(function(n){return n.g==1?(e.i.push(t),$t(n,2),T(n,t,4)):n.g!=2?n.return(n.h):(Ft(n),Qn(e.i,t),wt(n,0))})}function L2(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Qn(e.i,n)})}function N2(e){var t=new Set;e=m(e.streams);for(var n=e.next();!n.done;n=e.next()){n=m(n.value.segments);for(var i=n.next();!i.done;i=n.next())i=i.value,i.initSegmentKey!=null&&t.add(i.initSegmentKey),t.add(i.dataKey)}return Array.from(t)}function O2(e,t,n,i){var r,a,o;return R(function(s){return s.g==1?i.drmInfo?(r=e2(n),a=i.sessionIds.map(function(u){return{sessionId:u,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:s1(i,!1),videoCapabilities:s1(i,!0)}}),T(s,e1(t,e,a),2)):s.return():s.g!=3?(o=s.h,T(s,r.remove(o),3)):T(s,r.add(a.filter(function(u){return!o.includes(u.sessionId)})),0)})}function l1(e){for(var t=new Set,n=m(e.variants),i=n.next();!i.done;i=n.next())i=i.value,i.audio&&t.add(i.audio),i.video&&t.add(i.video);for(n=m(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(e=m(e.imageStreams),n=e.next();!n.done;n=e.next())t.add(n.value);return t}function _2(e){e.variants.map(function(a){return a.video});var t=new Set(e.variants.map(function(a){return a.audio}));e=e.textStreams;for(var n=m(t),i=n.next();!i.done;i=n.next()){i=m(t);for(var r=i.next();!r.done;r=i.next());}for(t=m(e),n=t.next();!n.done;n=t.next())for(n=m(e),i=n.next();!i.done;i=n.next());}Y("shaka.offline.Storage",Rt),Rt.deleteAll=function(){var e;return R(function(t){return t.g==1?(e=new gn,$t(t,2),T(t,t2(e),2)):t.g!=5?(Ft(t),T(t,e.destroy(),5)):wt(t,0)})},Rt.prototype.list=Rt.prototype.list,Rt.prototype.removeEmeSessions=Rt.prototype.Rk,Rt.prototype.remove=Rt.prototype.remove,Rt.prototype.store=Rt.prototype.store,Rt.prototype.getNetworkingEngine=Rt.prototype.Yb,Rt.prototype.getConfiguration=Rt.prototype.getConfiguration,Rt.prototype.configure=Rt.prototype.configure,Rt.prototype.destroy=Rt.prototype.destroy,Rt.support=qh;var j2=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");Fv("offline",qh);function sn(){}function An(e,t){for(e={priority:t||0,callback:e},t=0;t<Ns.length;t++)if(Ns[t].priority<e.priority){Ns.splice(t,0,e);return}Ns.push(e)}Y("shaka.polyfill",sn),sn.register=An,sn.installAll=function(){for(var e=m(Ns),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){Ee("Error installing polyfill!",n)}}};var Ns=[];function gc(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}gc.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=m(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=m(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},gc.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function c1(e){return e.startsWith("com.apple")?"cbcs":e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("org.w3")||e.startsWith("com.huawei")?"cenc":(Ee("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function d1(e){if(!e)return!1;e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function Wh(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&Te().ed())}function f1(){}var Os;function h1(){Te().Of()&&!Os&&!navigator.emeEncryptionSchemePolyfilled&&navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration&&(Os=navigator.requestMediaKeySystemAccess,navigator.requestMediaKeySystemAccess=U2,navigator.emeEncryptionSchemePolyfilled=!0)}function U2(e,t){var n=this,i;return R(function(r){return r.g==1?T(r,Os.call(n,e,t),2):(i=r.h,d1(i)?(navigator.requestMediaKeySystemAccess=Os,r.return(i)):(navigator.requestMediaKeySystemAccess=p1,r.return(p1.call(n,e,t))))})}function p1(e,t){var n=this,i,r,a,o,s,u,l,c,d,h,p,g;return R(function(y){if(y.g==1){for(i=c1(e),r=[],a=m(t),o=a.next();!o.done;o=a.next())s=o.value,u=g1(s.videoCapabilities,i),l=g1(s.audioCapabilities,i),s.videoCapabilities&&s.videoCapabilities.length&&!u.length||s.audioCapabilities&&s.audioCapabilities.length&&!l.length||(c=Object.assign({},s),c.videoCapabilities=u,c.audioCapabilities=l,r.push(c));if(!r.length)throw d=Error("Unsupported keySystem or supportedConfigurations."),d.name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return T(y,Os.call(n,e,r),2)}return h=y.h,g=p=null,r[0]&&(r[0].videoCapabilities&&(p=r[0].videoCapabilities[0].encryptionScheme),r[0].audioCapabilities&&(g=r[0].audioCapabilities[0].encryptionScheme)),y.return(new gc(h,p,g))})}function g1(e,t){return e&&e.filter(function(n){return Wh(n.encryptionScheme,t)})}sn.EmeEncryptionScheme=f1,f1.install=h1,An(h1);function m1(){}function v1(){"getOrInsert"in Map.prototype||(Map.prototype.getOrInsert=y1),"getOrInsertComputed"in Map.prototype||(Map.prototype.getOrInsertComputed=b1),"getOrInsert"in WeakMap.prototype||(WeakMap.prototype.getOrInsert=y1),"getOrInsertComputed"in WeakMap.prototype||(WeakMap.prototype.getOrInsertComputed=b1)}function y1(e,t){return this.has(e)||this.set(e,t),this.get(e)}function b1(e,t){return this.has(e)||this.set(e,t(e)),this.get(e)}sn.Map=m1,m1.install=v1,An(v1);function w1(){}var _s;function S1(){Te().Of()&&!_s&&!navigator.mediaCapabilitiesEncryptionSchemePolyfilled&&navigator.mediaCapabilities&&(_s=navigator.mediaCapabilities.decodingInfo,navigator.mediaCapabilities.decodingInfo=B2,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0)}function B2(e){var t=this,n,i;return R(function(r){switch(r.g){case 1:return T(r,_s.call(t,e),2);case 2:if(n=r.h,!n.supported||!e.keySystemConfiguration)return r.return(n);if(i=n.keySystemAccess,d1(i))return navigator.mediaCapabilities.decodingInfo=_s,r.return(n);if(navigator.mediaCapabilities.decodingInfo=T1,i){r.A(3);break}return T(r,x1(e),4);case 4:return n.keySystemAccess=r.h,r.return(n);case 3:return r.return(T1.call(t,e))}})}function T1(e){var t=this,n,i,r,a,o,s,u;return R(function(l){switch(l.g){case 1:return i=n=null,!e.keySystemConfiguration||(r=e.keySystemConfiguration,a=r.keySystem,i=r.audio&&r.audio.encryptionScheme,n=r.video&&r.video.encryptionScheme,o=c1(a),s={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},Wh(i,o)&&Wh(n,o))?T(l,_s.call(t,e),2):l.return(s);case 2:if(u=l.h,u.keySystemAccess){u.keySystemAccess=new gc(u.keySystemAccess,n,i),l.A(3);break}if(!e.keySystemConfiguration){l.A(3);break}return T(l,x1(e),5);case 5:u.keySystemAccess=l.h;case 3:return l.return(u)}})}function x1(e){var t,n;return R(function(i){if(i.g==1){var r=e.keySystemConfiguration,a=[],o=[];return r.audio&&a.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:r.audio.encryptionScheme}),r.video&&o.push({robustness:r.video.robustness||"",contentType:e.video.contentType,encryptionScheme:r.video.encryptionScheme}),r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},a.length&&(r.audioCapabilities=a),o.length&&(r.videoCapabilities=o),t=r,T(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=i.h,i.return(n)})}sn.MCapEncryptionScheme=w1,w1.install=S1,An(S1,-2);function mc(){}function A1(){Te().kc()||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),mc.originalMcap=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=F2)}function F2(e){var t,n,i,r,a,o,s,u,l,c,d;return R(function(h){switch(h.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},Te(),n=e.video,i=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(r=n.contentType,a=$r().canPlayType(r)!="",!a)||i&&(o=i.contentType,s=$r().canPlayType(o)!="",!s))return h.return(t)}else return h.return(t);h.A(2);break}if(!Ai())return h.return(t);if(!n){h.A(3);break}return T(h,V2(n),4);case 4:if(u=h.h,!u)return h.return(t);case 3:if(i){var p=Te().Oa(),g=i.contentType;if(p==="CAST"&&i.spatialRendering&&(g+="; spatialRendering=true"),l=Zt(g),!l)return h.return(t)}case 2:return e.keySystemConfiguration?(c=e.keySystemConfiguration,T(h,H2(n,i,c),6)):(t.supported=!0,h.return(t));case 6:(d=h.h)&&(t.supported=!0,t.keySystemAccess=d);case 5:return h.return(t)}})}function V2(e){var t,n,i;return R(function(r){return r.g==1?(t=Te(),n=t.Oa(),n!=="CAST"?r.A(2):T(r,G2(e),3)):r.g!=2?(i=r.h,r.return(i)):r.return(Zt(e.contentType))})}function H2(e,t,n){var i,r,a,o,s,u,l,c,d,h,p,g;return R(function(y){switch(y.g){case 1:i=[],r=[],a=[],n.audio&&(o={robustness:n.audio.robustness||"",contentType:t.contentType},Te().Ci()&&t.contentType.includes('codecs="ac-3"')&&(o.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(o.encryptionScheme=n.audio.encryptionScheme,a.push(n.audio.encryptionScheme)),i.push(o)),n.video&&(s={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(s.encryptionScheme=n.video.encryptionScheme,a.push(n.video.encryptionScheme)),r.push(s)),u={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},i.length&&(u.audioCapabilities=i),r.length&&(u.videoCapabilities=r),l=e?e.contentType:"",c=t?t.contentType:"",d=yn(l)+";"+lr(l),h=yn(c)+";"+lr(c),p=n.keySystem,g=null,he(y,2);var b=Uc(d,h,p,a);if(fa.has(b)){b=Uc(d,h,p,a),g=fa.get(b)||null,y.A(4);break}return T(y,navigator.requestMediaKeySystemAccess(n.keySystem,[u]),5);case 5:b=g=y.h;var A=Uc(d,h,p,a);fa.set(A,b);case 4:ye(y,3);break;case 2:oe(y);case 3:return y.return(g)}})}function G2(e){var t,n,i,r,a;return R(function(o){if(o.g==1){if(!(P.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return o.return(Zt(e.contentType));switch(t=e.contentType,e.width&&e.height&&e.width>1280&&e.height>720&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(n=Math.round(e.framerate),n<24||n>30)&&(t+="; framerate="+e.framerate),i=e.transferFunction||"",i){case"":case"srgb":break;case"pq":t+="; eotf=smpte2084";break;case"hlg":t+="; eotf=arib-std-b67";break;default:return o.return(!1)}return r=!1,a=q2,a.has(t)?(r=a.get(t),o.A(2)):T(o,cast.__platform__.canDisplayType(t),3)}return o.g!=2&&(r=o.h,a.set(t,r)),o.return(r)})}sn.MediaCapabilities=mc,mc.install=A1,mc.originalMcap=null;var q2=new Map;An(A1,-1);function k1(){}function I1(){var e=Te(),t=e.Ga()==="WEBKIT"?e.Ba():null;for((P.MediaSource||P.ManagedMediaSource)&&t&&P.MediaSource&&(t<=12?(E1(),K2()):t<=15&&E1()),e=m(e.Mi()),t=e.next();!t.done;t=e.next())W2(t.value);(P.MediaSource||P.ManagedMediaSource)&&z2(),P.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&X2()}function E1(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,Et.apply(0,arguments));return t.abort=function(){},t}}function K2(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function z2(){if(P.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return Mo(n)!="mp2t"&&e(n)}}if(P.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);P.ManagedMediaSource.isTypeSupported=function(n){return Mo(n)!="mp2t"&&t(n)}}}function W2(e){var t=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(i){return lr(i)!=e&&t(i)},P.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);P.ManagedMediaSource.isTypeSupported=function(i){return lr(i)!=e&&n(i)}}}function X2(){var e=MediaSource.isTypeSupported;Te().gj()&&(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex(function(o){return o.startsWith("codecs=")});if(i<0)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),a=r.findIndex(function(o){return o.startsWith("vp09")});return a>=0&&(r[a]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; ")),e(t)})}sn.MediaSource=k1,k1.install=I1,An(I1);function Xh(){}var Yh,Jh,$h,Qh,Zh,ep;function M1(e){P.HTMLVideoElement&&P.WebKitMediaKeys&&P.shakaMediaKeysPolyfill!=np&&(e!==void 0&&e&&(Yh=!0,Jh=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),$h=HTMLMediaElement.prototype.setMediaKeys,Qh=P.MediaKeys,Zh=P.MediaKeySystemAccess,ep=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=J2,P.MediaKeys=js,P.MediaKeySystemAccess=vc,navigator.requestMediaKeySystemAccess=Y2,P.shakaMediaKeysPolyfill=np,bu.clear(),fa.clear())}function Y2(e,t){try{var n=new vc(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function J2(e){var t=this.mediaKeys;return t&&t!=e&&C1(t,null),delete this.mediaKeys,(this.mediaKeys=e)?C1(e,this):Promise.resolve()}function $2(e){if(e=pe(e.initData),ln(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=rr(e.subarray(4),!0),e=Zn(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=_n(e),this.dispatchEvent(t)}sn.PatchedMediaKeysApple=Xh,Xh.uninstall=function(){P.shakaMediaKeysPolyfill==np&&Yh&&(Yh=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Jh),HTMLMediaElement.prototype.setMediaKeys=$h,P.MediaKeys=Qh,P.MediaKeySystemAccess=Zh,navigator.requestMediaKeySystemAccess=ep,Jh=ep=$h=Zh=Qh=null,P.shakaMediaKeysPolyfill="",bu.clear(),fa.clear())},Xh.install=M1;function vc(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=m(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,r=!1;if(n.audioCapabilities)for(var a=m(n.audioCapabilities),o=a.next();!o.done;o=a.next())o=o.value,o.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.audioCapabilities.push(o),r=!0));if(n.videoCapabilities)for(n=m(n.videoCapabilities),a=n.next();!a.done;a=n.next())a=a.value,a.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.videoCapabilities.push(a),r=!0));i||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=r?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}vc.prototype.createMediaKeys=function(){var e=new js(this.keySystem);return Promise.resolve(e)},vc.prototype.getConfiguration=function(){return this.g};function js(e){this.h=new WebKitMediaKeys(e),this.g=new _e}js.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new tp(this.h)},js.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function C1(e,t){if(e.g.Qa(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",$2);try{return _a(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}js.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function tp(e){Ge.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new _e,this.sessionId="",this.expiration=NaN,this.closed=new qe,this.keyStatuses=new P1,this.onkeystatuseschange=null}rt(tp,Ge),f=tp.prototype,f.generateRequest=function(e,t){var n=this;this.h=new qe;try{var i=this.l.createSession("video/mp4",pe(t));this.i=i,this.sessionId=i.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(r){n.h&&(n.h.resolve(),n.h=null),r=new Map().set("messageType",n.keyStatuses.bc()==null?"license-request":"license-renewal").set("message",_n(r.message)),r=new Z("message",r),n.dispatchEvent(r)}),this.j.D(i,"webkitkeyadded",function(){n.g&&(yc(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(i,"webkitkeyerror",function(){var r=Error("EME PatchedMediaKeysApple key error");if(r.errorCode=n.i.error,n.h!=null)n.h.reject(r),n.h=null;else if(n.g!=null)n.g.reject(r),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:yc(n,"output-not-allowed");break;default:yc(n,"internal-error")}}),yc(this,"status-pending")}catch(r){this.h.reject(r)}return this.h},f.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},f.update=function(e){this.g=new qe;try{this.i.update(pe(e))}catch(t){this.g.reject(t)}return this.g},f.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Qa()}catch(e){this.closed.reject(e)}return this.closed},f.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function yc(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Z("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}function P1(){this.size=0,this.g=void 0}f=P1.prototype,f.bc=function(){return this.g},f.forEach=function(e){this.g&&e(this.g,Js.value())},f.get=function(e){if(this.has(e))return this.g},f.has=function(e){var t=Js.value();return!!(this.g&&Ci(e,t))},f.entries=function(){},f.keys=function(){},f.values=function(){};var np="apple";An(function(){P.HTMLVideoElement&&P.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||M1())});function R1(){}function D1(){if(P.MediaKeys){var e=Te();MediaKeys.prototype.setServerCertificate&&e.we()||(MediaKeys.prototype.setServerCertificate=Q2)}}function Q2(){return Promise.resolve(!1)}sn.PatchedMediaKeysCert=R1,R1.install=D1,An(D1);function L1(){}function N1(){if(!(!P.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)sp="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Z2,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=eM,P.MediaKeys=Us,P.MediaKeySystemAccess=bc,P.shakaMediaKeysPolyfill=tM}}function ip(e){var t=sp;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function Z2(e,t){try{var n=new bc(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function eM(e){var t=this.mediaKeys;return t&&t!=e&&O1(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&O1(e,this),Promise.resolve()}sn.PatchedMediaKeysWebkit=L1,L1.install=N1;function bc(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video"),t=m(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:a.initDataTypes,sessionTypes:["temporary"],label:a.label},s=!1;if(a.audioCapabilities)for(var u=m(a.audioCapabilities),l=u.next();!l.done;l=u.next())l=l.value,l.contentType&&(s=!0,r.canPlayType(l.contentType.split(";")[0],this.g)&&(o.audioCapabilities.push(l),i=!0));if(a.videoCapabilities)for(u=m(a.videoCapabilities),l=u.next();!l.done;l=u.next())l=l.value,l.contentType&&(s=!0,r.canPlayType(l.contentType,this.g)&&(o.videoCapabilities.push(l),i=!0));if(s||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),a.persistentState=="required"&&(n?(o.persistentState="required",o.sessionTypes=["persistent-license"]):i=!1),i){this.h=o;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}bc.prototype.createMediaKeys=function(){var e=new Us(this.g);return Promise.resolve(e)},bc.prototype.getConfiguration=function(){return this.h};function Us(e){this.l=e,this.h=null,this.g=new _e,this.i=[],this.j=new Map}function O1(e,t){e.h=t,e.g.Qa();var n=sp;t&&(e.g.D(t,n+"needkey",function(i){var r=new CustomEvent("encrypted");r.initDataType="cenc",r.initData=_n(i.initData),e.h.dispatchEvent(r)}),e.g.D(t,n+"keymessage",function(i){var r=rp(e,i.sessionId);r&&(i=new Map().set("messageType",r.keyStatuses.bc()==null?"licenserequest":"licenserenewal").set("message",i.message),i=new Z("message",i),r.h&&(r.h.resolve(),r.h=null),r.dispatchEvent(i))}),e.g.D(t,n+"keyadded",function(i){(i=rp(e,i.sessionId))&&i.ready()}),e.g.D(t,n+"keyerror",function(i){var r=rp(e,i.sessionId);if(r){var a=Error("EME v0.1b key error"),o=i.errorCode;o.systemCode=i.systemCode,a.errorCode=o,!i.sessionId&&r.h?(i.systemCode==45&&(a.message="Unsupported session type."),r.h.reject(a),r.h=null):i.sessionId&&r.g?(r.g.reject(a),r.g=null):(a=i.systemCode,i.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?wc(r,"output-restricted"):a==1?wc(r,"expired"):wc(r,"internal-error"))}}))}Us.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new ap(t,this.l,e),this.i.push(e),e},Us.prototype.setServerCertificate=function(){return Promise.resolve(!1)},Us.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function rp(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function ap(e,t,n){Ge.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new qe,this.keyStatuses=new j1,this.onkeystatuseschange=null}rt(ap,Ge),f=ap.prototype,f.ready=function(){wc(this,"usable"),this.g&&this.g.resolve(),this.g=null};function _1(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var i=pe(Zn("LOAD_SESSION|"+n));else{var r=Zn("PERSISTENT|");i=mt(r,t)}else i=pe(t)}catch(o){return Promise.reject(o)}e.h=new qe;var a=ip("generateKeyRequest");try{e.j[a](e.i,i)}catch(o){if(o.name!="InvalidStateError")return e.h=null,Promise.reject(o);new Ae(function(){try{e.j[a](e.i,i)}catch(s){e.h.reject(s),e.h=null}}).ka(.01)}return e.h}function op(e,t,n){if(e.g)e.g.then(function(){return op(e,t,n)}).catch(function(){return op(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var i=ot(n),r=JSON.parse(i);r.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=jn(r.keys[0].k),r=jn(r.keys[0].kid)}else i=pe(n),r=null;var a=ip("addKey");try{e.j[a](e.i,i,r,e.sessionId)}catch(o){e.g.reject(o),e.g=null}}}function wc(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Z("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}f.generateRequest=function(e,t){return _1(this,t,null)},f.load=function(e){return this.l=="persistent-license"?_1(this,null,e):Promise.reject(Error("Not a persistent session."))},f.update=function(e){var t=new qe;return op(this,t,e),t},f.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=ip("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},f.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function j1(){this.size=0,this.g=void 0}f=j1.prototype,f.bc=function(){return this.g},f.forEach=function(e){this.g&&e(this.g,Js.value())},f.get=function(e){if(this.has(e))return this.g},f.has=function(e){var t=Js.value();return!!(this.g&&Ci(e,t))},f.entries=function(){},f.keys=function(){},f.values=function(){};var sp="",tM="webkit";An(N1);function U1(){}function B1(){P.crypto&&("randomUUID"in P.crypto||(P.crypto.randomUUID=nM))}function nM(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}sn.RandomUUID=U1,U1.install=B1,An(B1);function F1(){}function V1(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:iM})}function iM(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}sn.Symbol=F1,F1.install=V1,An(V1);function H1(){}function G1(){for(var e=m([Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]),t=e.next();!t.done;t=e.next())t=t.value,t.prototype.indexOf||(t.prototype.indexOf=rM),t.prototype.lastIndexOf||(t.prototype.lastIndexOf=aM),t.prototype.includes||(t.prototype.includes=oM)}function rM(e,t){return Array.prototype.indexOf.call(this,e,t)}function aM(e,t){return Array.prototype.lastIndexOf.call(this,e,t)}function oM(e,t){return this.indexOf(e,t)!==-1}sn.TypedArray=H1,H1.install=G1,An(G1);function q1(){}function K1(){if(P.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}sn.VideoPlayPromise=q1,q1.install=K1,An(K1);function z1(){}function W1(){if(P.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||typeof $r().webkitDroppedFrameCount=="number")&&(e.getVideoPlaybackQuality=sM)}}function sM(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}sn.VideoPlaybackQuality=z1,z1.install=W1,An(W1);function X1(){}function Y1(){if(!P.VTTCue&&P.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=up;else if(t==6)e=uM;else{try{var n=!!up(1,2,"")}catch{n=!1}n&&(e=up)}e&&(P.VTTCue=function(i,r,a){return e(i,r,a)})}}function up(e,t,n){return new P.TextTrackCue(e,t,n)}function uM(e,t,n){return new P.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}sn.VTTCue=X1,X1.install=Y1,An(Y1);function Pt(e){Ge.call(this),this.g=e,this.m=null,this.h=[],this.j=-1,this.i=this.l=null,this.o=new _e}rt(Pt,Ge),f=Pt.prototype,f.destroy=function(){var e=this;return R(function(t){if(t.g==1)return T(t,e.removeAllItems(),2);e.g=null,e.o&&(e.o.release(),e.o=null),Ge.prototype.release.call(e),X(t)})},f.configure=function(e){this.m=e},f.getConfiguration=function(){return this.m},f.getCurrentItem=function(){return this.h.length&&this.j>=0&&this.j<this.h.length?this.h[this.j]:null},f.getCurrentItemIndex=function(){return this.j},f.getItems=function(){return this.h.slice()},f.insertItems=function(e){this.h.push.apply(this.h,z(e)),this.dispatchEvent(new Z("itemsinserted"))},f.removeAllItems=function(){var e=this,t,n,i,r;return R(function(a){if(a.g==1)return e.o.Qa(),e.h.length&&e.j>=0?T(a,e.g.Dc(),2):a.A(2);if(a.g!=4){for(t=[],e.i&&(e.i.preloadManager.l||t.push(e.i.preloadManager.destroy()),e.i=null),e.l&&(e.l.preloadManager.l||t.push(e.l.preloadManager.destroy()),e.l=null),n=m(e.h),i=n.next();!i.done;i=n.next())r=i.value,r.preloadManager&&!r.preloadManager.l&&t.push(r.preloadManager.destroy());return t.length?T(a,Promise.all(t),4):a.A(4)}e.h=[],e.j=-1,e.dispatchEvent(new Z("itemsremoved")),X(a)})},f.playItem=function(e){var t=this,n,i,r,a,o,s,u,l,c,d,h,p,g,y,b,A,x;return R(function(k){switch(k.g){case 1:if(t.o.Qa(),!t.h.length||e>=t.h.length)throw new D(2,7,7007);if(n=t.getCurrentItem(),i=t.h[e],t.j!=e&&(t.j=e,t.dispatchEvent(new Z("currentitemchanged"))),r=t.g.bf(),a=t.m?t.m.preloadNextUrlWindow:0,a>0&&(o=!1,t.o.D(r,"timeupdate",function(){var M,N,I,C;return R(function(E){switch(E.g){case 1:if(t.l||t.h.length<=1||o||t.g.W()||!r.duration)return E.return();if(M=t.g.Ra().end-r.currentTime,isNaN(M)){E.A(0);break}if(!(M<=a)){E.A(0);break}if(N=t.m&&t.m.repeatMode,I=null,t.j+1<t.h.length?I=t.h[t.j+1]:N==1&&(I=t.h[0]),!I||I.preloadManager&&!I.preloadManager.l){E.A(0);break}return o=!0,C=null,he(E,5),T(E,t.g.preload(I.manifestUri,I.startTime,I.mimeType,I.config),7);case 7:C=E.h,ye(E,6);break;case 5:oe(E),C=null;case 6:t.l={item:I,preloadManager:C},o=!1,X(E)}})})),t.o.D(t.g,"complete",function(){var M=t.m&&t.m.repeatMode,N=!1;if(M==2)N=!0;else{var I=t.j+1;I<t.h.length?t.playItem(I):M==1&&(t.h.length==1?N=!0:t.playItem(0))}N&&(r.paused?(r.currentTime=t.g.Ra().start,r.play()):t.o.D(r,"paused",function(){r.currentTime=t.g.Ra().start,r.play()}))}),s=i.manifestUri,i.preloadManager&&!i.preloadManager.l&&(s=i.preloadManager),u=!1,t.l&&t.l.item==i&&t.l.preloadManager?s=t.l.preloadManager:t.i&&t.i.item==i&&t.i.preloadManager&&(s=t.i.preloadManager,u=!0),!t.i){k.A(2);break}if(u||t.i.preloadManager.l){k.A(3);break}return T(k,t.i.preloadManager.destroy(),3);case 3:t.i=null;case 2:if(!(t.m&&t.m.preloadPrevItem&&n&&t.g.ae()===jt)){k.A(5);break}return l=null,he(k,6),T(k,t.g.kj(),8);case 8:l=k.h,ye(k,7);break;case 6:oe(k),l=null;case 7:t.i={item:n,preloadManager:l};case 5:return i.config&&(t.g.Pi(),t.g.configure(i.config)),T(k,t.g.load(s,i.startTime,i.mimeType),9);case 9:if(t.l=null,i.extraText)for(c=m(i.extraText),d=c.next();!d.done;d=c.next())h=d.value,h.mime?t.g.Sd(h.uri,h.language,h.kind,h.mime,h.codecs):t.g.Sd(h.uri,h.language,h.kind);if(i.extraThumbnail)for(p=m(i.extraThumbnail),g=p.next();!g.done;g=p.next())y=g.value,t.g.Pe(y);if(i.extraChapter)for(b=m(i.extraChapter),A=b.next();!A.done;A=b.next())x=A.value,t.g.Oe(x.uri,x.language,x.mime);X(k)}})},Y("shaka.queue.QueueManager",Pt),Pt.prototype.playItem=Pt.prototype.playItem,Pt.prototype.removeAllItems=Pt.prototype.removeAllItems,Pt.prototype.insertItems=Pt.prototype.insertItems,Pt.prototype.getItems=Pt.prototype.getItems,Pt.prototype.getCurrentItemIndex=Pt.prototype.getCurrentItemIndex,Pt.prototype.getCurrentItem=Pt.prototype.getCurrentItem,Pt.prototype.getConfiguration=Pt.prototype.getConfiguration,Pt.prototype.configure=Pt.prototype.configure,Pt.prototype.destroy=Pt.prototype.destroy,xl=function(e){return new Pt(e)};function Cn(){}Cn.prototype.parseInit=function(){},Cn.prototype.setSequenceMode=function(){},Cn.prototype.setManifestType=function(){},Cn.prototype.parseMedia=function(e,t){var n=null,i=[];e=ot(e).split(/\r?\n/),e=m(e);for(var r=e.next();!r.done;r=e.next())if((r=r.value)&&!/^\s+$/.test(r)&&(r=lM.exec(r))){var a=cM.exec(r[1]);a=parseInt(a[1],10)*60+parseFloat(a[2].replace(",",".")),r=new Qe(a,t.segmentEnd?t.segmentEnd:a+2,r[2]),n&&(n.endTime=a,i.push(n)),n=r}return n&&i.push(n),i},Y("shaka.text.LrcTextParser",Cn),Cn.prototype.parseMedia=Cn.prototype.parseMedia,Cn.prototype.setManifestType=Cn.prototype.setManifestType,Cn.prototype.setSequenceMode=Cn.prototype.setSequenceMode,Cn.prototype.parseInit=Cn.prototype.parseInit;var lM=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,cM=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;Ot("application/x-subtitle-lrc",function(){return new Cn});function kn(){this.g="UNKNOWN"}kn.prototype.parseInit=function(){},kn.prototype.setSequenceMode=function(){},kn.prototype.setManifestType=function(e){this.g=e},kn.prototype.parseMedia=function(e,t,n,i){var r=ot(e);if(e=[],r=="")return e;var a=Fr(r,"tt",!0);if(!a)throw new D(2,2,2005,"Failed to parse TTML.");if(r=fi(a,"body")[0],!r)return[];var o=yi(a,Bs,"frameRate"),s=yi(a,Bs,"subFrameRate"),u=yi(a,Bs,"frameRateMultiplier"),l=yi(a,Bs,"tickRate"),c=yi(a,Bs,"cellResolution"),d=a.attributes["xml:space"]||"default",h=yi(a,xc,"extent");if(d!="default"&&d!="preserve")throw new D(2,2,2005,"Invalid xml:space value: "+d);d=d=="default",o=new gM(o,s,u,l),c=pM(c),s=fi(a,"metadata")[0],s=(s?s.children:[]).filter(function(y){return y!=`
`}),u=fi(a,"style"),a=fi(a,"region"),l=[];for(var p=m(a),g=p.next();!g.done;g=p.next())(g=dM(this,g.value,u,h))&&l.push(g);if(Ve(r,"p").length)throw new D(2,2,2001,"<p> can only be inside <div> in TTML");for(h=m(Ve(r,"div")),p=h.next();!p.done;p=h.next())if(Ve(p.value,"span").length)throw new D(2,2,2001,"<span> can only be inside <p> in TTML");return(t=J1(this,r,t,o,s,u,a,l,d,c,null,!1,n,i))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function J1(e,t,n,i,r,a,o,s,u,l,c,d,h,p){var g=c;if(nu(t)){if(!d)return null;var y={tagName:"span",children:[pt(t)],attributes:{},parent:null}}else y=t;for(var b=null,A=m(ow),x=A.next();!x.done&&!(b=Tc(y,"backgroundImage",r,"#",x.value)[0]);x=A.next());A=null,x=yi(y,ow,"backgroundImage");var k=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if(x&&k.test(x)){if(A=parseInt(x.split(":").pop(),10)-1,A>=p.length)return null;A=p[A]}else h&&x&&!x.startsWith("#")&&(k=new ht(h),x=new ht(x),(x=k.resolve(x).toString())&&(A=x));if((t.tagName=="p"||b||A)&&(d=!0),t=d,x=(y.attributes["xml:space"]||(u?"default":"preserve"))=="default",k=y.children.every(nu),u=[],!k)for(var M=m(y.children),N=M.next();!N.done;N=M.next())(N=J1(e,N.value,n,i,r,a,o,s,x,l,y,d,h,p))&&u.push(N);if(r=c!=null,h=pt(y),h=y.children.length&&h&&/\S/.test(h),M=y.attributes.begin||y.attributes.end||y.attributes.dur,!(M||h||y.tagName=="br"||u.length!=0||r&&!x))return null;for(p=Z1(y,i),h=p.start,p=p.end;g&&g.tagName&&g.tagName!="tt";)p=hM(g,i,h,p),h=p.start,p=p.end,g=g.parent;if(h==null&&(h=0),h+=n.periodStart,p=p==null?1/0:p+n.periodStart,e.g!=="HLS"&&(h=Math.max(h,n.segmentStart),p=Math.min(p,n.segmentEnd)),!M&&u.length>0)for(h=1/0,p=0,n=m(u),i=n.next();!i.done;i=n.next())i=i.value,h=Math.min(h,i.startTime),p=Math.max(p,i.endTime);if(y.tagName=="br")return e=new Qe(h,p,""),e.lineBreak=!0,e;if(n="",k&&(n=nn(pt(y)||""),x&&(n=n.replace(/\s+/g," "))),n=new Qe(h,p,n),n.nestedCues=u,d||(n.isContainer=!0),l&&(n.cellResolution=l),l=Tc(y,"region",o,"")[0],y.attributes.region&&l&&l.attributes["xml:id"]){var I=l.attributes["xml:id"];n.region=s.filter(function(C){return C.id==I})[0]}return s=l,c&&r&&!y.attributes.region&&!y.attributes.style&&(s=Tc(c,"region",o,"")[0]),fM(e,n,y,s,b,A,a,t,u.length==0),n}function dM(e,t,n,i){var r=new Ur,a=t.attributes["xml:id"];if(!a)return null;r.id=a,a=null,i&&(a=hp.exec(i)||pp.exec(i)),i=a?Number(a[1]):null,a=a?Number(a[2]):null;var o,s=Sc(e,t,n,"extent");if(s){var u=(o=hp.exec(s))||pp.exec(s);u!=null&&(r.width=Number(u[1]),r.height=Number(u[2]),o||(i!=null&&(r.width=r.width*100/i),a!=null&&(r.height=r.height*100/a)),r.widthUnits=o||i!=null?vn:0,r.heightUnits=o||a!=null?vn:0)}return(e=Sc(e,t,n,"origin"))&&(u=(o=hp.exec(e))||pp.exec(e),u!=null&&(r.viewportAnchorX=Number(u[1]),r.viewportAnchorY=Number(u[2]),o?s||(r.width=100-r.viewportAnchorX,r.widthUnits=vn,r.height=100-r.viewportAnchorY,r.heightUnits=vn):(a!=null&&(r.viewportAnchorY=r.viewportAnchorY*100/a),i!=null&&(r.viewportAnchorX=r.viewportAnchorX*100/i)),r.viewportAnchorUnits=o||i!=null?vn:0)),r}function lp(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&(t=t[1].split(","),t.length==4)?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function fM(e,t,n,i,r,a,o,s,u){if(s=s||u,Yt(e,n,i,o,"direction",s)=="rtl"&&(t.direction="rtl"),u=Yt(e,n,i,o,"writingMode",s),u=="tb"||u=="tblr"?t.writingMode="vertical-lr":u=="tbrl"?t.writingMode="vertical-rl":u=="rltb"||u=="rl"?t.direction="rtl":u&&(t.direction=Io),(u=Yt(e,n,i,o,"textAlign",!0))?(t.positionAlign=yM.get(u),t.lineAlign=vM.get(u),t.textAlign=Xc[u.toUpperCase()]):t.textAlign=Si,(u=Yt(e,n,i,o,"displayAlign",!0))&&(t.displayAlign=$p[u.toUpperCase()]),(u=Yt(e,n,i,o,"color",s))&&(t.color=lp(u)),(u=Yt(e,n,i,o,"backgroundColor",s))&&(t.backgroundColor=lp(u)),(u=Yt(e,n,i,o,"border",s))&&(t.border=u),u=Yt(e,n,i,o,"fontFamily",s))switch(u){case"monospaceSerif":t.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":t.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":t.fontFamily="sans-serif";break;case"monospaceSansSerif":t.fontFamily="Consolas,monospace";break;case"proportionalSerif":t.fontFamily="serif";break;default:t.fontFamily=u.split(",").filter(function(l){return l!="default"}).join(",")}switch((u=Yt(e,n,i,o,"fontWeight",s))&&u=="bold"&&(t.fontWeight=ya),u=Yt(e,n,i,o,"wrapOption",s),t.wrapLine=!(u&&u=="noWrap"),(u=Yt(e,n,i,o,"lineHeight",s))&&u.match(oo)&&(t.lineHeight=u),(u=Yt(e,n,i,o,"fontSize",s))&&(u.match(oo)||u.match(mM))&&(t.fontSize=u),(u=Yt(e,n,i,o,"fontStyle",s))&&(t.fontStyle=tg[u.toUpperCase()]),r?(a=r.attributes.imageType||r.attributes.imagetype,u=r.attributes.encoding,r=pt(r).trim(),a=="PNG"&&u=="Base64"&&r&&(t.backgroundImage="data:image/png;base64,"+r)):a&&(t.backgroundImage=a),(r=Yt(e,n,i,o,"textOutline",s))&&(r=r.split(" "),r[0].match(oo)?t.textStrokeColor=t.color:(t.textStrokeColor=lp(r[0]),r.shift()),r[0]&&r[0].match(oo)?t.textStrokeWidth=r[0]:t.textStrokeColor=""),(r=Yt(e,n,i,o,"letterSpacing",s))&&r.match(oo)&&(t.letterSpacing=r),(r=Yt(e,n,i,o,"linePadding",s))&&r.match(oo)&&(t.linePadding=r),(r=Yt(e,n,i,o,"opacity",s))&&(t.opacity=parseFloat(r)),(r=Sc(e,i,o,"textDecoration"))&&$1(t,r),(r=cp(e,n,o,"textDecoration"))&&$1(t,r),(r=Yt(e,n,i,o,"textCombine",s))&&(t.textCombineUpright=r),Yt(e,n,i,o,"ruby",s)){case"container":t.rubyTag="ruby";break;case"text":t.rubyTag="rt"}}function $1(e,t){t=m(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(Oi)||e.textDecoration.push(Oi);break;case"noUnderline":e.textDecoration.includes(Oi)&&Qn(e.textDecoration,Oi);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Qn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Qn(e.textDecoration,"overline")}}function Yt(e,t,n,i,r,a){return a=a===void 0?!0:a,(t=cp(e,t,i,r))?t:a?Sc(e,n,i,r):null}function Sc(e,t,n,i){if(!t)return null;var r=yi(t,xc,i);return r||Q1(e,t,n,i)}function cp(e,t,n,i){var r=yi(t,xc,i);return r||Q1(e,t,n,i)}function Q1(e,t,n,i){t=Tc(t,"style",n,"");for(var r=null,a=0;a<t.length;a++){var o=Li(t[a],"urn:ebu:tt:style",i);o||(o=yi(t[a],xc,i)),o||(o=cp(e,t[a],n,i)),o&&(r=o)}return r}function Tc(e,t,n,i,r){var a=[];if(!e||n.length<1)return a;var o=e;for(e=null;!e&&!(e=r?Li(o,r,t):o.attributes[t])&&(o=o.parent,o););if(t=e){for(t=m(t.split(" ")),r=t.next();!r.done;r=t.next())for(r=r.value,e=m(n),o=e.next();!o.done;o=e.next())if(o=o.value,i+o.attributes["xml:id"]==r){a.push(o);break}}return a}function hM(e,t,n,i){return e=Z1(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),i==null?i=e.end:e.start!=null&&(i+=e.start),{start:n,end:i}}function Z1(e,t){var n=dp(e.attributes.begin,t),i=dp(e.attributes.end,t);return e=dp(e.attributes.dur,t),i==null&&e!=null&&(i=n+e),{start:n,end:i}}function dp(e,t){var n=null;if(ew.test(e)){e=ew.exec(e),n=Number(e[1]);var i=Number(e[2]),r=Number(e[3]),a=Number(e[4]);a+=(Number(e[5])||0)/t.h,r+=a/t.frameRate,n=r+i*60+n*3600}else if(tw.test(e))n=fp(tw,e);else if(nw.test(e))n=fp(nw,e);else if(iw.test(e))e=iw.exec(e),n=Number(e[1])/t.frameRate;else if(rw.test(e))e=rw.exec(e),n=Number(e[1])/t.g;else if(aw.test(e))n=fp(aw,e);else if(e)throw new D(2,2,2001,"Could not parse cue time range in TTML");return n}function fp(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+(Number(e[2])||0)*60+(Number(e[1])||0)*3600}function pM(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}Y("shaka.text.TtmlTextParser",kn),kn.prototype.parseMedia=kn.prototype.parseMedia,kn.prototype.setManifestType=kn.prototype.setManifestType,kn.prototype.setSequenceMode=kn.prototype.setSequenceMode,kn.prototype.parseInit=kn.prototype.parseInit;function gM(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var hp=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,mM=/^(\d{1,4}(?:\.\d+)?|100)%$/,oo=/^(\d+px|\d+em|\d*\.?\d+c)$/,pp=/^(\d+)px (\d+)px$/,ew=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,tw=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,nw=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,iw=/^(\d*(?:\.\d*)?)f$/,rw=/^(\d*(?:\.\d*)?)t$/,aw=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),vM=new Map().set("left",Hr).set("center","center").set("right","end").set("start",Hr).set("end","end"),yM=new Map().set("left","line-left").set("center","center").set("right","line-right"),Bs=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],xc=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],ow=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];Ot("application/ttml+xml",function(){return new kn});function At(){this.g=new kn}At.prototype.parseInit=function(e){var t=!1;if(new Ke().box("moov",be).box("trak",be).box("mdia",be).box("minf",be).box("stbl",be).S("stsd",Vi).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new D(2,2,2007)},At.prototype.setSequenceMode=function(e){this.g.setSequenceMode(e)},At.prototype.setManifestType=function(e){this.g.setManifestType(e)},At.prototype.parseMedia=function(e,t,n){var i=[],r=null,a=[],o=new Map,s=[];if(new Ke().box("moof",be).box("traf",be).S("tfhd",function(A){r=Mu(A.reader,A.flags).Yd}).S("trun",function(A){A=Ru(A.reader,A.version,A.flags),A=m(A.nh);for(var x=A.next();!x.done;x=A.next())s.push(x.value.sampleSize||r||0)}).S("subs",function(A){for(var x=A.reader,k=x.U(),M=-1,N=0;N<k;N++){var I=x.U();M+=I,I=x.Ca();for(var C=[],E=0;E<I;E++)A.version==1?C.push(x.U()):C.push(x.Ca()),x.Z(),x.Z(),x.U();o.set(M,C)}}).box("mdat",Ea(function(A){a.push(A)},!1)).parse(e,!1),a.length==0)throw new D(2,2,2007);e=mt.apply(Vt,z(a));for(var u=0,l=0;l<s.length;l++){var c=pe(e,u,s[l]);u+=s[l];var d=o.get(l);if(d&&d.length){for(var h=pe(c,0,d[0]),p=[],g=d[0],y=1;y<d.length;y++){var b=pe(c,g,d[y]);b=Qs(b),p.push("data:image/png;base64,"+b),g+=d[y]}i=i.concat(this.g.parseMedia(h,t,n,p))}else i=i.concat(this.g.parseMedia(c,t,n,[]))}return i},Y("shaka.text.Mp4TtmlParser",At),At.prototype.parseMedia=At.prototype.parseMedia,At.prototype.setManifestType=At.prototype.setManifestType,At.prototype.setSequenceMode=At.prototype.setSequenceMode,At.prototype.parseInit=At.prototype.parseInit,Ot('application/mp4; codecs="stpp"',function(){return new At}),Ot('application/mp4; codecs="stpp.ttml"',function(){return new At}),Ot('application/mp4; codecs="stpp.ttml.im1i"',function(){return new At}),Ot('application/mp4; codecs="stpp.ttml.im1t"',function(){return new At}),Ot('application/mp4; codecs="stpp.ttml.im2i"',function(){return new At}),Ot('application/mp4; codecs="stpp.ttml.im2t"',function(){return new At}),Ot('application/mp4; codecs="stpp.ttml.etd1"',function(){return new At}),Ot('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new At}),Ot('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new At}),Ot('application/mp4; codecs="stpp.TTML.im1t"',function(){return new At});function un(){this.g="UNKNOWN"}un.prototype.parseInit=function(){},un.prototype.setSequenceMode=function(){},un.prototype.setManifestType=function(e){this.g=e},un.prototype.parseMedia=function(e,t){e=ot(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new D(2,2,2e3);if(e=t.vttOffset,this.g=="HLS"&&n[0].includes("X-TIMESTAMP-MAP")){var i=n[0];if(e=i.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=i.match(/MPEGTS:(\d+)/m),!e||!i)throw new D(2,2,2e3);if(e=va(e[1]),e==null)throw new D(2,2,2e3);i=Number(i[1]);for(var r=t.segmentStart-t.periodStart;r>=95443.7176888889;)r-=95443.7176888889,i+=8589934592;e=t.periodStart+i/9e4-e}for(t=[],i=m(n[0].split(`
`)),r=i.next();!r.done;r=i.next())if(r=r.value,/^Region:/.test(r)){r=new ga(r);var a=new Ur;Br(r),ma(r);for(var o=Br(r);o;){var s=a,u=o;(o=/^id=(.*)$/.exec(u))?s.id=o[1]:(o=/^width=(\d{1,2}|100)%$/.exec(u))?s.width=Number(o[1]):(o=/^lines=(\d+)$/.exec(u))?(s.height=Number(o[1]),s.heightUnits=2):(o=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.regionAnchorX=Number(o[1]),s.regionAnchorY=Number(o[2])):(o=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.viewportAnchorX=Number(o[1]),s.viewportAnchorY=Number(o[2])):/^scroll=up$/.exec(u)&&(s.scroll="up"),ma(r),o=Br(r)}t.push(a)}for(i=new Map,Yp(i),r=[],n=m(n.slice(1)),a=n.next();!a.done;a=n.next()){if(a=a.value.split(`
`),(a.length!=1||a[0])&&!/^NOTE($|[ \t])/.test(a[0])&&a[0]=="STYLE"){for(s=[],o=-1,u=1;u<a.length;u++)a[u].includes("::cue")&&(s.push([]),o=s.length-1),o!=-1&&(s[o].push(a[u]),a[u].includes("}")&&(o=-1));for(s=m(s),o=s.next();!o.done;o=s.next()){var l=o.value;o="global",(u=l[0].match(/\((.*)\)/))&&(o=u.pop()),u=l.slice(1,-1),l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(u=l[1].split(";")),(l=i.get(o))||(l=new Qe(0,0,""));for(var c=!1,d=0;d<u.length;d++){var h=/^\s*([^:]+):\s*(.*)/.exec(u[d]);if(h){var p=h[2].trim().replace(";","");switch(h[1].trim()){case"background-color":case"background":c=!0,l.backgroundColor=p;break;case"color":c=!0,l.color=p;break;case"font-family":c=!0,l.fontFamily=p;break;case"font-size":c=!0,l.fontSize=p;break;case"font-weight":(parseInt(p,10)>=700||p=="bold")&&(c=!0,l.fontWeight=ya);break;case"font-style":switch(p){case"normal":c=!0,l.fontStyle=Jc;break;case"italic":c=!0,l.fontStyle=ba;break;case"oblique":c=!0,l.fontStyle="oblique"}break;case"opacity":c=!0,l.opacity=parseFloat(p);break;case"text-combine-upright":c=!0,l.textCombineUpright=p;break;case"text-shadow":c=!0,l.textShadow=p;break;case"white-space":c=!0,l.wrapLine=p!="noWrap"}}}c&&i.set(o,l)}}if(l=a,c=e,l.length==1&&!l[0]||/^NOTE($|[ \t])/.test(l[0])||l[0]=="STYLE"||l[0]=="REGION")a=null;else if(a=null,l[0].includes("-->")||(a=l[0],l.splice(0,1)),s=new ga(l[0]),o=To(s),d=ar(s,/[ \t]+--\x3e[ \t]+/g),u=To(s),o==null||d==null||u==null)Ee("Failed to parse VTT time code. Cue skipped:",a,l),a=null;else{for(o+=c,u+=c,o<0&&(o=0),c=l.slice(1).join(`
`).trim(),i.has("global")?(l=i.get("global").clone(),l.startTime=o,l.endTime=u,l.payload=c):l=new Qe(o,u,c),ma(s),o=Br(s);o;)sw(l,o,t),ma(s),o=Br(s);uu(l,i),a!=null&&(l.id=a),a=l}a&&r.push(a)}return r};function sw(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],t=="middle"?e.textAlign=Si:e.textAlign=Xc[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=i[1]=="lr"?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":lu)):(i=/^region:(.*)$/.exec(t))?(t=bM(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Yc[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Eo,e.line=Number(n[1]),n[2]&&(e.lineAlign=Yc[n[2].toUpperCase()]))}function bM(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}Y("shaka.text.VttTextParser",un),un.prototype.parseMedia=un.prototype.parseMedia,un.prototype.setManifestType=un.prototype.setManifestType,un.prototype.setSequenceMode=un.prototype.setSequenceMode,un.prototype.parseInit=un.prototype.parseInit,Ot("text/vtt",function(){return new un}),Ot('text/vtt; codecs="vtt"',function(){return new un}),Ot('text/vtt; codecs="wvtt"',function(){return new un});function Pn(){this.g=null}Pn.prototype.parseInit=function(e){var t=this,n=!1;if(new Ke().box("moov",be).box("trak",be).box("mdia",be).S("mdhd",function(i){i=Pu(i.reader,i.version),t.g=i.timescale}).box("minf",be).box("stbl",be).S("stsd",Vi).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new D(2,2,2008);if(!n)throw new D(2,2,2008)},Pn.prototype.setSequenceMode=function(){},Pn.prototype.setManifestType=function(){},Pn.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new D(2,2,2008);var n=0,i=[],r,a=[],o=!1,s=!1,u=!1,l=null;if(new Ke().box("moof",be).box("traf",be).S("tfdt",function(k){o=!0,n=Cu(k.reader,k.version).baseMediaDecodeTime}).S("tfhd",function(k){l=Mu(k.reader,k.flags).Xd}).S("trun",function(k){s=!0,i=Ru(k.reader,k.version,k.flags).nh}).box("mdat",Ea(function(k){u=!0,r=k},!1)).parse(e,!1),!u&&!o&&!s)throw new D(2,2,2008);e=n;for(var c=new Ze(r,0),d=m(i),h=d.next();!h.done;h=d.next()){h=h.value;var p=h.oh||l,g=h.Gf?n+h.Gf:e;e=g+(p||0);var y=0;do{var b=c.U();y+=b;var A=c.U(),x=null;ku(A)=="vttc"?b>8&&(x=c.Tb(b-8,!1)):c.skip(b-8),p&&x&&(b=wM(x,t.periodStart+g/this.g,t.periodStart+e/this.g),a.push(b))}while(h.sampleSize&&y<h.sampleSize)}return a.filter(cr)};function wM(e,t,n){var i,r,a;return new Ke().box("payl",Ea(function(o){i=ot(o)},!1)).box("iden",Ea(function(o){r=ot(o)},!1)).box("sttg",Ea(function(o){a=ot(o)},!1)).parse(e),i?SM(i,r,a,t,n):null}function SM(e,t,n,i,r){if(e=new Qe(i,r,e),uu(e),t&&(e.id=t),n)for(t=new ga(n),n=Br(t);n;)sw(e,n,[]),ma(t),n=Br(t);return e}Y("shaka.text.Mp4VttParser",Pn),Pn.prototype.parseMedia=Pn.prototype.parseMedia,Pn.prototype.setManifestType=Pn.prototype.setManifestType,Pn.prototype.setSequenceMode=Pn.prototype.setSequenceMode,Pn.prototype.parseInit=Pn.prototype.parseInit,Ot('application/mp4; codecs="wvtt"',function(){return new Pn});function Rn(){}Rn.prototype.parseInit=function(){},Rn.prototype.setSequenceMode=function(){},Rn.prototype.setManifestType=function(){},Rn.prototype.parseMedia=function(e){var t=ot(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=m(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var i=new ga(n[0]),r=To(i),a=ar(i,/,/g);if(i=To(i),r==null||a==null||i==null)throw new D(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Qe(r,i,n.slice(1).join(`
`).trim()))}return e},Y("shaka.text.SbvTextParser",Rn),Rn.prototype.parseMedia=Rn.prototype.parseMedia,Rn.prototype.setManifestType=Rn.prototype.setManifestType,Rn.prototype.setSequenceMode=Rn.prototype.setSequenceMode,Rn.prototype.parseInit=Rn.prototype.parseInit,Ot("text/x-subviewer",function(){return new Rn});function Dn(){this.g=new un}Dn.prototype.parseInit=function(){},Dn.prototype.setSequenceMode=function(){},Dn.prototype.setManifestType=function(){},Dn.prototype.parseMedia=function(e,t,n){var i=ot(e);if(e=`WEBVTT

`,i!=""){i=i.replace(/\r+/g,""),i=i.trim(),i=m(i.split(`

`));for(var r=i.next();!r.done;r=i.next())r=r.value.split(/\n/),r[0].match(/\d+/)&&r.shift(),r[0]=r[0].replace(/,/g,"."),e+=r.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`}return e=pe(Zn(e)),this.g.parseMedia(e,t,n,[])},Y("shaka.text.SrtTextParser",Dn),Dn.prototype.parseMedia=Dn.prototype.parseMedia,Dn.prototype.setManifestType=Dn.prototype.setManifestType,Dn.prototype.setSequenceMode=Dn.prototype.setSequenceMode,Dn.prototype.parseInit=Dn.prototype.parseInit,Ot("text/srt",function(){return new Dn});function Ln(){}Ln.prototype.parseInit=function(){},Ln.prototype.setSequenceMode=function(){},Ln.prototype.setManifestType=function(){},Ln.prototype.parseMedia=function(e){var t="",n="",i=null,r=null;for(r=ot(e).split(/\r?\n\s*\r?\n/),e=m(r),r=e.next();!r.done;r=e.next()){var a=r.value;r=a,(a=xM.exec(a))&&(i=a[1],r=a[2]),i=="V4 Styles"||i=="V4+ Styles"?(t=r,t=n?t+(`
`+r):r):i=="Events"&&(n=n?n+(`
`+r):r)}for(i=[],r=null,t=m(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(a=cw.exec(e))){if(e=a[1].trim(),a=a[2].trim(),e=="Format")r=a.split(Ac);else if(e=="Style"){e=a.split(Ac),a={};for(var o=0;o<r.length&&o<e.length;o++)a[r[o]]=e[o];i.push(a)}}for(r=[],t=null,n=m(n.split(/\r?\n/)),a=n.next(),e={};!a.done;e={bj:void 0},a=n.next())if(a=a.value,!/^\s*;/.test(a)&&(o=cw.exec(a))){if(a=o[1].trim(),o=o[2].trim(),a=="Format")t=o.split(Ac);else if(a=="Dialogue"){o=o.split(Ac),a={};for(var s=0;s<t.length&&s<o.length;s++)a[t[s]]=o[s];s=lw(a.Start);var u=lw(a.End);o=new Qe(s,u,o.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.bj=a.Style,(e=i.find(function(l){return function(c){return c.Name==l.bj}}(e)))&&TM(o,e),r.push(o)}}return r};function TM(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=uw(n))&&(e.color=n),(n=t.BackColour)&&(n=uw(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=ya),t.Italic&&(e.fontStyle=ba),t.Underline&&e.textDecoration.push(Oi),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=ko,e.textAlign="start";break;case 2:e.displayAlign=ko,e.textAlign=Si;break;case 3:e.displayAlign=ko,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=Si;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=Si;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function uw(e){return e=parseInt(e.replace("&H",""),16),e>=0?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function lw(e){return e=AM.exec(e),(e[1]?parseInt(e[1].replace(":",""),10):0)*3600+parseInt(e[2],10)*60+parseFloat(e[3])}Y("shaka.text.SsaTextParser",Ln),Ln.prototype.parseMedia=Ln.prototype.parseMedia,Ln.prototype.setManifestType=Ln.prototype.setManifestType,Ln.prototype.setSequenceMode=Ln.prototype.setSequenceMode,Ln.prototype.parseInit=Ln.prototype.parseInit;var xM=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,cw=/^\s*([^:]+):\s*(.*)/,Ac=/\s*,\s*/,AM=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;Ot("text/x-ssa",function(){return new Ln});function dw(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,e>0)?{ee:n,ra:e}:null}function fw(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=(e[t+2]&60)>>>2;if(i>n.length-1)return null;var r=((e[t+2]&192)>>>6)+1,a=(e[t+2]&1)<<2;return a|=(e[t+3]&192)>>>6,{sampleRate:n[i],channelCount:a,codec:"mp4a.40."+r}}function hw(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var i=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return i<=n?!1:(t+=i,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function kM(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function Nn(e){this.j=e,this.g=0,this.h=new Map,this.i=null}f=Nn.prototype,f.destroy=function(){this.h.clear()},f.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Zt(this.convertCodecs("audio",e)):!1},f.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(dn(t)||"mp4a.40.2")+'"':t},f.getOriginalMimeType=function(){return this.j},f.transmux=function(e,t,n,i){for(var r=pe(e),a=Pa(r),o=a.length;o<r.length&&!hw(r,o);o++);if(e=n.endTime*1e3,a=Qr(a),a.length&&n&&(a=a.find(function(d){return d.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=a.data),a=fw(r,o),!a)return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=a.sampleRate,t.channelsCount=a.channelCount;for(var s=[];o<r.length;){var u=dw(r,o);if(!u)return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));var l=u.ee+u.ra;o+l<=r.length&&s.push({data:r.subarray(o+u.ee,o+l),size:u.ra,duration:1024,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),o+=l}r=a.sampleRate,e=Math.floor(e*r/1e3),i={id:t.id,type:"audio",codecs:a.codec,timescale:r,duration:i,Bb:[],Fa:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:e,zb:s},stream:t};var c=new Ma([i]);return t=this.h.getOrInsertComputed(t.id+"_"+n.i,function(){return Ca(c)}),n=this.i!==t,i=Vo(c),this.i=t,this.g++,Promise.resolve({data:i,init:n?t:null})},Y("shaka.transmuxer.AacTransmuxer",Nn),Nn.prototype.transmux=Nn.prototype.transmux,Nn.prototype.getOriginalMimeType=Nn.prototype.getOriginalMimeType,Nn.prototype.convertCodecs=Nn.prototype.convertCodecs,Nn.prototype.isSupported=Nn.prototype.isSupported,Nn.prototype.destroy=Nn.prototype.destroy,_i("audio/aac",function(){return new Nn("audio/aac")},ur);function pw(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(n>=3)return null;var i=e[t+4]&63,r=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][i*3+n]*2;if(t+r>e.length)return null;var a=e[t+6]>>5,o=0;a===2?o+=2:(a&1&&a!==1&&(o+=2),a&4&&(o+=2)),o=(e[t+6]<<8|e[t+7])>>12-o&1;var s=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|s>>2,(s&3)<<6|a<<3|o<<2|i>>4,i<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][a]+o,Fa:e,ra:r}}function IM(e,t){if(e[t]===11&&e[t+1]===119){var n=0,i=5;t+=i;for(var r,a;i>0;){a=e[t];var o=Math.min(i,8),s=8-o;r=4278190080>>>24+s<<s,r=(a&r)>>s,n=n?n<<o|r:r,t+=1,i-=o}if(n<16)return!0}return!1}function Kn(e){this.j=e,this.g=0,this.h=new Map,this.i=null}f=Kn.prototype,f.destroy=function(){this.h.clear()},f.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Zt(this.convertCodecs("audio",e)):!1},f.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?Te().se()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':t},f.getOriginalMimeType=function(){return this.j},f.transmux=function(e,t,n,i){e=pe(e);for(var r=Pa(e),a=r.length;a<e.length&&!IM(e,a);a++);var o=n.endTime*1e3;r=Qr(r),r.length&&n&&(r=r.find(function(d){return d.description==="com.apple.streaming.transportStreamTimestamp"}))&&(o=r.data),r=0;for(var s=new Uint8Array([]),u=[];a<e.length;){var l=pw(e,a);if(!l)return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,r=l.sampleRate,s=l.Fa,u.push({data:e.subarray(a,a+l.ra),size:l.ra,duration:1536,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),a+=l.ra}e=Math.floor(o*r/1e3),i={id:t.id,type:"audio",codecs:"ac-3",timescale:r,duration:i,Bb:[],Fa:s,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:e,zb:u},stream:t};var c=new Ma([i]);return t=this.h.getOrInsertComputed(t.id+"_"+n.i,function(){return Ca(c)}),n=this.i!==t,i=Vo(c),this.i=t,this.g++,Promise.resolve({data:i,init:n?t:null})},Y("shaka.transmuxer.Ac3Transmuxer",Kn),Kn.prototype.transmux=Kn.prototype.transmux,Kn.prototype.getOriginalMimeType=Kn.prototype.getOriginalMimeType,Kn.prototype.convertCodecs=Kn.prototype.convertCodecs,Kn.prototype.isSupported=Kn.prototype.isSupported,Kn.prototype.destroy=Kn.prototype.destroy,_i("audio/ac3",function(){return new Kn("audio/ac3")},ur);function gw(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new qi(e.subarray(t+2));Sn(n,2),Sn(n,3);var i=Ie(n,11)+1<<1,r=Ie(n,2);if(r==3){r=Ie(n,2),r=[24e3,22060,16e3][r];var a=3}else r=[48e3,44100,32e3][r],a=Ie(n,2);var o=Ie(n,3),s=Ie(n,1);return n=Ie(n,5),t+i>e.byteLength?null:(e=Math.floor(i*r/([1,2,3,6][a]*16)),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,r<<6|n<<1|0,0|o<<1|s<<0,0]),{sampleRate:r,channelCount:[2,1,2,3,3,4,4,5][o]+s,Fa:e,ra:i})}function zn(e){this.j=e,this.g=0,this.h=new Map,this.i=null}f=zn.prototype,f.destroy=function(){this.h.clear()},f.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Zt(this.convertCodecs("audio",e)):!1},f.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},f.getOriginalMimeType=function(){return this.j},f.transmux=function(e,t,n,i){e=pe(e);for(var r=Pa(e),a=r.length;a<e.length&&(e[a]<<8|e[a+1]<<0)!==2935;a++);var o=n.endTime*1e3;r=Qr(r),r.length&&n&&(r=r.find(function(d){return d.description==="com.apple.streaming.transportStreamTimestamp"}))&&(o=r.data),r=0;for(var s=new Uint8Array([]),u=[];a<e.length;){var l=gw(e,a);if(!l)return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,r=l.sampleRate,s=l.Fa,u.push({data:e.subarray(a,a+l.ra),size:l.ra,duration:1536,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),a+=l.ra}e=Math.floor(o*r/1e3),i={id:t.id,type:"audio",codecs:"ec-3",timescale:r,duration:i,Bb:[],Fa:s,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:e,zb:u},stream:t};var c=new Ma([i]);return t=this.h.getOrInsertComputed(t.id+"_"+n.i,function(){return Ca(c)}),n=this.i!==t,i=Vo(c),this.i=t,this.g++,Promise.resolve({data:i,init:n?t:null})},Y("shaka.transmuxer.Ec3Transmuxer",zn),zn.prototype.transmux=zn.prototype.transmux,zn.prototype.getOriginalMimeType=zn.prototype.getOriginalMimeType,zn.prototype.convertCodecs=zn.prototype.convertCodecs,zn.prototype.isSupported=zn.prototype.isSupported,zn.prototype.destroy=zn.prototype.destroy,_i("audio/ec3",function(){return new zn("audio/ec3")},ur);function EM(e){if(!e.length)return null;var t=e.find(function(y){return y.type==7});if(e=e.find(function(y){return y.type==8}),!t||!e)return null;var n=new qi(t.data),i=Be(n);if(Be(n),Be(n),_t(n),CM.includes(i)&&(i=$(n),i===3&&Sn(n,1),_t(n),_t(n),Sn(n,1),re(n))){i=i!==3?8:12;for(var r=0;r<i;r++)re(n)&&(r<6?Ou(n,16):Ou(n,64))}if(_t(n),i=$(n),i===0)$(n);else if(i===1)for(Sn(n,1),_t(n),_t(n),i=$(n),r=0;r<i;r++)_t(n);_t(n),Sn(n,1);var a=$(n),o=$(n),s=Ie(n,1);s===0&&Sn(n,1),Sn(n,1);var u=0,l=0,c=0,d=0;if(re(n)&&(u=$(n),l=$(n),c=$(n),d=$(n)),r=i=1,re(n)&&re(n)){var h=Be(n),p=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],g=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];h>0&&h<=16?(i=p[h-1],r=g[h-1]):h===255&&(i=Ie(n,16),r=Ie(n,16))}return n=(2-s)*(o+1)*16-c*2-d*2,a=(a+1)*16-u*2-l*2,u=[],t=t.fullData,u.push(t.byteLength>>>8&255),u.push(t.byteLength&255),u=u.concat.apply(u,z(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,z(e)),e=new Uint8Array([1,u[3],u[4],u[5],255,225].concat(u,[1],t)),{height:n,width:a,Sa:e,Za:i,$a:r}}function MM(e){function t(g){r={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:g.pts,dts:g.dts,nalus:[]}}function n(){if(r&&r.nalus.length&&r.frame){for(var g=[],y=m(r.nalus),b=y.next();!b.done;b=y.next()){b=b.value;var A=b.fullData.byteLength,x=new Uint8Array(4);x[0]=A>>24&255,x[1]=A>>16&255,x[2]=A>>8&255,x[3]=A&255,g.push(x),g.push(b.fullData)}r.data=mt.apply(Vt,z(g)),i.push(r)}}for(var i=[],r=null,a=!1,o=0;o<e.length;o++){var s=e[o],u=s.nalus,l=!1;r&&u.length&&!a&&(n(),t(s)),u=m(s.nalus);for(var c=u.next();!c.done;c=u.next()){c=c.value;var d=!1;switch(c.type){case 1:var h=!1;d=!0;var p=c.data;l&&p.length>4&&(p=ET(new qi(p)),p===2||p===4||p===7||p===9)&&(h=!0),h&&r&&r.frame&&!r.isKeyframe&&(n(),r=null),r||t(s),r.frame=!0,r.isKeyframe=h;break;case 5:d=!0,r&&r.frame&&!r.isKeyframe&&(n(),r=null),r||t(s),r.frame=!0,r.isKeyframe=!0;break;case 6:d=!0;break;case 7:l=d=!0;break;case 8:d=!0;break;case 9:a=d=!0,r&&r.frame&&(n(),r=null),r||t(s);break;case 12:d=!0;break;default:d=!1}r&&d&&r.nalus.push(c)}}return n(),i}var CM=[100,110,122,244,44,83,86,118,128,138,139,134];function PM(e){if(!e.length)return null;var t=e.find(function(o){return o.type==32}),n=e.find(function(o){return o.type==33}),i=e.find(function(o){return o.type==34});if(!t||!n||!i)return null;var r=RM(t.fullData);e=DM(n.fullData);var a=LM(i.fullData);return t=NM(t.fullData,n.fullData,i.fullData,{Yg:r.Yg,Fh:r.Fh,Ig:e.Ig,Jg:e.Jg,Cg:e.Cg,Hg:e.Hg,Dg:e.Dg,Eg:e.Eg,Fg:e.Fg,Gg:e.Gg,wg:e.wg,xg:e.xg,yg:e.yg,zg:e.zg,Ag:e.Ag,Bg:e.Bg,uf:e.uf,kg:e.kg,jg:e.jg,ig:e.ig,$g:a.$g,vg:e.vg,ug:e.ug}),{height:e.height,width:e.width,Sa:t,Za:e.Vk,$a:e.Uk}}function RM(e){var t=new qi(e,!0);return Be(t),Be(t),Ie(t,4),Ie(t,2),Ie(t,6),e=Ie(t,3),t=re(t),{Yg:e+1,Fh:t}}function DM(e){e=new qi(e,!0),Be(e),Be(e);var t=0,n=0,i=0,r=0;Ie(e,4);var a=Ie(e,3);re(e);for(var o=Ie(e,2),s=Ie(e,1),u=Ie(e,5),l=Be(e),c=Be(e),d=Be(e),h=Be(e),p=Be(e),g=Be(e),y=Be(e),b=Be(e),A=Be(e),x=Be(e),k=Be(e),M=[],N=[],I=0;I<a;I++)M.push(re(e)),N.push(re(e));if(a>0)for(I=a;I<8;I++)Ie(e,2);for(I=0;I<a;I++)M[I]&&Ie(e,88),N[I]&&Be(e);$(e),M=$(e),M==3&&Ie(e,1),N=$(e),I=$(e),re(e)&&(t+=$(e),n+=$(e),i+=$(e),r+=$(e));var C=$(e),E=$(e),O=$(e);if(re(e))for(var L=0;L<=a;L++)$(e),$(e),$(e);else $(e),$(e),$(e);if($(e),$(e),$(e),$(e),$(e),$(e),re(e)&&re(e))for(L=0;L<4;L++)for(var _=0;_<(L===3?2:6);_++)if(re(e)){var j=Math.min(64,1<<4+(L<<1));L>1&&Ra(e);for(var G=0;G<j;G++)Ra(e)}else $(e);for(re(e),re(e),re(e)&&(Be(e),$(e),$(e),re(e)),L=$(e),j=_=0;j<L;j++)if(G=!1,j!==0&&(G=re(e)),G){j===L&&$(e),re(e),$(e);for(var H=G=0;H<=_;H++){var B=re(e),F=!1;B||(F=re(e)),(B||F)&&G++}_=G}else{for(H=$(e),G=$(e),_=H+G,B=0;B<H;B++)$(e),re(e);for(H=0;H<G;H++)$(e),re(e)}if(re(e))for(L=$(e),_=0;_<L;_++){for(j=0;j<O+4;j++)Ie(e,1);Ie(e,1)}if(L=O=1,_=!0,j=1,H=G=0,re(e),re(e),re(e)){if(re(e)){B=Be(e),F=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2];var K=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];B>0&&B<=16?(O=F[B-1],L=K[B-1]):B===255&&(O=Ie(e,16),L=Ie(e,16))}if(re(e)&&re(e),re(e)&&(Ie(e,3),re(e),re(e)&&(Be(e),Be(e),Be(e))),re(e)&&($(e),$(e)),re(e),re(e),re(e),(B=re(e))&&(_t(e),_t(e),_t(e),_t(e)),re(e)&&(j=Ie(e,32),G=Ie(e,32),re(e)&&$(e),re(e))){K=!1,B=re(e),F=re(e),(B||F)&&((K=re(e))&&(Be(e),Ie(e,5),re(e),Ie(e,5)),Ie(e,4),Ie(e,4),K&&Ie(e,4),Ie(e,5),Ie(e,5),Ie(e,5));for(var W=0;W<=a;W++){_=re(e);var me=!0,ne=1;_||(me=re(e));var He=!1;if(me?$(e):He=re(e),He||(ne=$(e)+1),B){for(me=0;me<ne;me++)$(e),$(e),K&&($(e),$(e));re(e)}if(F){for(me=0;me<ne;me++)$(e),$(e),K&&($(e),$(e));re(e)}}}re(e)&&(re(e),re(e),re(e),H=$(e),$(e),$(e),$(e),$(e))}return{Cg:k,Ig:o,Jg:s,Hg:u,Dg:l,Eg:c,Fg:d,Gg:h,wg:p,xg:g,yg:y,zg:b,Ag:A,Bg:x,uf:H,kg:M,jg:C,ig:E,width:N-(t+n)*(M===1||M===2?2:1),height:I-(i+r)*(M===1?2:1),Vk:O,Uk:L,vg:G/j,ug:_}}function LM(e){var t=new qi(e,!0);Be(t),Be(t),$(t),$(t),re(t),re(t),Ie(t,3),re(t),re(t),$(t),$(t),Ra(t),re(t),re(t),re(t)&&$(t),Ra(t),Ra(t),re(t),re(t),re(t),re(t),e=re(t),t=re(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{$g:n}}function NM(e,t,n,i){var r=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));for(r[0]=1,r[1]=(i.Ig&3)<<6|(i.Jg?1:0)<<5|i.Hg&31,r[2]=i.Dg,r[3]=i.Eg,r[4]=i.Fg,r[5]=i.Gg,r[6]=i.wg,r[7]=i.xg,r[8]=i.yg,r[9]=i.zg,r[10]=i.Ag,r[11]=i.Bg,r[12]=i.Cg,r[13]=240|(i.uf&3840)>>8,r[14]=i.uf&255,r[15]=252|i.$g&3,r[16]=252|i.kg&3,r[17]=248|i.jg&7,r[18]=248|i.ig&7,r[19]=0,r[20]=parseInt(i.vg,10),r[21]=((i.ug?1:0)&3)<<6|(i.Yg&7)<<3|(i.Fh?1:0)<<2|3,r[22]=3,e=[e,t,n],t=23,n=e.length-1,i=0;i<e.length;i+=1)r.set(new Uint8Array([32+i|(i===n?128:0),0,1]),t),t+=3,r.set(new Uint8Array([e[i].byteLength>>8,e[i].byteLength&255]),t),t+=2,r.set(e[i],t),t+=e[i].byteLength;return r}function kc(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,a=e[t+2]>>2&3;if(n!==1&&r!==0&&r!==15&&a!==3){var o=e[t+3]>>6;r=OM[(n===3?3-i:i===3?3:4)*14+r-1]*1e3,a=_M[(n===3?0:n===2?1:2)*3+a],n=jM[n][i];var s=UM[i],u=Math.floor(n*r/a+(e[t+2]>>1&1))*s,l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(l=l?parseInt(l[1],10):0)&&l<=87&&i===2&&r>=224e3&&o===0&&(e[t+3]|=128),{sampleRate:a,channelCount:o===3?1:2,ra:u,Tk:n*8*s}}return null}function mw(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function vw(e,t){if(t+1<e.length&&mw(e,t)){var n=kc(e,t),i=4;return n&&n.ra&&(i=n.ra),t+=i,t===e.length||t+1<e.length&&mw(e,t)}return!1}var OM=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],_M=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],jM=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],UM=[0,1,1,4];function Wn(e){this.j=e,this.g=0,this.h=new Map,this.i=null}f=Wn.prototype,f.destroy=function(){this.h.clear()},f.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Zt(this.convertCodecs("audio",e)):!1},f.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},f.getOriginalMimeType=function(){return this.j},f.transmux=function(e,t,n,i){for(var r=pe(e),a=Pa(r).length;a<r.length&&!vw(r,a);a++);var o;for(e=[];a<r.length;){var s=kc(r,a);if(!s)return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));o||(o=s),a+s.ra<=r.length&&e.push({data:r.subarray(a,a+s.ra),size:s.ra,duration:1152,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),a+=s.ra}if(!o)return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));r=o.Tk*9e4/o.sampleRate*this.g,i={id:t.id,type:"audio",codecs:"mp3",timescale:o.sampleRate,duration:i,Bb:[],Fa:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:r,zb:e},stream:t};var u=new Ma([i]);return t=this.h.getOrInsertComputed(t.id+"_"+n.i,function(){return Ca(u)}),n=this.i!==t,i=Vo(u),this.i=t,this.g++,Promise.resolve({data:i,init:n?t:null})},Y("shaka.transmuxer.Mp3Transmuxer",Wn),Wn.prototype.transmux=Wn.prototype.transmux,Wn.prototype.getOriginalMimeType=Wn.prototype.getOriginalMimeType,Wn.prototype.convertCodecs=Wn.prototype.convertCodecs,Wn.prototype.isSupported=Wn.prototype.isSupported,Wn.prototype.destroy=Wn.prototype.destroy,_i("audio/mpeg",function(){return new Wn("audio/mpeg")},ur);function Xn(e){this.h=e,this.g=null}f=Xn.prototype,f.destroy=function(){},f.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=dn(e).split(","),n=cn("audio",t);return t=cn("video",t),!n||t||Ht(n)!="mp3"?!1:Zt(this.convertCodecs("audio",e))},f.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},f.getOriginalMimeType=function(){return this.h},f.transmux=function(e,t,n,i,r){if(this.g?this.g.clearData():this.g=new $e,this.g.Kf(n.i),e=pe(e),e=this.g.parse(e),e.Zd().audio!="mp3"||r!="audio")return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));for(n=new Uint8Array([]),r=m(e.rb()),e=r.next();!e.done;e=r.next())if(e=e.value.data)for(t=0;t<e.length;)(i=kc(e,t))?(t+i.ra<=e.length&&(n=mt(n,e.subarray(t,t+i.ra))),t+=i.ra):t++;return Promise.resolve(n)},Y("shaka.transmuxer.MpegTsTransmuxer",Xn),Xn.prototype.transmux=Xn.prototype.transmux,Xn.prototype.getOriginalMimeType=Xn.prototype.getOriginalMimeType,Xn.prototype.convertCodecs=Xn.prototype.convertCodecs,Xn.prototype.isSupported=Xn.prototype.isSupported,Xn.prototype.destroy=Xn.prototype.destroy,_i("video/mp2t",function(){return new Xn("video/mp2t")},Qc);function On(e){this.h=e,(this.g=ch.get("ISOBoxer")())&&BM(this)}function BM(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(i){this._procEntryField(i,"BytesOfClearData","uint",16),this._procEntryField(i,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,i=0;i<16;i++)this.usertype[i]!==FM[i]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}f=On.prototype,f.destroy=function(){},f.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?Zt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Zt(t)||Zt(e))},f.convertCodecs=function(e,t){return t.replace("mss/","")},f.getOriginalMimeType=function(){return this.h},f.transmux=function(e,t,n){if(!n)return Promise.resolve(pe(e));if(!t.mssPrivateData)return Promise.reject(new D(2,3,3020,n?n.P()[0]:null));try{var i,r=this.g.parseBuffer(e),a=r.fetch("tfhd");a.track_ID=t.id+1;var o=r.fetch("tfdt"),s=r.fetch("traf");o===null&&(o=this.g.createFullBox("tfdt",s,a),o.version=1,o.flags=0,o.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var u=r.fetch("trun"),l=r.fetch("tfxd");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var c=r.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var d=r.fetch("sepiff");if(d!==null){d.type="senc",d.usertype=void 0;var h=r.fetch("saio");if(h===null){h=this.g.createFullBox("saio",s),h.version=0,h.flags=0,h.entry_count=1,h.offset=[0];var p=this.g.createFullBox("saiz",s);if(p.version=0,p.flags=0,p.sample_count=d.sample_count,p.default_sample_info_size=0,p.sample_info_size=[],d.flags&2)for(i=0;i<d.sample_count;i+=1)p.sample_info_size[i]=10+6*d.entry[i].NumberOfEntries;else p.default_sample_info_size=8}}a.flags&=16777214,a.flags|=131072,u.flags|=1;var g=r.fetch("moof");u.data_offset=g.getLength()+8;var y=r.fetch("saio");y!==null&&(y.offset[0]=yw(g,"traf")+yw(s,"senc")+16);var b=pe(r.write());return Promise.resolve(b)}catch(A){return A instanceof D?Promise.reject(A):Promise.reject(new D(2,3,3022,n?n.P()[0]:null))}};function yw(e,t){for(var n=8,i=0;i<e.boxes.length&&e.boxes[i].type!==t;i++)n+=e.boxes[i].size;return n}Y("shaka.transmuxer.MssTransmuxer",On),On.prototype.transmux=On.prototype.transmux,On.prototype.getOriginalMimeType=On.prototype.getOriginalMimeType,On.prototype.convertCodecs=On.prototype.convertCodecs,On.prototype.isSupported=On.prototype.isSupported,On.prototype.destroy=On.prototype.destroy;var FM=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);_i("mss/audio/mp4",function(){return new On("mss/audio/mp4")},ur),_i("mss/video/mp4",function(){return new On("mss/video/mp4")},ur);function Yn(e){this.m=e,this.g=0,this.j=new Map,this.l=this.i=this.h=null}f=Yn.prototype,f.destroy=function(){this.j.clear(),this.i&&this.i.destroy()},f.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var i=dn(n).split(",");return n=cn("audio",i),i=cn("video",i),n&&(n=Ht(n),!XM.includes(n))||i&&(n=Ht(i),!YM.includes(n))?!1:t?Zt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Zt(t)||Zt(e))},f.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=dn(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return No(n,"audio/mp4")}).map(hg).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},f.getOriginalMimeType=function(){return this.m},f.transmux=function(e,t,n,i,r){var a=pe(e);if(r=="audio"&&!Da(a)){for(var o=Pa(a),s=o.length;s<a.length;s++)if(vw(a,s))return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));for(s=o.length;s<a.length;s++)if(hw(a,s))return this.i||(this.i=new Nn("audio/aac")),this.i.transmux(e,t,n,i,r);return Promise.reject(new D(2,3,3018,n?n.P()[0]:null))}this.h?this.h.clearData():this.h=new $e,this.h.Kf(n.i),e=this.h.parse(a),a=[],o=e.Zd();try{if(s=null,r=="video"){switch(o.video){case"avc":s=zM(this,e,t,i,n);break;case"hvc":s=WM(this,e,t,i,n)}s&&(a.push(s),s=null)}if(r=="audio"){switch(o.audio){case"aac":s=VM(this,e,t,i,n);break;case"ac3":s=HM(this,e,t,i,n);break;case"ec3":s=GM(this,e,t,i,n);break;case"mp3":s=qM(this,e,t,i,n);break;case"opus":s=KM(this,e,t,i,n)}s&&(a.push(s),s=null)}}catch(l){return l&&l.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(l)}if(!a.length)return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));var u=new Ma(a);return t=this.j.getOrInsertComputed(t.id+"_"+n.i,function(){return Ca(u)}),n=this.l!==t,i=Vo(u),this.l=t,this.g++,Promise.resolve({data:i,init:n?t:null})};function VM(e,t,n,i,r){var a=[],o=null,s=null,u=null;t=m(t.rb());for(var l=t.next();!l.done;l=t.next()){var c=l.value;if(l=c.data){var d=0;if(s==-1&&u)l=mt(u,c.data),s=null;else if(s!=null&&u){d=Math.max(0,s);var h=mt(u,l.subarray(0,d));a.push({data:h,size:h.byteLength,duration:1024,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),s=u=null}if(h=fw(l,d),!h)throw new D(2,3,3018,r?r.P()[0]:null);for(n.audioSamplingRate=h.sampleRate,n.channelsCount=h.channelCount,o==null&&c.pts!==null&&(o=c.pts);d<l.length;){if(c=dw(l,d),!c){u=l.subarray(d,l.length),s=-1;break}var p=c.ee+c.ra;s=Math.max(0,d+p-l.length),s!=0?u=l.subarray(d+c.ee,d+p):d+p<=l.length&&a.push({data:l.subarray(d+c.ee,d+p),size:c.ra,duration:1024,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),d+=p}}}if(!h||o==null){if(o=r.startTime*9e4,s=cn("audio",n.codecs.split(",")),!s||!n.channelsCount||!n.audioSamplingRate)throw new D(2,3,3018,r?r.P()[0]:null);if(h={sampleRate:n.audioSamplingRate,channelCount:n.channelsCount,codec:s},s=kM(s,n.channelsCount),!s)throw new D(2,3,3018,r?r.P()[0]:null);for(r=o+(r.endTime-r.startTime)*9e4,u=o;u<r;)a.push({data:s,size:s.byteLength,duration:1024,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),u+=1024/h.sampleRate*9e4}return r=h.sampleRate,o=o/9e4*r,{id:n.id,type:"audio",codecs:h.codec,timescale:r,duration:i,Bb:[],Fa:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:e.g,baseMediaDecodeTime:o,zb:a},stream:n}}function HM(e,t,n,i,r){var a=[],o=0,s=new Uint8Array([]),u=null;t=m(t.rb());for(var l=t.next();!l.done;l=t.next()){var c=l.value;for(l=c.data,u==null&&c.pts!==null&&(u=c.pts),c=0;c<l.length;){var d=pw(l,c);d?(n.audioSamplingRate=d.sampleRate,n.channelsCount=d.channelCount,o=d.sampleRate,s=d.Fa,a.push({data:l.subarray(c,c+d.ra),size:d.ra,duration:1536,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),c+=d.ra):c++}}if(o==0||s.byteLength==0||u==null)throw new D(2,3,3018,r?r.P()[0]:null);return r=u/9e4*o,{id:n.id,type:"audio",codecs:"ac-3",timescale:o,duration:i,Bb:[],Fa:s,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:e.g,baseMediaDecodeTime:r,zb:a},stream:n}}function GM(e,t,n,i,r){var a=[],o=0,s=new Uint8Array([]),u=null;t=m(t.rb());for(var l=t.next();!l.done;l=t.next()){var c=l.value;for(l=c.data,u==null&&c.pts!==null&&(u=c.pts),c=0;c<l.length;){var d=gw(l,c);d?(n.audioSamplingRate=d.sampleRate,n.channelsCount=d.channelCount,o=d.sampleRate,s=d.Fa,a.push({data:l.subarray(c,c+d.ra),size:d.ra,duration:1536,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),c+=d.ra):c++}}if(o==0||s.byteLength==0||u==null)throw new D(2,3,3018,r?r.P()[0]:null);return r=u/9e4*o,{id:n.id,type:"audio",codecs:"ec-3",timescale:o,duration:i,Bb:[],Fa:s,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:e.g,baseMediaDecodeTime:r,zb:a},stream:n}}function qM(e,t,n,i,r){var a=[],o,s=null;t=m(t.rb());for(var u=t.next();!u.done;u=t.next()){var l=u.value;if(u=l.data)for(s==null&&l.pts!==null&&(s=l.pts),l=0;l<u.length;){var c=kc(u,l);c?(o||(o=c),l+c.ra<=u.length&&a.push({data:u.subarray(l,l+c.ra),size:c.ra,duration:1152,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),l+=c.ra):l++}}if(!o||s==null)throw new D(2,3,3018,r?r.P()[0]:null);return r=o.sampleRate,s=s/9e4*r,{id:n.id,type:"audio",codecs:"mp3",timescale:r,duration:i,Bb:[],Fa:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:e.g,baseMediaDecodeTime:s,zb:a},stream:n}}function KM(e,t,n,i,r){var a=[],o=null,s=t.H;if(!s)throw new D(2,3,3018,r?r.P()[0]:null);var u=[];switch(s.vj){case 1:case 2:u=[0];break;case 0:u=[255,1,1,0,1];break;case 128:u=[255,2,0,0,1];break;case 3:u=[1,2,1,0,2,1];break;case 4:u=[1,2,2,0,1,2,3];break;case 5:u=[1,3,2,0,4,1,2,3];break;case 6:u=[1,4,2,0,4,1,2,3,5];break;case 7:u=[1,4,2,0,4,1,2,3,5,6];break;case 8:u=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:u=[1,1,2,0,1];break;case 131:u=[1,1,3,0,1,2];break;case 132:u=[1,1,4,0,1,2,3];break;case 133:u=[1,1,5,0,1,2,3,4];break;case 134:u=[1,1,6,0,1,2,3,4,5];break;case 135:u=[1,1,7,0,1,2,3,4,5,6];break;case 136:u=[1,1,8,0,1,2,3,4,5,6,7]}u=new Uint8Array([0,s.channelCount,0,0,s.sampleRate>>>24&255,s.sampleRate>>>17&255,s.sampleRate>>>8&255,s.sampleRate>>>0&255,0,0].concat(z(u)));var l=s.sampleRate;t=m(t.rb());for(var c=t.next();!c.done;c=t.next()){var d=c.value;c=d.data,o==null&&d.pts!==null&&(o=d.pts);for(var h=0;h<c.length;){d=(c[h+1]&16)!==0;var p=(c[h+1]&8)!==0;h+=2;for(var g=0;c[h]===255;)g+=255,h+=1;g+=c[h],h+=1,h+=d?2:0,h+=p?2:0,d=c.slice(h,h+g),a.push({data:d,size:d.byteLength,duration:960,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),h+=g}}if(u.byteLength==0||o==null)throw new D(2,3,3018,r?r.P()[0]:null);return n.audioSamplingRate=s.sampleRate,n.channelsCount=s.channelCount,r=o/9e4*l,{id:n.id,type:"audio",codecs:"opus",timescale:l,duration:i,Bb:[],Fa:u,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:e.g,baseMediaDecodeTime:r,zb:a},stream:n}}function zM(e,t,n,i,r){var a=[],o=null;t=t.ud();var s=MM(t);if(!s.length)throw new D(2,3,3023,r?r.P()[0]:null);for(var u=0;u<s.length;u++){var l=s[u];o==null&&(o=l.dts),a.push({data:l.data,size:l.data.byteLength,duration:u+1<s.length?(s[u+1].dts||0)-(l.dts||0):s.length>1?(l.dts||0)-(s[u-1].dts||0):(r.endTime-r.startTime)*9e4,qb:Math.round((l.pts||0)-(l.dts||0)),flags:{wb:0,kb:0,jb:0,gb:0,hb:l.isKeyframe?2:1,xb:l.isKeyframe?0:1}})}for(s=[],t=m(t),u=t.next();!u.done;u=t.next())s.push.apply(s,z(u.value.nalus));if(t=EM(s),!t||o==null)throw new D(2,3,3018,r?r.P()[0]:null);return n.height=n.height||t.height,n.width=n.width||t.width,{id:n.id,type:"video",codecs:"avc1",timescale:9e4,duration:i,Bb:[],Fa:new Uint8Array([]),Sa:t.Sa,Za:t.Za,$a:t.$a,data:{sequenceNumber:e.g,baseMediaDecodeTime:o,zb:a},stream:n}}function WM(e,t,n,i,r){var a=[],o=null,s=[];if(t=t.ud(),!t.length)throw new D(2,3,3023,r?r.P()[0]:null);for(var u=0;u<t.length;u++){var l=t[u],c=l.nalus;s.push.apply(s,z(c));var d=!1,h=[],p=!1;c=m(c);for(var g=c.next();!g.done;g=c.next()){switch(g=g.value,g.type){case 1:case 0:var y=p=!0;break;case 19:case 20:case 21:d=y=p=!0;break;case 32:y=!0;break;case 33:y=!0;break;case 34:y=!0;break;case 35:p=y=!0;break;case 39:case 40:y=!0;break;default:y=!1}if(p&&y){y=g.fullData.byteLength;var b=new Uint8Array(4);b[0]=y>>24&255,b[1]=y>>16&255,b[2]=y>>8&255,b[3]=y&255,h.push(b),h.push(g.fullData)}}(d=h.length?{data:mt.apply(Vt,z(h)),isKeyframe:d}:null)&&(o==null&&l.dts!=null&&(o=l.dts),a.push({data:d.data,size:d.data.byteLength,duration:u+1<t.length?(t[u+1].dts||0)-(l.dts||0):t.length>1?(l.dts||0)-(t[u-1].dts||0):(r.endTime-r.startTime)*9e4,qb:Math.round((l.pts||0)-(l.dts||0)),flags:{wb:0,kb:0,jb:0,gb:0,hb:d.isKeyframe?2:1,xb:d.isKeyframe?0:1}}))}if(s=PM(s),!s||o==null)throw new D(2,3,3018,r?r.P()[0]:null);return n.height=n.height||s.height,n.width=n.width||s.width,{id:n.id,type:"video",codecs:"hvc1",timescale:9e4,duration:i,Bb:[],Fa:new Uint8Array([]),Sa:s.Sa,Za:s.Za,$a:s.$a,data:{sequenceNumber:e.g,baseMediaDecodeTime:o,zb:a},stream:n}}Y("shaka.transmuxer.TsTransmuxer",Yn),Yn.prototype.transmux=Yn.prototype.transmux,Yn.prototype.getOriginalMimeType=Yn.prototype.getOriginalMimeType,Yn.prototype.convertCodecs=Yn.prototype.convertCodecs,Yn.prototype.isSupported=Yn.prototype.isSupported,Yn.prototype.destroy=Yn.prototype.destroy;var XM=["aac","ac-3","ec-3","mp3","opus"],YM=["avc","hevc"];_i("video/mp2t",function(){return new Yn("video/mp2t")},Zc);function bw(){}rt(bw,hn),Y("shaka.util.FairPlayUtils",bw)}).call(S,v,v,void 0);for(var U in S.shaka)w[U]=S.shaka[U]})()}(Dw)),Dw}var SP=wP();const TP=bP(SP),Fw=36e5,Vw=async(w,v={},S=3)=>{let U,P;try{U=await fetch(w,v)}catch(f){if(S===0)throw f;P=null}if(U?.ok)return U;const te=U&&U.status>=500&&U.status<=599,Q=P===null||te||U?.status===429;if(S>0&&Q){const f=500*Math.abs(4-S);return console.debug(`Retrying request for ${Math.abs(4-S)}th time in ${f}ms`),await dC(f),Vw(w,v,S-1)}if(!U)throw new Error("Retries exhausted. Cannot fetch playbackinfo.");return U};function xP(w,v){switch(v){case 4010:return"PEMonthlyStreamQuotaExceeded";case 4032:case 4035:return"PEContentNotAvailableInLocation";case 4033:return"PEContentNotAvailableForSubscription"}return w>=500&&w<600||w===429?"PERetryable":w>=400&&w<500?"PENotAllowed":"EUnexpected"}async function AP(w){const{accessToken:v,audioQuality:S,clientId:U,mediaProduct:P,prefetch:te,streamingSessionId:Q}=w,f=Vs("apiUrl"),We=new URL(`${f}/${P.productType}s/${P.productId}/playbackinfo`),Se=We.searchParams;P.productType==="video"?Se.set("videoquality","HIGH"):Se.set("audioquality",S),Se.set("playbackmode","STREAM"),Se.set("assetpresentation","FULL");const ct=new Headers;te&&ct.set("x-tidal-prefetch","true"),U&&ct.set("x-tidal-token",U),v&&ct.set("authorization","Bearer "+v),Q&&ct.set("x-tidal-streamingsessionid",Q);let ke;try{ke=await Vw(We.toString(),{headers:ct,importance:"high"},3)}catch{throw new co("PENetwork","NPBI0")}const ie=await ke.json();if("status"in ie){const En=`A${ie.subStatus}`;throw new co(xP(ie.status,ie.subStatus),En)}const tn="trackId"in ie,ui="videoId"in ie;if(!tn&&!ui)throw new co("EUnexpected","B9999");return{...ie,expires:Date.now()+Fw,prefetched:te}}function kP(w){if(!Array.isArray(w))throw new Error("Invalid formats array");if(w.length===0)throw new Error("Empty formats array");return w.includes("FLAC_HIRES")?"HI_RES_LOSSLESS":w.includes("FLAC")?"LOSSLESS":w.includes("AACLC")?"HIGH":"LOW"}function IP(w){switch(w){case"HI_RES":case"HI_RES_LOSSLESS":return["HEAACV1","AACLC","FLAC","FLAC_HIRES"];case"HIGH":return["HEAACV1","AACLC"];case"LOSSLESS":return["HEAACV1","AACLC","FLAC"];default:return["HEAACV1"]}}function EP(w){if(!w)return;const v=/data:([^;]+);base64,(.+)/.exec(w);if(!v||v.length<3)return;const S=v[1]?.trim(),U=v[2]?.trim();if(!(!S||!U))return{manifest:U,manifestMimeType:S}}async function MP(w){const v=vP(Ii.credentialsProvider),{audioAdaptiveBitrateStreaming:S,audioQuality:U,mediaProduct:P,prefetch:te,streamingSessionId:Q}=w,f=P.productId,We=await TP.util.FairPlayUtils.isFairPlaySupported(),Se=await v.GET("/trackManifests/{id}",{params:{headers:{"x-playback-session-id":Q},path:{id:f},query:{adaptive:S,formats:IP(U),manifestType:We?"HLS":"MPEG_DASH",uriScheme:"DATA",usage:"PLAYBACK"}}});if(Se.error)throw new co("PENetwork","NPBI0");const ct=EP(Se.data?.data.attributes?.uri),ke=ct?.manifest,ie=ct?.manifestMimeType;if(!ke||!ie)throw new co("EUnexpected","B9999");return{albumPeakAmplitude:Se.data?.data.attributes?.albumAudioNormalizationData?.peakAmplitude??0,albumReplayGain:Se.data?.data.attributes?.albumAudioNormalizationData?.replayGain??0,assetPresentation:Se.data?.data.attributes?.trackPresentation??"PREVIEW",audioMode:"STEREO",audioQuality:kP(Se.data?.data.attributes?.formats),bitDepth:0,expires:Date.now()+Fw,manifest:ke,manifestHash:Se.data?.data.attributes?.hash,manifestMimeType:ie,prefetched:te,sampleRate:0,streamingSessionId:Q,trackId:Se.data?.data.id?Number(Se.data.data.id):0,trackPeakAmplitude:Se.data?.data.attributes?.trackAudioNormalizationData?.peakAmplitude??0,trackReplayGain:Se.data?.data.attributes?.trackAudioNormalizationData?.replayGain??0}}async function CP(w){const{streamingSessionId:v}=w,S=[];performance.mark("streaming_metrics:playback_info_fetch:startTimestamp",{detail:v,startTime:$n.now()});try{let U;if(w.mediaProduct.productType==="video"||w.playerType==="native"?U=await AP(w):U=await MP(w),U===void 0)throw new Error("Playback info was fetched, but undefined.");vp({endReason:"COMPLETE",streamingSessionId:v}).catch(console.error);const P="adInfo"in U;return"trackId"in U?Iw({actualAssetPresentation:U.assetPresentation,actualAudioMode:U.audioMode,actualProductId:String(U.trackId),actualQuality:U.audioQuality,actualStreamType:void 0,hasAds:P,productType:"TRACK",streamingSessionId:v}).catch(console.error):Iw({actualAssetPresentation:U.assetPresentation,actualAudioMode:void 0,actualProductId:String(U.videoId),actualQuality:U.videoQuality,actualStreamType:U.streamType,hasAds:P,productType:"VIDEO",streamingSessionId:v}).catch(console.error),performance.mark("streaming_metrics:playback_info_fetch:endTimestamp",{detail:v,startTime:$n.now()}),U}catch(U){throw performance.mark("streaming_metrics:playback_info_fetch:endTimestamp",{detail:v,startTime:$n.now()}),vp({endReason:"ERROR",errorCode:U.message,errorMessage:U.stack,streamingSessionId:v}).catch(console.error),S.push(FC({streamingSessionId:v,timestamp:$n.timestamp("streaming_metrics:playback_info_fetch:endTimestamp")})),U}finally{S.push(vp({endTimestamp:$n.timestamp("streaming_metrics:playback_info_fetch:endTimestamp"),startTimestamp:$n.timestamp("streaming_metrics:playback_info_fetch:startTimestamp"),streamingSessionId:v})),jw(S).catch(console.error),performance.clearMarks("streaming_metrics:playback_info_fetch:endTimestamp"),performance.clearMarks("streaming_metrics:playback_info_fetch:startTimestamp")}}class Hw{static#e=0;static#n=!1;static#i=null;static#t;static#r;static#a;static#o(){const{activePlayer:v}=In;v?.hasStarted()&&(this.#i=v.currentMediaProduct,this.#a=this.#l.bind(this),tr.addEventListener("playback-state-change",this.#a))}static#s(){const{activePlayer:v}=In;v?.hasStarted()&&(v.playbackState!=="PLAYING"&&this.#i&&(tr.dispatchEvent(new CustomEvent("load",{detail:{currentTime:this.#e,mediaProduct:this.#i}})),this.#u()),tr.removeEventListener("playback-state-change",this.#a))}static#u(){this.#i=null,this.#e=0}static#l(){const{activePlayer:v}=In;v&&(this.#e=v.currentTime)}static disable(){this.#n&&(this.#t&&window.removeEventListener("offline",this.#t,!1),this.#r&&window.removeEventListener("online",this.#r,!1),this.#r=void 0,this.#t=void 0,this.#n=!1)}static enable(){this.#n||(this.#r=()=>this.#s(),this.#t=()=>this.#o(),window.addEventListener("offline",this.#t,!1),window.addEventListener("online",this.#r,!1),this.#n=!0)}}const PP="streaming-privileges-revoked";function RP(w){return new CustomEvent(PP,{detail:w})}let uo;async function Gw(w){const v=Vs("apiUrl"),S=await fetch(v+"/rt/connect",{headers:new Headers({Authorization:"Bearer "+w,"Content-Type":"application/json"}),method:"POST"}),{url:U}=await S.json();return U}function qw(w){return new Promise(v=>{w.addEventListener("open",()=>v(),{once:!0})})}class Rc{#e;#n;#i;#t;constructor(){this.#t=void 0,this.#n=this.#r(),tr.addEventListener("user-action",()=>{this.connected&&this.userAction().then().catch(console.error)})}static async ensure(){await fo()&&(uo?uo.connected||await uo.reconnect():uo=new Rc)}static async refresh(){if(!await fo())return;const v=await kw();uo&&v&&uo.reconnect().catch(console.error)}async#r(){const v=await kw();if(!v)throw new Error("No access token to connect to Pushkin.");const S=await Gw(v);S&&(this.#t=new WebSocket(S),await qw(this.#t),this.#i=U=>this.#s(U.data),this.#e=()=>this.#o(),this.#t.addEventListener("message",this.#i,!1),this.#t.addEventListener("closed",this.#e,!1),window.addEventListener("online",()=>this.#o(),{once:!0}))}async#a(v){if(!this.#t)throw new Error("No socket connected. Did you forget to call connect method in Pushkin service first?");this.#t.readyState!==WebSocket.OPEN&&await this.#n,this.#t.send(JSON.stringify(v))}#o(){this.#n=this.#r()}#s(v){const S=JSON.parse(v);switch(S.type){case"PRIVILEGED_SESSION_NOTIFICATION":{tr.dispatchEvent(RP(String(S.payload.clientDisplayName))),In.activePlayer?.pause();break}case"RECONNECT":this.reconnect().catch(console.error);break;default:console.warn("Unhandled event from Pushkin: ",S);break}}reconnect(){return this.#t?(this.#i&&this.#t.removeEventListener("message",this.#i),this.#e&&this.#t.removeEventListener("closed",this.#e),this.#t.close(),this.#n=this.#r(),this.#n):Promise.resolve()}async userAction(){this.connected||await this.reconnect();try{await this.#a({payload:{startedAt:$n.now()},type:"USER_ACTION"})}catch(v){console.error(v)}}get connected(){return this.#t&&this.#t.readyState===WebSocket.OPEN}}const DP=Object.freeze(Object.defineProperty({__proto__:null,Pushkin:Rc,fetchWebSocketURL:Gw,socketOpen:qw},Symbol.toStringTag,{value:"Module"}));async function LP(){kC(),Hw.disable(),await xC()}function VP(w,v){return w==="FULL"&&v.sourceType!=="PRIVATE_LINK_SHARING"}const NP={actions:[],actualAssetPresentation:"PREVIEW",actualAudioMode:"STEREO",actualProductId:"",actualQuality:"LOW",endAssetPosition:-1,endTimestamp:-1,isPostPaywall:!1,playbackSessionId:"",productType:"TRACK",requestedProductId:"",sourceId:"",sourceType:"",startAssetPosition:-1,startTimestamp:-1},Kw=await ho("playback_session",NP);async function HP(w){const v=await Kw(w);if(!v){console.error("reducedData is undefined");return}const{name:S,streamingSessionId:U}=v,{extras:P,...te}=v.payload;return{extras:P,name:S,payload:te,streamingSessionId:U}}function GP(w,v){return Kw({actions:[v],streamingSessionId:w})}function qP(w){return w==="video"?"VIDEO":"TRACK"}async function KP(w){const v=await fo();for(const S of w)if(S){const U=await S;U&&await _w({..."extras"in U&&{extras:U.extras},group:v?"play_log":"play_log_open",name:U.name,payload:U.payload,version:2})}}async function OP(w,v=0,S=!1){if(!wp.hasEventSender())throw new Error("Playback not allowed without an event sender.");if(await $n.synchronize(),Rc.ensure().catch(console.error),In.activePlayer?.nextItem&&In.activePlayer.nextItem.mediaProduct.productId===w.productId){const En=In.activePlayer;return performance.mark("streaming_metrics:playback_statistics:idealStartTimestamp",{detail:In.preloadedStreamingSessionId,startTime:$n.now()}),await En.reset({keepPreload:!0}),w.referenceId&&In.preloadedStreamingSessionId&&En.overwriteMediaProduct(In.preloadedStreamingSessionId,w),En.skipToPreloadedMediaProduct()}const U=LP(),P=$C();jw([YC({sessionProductId:w.productId,sessionProductType:w.productType==="track"?"TRACK":"VIDEO",sessionType:"PLAYBACK",startReason:"EXPLICIT",streamingSessionId:P,timestamp:$n.now()})]).catch(console.error),performance.mark("streaming_metrics:playback_statistics:idealStartTimestamp",{detail:P,startTime:$n.now()});const{clientId:te,token:Q}=await Ii.credentialsProvider.getCredentials(),f=Vs("audioAdaptiveBitrateStreaming"),We=Vs("streamingWifiAudioQuality");let Se=null;const ct=CC(w.productType,We);try{Se=await CP({accessToken:Q,audioAdaptiveBitrateStreaming:f,audioQuality:We,clientId:te,mediaProduct:w,playerType:ct,prefetch:S,streamingSessionId:P})}catch(En){En instanceof co&&tr.dispatchError(En),document.location.href.includes("localhost")&&console.error(En)}if(!Se)return;const ke=lP(Se);Nw.saveStreamInfo(ke.streamingSessionId,ke),await U,Hw.enable();const ie="trackId"in Se?Se.audioQuality:void 0,tn=Se.manifestMimeType,ui=await PC(w.productType,ie,tn);return AC(ui),ui.load({assetPosition:v,mediaProduct:w,playbackInfo:Se,streamInfo:ke},"explicit")}tr.addEventListener("load",w=>{if(w instanceof CustomEvent){const{currentTime:v,mediaProduct:S}=w.detail;OP(S,v).then().catch(console.error)}});async function zP(){await $n.synchronize();const{activePlayer:w}=In;return w?(tr.dispatchEvent(new CustomEvent("user-action")),w.play()):Promise.reject(new Error("No active player"))}function WP(w){Ii.credentialsProvider=w}function XP(w){wp.eventSender=w}const _P="active-device-changed";function YP(w){return new CustomEvent(_P,{detail:w})}const jP="active-device-mode-changed";function JP(w){return new CustomEvent(jP,{detail:w})}$n.synchronize().then().catch(console.error);function $P(w){In.activePlayer=void 0,w.outputDevices===!0&&Cc({outputDevicesEnabled:!0}),TC(w.players)}function UP(){const w=localStorage.getItem("ssuid");try{w&&indexedDB.deleteDatabase("streaming-sessions-"+w)}catch(v){console.warn(`DB streaming-sessions-${w} could not be deleted`),console.error(v)}}uC().then().catch(console.error);cC().then().catch(console.error);UP();export{$n as C,bP as E,HP as F,OP as G,$P as I,$C as K,Iw as L,jw as N,lC as T,qP as V,bp as _,YP as a,aa as b,Ii as c,TP as d,Mw as e,zP as f,XP as g,WP as h,BP as i,iC as j,VP as k,tr as l,zC as m,FP as o,FC as q,Nw as r,GP as s,KP as u,co as v,JP as w,dC as x,Vs as y,In as z};
